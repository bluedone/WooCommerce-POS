!function(a){"use strict";a("#user-actions-btn, #user-actions").hover(function(){a("#user-actions").show()},function(){a("#user-actions").hide()})}(jQuery),function(a){"use strict";if("undefined"==typeof pos_cart_params)return!1;var b=Backbone.PageableCollection.extend({url:"/wc-api/v1/products",mode:"server",state:{pageSize:5},queryParams:{filter:{limit:5},totalPages:null},parseState:function(a,b,c,d){var e=parseInt(d.xhr.getResponseHeader("X-WC-Total"));return{totalRecords:e}},parseRecords:function(a){return a.products}}),c=new b,d=new Backgrid.Grid({columns:[{name:"featured_src",label:"",cell:Backgrid.Cell.extend({render:function(){return this.$el.html('<img src="'+this.model.get("featured_src")+'">'),this}}),sortable:!1,editable:!1},{name:"title",label:"Product",cell:Backgrid.Cell.extend({render:function(){var a="<strong>"+this.model.get("title")+"</strong>",b="variation"===this.model.get("type")?this.model.get("variation_html"):"",c=this.model.get("managing_stock")===!1?"":"<small>"+this.model.get("stock_quantity")+" in stock</small>";return this.$el.html(a+b+c),this}}),sortable:!1,editable:!1},{name:"price_html",label:"Price",cell:Backgrid.Cell.extend({render:function(){return this.$el.html(this.model.get("price_html")),this}}),sortable:!1,editable:!1},{name:"add",label:"",cell:Backgrid.Cell.extend({events:{"click a.add-to-cart":"addToCart"},render:function(){var b=this.model.get("id"),c="",d="?"+a.param({"add-to-cart":b});"variation"===this.model.get("type")&&(b=this.model.get("parent_id"),c=this.model.get("id"),d="?"+a.param({"add-to-cart":b,variation_id:c}));var e='<a class="add-to-cart btn btn-circle btn-flat-action" href="'+d+'" data-id="'+b+'" data-variation_id="'+c+'"><i class="fa fa-plus"></i></a>';return this.$el.html(e),this},addToCart:function(b){b.preventDefault();a(b.currentTarget).attr("data-id"),a(b.currentTarget).attr("data-variation_id");mediator.publish("addToCart",this.model)}}),sortable:!1,editable:!1}],collection:c}),e=new Backgrid.Extension.Paginator({collection:c,renderIndexedPageHandles:!1,controls:{rewind:null,fastForward:null,back:{label:'<i class="fa fa-chevron-left"></i>',title:"Previous"},forward:{label:'<i class="fa fa-chevron-right"></i>',title:"Next"}}}),f=new Backgrid.Extension.ServerSideFilter({collection:c,name:"filter[q]",placeholder:"Search products"});a("#filter").append(f.render().$el),a("#products").html(d.render().$el),a("#pagination").html(e.render().$el),c.fetch({reset:!0}).complete(function(){})}(jQuery),function(a){"use strict";if("undefined"==typeof pos_cart_params)return!1;var b,c=Backbone.Model.extend({defaults:{qty:1,title:"",price:0,price_html:0,total:0,cart_item_key:""},idAttribute:"cart_item_key",initialize:function(){this.on("all",function(a){})}}),d=Backbone.Collection.extend({model:c,url:pos_cart_params.ajax_url,initialize:function(){this.on("all",function(a){})},parse:function(a){return this.setNonce(a.nonce),a.items},setNonce:function(a){b=a}}),e=Backbone.View.extend({tagName:"tr",template:a("#tmpl-cart-item").html(),initialize:function(){this.on("all",function(a){}),this.render(),this.model.on("add remove change",function(){this.render()},this)},events:{"click a.remove-from-cart":"removeFromCart","click .qty input":"edit","keypress .qty input":"updateOnEnter","blur .qty input":"close"},removeFromCart:function(c){"undefined"!=typeof c&&c.preventDefault(),this.$el.fadeOut(500,function(){a(this).remove()}),g.fetch({data:{action:"pos_remove_item",remove_item:this.model.get("cart_item_key"),_wpnonce:b},processData:!0,success:function(){mediator.publish("updateTotals")}})},edit:function(){this.$el.addClass("editing"),this.$(".qty input").attr("contenteditable",!0).focus()},close:function(){var a=this.$(".qty input").val();if(a!=this.model.get("qty"))return 0==a?void this.removeFromCart():void(a?(g.fetch({data:{action:"pos_update_cart",cart_item_key:this.model.get("cart_item_key"),qty:a},processData:!0,success:function(){mediator.publish("updateTotals")}}),this.$el.removeClass("editing"),this.$(".qty input").removeAttr("contenteditable")):this.$(".qty input").attr("contenteditable",!0).focus())},updateOnEnter:function(a){13==a.keyCode&&this.close(),_.delay(function(){self.$(".qty button").blur(),100})},render:function(){return this.$el.html(_.template(this.template,this.model.toJSON())),this}}),f=Backbone.View.extend({el:a("#cart-items"),tagName:"tbody",initialize:function(){this.on("all",function(a){}),this.collection=g,this.defaultMessage(),this.collection.on("add change",function(){this.render()},this)},addToCart:function(a,b){g.fetch({data:{action:"pos_add_to_cart",add_to_cart:a,variation_id:b},processData:!0,success:function(){mediator.publish("updateTotals")}})},defaultMessage:function(){},render:function(){this.$el.html(""),this.collection.each(function(a){var b=new e({model:a});this.$el.append(b.render().el)},this)}}),g=new d;g.fetch({data:{action:"pos_get_cart_items"},processData:!0});var h=new f;mediator.subscribe("addToCart",function(a){var b=a.get("id"),c="";"variation"===a.get("type")&&(b=a.get("parent_id"),c=a.get("id")),h.addToCart(b,c)});var i=Backbone.Model.extend({defaults:{title:"Total",total:"0.00"},initialize:function(){this.on("all",function(a){})}}),j=Backbone.Collection.extend({model:i,url:pos_cart_params.ajax_url,initialize:function(){this.on("all",function(a){})},parse:function(a){return a.totals}}),k=Backbone.View.extend({tagName:"tr",template:a("#tmpl-cart-total").html(),initialize:function(){this.on("all",function(a){}),this.render(),this.model.on("add",function(){this.render()},this)},render:function(){return this.$el.html(_.template(this.template,this.model.toJSON())),this}}),l=Backbone.View.extend({el:a("#cart-totals"),tagName:"tfoot",initialize:function(){this.on("all",function(a){}),this.collection=m,this.render(),this.collection.on("add change update",function(){this.render()},this)},render:function(){this.$el.html(""),this.collection.each(function(a){if(0!=a.get("total")||""!=a.get("total")){var b=new k({model:a});this.$el.append(b.render().el)}},this)}}),m=new j;m.fetch({data:{action:"pos_get_cart_totals"},processData:!0});new l;mediator.subscribe("updateTotals",function(){m.fetch({data:{action:"pos_get_cart_totals"},processData:!0})})}(jQuery),function(a){"use strict";a("button.btn-checkout").click(function(b){b.preventDefault();var c={action:"pos_process_order"};a.post(pos_cart_params.ajax_url,c,function(b){b&&(b.error||a("#cart").html(b))})})}(jQuery);
//# sourceMappingURL=map/pos.map