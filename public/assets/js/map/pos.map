{"version":3,"file":"pos.min.js","sources":["../build/global.js","../build/products.js","../build/cart.js","../build/checkout.js"],"names":["$","focus","Modernizr","indexeddb","websqldatabase","init","get","pos_cart_params","ajax_url","action","template","done","data","modal","find","html","jQuery","productSync","addClass","deleteComplete","saveComplete","auditProducts","then","productArray","length","removeProducts","closeSync","updated_at_min","formatLastUpdateFilter","getPosMeta","getUpdatedCount","count","limit","queueProducts","getJSON","filter[updated_at_min]","response","console","log","jqXHR","textStatus","errorThrown","responseText","alert","requests","offset","push","getProducts","when","apply","always","filter[limit]","filter[offset]","saveProducts","ajaxResponse","products","_","each","product","fullCollection","create","merge","success","model","title","error","sids","Array","models","lids","i","id","diff","difference","destroy","remove","setPosMeta","Date","now","productPagination","render","removeClass","deleteDB","dbObj","sync","indexedDB","window","webkitIndexedDB","mozIndexedDB","msIndexedDB","dbreq","deleteDatabase","onsuccess","event","result","onerror","message","onblocked","e","key","value","localstorage","localStorage","setItem","getItem","timestamp","last_update","getTime","year","getFullYear","month","getMonth","date","getDate","database","description","migrations","version","migrate","transaction","next","store","db","objectStoreNames","contains","createObjectStore","keyPath","objectStore","createIndex","unique","Product","Backbone","Model","extend","storeName","initialize","this","on","Products","PageableCollection","mode","state","pageSize","totalRecords","sortKey","order","ProductView","View","tagName","events","click a.add-to-cart","item","toJSON","$el","addToCart","preventDefault","mediator","publish","ProductListView","el","elEmpty","contents","clone","fetch","emptyMessage","newProduct","append","ProductFilter","collection","fields","keydown input[type=search]","submit","click a.clear","wait","_debounceMethods","shadowCollection","listenTo","options","add","col","searchBox","val","reset","reindex","from","to","methodNames","isString","undelegateEvents","l","methodName","method","debounce","delegateEvents","makeRegExp","query","RegExp","trim","split","join","makeMatcher","regexp","keys","test","search","showClearButtonMaybe","matcher","bind","pageableCollection","getFirstPage","silent","filter","clearButton","clear","clearSearchBox","$clearButton","searchTerms","show","hide","ProductPagination","click a.prev","click a.next","click a.sync","click a.destroy","currentRecords","toLocaleTimeString","prepend","previous","hasPreviousPage","getPreviousPage","hasNextPage","getNextPage","calcLineTotal","qty","price","tax","total","line_total","wc","prices_include_tax","tax_display_cart","round_at_subtotal","accounting","formatNumber","calcTaxLineTotal","itemized","tax_total","discount","calcLineDiscount","original","calcCartDiscount","reduce","pluck","memo","num","calcTaxTotal","rate_id","displayLineTotal","calc_taxes","displayLinePrice","calcSubtotal","line_subtotal","line_tax","subtotal","calcTotal","line_discount","settings","CartItem","DeepModel","defaults","total_discount","update","set","tax_total_display","tax_rate","tax_amount","quantity","type","CartItems","Collection","url","updateTotals","cartTotals","removeAll","totals","cartdiscount","tax_labels","label","tax_label","labels","taxes","at","CartItemView","click .remove a","click input","keypress input","blur input","discounted","formatMoney","autosizeInput","removeFromCart","fadeOut","cartItems","change","target","select","close","input","parseFloat","updateOnEnter","keyCode","CartItemsView","addOne","addAll","CartTotalsView","newItem","CartTotal","idAttribute","CartTotals","CartTotalView","click #pos_checkout","newTotal","checkout","subscribe","attributes","cartTotal","Order","Receipt","item_template","total_template","parent","css","line_items","total_tax","cart_discount","tax_lines","cartCollection","items","map","pick","post","cart","BootstrapModal","content","order_number","open","fail"],"mappings":"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"}