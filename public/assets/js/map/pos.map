{"version":3,"file":"pos.min.js","sources":["../build/global.js","../build/products.js","../build/cart.js","../build/checkout.js"],"names":["searchFocus","$","focus","tabIndexProducts","each","index","attr","hover","show","hide","jQuery","productSync","addClass","deleteComplete","saveComplete","auditProducts","then","productArray","length","removeProducts","closeSync","updated_at_min","formatLastUpdateFilter","getPosMeta","getUpdatedCount","count","limit","queueProducts","getJSON","filter[updated_at_min]","response","console","log","jqXHR","textStatus","errorThrown","responseText","alert","requests","offset","push","getProducts","when","apply","done","filter[limit]","filter[offset]","data","saveProducts","err","ajaxResponse","products","i","fullCollection","create","merge","success","model","title","error","promise","pos_cart_params","ajax_url","action","sids","Array","models","lids","id","diff","_","difference","get","destroy","remove","setPosMeta","Date","now","productPagination","render","removeClass","deleteDB","dbObj","sync","dbreq","window","indexedDB","deleteDatabase","onsuccess","event","result","onerror","message","onblocked","e","key","value","Modernizr","localstorage","localStorage","setItem","getItem","timestamp","last_update","getTime","year","getFullYear","month","getMonth","date","getDate","database","description","migrations","version","migrate","transaction","next","store","db","objectStoreNames","contains","createObjectStore","keyPath","objectStore","createIndex","unique","Product","Backbone","Model","extend","storeName","initialize","this","on","Products","PageableCollection","mode","state","pageSize","totalRecords","ProductView","View","tagName","template","html","item","toJSON","$el","ProductListView","el","fetch","self","toArray","product","newProduct","append","filter","val","search","ProductPagination","events","click a.prev","click a.next","click a.sync","click a.destroy","currentRecords","toLocaleTimeString","prepend","previous","hasPreviousPage","getPreviousPage","hasNextPage","getNextPage","reset","wpnonce","CartItem","defaults","qty","price","price_html","total","cart_item_key","idAttribute","CartItems","Collection","url","parse","setNonce","nonce","items","CartItemView","click a.remove-from-cart","click .qty input","keypress .qty input","blur .qty input","removeFromCart","preventDefault","fadeOut","cartItems","remove_item","_wpnonce","processData","mediator","publish","edit","close","removeAttr","updateOnEnter","keyCode","delay","blur","CartItemsView","collection","defaultMessage","addToCart","variation_id","add_to_cart","newItem","cartItemsView","subscribe","CartTotal","CartTotals","totals","CartTotalView","CartTotalsView","cartTotals","newTotal","click","post"],"mappings":"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"}