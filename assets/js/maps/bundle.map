{"version":3,"file":"bundle.js","sources":["node_modules/grunt-browserify/node_modules/browserify/node_modules/browser-pack/_prelude.js","assets/js/src/main.js","bower_components/marionette/lib/core/backbone.marionette.js","bower_components/backbone/backbone.js","bower_components/underscore/underscore.js","bower_components/backbone.babysitter/lib/backbone.babysitter.js","bower_components/backbone.wreqr/lib/backbone.wreqr.js"],"names":["require","Marionette","root","factory","define","amd","Backbone","_","Mn","exports","module","this","previousMarionette","previousMn","VERSION","noConflict","Deferred","$","extend","Model","isNodeAttached","el","contains","document","documentElement","getOption","target","optionName","options","undefined","proxyGetOption","normalizeMethods","hash","reduce","normalizedHash","method","name","isFunction","normalizeUIString","uiString","ui","replace","r","slice","normalizeUIKeys","memo","val","key","normalizedKey","normalizeUIValues","each","isString","actAsCollection","object","listProperty","methods","list","values","result","args","concat","toArray","arguments","apply","deprecate","message","test","isObject","prev","next","url","_cache","_warn","console","warn","log","_triggerMethod","getEventName","match","prefix","eventName","toUpperCase","splitter","context","event","noEventArg","length","methodName","rest","trigger","triggerMethod","triggerMethodOn","fnc","MonitorDOMRefresh","view","handleShow","_isShown","triggerDOMRefresh","handleRender","_isRendered","on","show","render","bindFromStrings","entity","evt","methodNames","split","Error","listenTo","bindToFunction","unbindFromStrings","stopListening","unbindToFunction","iterateEvents","bindings","functionCallback","stringCallback","call","bindEntityEvents","unbindEntityEvents","proxyBindEntityEvents","proxyUnbindEntityEvents","errorProps","urlRoot","constructor","error","pick","captureStackTrace","toString","Callbacks","_deferred","_callbacks","prototype","add","callback","contextOverride","promise","push","cb","ctx","then","run","resolve","reset","callbacks","Controller","initialize","Events","destroy","off","Object","Region","$el","getEl","_ensureElement","_ensureViewIsIntact","showOptions","isDifferentView","currentView","preventDestroy","forceShow","isChangingView","_shouldDestroyView","_shouldShowView","_parent","empty","once","attachedRegion","displayedViews","triggerBeforeAttach","triggerAttach","_displayedViews","_triggerAttach","attachHtml","views","union","selector","isDestroyed","cid","html","appendChild","_destroyView","remove","attachView","hasView","buildRegion","regionConfig","DefaultRegionClass","_buildRegionFromSelector","regionClass","_buildRegionFromObject","_buildRegionFromRegionClass","RegionClass","omit","region","parentEl","find","RegionManager","_regions","addRegions","regionDefinitions","defaults","regions","definition","addRegion","_store","get","getRegions","clone","removeRegion","_remove","removeRegions","emptyRegions","invoke","_setLength","size","TemplateCache","templateId","templateCaches","cachedTemplate","load","clear","i","compiledTemplate","template","loadTemplate","compileTemplate","rawTemplate","Renderer","data","templateFunc","View","bindAll","_behaviors","Behaviors","onShowCalled","getTemplate","serializeModel","model","toJSON","mixinTemplateHelpers","templateHelpers","uiBindings","configureTriggers","triggers","events","value","_buildViewTrigger","delegateEvents","_delegateDOMEvents","collection","behavior","eventsArg","isUndefined","combinedEvents","behaviorEvents","behaviorTriggers","undelegateEvents","unbindUIElements","bindUIElements","_bindUIElements","_uiBindings","keys","_unbindUIElements","triggerDef","hasOptions","preventDefault","stopPropagation","e","setElement","ret","behaviors","_getImmediateChildren","_getNestedViews","children","ItemView","serializeData","items","serializeCollection","_renderTemplate","attachElContent","CollectionView","childViewEventPrefix","initOptions","sort","_initialEvents","_initChildViewStorage","initRenderBuffer","elBuffer","createDocumentFragment","_bufferedChildren","startBuffering","isBuffering","endBuffering","_triggerBeforeShowBufferedChildren","attachBuffer","_triggerShowBufferedChildren","partial","_triggerMethodOnChild","childView","_onCollectionAdd","_onCollectionRemove","_sortViews","child","destroyEmptyView","ChildView","getChildView","index","indexOf","addChild","findByModel","removeChildView","checkEmpty","_renderChildren","resortView","orderChanged","item","_index","_emptyViewIndex","destroyChildren","isEmpty","showEmptyView","showCollection","EmptyView","getEmptyView","_showingEmptyView","addEmptyView","emptyViewOptions","buildChildView","proxyChildEvents","renderChildView","childViewOptions","_updateIndices","_addChildView","increment","laterView","ChildViewClass","collectionView","buffer","append","_insertBefore","_insertAfter","findPosition","before","ChildViewContainer","childViews","map","identity","rootEvent","childEvents","splice","_views","CompositeView","isRendered","resetChildViewContainer","compositeView","$container","getChildViewContainer","containerView","$childViewContainer","container","childViewContainer","charAt","substr","LayoutView","_firstRender","_initializeRegions","_reInitializeRegions","regionManager","_buildRegions","getRegion","_initRegionManager","regionOptions","getRegionManager","chain","pluck","compact","Behavior","proxyViewProperties","parseBehaviors","wrap","BehaviorTriggersBuilder","_view","_viewUI","_triggers","triggerBuilder","buildBehaviorTriggers","_behaviorsEvents","viewUI","b","_events","behaviorUI","whitespace","Array","join","eventKey","handler","bind","behaviorsLookup","getBehaviorClass","behaviorClass","BehaviorClass","nestedBehaviors","flatten","_buildTriggerHandlersForBehavior","triggersHash","_setHandlerForBehavior","triggerKey","triggerName","AppRouter","Router","appRoutes","controller","_getController","processAppRoutes","_processOnRoute","appRoute","route","_addAppRoute","routeName","routeArgs","onRoute","routePath","invert","routeNames","reverse","Application","_initCallbacks","submodules","_initChannel","execute","commands","request","reqres","addInitializer","initializer","start","_regionManager","moduleNames","moduleDefinition","ModuleClass","Module","getClass","unshift","create","optionRegions","channelName","channel","Wreqr","radio","vent","moduleName","app","_setupInitializersAndFinalizers","startWithParent","_initializerCallbacks","addFinalizer","_finalizerCallbacks","_isInitialized","mod","stop","addDefinition","customArgs","_runModuleDefinition","moduleDefinitions","parentModule","_getModule","_addModuleDefinition","def","moduleClass","fn","_getDefine","_getStartWithParent","_addStartWithParent","swp","startWithParentIsConfigured","jQuery","Zepto","ender","previousBackbone","array","emulateHTTP","emulateJSON","eventsApi","self","_callback","retain","ev","names","l","j","k","allEvents","all","triggerEvents","obj","listeningTo","_listeningTo","_listenId","id","eventSplitter","action","a1","a2","a3","listenMethods","listenToOnce","implementation","uniqueId","unbind","attributes","attrs","parse","set","changed","validationError","idAttribute","sync","attr","escape","has","unset","changes","silent","changing","current","_validate","_changing","_previousAttributes","isEqual","_pending","hasChanged","changedAttributes","diff","old","previous","previousAttributes","fetch","success","resp","wrapError","save","xhr","validate","wait","serverAttrs","isNew","patch","base","urlError","encodeURIComponent","isValid","modelMethods","Collection","models","comparator","_reset","setOptions","merge","addOptions","singular","isArray","_byId","_removeReference","existing","at","targetModel","sortable","sortAttr","toAdd","toRemove","modelMap","order","_prepareModel","_addReference","orderedModels","previousModels","pop","shift","where","first","findWhere","sortBy","_onModelEvent","attributeMethods","iterator","viewOptions","delegateEventSplitter","tagName","element","delegate","className","type","methodMap","params","dataType","contentType","JSON","stringify","_method","beforeSend","setRequestHeader","processData","noXhrPatch","ActiveXObject","ajax","window","XMLHttpRequest","dispatchEvent","update","delete","read","routes","_bindRoutes","optionalParam","namedParam","splatParam","escapeRegExp","isRegExp","_routeToRegExp","router","history","fragment","_extractParameters","navigate","optional","RegExp","exec","param","decodeURIComponent","History","handlers","location","routeStripper","rootStripper","isExplorer","trailingSlash","pathStripper","started","interval","atRoot","pathname","getHash","href","getFragment","forcePushState","_hasPushState","_wantsHashChange","decodeURI","search","hashChange","_wantsPushState","pushState","docMode","documentMode","oldIE","navigator","userAgent","toLowerCase","frame","iframe","hide","appendTo","contentWindow","checkUrl","_checkUrlInterval","setInterval","loc","replaceState","title","loadUrl","clearInterval","any","assign","_updateHash","open","close","protoProps","staticProps","parent","Surrogate","__super__","previousUnderscore","breaker","ArrayProto","ObjProto","FuncProto","Function","hasOwnProperty","nativeForEach","forEach","nativeMap","nativeReduce","nativeReduceRight","reduceRight","nativeFilter","filter","nativeEvery","every","nativeSome","some","nativeIndexOf","nativeLastIndexOf","lastIndexOf","nativeIsArray","nativeKeys","nativeBind","_wrapped","collect","results","reduceError","foldl","inject","initial","TypeError","foldr","detect","predicate","select","reject","include","isFunc","property","matches","max","Math","Infinity","lastComputed","computed","min","shuffle","rand","shuffled","random","sample","n","guard","lookupIterator","criteria","left","right","a","group","groupBy","indexBy","countBy","sortedIndex","low","high","mid","head","take","last","tail","drop","input","shallow","output","isArguments","without","difference","partition","pass","fail","elem","uniq","unique","isSorted","seen","intersection","other","zip","from","hasIndex","range","step","ceil","idx","ctor","func","bound","boundArgs","position","funcs","f","memoize","hasher","delay","setTimeout","defer","throttle","timeout","later","leading","now","remaining","clearTimeout","trailing","debounce","immediate","timestamp","callNow","ran","wrapper","compose","after","times","pairs","functions","source","prop","copy","tap","interceptor","eq","aStack","bStack","String","global","multiline","ignoreCase","aCtor","bCtor","isElement","nodeType","isFinite","isNaN","parseFloat","isNumber","isBoolean","isNull","constant","accum","floor","Date","getTime","entityMap","&","<",">","\"","'","unescape","entityRegexes","string","mixin","idCounter","templateSettings","evaluate","interpolate","noMatch","escapes","\\","\r","\n","\t"," "," ","escaper","text","settings","matcher","offset","variable","_chain","previousChildViewContainer","Container","_indexByModel","_indexByCustom","_updateLength","customIndex","viewCid","findByModelCid","modelCid","findByCid","findByCustom","findByIndex","previousWreqr","Handlers","_wreqrHandlers","setHandlers","setHandler","config","hasHandler","getHandler","removeHandler","removeAllHandlers","CommandStorage","_commands","getCommands","commandName","command","instances","addCommand","clearCommands","Commands","storageType","_initializeStorage","_executeCommands","storage","StorageType","RequestResponse","EventAggregator","EA","Channel","connectEvents","_connect","connectCommands","connectRequests","Radio","_channels","_proxyMethods","_getChannel","system","messageSystems","proxyMethod","messageSystem"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","require('./plugins');\nvar Marionette = require(\"./../../../bower_components/marionette/lib/core/backbone.marionette.js\");","// MarionetteJS (Backbone.Marionette)\n// ----------------------------------\n// v2.3.0\n//\n// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://marionettejs.com\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore', 'backbone.wreqr', 'backbone.babysitter'], function(Backbone, _) {\n      return (root.Marionette = root.Mn = factory(root, Backbone, _));\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = require(\"./../../../backbone/backbone.js\");\n    var _ = require(\"./../../../underscore/underscore.js\");\n    var Wreqr = require(\"./../../../backbone.wreqr/lib/backbone.wreqr.js\");\n    var BabySitter = require(\"./../../../backbone.babysitter/lib/backbone.babysitter.js\");\n    module.exports = factory(root, Backbone, _);\n  } else {\n    root.Marionette = root.Mn = factory(root, root.Backbone, root._);\n  }\n\n}(this, function(root, Backbone, _) {\n  'use strict';\n\n  var previousMarionette = root.Marionette;\n  var previousMn = root.Mn;\n\n  var Marionette = Backbone.Marionette = {};\n\n  Marionette.VERSION = '2.3.0';\n\n  Marionette.noConflict = function() {\n    root.Marionette = previousMarionette;\n    root.Mn = previousMn;\n    return this;\n  };\n\n  // Get the Deferred creator for later use\n  Marionette.Deferred = Backbone.$.Deferred;\n\n  /* jshint unused: false *//* global console */\n  \n  // Helpers\n  // -------\n  \n  // Marionette.extend\n  // -----------------\n  \n  // Borrow the Backbone `extend` method so we can use it as needed\n  Marionette.extend = Backbone.Model.extend;\n  \n  // Marionette.isNodeAttached\n  // -------------------------\n  \n  // Determine if `el` is a child of the document\n  Marionette.isNodeAttached = function(el) {\n    return Backbone.$.contains(document.documentElement, el);\n  };\n  \n  \n  // Marionette.getOption\n  // --------------------\n  \n  // Retrieve an object, function or other value from a target\n  // object or its `options`, with `options` taking precedence.\n  Marionette.getOption = function(target, optionName) {\n    if (!target || !optionName) { return; }\n    if (target.options && (target.options[optionName] !== undefined)) {\n      return target.options[optionName];\n    } else {\n      return target[optionName];\n    }\n  };\n  \n  // Proxy `Marionette.getOption`\n  Marionette.proxyGetOption = function(optionName) {\n    return Marionette.getOption(this, optionName);\n  };\n  \n  // Marionette.normalizeMethods\n  // ----------------------\n  \n  // Pass in a mapping of events => functions or function names\n  // and return a mapping of events => functions\n  Marionette.normalizeMethods = function(hash) {\n    return _.reduce(hash, function(normalizedHash, method, name) {\n      if (!_.isFunction(method)) {\n        method = this[method];\n      }\n      if (method) {\n        normalizedHash[name] = method;\n      }\n      return normalizedHash;\n    }, {}, this);\n  };\n  \n  // utility method for parsing @ui. syntax strings\n  // into associated selector\n  Marionette.normalizeUIString = function(uiString, ui) {\n    return uiString.replace(/@ui\\.[a-zA-Z_$0-9]*/g, function(r) {\n      return ui[r.slice(4)];\n    });\n  };\n  \n  // allows for the use of the @ui. syntax within\n  // a given key for triggers and events\n  // swaps the @ui with the associated selector.\n  // Returns a new, non-mutated, parsed events hash.\n  Marionette.normalizeUIKeys = function(hash, ui) {\n    return _.reduce(hash, function(memo, val, key) {\n      var normalizedKey = Marionette.normalizeUIString(key, ui);\n      memo[normalizedKey] = val;\n      return memo;\n    }, {});\n  };\n  \n  // allows for the use of the @ui. syntax within\n  // a given value for regions\n  // swaps the @ui with the associated selector\n  Marionette.normalizeUIValues = function(hash, ui) {\n    _.each(hash, function(val, key) {\n      if (_.isString(val)) {\n        hash[key] = Marionette.normalizeUIString(val, ui);\n      }\n    });\n    return hash;\n  };\n  \n  // Mix in methods from Underscore, for iteration, and other\n  // collection related features.\n  // Borrowing this code from Backbone.Collection:\n  // http://backbonejs.org/docs/backbone.html#section-121\n  Marionette.actAsCollection = function(object, listProperty) {\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck'];\n  \n    _.each(methods, function(method) {\n      object[method] = function() {\n        var list = _.values(_.result(this, listProperty));\n        var args = [list].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  };\n  \n  var deprecate = Marionette.deprecate = function(message, test) {\n    if (_.isObject(message)) {\n      message = (\n        message.prev + ' is going to be removed in the future. ' +\n        'Please use ' + message.next + ' instead.' +\n        (message.url ? ' See: ' + message.url : '')\n      );\n    }\n  \n    if ((test === undefined || !test) && !deprecate._cache[message]) {\n      deprecate._warn('Deprecation warning: ' + message);\n      deprecate._cache[message] = true;\n    }\n  };\n  \n  deprecate._warn = typeof console !== 'undefined' && (console.warn || console.log) || function() {};\n  deprecate._cache = {};\n  \n  /* jshint maxstatements: 14, maxcomplexity: 7 */\n  \n  // Trigger Method\n  // --------------\n  \n  \n  Marionette._triggerMethod = (function() {\n    // split the event name on the \":\"\n    var splitter = /(^|:)(\\w)/gi;\n  \n    // take the event section (\"section1:section2:section3\")\n    // and turn it in to uppercase name\n    function getEventName(match, prefix, eventName) {\n      return eventName.toUpperCase();\n    }\n  \n    return function(context, event, args) {\n      var noEventArg = arguments.length < 3;\n      if (noEventArg) {\n        args = event;\n        event = args[0];\n      }\n  \n      // get the method name from the event name\n      var methodName = 'on' + event.replace(splitter, getEventName);\n      var method = context[methodName];\n      var result;\n  \n      // call the onMethodName if it exists\n      if (_.isFunction(method)) {\n        // pass all args, except the event name\n        result = method.apply(context, noEventArg ? _.rest(args) : args);\n      }\n  \n      // trigger the event, if a trigger method exists\n      if (_.isFunction(context.trigger)) {\n        if (noEventArg + args.length > 1) {\n          context.trigger.apply(context, noEventArg ? args : [event].concat(_.rest(args, 0)));\n        } else {\n          context.trigger(event);\n        }\n      }\n  \n      return result;\n    };\n  })();\n  \n  // Trigger an event and/or a corresponding method name. Examples:\n  //\n  // `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n  // call the \"onFoo\" method.\n  //\n  // `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n  // call the \"onFooBar\" method.\n  Marionette.triggerMethod = function(event) {\n    return Marionette._triggerMethod(this, arguments);\n  };\n  \n  // triggerMethodOn invokes triggerMethod on a specific context\n  //\n  // e.g. `Marionette.triggerMethodOn(view, 'show')`\n  // will trigger a \"show\" event or invoke onShow the view.\n  Marionette.triggerMethodOn = function(context) {\n    var fnc = _.isFunction(context.triggerMethod) ?\n                  context.triggerMethod :\n                  Marionette.triggerMethod;\n  \n    return fnc.apply(context, _.rest(arguments));\n  };\n  \n  // DOM Refresh\n  // -----------\n  \n  // Monitor a view's state, and after it has been rendered and shown\n  // in the DOM, trigger a \"dom:refresh\" event every time it is\n  // re-rendered.\n  \n  Marionette.MonitorDOMRefresh = function(view) {\n  \n    // track when the view has been shown in the DOM,\n    // using a Marionette.Region (or by other means of triggering \"show\")\n    function handleShow() {\n      view._isShown = true;\n      triggerDOMRefresh();\n    }\n  \n    // track when the view has been rendered\n    function handleRender() {\n      view._isRendered = true;\n      triggerDOMRefresh();\n    }\n  \n    // Trigger the \"dom:refresh\" event and corresponding \"onDomRefresh\" method\n    function triggerDOMRefresh() {\n      if (view._isShown && view._isRendered && Marionette.isNodeAttached(view.el)) {\n        if (_.isFunction(view.triggerMethod)) {\n          view.triggerMethod('dom:refresh');\n        }\n      }\n    }\n  \n    view.on({\n      show: handleShow,\n      render: handleRender\n    });\n  };\n  \n  /* jshint maxparams: 5 */\n  \n  // Bind Entity Events & Unbind Entity Events\n  // -----------------------------------------\n  //\n  // These methods are used to bind/unbind a backbone \"entity\" (collection/model)\n  // to methods on a target object.\n  //\n  // The first parameter, `target`, must have a `listenTo` method from the\n  // EventBinder object.\n  //\n  // The second parameter is the entity (Backbone.Model or Backbone.Collection)\n  // to bind the events from.\n  //\n  // The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n  // configuration. Multiple handlers can be separated by a space. A\n  // function can be supplied instead of a string handler name.\n  \n  (function(Marionette) {\n    'use strict';\n  \n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function bindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n  \n      _.each(methodNames, function(methodName) {\n  \n        var method = target[methodName];\n        if (!method) {\n          throw new Marionette.Error('Method \"' + methodName +\n            '\" was configured as an event handler, but does not exist.');\n        }\n  \n        target.listenTo(entity, evt, method);\n      });\n    }\n  \n    // Bind the event to a supplied callback function\n    function bindToFunction(target, entity, evt, method) {\n      target.listenTo(entity, evt, method);\n    }\n  \n    // Bind the event to handlers specified as a string of\n    // handler names on the target object\n    function unbindFromStrings(target, entity, evt, methods) {\n      var methodNames = methods.split(/\\s+/);\n  \n      _.each(methodNames, function(methodName) {\n        var method = target[methodName];\n        target.stopListening(entity, evt, method);\n      });\n    }\n  \n    // Bind the event to a supplied callback function\n    function unbindToFunction(target, entity, evt, method) {\n      target.stopListening(entity, evt, method);\n    }\n  \n  \n    // generic looping function\n    function iterateEvents(target, entity, bindings, functionCallback, stringCallback) {\n      if (!entity || !bindings) { return; }\n  \n      // type-check bindings\n      if (!_.isFunction(bindings) && !_.isObject(bindings)) {\n        throw new Marionette.Error({\n          message: 'Bindings must be an object or function.',\n          url: 'marionette.functions.html#marionettebindentityevents'\n        });\n      }\n  \n      // allow the bindings to be a function\n      if (_.isFunction(bindings)) {\n        bindings = bindings.call(target);\n      }\n  \n      // iterate the bindings and bind them\n      _.each(bindings, function(methods, evt) {\n  \n        // allow for a function as the handler,\n        // or a list of event names as a string\n        if (_.isFunction(methods)) {\n          functionCallback(target, entity, evt, methods);\n        } else {\n          stringCallback(target, entity, evt, methods);\n        }\n  \n      });\n    }\n  \n    // Export Public API\n    Marionette.bindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, bindToFunction, bindFromStrings);\n    };\n  \n    Marionette.unbindEntityEvents = function(target, entity, bindings) {\n      iterateEvents(target, entity, bindings, unbindToFunction, unbindFromStrings);\n    };\n  \n    // Proxy `bindEntityEvents`\n    Marionette.proxyBindEntityEvents = function(entity, bindings) {\n      return Marionette.bindEntityEvents(this, entity, bindings);\n    };\n  \n    // Proxy `unbindEntityEvents`\n    Marionette.proxyUnbindEntityEvents = function(entity, bindings) {\n      return Marionette.unbindEntityEvents(this, entity, bindings);\n    };\n  })(Marionette);\n  \n\n  // Error\n  // -----\n  \n  var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];\n  \n  Marionette.Error = Marionette.extend.call(Error, {\n    urlRoot: 'http://marionettejs.com/docs/v' + Marionette.VERSION + '/',\n  \n    constructor: function(message, options) {\n      if (_.isObject(message)) {\n        options = message;\n        message = options.message;\n      } else if (!options) {\n        options = {};\n      }\n  \n      var error = Error.call(this, message);\n      _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));\n  \n      this.captureStackTrace();\n  \n      if (options.url) {\n        this.url = this.urlRoot + options.url;\n      }\n    },\n  \n    captureStackTrace: function() {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, Marionette.Error);\n      }\n    },\n  \n    toString: function() {\n      return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');\n    }\n  });\n  \n  Marionette.Error.extend = Marionette.extend;\n  \n  // Callbacks\n  // ---------\n  \n  // A simple way of managing a collection of callbacks\n  // and executing them at a later point in time, using jQuery's\n  // `Deferred` object.\n  Marionette.Callbacks = function() {\n    this._deferred = Marionette.Deferred();\n    this._callbacks = [];\n  };\n  \n  _.extend(Marionette.Callbacks.prototype, {\n  \n    // Add a callback to be executed. Callbacks added here are\n    // guaranteed to execute, even if they are added after the\n    // `run` method is called.\n    add: function(callback, contextOverride) {\n      var promise = _.result(this._deferred, 'promise');\n  \n      this._callbacks.push({cb: callback, ctx: contextOverride});\n  \n      promise.then(function(args) {\n        if (contextOverride){ args.context = contextOverride; }\n        callback.call(args.context, args.options);\n      });\n    },\n  \n    // Run all registered callbacks with the context specified.\n    // Additional callbacks can be added after this has been run\n    // and they will still be executed.\n    run: function(options, context) {\n      this._deferred.resolve({\n        options: options,\n        context: context\n      });\n    },\n  \n    // Resets the list of callbacks to be run, allowing the same list\n    // to be run multiple times - whenever the `run` method is called.\n    reset: function() {\n      var callbacks = this._callbacks;\n      this._deferred = Marionette.Deferred();\n      this._callbacks = [];\n  \n      _.each(callbacks, function(cb) {\n        this.add(cb.cb, cb.ctx);\n      }, this);\n    }\n  });\n  \n  // Controller\n  // ----------\n  \n  // A multi-purpose object to use as a controller for\n  // modules and routers, and as a mediator for workflow\n  // and coordination of other objects, views, and more.\n  Marionette.Controller = function(options) {\n    this.options = options || {};\n  \n    if (_.isFunction(this.initialize)) {\n      this.initialize(this.options);\n    }\n  };\n  \n  Marionette.Controller.extend = Marionette.extend;\n  \n  // Controller Methods\n  // --------------\n  \n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Controller.prototype, Backbone.Events, {\n    destroy: function() {\n      Marionette._triggerMethod(this, 'before:destroy', arguments);\n      Marionette._triggerMethod(this, 'destroy', arguments);\n  \n      this.stopListening();\n      this.off();\n      return this;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption\n  \n  });\n  \n  // Object\n  // ------\n  \n  // A Base Class that other Classes should descend from.\n  // Object borrows many conventions and utilities from Backbone.\n  Marionette.Object = function(options) {\n    this.options = _.extend({}, _.result(this, 'options'), options);\n  \n    this.initialize.apply(this, arguments);\n  };\n  \n  Marionette.Object.extend = Marionette.extend;\n  \n  // Object Methods\n  // --------------\n  \n  // Ensure it can trigger events with Backbone.Events\n  _.extend(Marionette.Object.prototype, Backbone.Events, {\n  \n    //this is a noop method intended to be overridden by classes that extend from this base\n    initialize: function() {},\n  \n    destroy: function() {\n      this.triggerMethod('before:destroy');\n      this.triggerMethod('destroy');\n      this.stopListening();\n    },\n  \n    // Import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // Proxy `bindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  /* jshint maxcomplexity: 16, maxstatements: 45, maxlen: 120 */\n  \n  // Region\n  // ------\n  \n  // Manage the visual regions of your composite application. See\n  // http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/\n  \n  Marionette.Region = Marionette.Object.extend({\n    constructor: function (options) {\n  \n      // set options temporarily so that we can get `el`.\n      // options will be overriden by Object.constructor\n      this.options = options || {};\n      this.el = this.getOption('el');\n  \n      // Handle when this.el is passed in as a $ wrapped element.\n      this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;\n  \n      if (!this.el) {\n        throw new Marionette.Error({\n          name: 'NoElError',\n          message: 'An \"el\" must be specified for a region.'\n        });\n      }\n  \n      this.$el = this.getEl(this.el);\n      Marionette.Object.call(this, options);\n    },\n  \n    // Displays a backbone view instance inside of the region.\n    // Handles calling the `render` method for you. Reads content\n    // directly from the `el` attribute. Also calls an optional\n    // `onShow` and `onDestroy` method on your view, just after showing\n    // or just before destroying the view, respectively.\n    // The `preventDestroy` option can be used to prevent a view from\n    // the old view being destroyed on show.\n    // The `forceShow` option can be used to force a view to be\n    // re-rendered if it's already shown in the region.\n    show: function(view, options){\n      if (!this._ensureElement()) {\n        return;\n      }\n  \n      this._ensureViewIsIntact(view);\n  \n      var showOptions     = options || {};\n      var isDifferentView = view !== this.currentView;\n      var preventDestroy  = !!showOptions.preventDestroy;\n      var forceShow       = !!showOptions.forceShow;\n  \n      // We are only changing the view if there is a current view to change to begin with\n      var isChangingView = !!this.currentView;\n  \n      // Only destroy the current view if we don't want to `preventDestroy` and if\n      // the view given in the first argument is different than `currentView`\n      var _shouldDestroyView = isDifferentView && !preventDestroy;\n  \n      // Only show the view given in the first argument if it is different than\n      // the current view or if we want to re-show the view. Note that if\n      // `_shouldDestroyView` is true, then `_shouldShowView` is also necessarily true.\n      var _shouldShowView = isDifferentView || forceShow;\n  \n      if (isChangingView) {\n        this.triggerMethod('before:swapOut', this.currentView, this, options);\n      }\n  \n      if (this.currentView) {\n        delete this.currentView._parent;\n      }\n  \n      if (_shouldDestroyView) {\n        this.empty();\n  \n      // A `destroy` event is attached to the clean up manually removed views.\n      // We need to detach this event when a new view is going to be shown as it\n      // is no longer relevant.\n      } else if (isChangingView && _shouldShowView) {\n        this.currentView.off('destroy', this.empty, this);\n      }\n  \n      if (_shouldShowView) {\n  \n        // We need to listen for if a view is destroyed\n        // in a way other than through the region.\n        // If this happens we need to remove the reference\n        // to the currentView since once a view has been destroyed\n        // we can not reuse it.\n        view.once('destroy', this.empty, this);\n        view.render();\n  \n        view._parent = this;\n  \n        if (isChangingView) {\n          this.triggerMethod('before:swap', view, this, options);\n        }\n  \n        this.triggerMethod('before:show', view, this, options);\n        Marionette.triggerMethodOn(view, 'before:show', view, this, options);\n  \n        if (isChangingView) {\n          this.triggerMethod('swapOut', this.currentView, this, options);\n        }\n  \n        // An array of views that we're about to display\n        var attachedRegion = Marionette.isNodeAttached(this.el);\n  \n        // The views that we're about to attach to the document\n        // It's important that we prevent _getNestedViews from being executed unnecessarily\n        // as it's a potentially-slow method\n        var displayedViews = [];\n  \n        var triggerBeforeAttach = showOptions.triggerBeforeAttach || this.triggerBeforeAttach;\n        var triggerAttach = showOptions.triggerAttach || this.triggerAttach;\n  \n        if (attachedRegion && triggerBeforeAttach) {\n          displayedViews = this._displayedViews(view);\n          this._triggerAttach(displayedViews, 'before:');\n        }\n  \n        this.attachHtml(view);\n        this.currentView = view;\n  \n        if (attachedRegion && triggerAttach) {\n          displayedViews = this._displayedViews(view);\n          this._triggerAttach(displayedViews);\n        }\n  \n        if (isChangingView) {\n          this.triggerMethod('swap', view, this, options);\n        }\n  \n        this.triggerMethod('show', view, this, options);\n        Marionette.triggerMethodOn(view, 'show', view, this, options);\n  \n        return this;\n      }\n  \n      return this;\n    },\n  \n    triggerBeforeAttach: true,\n    triggerAttach: true,\n  \n    _triggerAttach: function(views, prefix) {\n      var eventName = (prefix || '') + 'attach';\n      _.each(views, function(view) {\n        Marionette.triggerMethodOn(view, eventName, view, this);\n      }, this);\n    },\n  \n    _displayedViews: function(view) {\n      return _.union([view], _.result(view, '_getNestedViews') || []);\n    },\n  \n    _ensureElement: function(){\n      if (!_.isObject(this.el)) {\n        this.$el = this.getEl(this.el);\n        this.el = this.$el[0];\n      }\n  \n      if (!this.$el || this.$el.length === 0) {\n        if (this.getOption('allowMissingEl')) {\n          return false;\n        } else {\n          throw new Marionette.Error('An \"el\" ' + this.$el.selector + ' must exist in DOM');\n        }\n      }\n      return true;\n    },\n  \n    _ensureViewIsIntact: function(view) {\n      if (!view) {\n        throw new Marionette.Error({\n          name: 'ViewNotValid',\n          message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'\n        });\n      }\n  \n      if (view.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + view.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n  \n    // Override this method to change how the region finds the\n    // DOM element that it manages. Return a jQuery selector object.\n    getEl: function(el) {\n      return Backbone.$(el);\n    },\n  \n    // Override this method to change how the new view is\n    // appended to the `$el` that the region is managing\n    attachHtml: function(view) {\n      // empty the node and append new view\n      // We can not use `.innerHTML` due to the fact that IE\n      // will not let us clear the html of tables and selects.\n      // We also do not want to use the more declarative `empty` method\n      // that jquery exposes since `.empty` loops over all of the children DOM\n      // nodes and unsets the listeners on each node. While this seems like\n      // a desirable thing, it comes at quite a high perf cost. For that reason\n      // we are simply clearing the html contents of the node.\n      this.$el.html('');\n      this.el.appendChild(view.el);\n    },\n  \n    // Destroy the current view, if there is one. If there is no\n    // current view, it does nothing and returns immediately.\n    empty: function() {\n      var view = this.currentView;\n  \n      // If there is no view in the region\n      // we should not remove anything\n      if (!view) { return; }\n  \n      view.off('destroy', this.empty, this);\n      this.triggerMethod('before:empty', view);\n      this._destroyView();\n      this.triggerMethod('empty', view);\n  \n      // Remove region pointer to the currentView\n      delete this.currentView;\n      return this;\n    },\n  \n    // call 'destroy' or 'remove', depending on which is found\n    // on the view (if showing a raw Backbone view or a Marionette View)\n    _destroyView: function() {\n      var view = this.currentView;\n  \n      if (view.destroy && !view.isDestroyed) {\n        view.destroy();\n      } else if (view.remove) {\n        view.remove();\n  \n        // appending isDestroyed to raw Backbone View allows regions\n        // to throw a ViewDestroyedError for this view\n        view.isDestroyed = true;\n      }\n    },\n  \n    // Attach an existing view to the region. This\n    // will not call `render` or `onShow` for the new view,\n    // and will not replace the current HTML for the `el`\n    // of the region.\n    attachView: function(view) {\n      this.currentView = view;\n      return this;\n    },\n  \n    // Checks whether a view is currently present within\n    // the region. Returns `true` if there is and `false` if\n    // no view is present.\n    hasView: function() {\n      return !!this.currentView;\n    },\n  \n    // Reset the region by destroying any existing view and\n    // clearing out the cached `$el`. The next time a view\n    // is shown via this region, the region will re-query the\n    // DOM for the region's `el`.\n    reset: function() {\n      this.empty();\n  \n      if (this.$el) {\n        this.el = this.$el.selector;\n      }\n  \n      delete this.$el;\n      return this;\n    }\n  \n  },\n  \n  // Static Methods\n  {\n  \n    // Build an instance of a region by passing in a configuration object\n    // and a default region class to use if none is specified in the config.\n    //\n    // The config object should either be a string as a jQuery DOM selector,\n    // a Region class directly, or an object literal that specifies a selector,\n    // a custom regionClass, and any options to be supplied to the region:\n    //\n    // ```js\n    // {\n    //   selector: \"#foo\",\n    //   regionClass: MyCustomRegion,\n    //   allowMissingEl: false\n    // }\n    // ```\n    //\n    buildRegion: function(regionConfig, DefaultRegionClass) {\n      if (_.isString(regionConfig)) {\n        return this._buildRegionFromSelector(regionConfig, DefaultRegionClass);\n      }\n  \n      if (regionConfig.selector || regionConfig.el || regionConfig.regionClass) {\n        return this._buildRegionFromObject(regionConfig, DefaultRegionClass);\n      }\n  \n      if (_.isFunction(regionConfig)) {\n        return this._buildRegionFromRegionClass(regionConfig);\n      }\n  \n      throw new Marionette.Error({\n        message: 'Improper region configuration type.',\n        url: 'marionette.region.html#region-configuration-types'\n      });\n    },\n  \n    // Build the region from a string selector like '#foo-region'\n    _buildRegionFromSelector: function(selector, DefaultRegionClass) {\n      return new DefaultRegionClass({ el: selector });\n    },\n  \n    // Build the region from a configuration object\n    // ```js\n    // { selector: '#foo', regionClass: FooRegion, allowMissingEl: false }\n    // ```\n    _buildRegionFromObject: function(regionConfig, DefaultRegionClass) {\n      var RegionClass = regionConfig.regionClass || DefaultRegionClass;\n      var options = _.omit(regionConfig, 'selector', 'regionClass');\n  \n      if (regionConfig.selector && !options.el) {\n        options.el = regionConfig.selector;\n      }\n  \n      var region = new RegionClass(options);\n  \n      // override the `getEl` function if we have a parentEl\n      // this must be overridden to ensure the selector is found\n      // on the first use of the region. if we try to assign the\n      // region's `el` to `parentEl.find(selector)` in the object\n      // literal to build the region, the element will not be\n      // guaranteed to be in the DOM already, and will cause problems\n      if (regionConfig.parentEl) {\n        region.getEl = function(el) {\n          if (_.isObject(el)) {\n            return Backbone.$(el);\n          }\n          var parentEl = regionConfig.parentEl;\n          if (_.isFunction(parentEl)) {\n            parentEl = parentEl();\n          }\n          return parentEl.find(el);\n        };\n      }\n  \n      return region;\n    },\n  \n    // Build the region directly from a given `RegionClass`\n    _buildRegionFromRegionClass: function(RegionClass) {\n      return new RegionClass();\n    }\n  });\n  \n  // Region Manager\n  // --------------\n  \n  // Manage one or more related `Marionette.Region` objects.\n  Marionette.RegionManager = Marionette.Controller.extend({\n    constructor: function(options) {\n      this._regions = {};\n  \n      Marionette.Controller.call(this, options);\n  \n      this.addRegions(this.getOption('regions'));\n    },\n  \n    // Add multiple regions using an object literal or a\n    // function that returns an object literal, where\n    // each key becomes the region name, and each value is\n    // the region definition.\n    addRegions: function(regionDefinitions, defaults) {\n      if (_.isFunction(regionDefinitions)) {\n        regionDefinitions = regionDefinitions.apply(this, arguments);\n      }\n  \n      var regions = {};\n  \n      _.each(regionDefinitions, function(definition, name) {\n        if (_.isString(definition)) {\n          definition = {selector: definition};\n        }\n  \n        if (definition.selector) {\n          definition = _.defaults({}, definition, defaults);\n        }\n  \n        var region = this.addRegion(name, definition);\n        regions[name] = region;\n      }, this);\n  \n      return regions;\n    },\n  \n    // Add an individual region to the region manager,\n    // and return the region instance\n    addRegion: function(name, definition) {\n      var region;\n  \n      if (definition instanceof Marionette.Region) {\n        region = definition;\n      } else {\n        region = Marionette.Region.buildRegion(definition, Marionette.Region);\n      }\n  \n      this.triggerMethod('before:add:region', name, region);\n  \n      region._parent = this;\n      this._store(name, region);\n  \n      this.triggerMethod('add:region', name, region);\n      return region;\n    },\n  \n    // Get a region by name\n    get: function(name) {\n      return this._regions[name];\n    },\n  \n    // Gets all the regions contained within\n    // the `regionManager` instance.\n    getRegions: function(){\n      return _.clone(this._regions);\n    },\n  \n    // Remove a region by name\n    removeRegion: function(name) {\n      var region = this._regions[name];\n      this._remove(name, region);\n  \n      return region;\n    },\n  \n    // Empty all regions in the region manager, and\n    // remove them\n    removeRegions: function() {\n      var regions = this.getRegions();\n      _.each(this._regions, function(region, name) {\n        this._remove(name, region);\n      }, this);\n  \n      return regions;\n    },\n  \n    // Empty all regions in the region manager, but\n    // leave them attached\n    emptyRegions: function() {\n      var regions = this.getRegions();\n      _.invoke(regions, 'empty');\n      return regions;\n    },\n  \n    // Destroy all regions and shut down the region\n    // manager entirely\n    destroy: function() {\n      this.removeRegions();\n      return Marionette.Controller.prototype.destroy.apply(this, arguments);\n    },\n  \n    // internal method to store regions\n    _store: function(name, region) {\n      this._regions[name] = region;\n      this._setLength();\n    },\n  \n    // internal method to remove a region\n    _remove: function(name, region) {\n      this.triggerMethod('before:remove:region', name, region);\n      region.empty();\n      region.stopListening();\n  \n      delete region._parent;\n      delete this._regions[name];\n      this._setLength();\n      this.triggerMethod('remove:region', name, region);\n    },\n  \n    // set the number of regions current held\n    _setLength: function() {\n      this.length = _.size(this._regions);\n    }\n  });\n  \n  Marionette.actAsCollection(Marionette.RegionManager.prototype, '_regions');\n  \n\n  // Template Cache\n  // --------------\n  \n  // Manage templates stored in `<script>` blocks,\n  // caching them for faster access.\n  Marionette.TemplateCache = function(templateId) {\n    this.templateId = templateId;\n  };\n  \n  // TemplateCache object-level methods. Manage the template\n  // caches from these method calls instead of creating\n  // your own TemplateCache instances\n  _.extend(Marionette.TemplateCache, {\n    templateCaches: {},\n  \n    // Get the specified template by id. Either\n    // retrieves the cached version, or loads it\n    // from the DOM.\n    get: function(templateId) {\n      var cachedTemplate = this.templateCaches[templateId];\n  \n      if (!cachedTemplate) {\n        cachedTemplate = new Marionette.TemplateCache(templateId);\n        this.templateCaches[templateId] = cachedTemplate;\n      }\n  \n      return cachedTemplate.load();\n    },\n  \n    // Clear templates from the cache. If no arguments\n    // are specified, clears all templates:\n    // `clear()`\n    //\n    // If arguments are specified, clears each of the\n    // specified templates from the cache:\n    // `clear(\"#t1\", \"#t2\", \"...\")`\n    clear: function() {\n      var i;\n      var args = _.toArray(arguments);\n      var length = args.length;\n  \n      if (length > 0) {\n        for (i = 0; i < length; i++) {\n          delete this.templateCaches[args[i]];\n        }\n      } else {\n        this.templateCaches = {};\n      }\n    }\n  });\n  \n  // TemplateCache instance methods, allowing each\n  // template cache object to manage its own state\n  // and know whether or not it has been loaded\n  _.extend(Marionette.TemplateCache.prototype, {\n  \n    // Internal method to load the template\n    load: function() {\n      // Guard clause to prevent loading this template more than once\n      if (this.compiledTemplate) {\n        return this.compiledTemplate;\n      }\n  \n      // Load the template and compile it\n      var template = this.loadTemplate(this.templateId);\n      this.compiledTemplate = this.compileTemplate(template);\n  \n      return this.compiledTemplate;\n    },\n  \n    // Load a template from the DOM, by default. Override\n    // this method to provide your own template retrieval\n    // For asynchronous loading with AMD/RequireJS, consider\n    // using a template-loader plugin as described here:\n    // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs\n    loadTemplate: function(templateId) {\n      var template = Backbone.$(templateId).html();\n  \n      if (!template || template.length === 0) {\n        throw new Marionette.Error({\n          name: 'NoTemplateError',\n          message: 'Could not find template: \"' + templateId + '\"'\n        });\n      }\n  \n      return template;\n    },\n  \n    // Pre-compile the template before caching it. Override\n    // this method if you do not need to pre-compile a template\n    // (JST / RequireJS for example) or if you want to change\n    // the template engine used (Handebars, etc).\n    compileTemplate: function(rawTemplate) {\n      return _.template(rawTemplate);\n    }\n  });\n  \n  // Renderer\n  // --------\n  \n  // Render a template with data by passing in the template\n  // selector and the data to render.\n  Marionette.Renderer = {\n  \n    // Render a template with data. The `template` parameter is\n    // passed to the `TemplateCache` object to retrieve the\n    // template function. Override this method to provide your own\n    // custom rendering and template handling for all of Marionette.\n    render: function(template, data) {\n      if (!template) {\n        throw new Marionette.Error({\n          name: 'TemplateNotFoundError',\n          message: 'Cannot render the template since its false, null or undefined.'\n        });\n      }\n  \n      var templateFunc;\n      if (typeof template === 'function') {\n        templateFunc = template;\n      } else {\n        templateFunc = Marionette.TemplateCache.get(template);\n      }\n  \n      return templateFunc(data);\n    }\n  };\n  \n\n  /* jshint maxlen: 114, nonew: false */\n  // View\n  // ----\n  \n  // The core view class that other Marionette views extend from.\n  Marionette.View = Backbone.View.extend({\n  \n    constructor: function(options) {\n      _.bindAll(this, 'render');\n  \n      options = _.isFunction(options) ? options.call(this) : options;\n  \n      // this exposes view options to the view initializer\n      // this is a backfill since backbone removed the assignment\n      // of this.options\n      // at some point however this may be removed\n      this.options = _.extend({}, _.result(this, 'options'), options);\n  \n      this._behaviors = Marionette.Behaviors(this);\n  \n      Backbone.View.apply(this, arguments);\n  \n      Marionette.MonitorDOMRefresh(this);\n      this.on('show', this.onShowCalled);\n    },\n  \n    // Get the template for this view\n    // instance. You can set a `template` attribute in the view\n    // definition or pass a `template: \"whatever\"` parameter in\n    // to the constructor options.\n    getTemplate: function() {\n      return this.getOption('template');\n    },\n  \n    // Serialize a model by returning its attributes. Clones\n    // the attributes to allow modification.\n    serializeModel: function(model){\n      return model.toJSON.apply(model, _.rest(arguments));\n    },\n  \n    // Mix in template helper methods. Looks for a\n    // `templateHelpers` attribute, which can either be an\n    // object literal, or a function that returns an object\n    // literal. All methods and attributes from this object\n    // are copies to the object passed in.\n    mixinTemplateHelpers: function(target) {\n      target = target || {};\n      var templateHelpers = this.getOption('templateHelpers');\n      if (_.isFunction(templateHelpers)) {\n        templateHelpers = templateHelpers.call(this);\n      }\n      return _.extend(target, templateHelpers);\n    },\n  \n    // normalize the keys of passed hash with the views `ui` selectors.\n    // `{\"@ui.foo\": \"bar\"}`\n    normalizeUIKeys: function(hash) {\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIKeys(hash, uiBindings || _.result(this, 'ui'));\n    },\n  \n    // normalize the values of passed hash with the views `ui` selectors.\n    // `{foo: \"@ui.bar\"}`\n    normalizeUIValues: function(hash) {\n      var ui = _.result(this, 'ui');\n      var uiBindings = _.result(this, '_uiBindings');\n      return Marionette.normalizeUIValues(hash, uiBindings || ui);\n    },\n  \n    // Configure `triggers` to forward DOM events to view\n    // events. `triggers: {\"click .foo\": \"do:foo\"}`\n    configureTriggers: function() {\n      if (!this.triggers) { return; }\n  \n      // Allow `triggers` to be configured as a function\n      var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));\n  \n      // Configure the triggers, prevent default\n      // action and stop propagation of DOM events\n      return _.reduce(triggers, function(events, value, key) {\n        events[key] = this._buildViewTrigger(value);\n        return events;\n      }, {}, this);\n    },\n  \n    // Overriding Backbone.View's delegateEvents to handle\n    // the `triggers`, `modelEvents`, and `collectionEvents` configuration\n    delegateEvents: function(events) {\n      this._delegateDOMEvents(events);\n      this.bindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.bindEntityEvents(this.collection, this.getOption('collectionEvents'));\n  \n      _.each(this._behaviors, function(behavior) {\n        behavior.bindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.bindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n  \n      return this;\n    },\n  \n    // internal method to delegate DOM events and triggers\n    _delegateDOMEvents: function(eventsArg) {\n      var events = eventsArg || this.events;\n      if (_.isFunction(events)) { events = events.call(this); }\n  \n      // normalize ui keys\n      events = this.normalizeUIKeys(events);\n      if(_.isUndefined(eventsArg)) {this.events = events;}\n  \n      var combinedEvents = {};\n  \n      // look up if this view has behavior events\n      var behaviorEvents = _.result(this, 'behaviorEvents') || {};\n      var triggers = this.configureTriggers();\n      var behaviorTriggers = _.result(this, 'behaviorTriggers') || {};\n  \n      // behavior events will be overriden by view events and or triggers\n      _.extend(combinedEvents, behaviorEvents, events, triggers, behaviorTriggers);\n  \n      Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\n    },\n  \n    // Overriding Backbone.View's undelegateEvents to handle unbinding\n    // the `triggers`, `modelEvents`, and `collectionEvents` config\n    undelegateEvents: function() {\n      Backbone.View.prototype.undelegateEvents.apply(this, arguments);\n  \n      this.unbindEntityEvents(this.model, this.getOption('modelEvents'));\n      this.unbindEntityEvents(this.collection, this.getOption('collectionEvents'));\n  \n      _.each(this._behaviors, function(behavior) {\n        behavior.unbindEntityEvents(this.model, behavior.getOption('modelEvents'));\n        behavior.unbindEntityEvents(this.collection, behavior.getOption('collectionEvents'));\n      }, this);\n  \n      return this;\n    },\n  \n    // Internal method, handles the `show` event.\n    onShowCalled: function() {},\n  \n    // Internal helper method to verify whether the view hasn't been destroyed\n    _ensureViewIsIntact: function() {\n      if (this.isDestroyed) {\n        throw new Marionette.Error({\n          name: 'ViewDestroyedError',\n          message: 'View (cid: \"' + this.cid + '\") has already been destroyed and cannot be used.'\n        });\n      }\n    },\n  \n    // Default `destroy` implementation, for removing a view from the\n    // DOM and unbinding it. Regions will call this method\n    // for you. You can specify an `onDestroy` method in your view to\n    // add custom code that is called after the view is destroyed.\n    destroy: function() {\n      if (this.isDestroyed) { return; }\n  \n      var args = _.toArray(arguments);\n  \n      this.triggerMethod.apply(this, ['before:destroy'].concat(args));\n  \n      // mark as destroyed before doing the actual destroy, to\n      // prevent infinite loops within \"destroy\" event handlers\n      // that are trying to destroy other views\n      this.isDestroyed = true;\n      this.triggerMethod.apply(this, ['destroy'].concat(args));\n  \n      // unbind UI elements\n      this.unbindUIElements();\n  \n      // remove the view from the DOM\n      this.remove();\n  \n      // Call destroy on each behavior after\n      // destroying the view.\n      // This unbinds event listeners\n      // that behaviors have registered for.\n      _.invoke(this._behaviors, 'destroy', args);\n  \n      return this;\n    },\n  \n    bindUIElements: function() {\n      this._bindUIElements();\n      _.invoke(this._behaviors, this._bindUIElements);\n    },\n  \n    // This method binds the elements specified in the \"ui\" hash inside the view's code with\n    // the associated jQuery selectors.\n    _bindUIElements: function() {\n      if (!this.ui) { return; }\n  \n      // store the ui hash in _uiBindings so they can be reset later\n      // and so re-rendering the view will be able to find the bindings\n      if (!this._uiBindings) {\n        this._uiBindings = this.ui;\n      }\n  \n      // get the bindings result, as a function or otherwise\n      var bindings = _.result(this, '_uiBindings');\n  \n      // empty the ui so we don't have anything to start with\n      this.ui = {};\n  \n      // bind each of the selectors\n      _.each(_.keys(bindings), function(key) {\n        var selector = bindings[key];\n        this.ui[key] = this.$(selector);\n      }, this);\n    },\n  \n    // This method unbinds the elements specified in the \"ui\" hash\n    unbindUIElements: function() {\n      this._unbindUIElements();\n      _.invoke(this._behaviors, this._unbindUIElements);\n    },\n  \n    _unbindUIElements: function() {\n      if (!this.ui || !this._uiBindings) { return; }\n  \n      // delete all of the existing ui bindings\n      _.each(this.ui, function($el, name) {\n        delete this.ui[name];\n      }, this);\n  \n      // reset the ui element to the original bindings configuration\n      this.ui = this._uiBindings;\n      delete this._uiBindings;\n    },\n  \n    // Internal method to create an event handler for a given `triggerDef` like\n    // 'click:foo'\n    _buildViewTrigger: function(triggerDef) {\n      var hasOptions = _.isObject(triggerDef);\n  \n      var options = _.defaults({}, (hasOptions ? triggerDef : {}), {\n        preventDefault: true,\n        stopPropagation: true\n      });\n  \n      var eventName = hasOptions ? options.event : triggerDef;\n  \n      return function(e) {\n        if (e) {\n          if (e.preventDefault && options.preventDefault) {\n            e.preventDefault();\n          }\n  \n          if (e.stopPropagation && options.stopPropagation) {\n            e.stopPropagation();\n          }\n        }\n  \n        var args = {\n          view: this,\n          model: this.model,\n          collection: this.collection\n        };\n  \n        this.triggerMethod(eventName, args);\n      };\n    },\n  \n    setElement: function() {\n      var ret = Backbone.View.prototype.setElement.apply(this, arguments);\n  \n      // proxy behavior $el to the view's $el.\n      // This is needed because a view's $el proxy\n      // is not set until after setElement is called.\n      _.invoke(this._behaviors, 'proxyViewProperties', this);\n  \n      return ret;\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: function() {\n      var triggerMethod = Marionette._triggerMethod;\n      var ret = triggerMethod(this, arguments);\n      var behaviors = this._behaviors;\n      // Use good ol' for as this is a very hot function\n      for (var i = 0, length = behaviors && behaviors.length; i < length; i++) {\n        triggerMethod(behaviors[i], arguments);\n      }\n  \n      return ret;\n    },\n  \n    // This method returns any views that are immediate\n    // children of this view\n    _getImmediateChildren: function() {\n      return [];\n    },\n  \n    // Returns an array of every nested view within this view\n    _getNestedViews: function() {\n      var children = this._getImmediateChildren();\n  \n      if (!children.length) { return children; }\n  \n      return _.reduce(children, function(memo, view) {\n        if (!view._getNestedViews) { return memo; }\n        return memo.concat(view._getNestedViews());\n      }, children);\n    },\n  \n    // Imports the \"normalizeMethods\" to transform hashes of\n    // events=>function references/names to a hash of events=>function references\n    normalizeMethods: Marionette.normalizeMethods,\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    // Proxy `bindEntityEvents` to enable binding view's events from another entity.\n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    // Proxy `unbindEntityEvents` to enable unbinding view's events from another entity.\n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  // Item View\n  // ---------\n  \n  // A single item view implementation that contains code for rendering\n  // with underscore.js templates, serializing the view's model or collection,\n  // and calling several methods on extended views, such as `onRender`.\n  Marionette.ItemView = Marionette.View.extend({\n  \n    // Setting up the inheritance chain which allows changes to\n    // Marionette.View.prototype.constructor which allows overriding\n    constructor: function() {\n      Marionette.View.apply(this, arguments);\n    },\n  \n    // Serialize the model or collection for the view. If a model is\n    // found, the view's `serializeModel` is called. If a collection is found,\n    // each model in the collection is serialized by calling\n    // the view's `serializeCollection` and put into an `items` array in\n    // the resulting data. If both are found, defaults to the model.\n    // You can override the `serializeData` method in your own view definition,\n    // to provide custom serialization for your view's data.\n    serializeData: function(){\n      if (!this.model && !this.collection) {\n        return {};\n      }\n  \n      var args = [this.model || this.collection];\n      if (arguments.length) {\n        args.push.apply(args, arguments);\n      }\n  \n      if (this.model) {\n        return this.serializeModel.apply(this, args);\n      } else {\n        return {\n          items: this.serializeCollection.apply(this, args)\n        };\n      }\n    },\n  \n    // Serialize a collection by serializing each of its models.\n    serializeCollection: function(collection){\n      return collection.toJSON.apply(collection, _.rest(arguments));\n    },\n  \n    // Render the view, defaulting to underscore.js templates.\n    // You can override this in your view definition to provide\n    // a very specific rendering for your view. In general, though,\n    // you should override the `Marionette.Renderer` object to\n    // change how Marionette renders views.\n    render: function() {\n      this._ensureViewIsIntact();\n  \n      this.triggerMethod('before:render', this);\n  \n      this._renderTemplate();\n      this.bindUIElements();\n  \n      this.triggerMethod('render', this);\n  \n      return this;\n    },\n  \n    // Internal method to render the template with the serialized data\n    // and template helpers via the `Marionette.Renderer` object.\n    // Throws an `UndefinedTemplateError` error if the template is\n    // any falsely value but literal `false`.\n    _renderTemplate: function() {\n      var template = this.getTemplate();\n  \n      // Allow template-less item views\n      if (template === false) {\n        return;\n      }\n  \n      if (!template) {\n        throw new Marionette.Error({\n          name: 'UndefinedTemplateError',\n          message: 'Cannot render the template since it is null or undefined.'\n        });\n      }\n  \n      // Add in entity data and template helpers\n      var data = this.serializeData();\n      data = this.mixinTemplateHelpers(data);\n  \n      // Render and add to el\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n  \n      return this;\n    },\n  \n    // Attaches the content of a given view.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n  \n      return this;\n    }\n  });\n  \n  /* jshint maxstatements: 14 */\n  \n  // Collection View\n  // ---------------\n  \n  // A view that iterates over a Backbone.Collection\n  // and renders an individual child view for each model.\n  Marionette.CollectionView = Marionette.View.extend({\n  \n    // used as the prefix for child view events\n    // that are forwarded through the collectionview\n    childViewEventPrefix: 'childview',\n  \n    // constructor\n    // option to pass `{sort: false}` to prevent the `CollectionView` from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    constructor: function(options){\n      var initOptions = options || {};\n      if (_.isUndefined(this.sort)){\n        this.sort = _.isUndefined(initOptions.sort) ? true : initOptions.sort;\n      }\n  \n      this.once('render', this._initialEvents);\n      this._initChildViewStorage();\n  \n      Marionette.View.apply(this, arguments);\n  \n      this.initRenderBuffer();\n    },\n  \n    // Instead of inserting elements one by one into the page,\n    // it's much more performant to insert elements into a document\n    // fragment and then insert that document fragment into the page\n    initRenderBuffer: function() {\n      this.elBuffer = document.createDocumentFragment();\n      this._bufferedChildren = [];\n    },\n  \n    startBuffering: function() {\n      this.initRenderBuffer();\n      this.isBuffering = true;\n    },\n  \n    endBuffering: function() {\n      this.isBuffering = false;\n      this._triggerBeforeShowBufferedChildren();\n      this.attachBuffer(this, this.elBuffer);\n      this._triggerShowBufferedChildren();\n      this.initRenderBuffer();\n    },\n  \n    _triggerBeforeShowBufferedChildren: function() {\n      if (this._isShown) {\n        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'before:show'));\n      }\n    },\n  \n    _triggerShowBufferedChildren: function() {\n      if (this._isShown) {\n        _.each(this._bufferedChildren, _.partial(this._triggerMethodOnChild, 'show'));\n  \n        this._bufferedChildren = [];\n      }\n    },\n  \n    // Internal method for _.each loops to call `Marionette.triggerMethodOn` on\n    // a child view\n    _triggerMethodOnChild: function(event, childView) {\n      Marionette.triggerMethodOn(childView, event);\n    },\n  \n    // Configured the initial events that the collection view\n    // binds to.\n    _initialEvents: function() {\n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this.render);\n  \n        if (this.sort) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n  \n    // Handle a child added to the collection\n    _onCollectionAdd: function(child) {\n      this.destroyEmptyView();\n      var ChildView = this.getChildView(child);\n      var index = this.collection.indexOf(child);\n      this.addChild(child, ChildView, index);\n    },\n  \n    // get the child view by model it holds, and remove it\n    _onCollectionRemove: function(model) {\n      var view = this.children.findByModel(model);\n      this.removeChildView(view);\n      this.checkEmpty();\n    },\n  \n    // Override from `Marionette.View` to trigger show on child views\n    onShowCalled: function() {\n      this.children.each(_.partial(this._triggerMethodOnChild, 'show'));\n    },\n  \n    // Render children views. Override this method to\n    // provide your own implementation of a render function for\n    // the collection view.\n    render: function() {\n      this._ensureViewIsIntact();\n      this.triggerMethod('before:render', this);\n      this._renderChildren();\n      this.triggerMethod('render', this);\n      return this;\n    },\n  \n    // Render view after sorting. Override this method to\n    // change how the view renders after a `sort` on the collection.\n    // An example of this would be to only `renderChildren` in a `CompositeView`\n    // rather than the full view.\n    resortView: function() {\n      this.render();\n    },\n  \n    // Internal method. This checks for any changes in the order of the collection.\n    // If the index of any view doesn't match, it will render.\n    _sortViews: function() {\n      // check for any changes in sort order of views\n      var orderChanged = this.collection.find(function(item, index){\n        var view = this.children.findByModel(item);\n        return !view || view._index !== index;\n      }, this);\n  \n      if (orderChanged) {\n        this.resortView();\n      }\n    },\n  \n    // Internal reference to what index a `emptyView` is.\n    _emptyViewIndex: -1,\n  \n    // Internal method. Separated so that CompositeView can have\n    // more control over events being triggered, around the rendering\n    // process\n    _renderChildren: function() {\n      this.destroyEmptyView();\n      this.destroyChildren();\n  \n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      } else {\n        this.triggerMethod('before:render:collection', this);\n        this.startBuffering();\n        this.showCollection();\n        this.endBuffering();\n        this.triggerMethod('render:collection', this);\n      }\n    },\n  \n    // Internal method to loop through collection and show each child view.\n    showCollection: function() {\n      var ChildView;\n      this.collection.each(function(child, index) {\n        ChildView = this.getChildView(child);\n        this.addChild(child, ChildView, index);\n      }, this);\n    },\n  \n    // Internal method to show an empty view in place of\n    // a collection of child views, when the collection is empty\n    showEmptyView: function() {\n      var EmptyView = this.getEmptyView();\n  \n      if (EmptyView && !this._showingEmptyView) {\n        this.triggerMethod('before:render:empty');\n  \n        this._showingEmptyView = true;\n        var model = new Backbone.Model();\n        this.addEmptyView(model, EmptyView);\n  \n        this.triggerMethod('render:empty');\n      }\n    },\n  \n    // Internal method to destroy an existing emptyView instance\n    // if one exists. Called when a collection view has been\n    // rendered empty, and then a child is added to the collection.\n    destroyEmptyView: function() {\n      if (this._showingEmptyView) {\n        this.triggerMethod('before:remove:empty');\n  \n        this.destroyChildren();\n        delete this._showingEmptyView;\n  \n        this.triggerMethod('remove:empty');\n      }\n    },\n  \n    // Retrieve the empty view class\n    getEmptyView: function() {\n      return this.getOption('emptyView');\n    },\n  \n    // Render and show the emptyView. Similar to addChild method\n    // but \"child:added\" events are not fired, and the event from\n    // emptyView are not forwarded\n    addEmptyView: function(child, EmptyView) {\n  \n      // get the emptyViewOptions, falling back to childViewOptions\n      var emptyViewOptions = this.getOption('emptyViewOptions') ||\n                            this.getOption('childViewOptions');\n  \n      if (_.isFunction(emptyViewOptions)){\n        emptyViewOptions = emptyViewOptions.call(this, child, this._emptyViewIndex);\n      }\n  \n      // build the empty view\n      var view = this.buildChildView(child, EmptyView, emptyViewOptions);\n  \n      view._parent = this;\n  \n      // Proxy emptyView events\n      this.proxyChildEvents(view);\n  \n      // trigger the 'before:show' event on `view` if the collection view\n      // has already been shown\n      if (this._isShown) {\n        Marionette.triggerMethodOn(view, 'before:show');\n      }\n  \n      // Store the `emptyView` like a `childView` so we can properly\n      // remove and/or close it later\n      this.children.add(view);\n  \n      // Render it and show it\n      this.renderChildView(view, this._emptyViewIndex);\n  \n      // call the 'show' method if the collection view\n      // has already been shown\n      if (this._isShown) {\n        Marionette.triggerMethodOn(view, 'show');\n      }\n    },\n  \n    // Retrieve the `childView` class, either from `this.options.childView`\n    // or from the `childView` in the object definition. The \"options\"\n    // takes precedence.\n    // This method receives the model that will be passed to the instance\n    // created from this `childView`. Overriding methods may use the child\n    // to determine what `childView` class to return.\n    getChildView: function(child) {\n      var childView = this.getOption('childView');\n  \n      if (!childView) {\n        throw new Marionette.Error({\n          name: 'NoChildViewError',\n          message: 'A \"childView\" must be specified'\n        });\n      }\n  \n      return childView;\n    },\n  \n    // Render the child's view and add it to the\n    // HTML for the collection view at a given index.\n    // This will also update the indices of later views in the collection\n    // in order to keep the children in sync with the collection.\n    addChild: function(child, ChildView, index) {\n      var childViewOptions = this.getOption('childViewOptions');\n      if (_.isFunction(childViewOptions)) {\n        childViewOptions = childViewOptions.call(this, child, index);\n      }\n  \n      var view = this.buildChildView(child, ChildView, childViewOptions);\n  \n      // increment indices of views after this one\n      this._updateIndices(view, true, index);\n  \n      this._addChildView(view, index);\n  \n      view._parent = this;\n  \n      return view;\n    },\n  \n    // Internal method. This decrements or increments the indices of views after the\n    // added/removed view to keep in sync with the collection.\n    _updateIndices: function(view, increment, index) {\n      if (!this.sort) {\n        return;\n      }\n  \n      if (increment) {\n        // assign the index to the view\n        view._index = index;\n  \n        // increment the index of views after this one\n        this.children.each(function (laterView) {\n          if (laterView._index >= view._index) {\n            laterView._index++;\n          }\n        });\n      }\n      else {\n        // decrement the index of views after this one\n        this.children.each(function (laterView) {\n          if (laterView._index >= view._index) {\n            laterView._index--;\n          }\n        });\n      }\n    },\n  \n  \n    // Internal Method. Add the view to children and render it at\n    // the given index.\n    _addChildView: function(view, index) {\n      // set up the child view event forwarding\n      this.proxyChildEvents(view);\n  \n      this.triggerMethod('before:add:child', view);\n  \n      // Store the child view itself so we can properly\n      // remove and/or destroy it later\n      this.children.add(view);\n      this.renderChildView(view, index);\n  \n      if (this._isShown && !this.isBuffering) {\n        Marionette.triggerMethodOn(view, 'show');\n      }\n  \n      this.triggerMethod('add:child', view);\n    },\n  \n    // render the child view\n    renderChildView: function(view, index) {\n      view.render();\n      this.attachHtml(this, view, index);\n      return view;\n    },\n  \n    // Build a `childView` for a model in the collection.\n    buildChildView: function(child, ChildViewClass, childViewOptions) {\n      var options = _.extend({model: child}, childViewOptions);\n      return new ChildViewClass(options);\n    },\n  \n    // Remove the child view and destroy it.\n    // This function also updates the indices of\n    // later views in the collection in order to keep\n    // the children in sync with the collection.\n    removeChildView: function(view) {\n  \n      if (view) {\n        this.triggerMethod('before:remove:child', view);\n        // call 'destroy' or 'remove', depending on which is found\n        if (view.destroy) { view.destroy(); }\n        else if (view.remove) { view.remove(); }\n  \n        delete view._parent;\n        this.stopListening(view);\n        this.children.remove(view);\n        this.triggerMethod('remove:child', view);\n  \n        // decrement the index of views after this one\n        this._updateIndices(view, false);\n      }\n  \n      return view;\n    },\n  \n    // check if the collection is empty\n    isEmpty: function() {\n      return !this.collection || this.collection.length === 0;\n    },\n  \n    // If empty, show the empty view\n    checkEmpty: function() {\n      if (this.isEmpty(this.collection)) {\n        this.showEmptyView();\n      }\n    },\n  \n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(collectionView, buffer) {\n      collectionView.$el.append(buffer);\n    },\n  \n    // Append the HTML to the collection's `el`.\n    // Override this method to do something other\n    // than `.append`.\n    attachHtml: function(collectionView, childView, index) {\n      if (collectionView.isBuffering) {\n        // buffering happens on reset events and initial renders\n        // in order to reduce the number of inserts into the\n        // document, which are expensive.\n        collectionView.elBuffer.appendChild(childView.el);\n        collectionView._bufferedChildren.push(childView);\n      }\n      else {\n        // If we've already rendered the main collection, append\n        // the new child into the correct order if we need to. Otherwise\n        // append to the end.\n        if (!collectionView._insertBefore(childView, index)){\n          collectionView._insertAfter(childView);\n        }\n      }\n    },\n  \n    // Internal method. Check whether we need to insert the view into\n    // the correct position.\n    _insertBefore: function(childView, index) {\n      var currentView;\n      var findPosition = this.sort && (index < this.children.length - 1);\n      if (findPosition) {\n        // Find the view after this one\n        currentView = this.children.find(function (view) {\n          return view._index === index + 1;\n        });\n      }\n  \n      if (currentView) {\n        currentView.$el.before(childView.el);\n        return true;\n      }\n  \n      return false;\n    },\n  \n    // Internal method. Append a view to the end of the $el\n    _insertAfter: function(childView) {\n      this.$el.append(childView.el);\n    },\n  \n    // Internal method to set up the `children` object for\n    // storing all of the child views\n    _initChildViewStorage: function() {\n      this.children = new Backbone.ChildViewContainer();\n    },\n  \n    // Handle cleanup and other destroying needs for the collection of views\n    destroy: function() {\n      if (this.isDestroyed) { return; }\n  \n      this.triggerMethod('before:destroy:collection');\n      this.destroyChildren();\n      this.triggerMethod('destroy:collection');\n  \n      return Marionette.View.prototype.destroy.apply(this, arguments);\n    },\n  \n    // Destroy the child views that this collection view\n    // is holding on to, if any\n    destroyChildren: function() {\n      var childViews = this.children.map(_.identity);\n      this.children.each(this.removeChildView, this);\n      this.checkEmpty();\n      return childViews;\n    },\n  \n    // Set up the child view event forwarding. Uses a \"childview:\"\n    // prefix in front of all forwarded events.\n    proxyChildEvents: function(view) {\n      var prefix = this.getOption('childViewEventPrefix');\n  \n      // Forward all child view events through the parent,\n      // prepending \"childview:\" to the event name\n      this.listenTo(view, 'all', function() {\n        var args = _.toArray(arguments);\n        var rootEvent = args[0];\n        var childEvents = this.normalizeMethods(_.result(this, 'childEvents'));\n  \n        args[0] = prefix + ':' + rootEvent;\n        args.splice(1, 0, view);\n  \n        // call collectionView childEvent if defined\n        if (typeof childEvents !== 'undefined' && _.isFunction(childEvents[rootEvent])) {\n          childEvents[rootEvent].apply(this, args.slice(1));\n        }\n  \n        this.triggerMethod.apply(this, args);\n      }, this);\n    },\n  \n    _getImmediateChildren: function() {\n      return _.values(this.children._views);\n    }\n  });\n  \n  /* jshint maxstatements: 17, maxlen: 117 */\n  \n  // Composite View\n  // --------------\n  \n  // Used for rendering a branch-leaf, hierarchical structure.\n  // Extends directly from CollectionView and also renders an\n  // a child view as `modelView`, for the top leaf\n  Marionette.CompositeView = Marionette.CollectionView.extend({\n  \n    // Setting up the inheritance chain which allows changes to\n    // Marionette.CollectionView.prototype.constructor which allows overriding\n    // option to pass '{sort: false}' to prevent the CompositeView from\n    // maintaining the sorted order of the collection.\n    // This will fallback onto appending childView's to the end.\n    constructor: function() {\n      Marionette.CollectionView.apply(this, arguments);\n    },\n  \n    // Configured the initial events that the composite view\n    // binds to. Override this method to prevent the initial\n    // events, or to add your own initial events.\n    _initialEvents: function() {\n  \n      // Bind only after composite view is rendered to avoid adding child views\n      // to nonexistent childViewContainer\n  \n      if (this.collection) {\n        this.listenTo(this.collection, 'add', this._onCollectionAdd);\n        this.listenTo(this.collection, 'remove', this._onCollectionRemove);\n        this.listenTo(this.collection, 'reset', this._renderChildren);\n  \n        if (this.sort) {\n          this.listenTo(this.collection, 'sort', this._sortViews);\n        }\n      }\n    },\n  \n    // Retrieve the `childView` to be used when rendering each of\n    // the items in the collection. The default is to return\n    // `this.childView` or Marionette.CompositeView if no `childView`\n    // has been defined\n    getChildView: function(child) {\n      var childView = this.getOption('childView') || this.constructor;\n  \n      return childView;\n    },\n  \n    // Serialize the model for the view.\n    // You can override the `serializeData` method in your own view\n    // definition, to provide custom serialization for your view's data.\n    serializeData: function() {\n      var data = {};\n  \n      if (this.model){\n        data = _.partial(this.serializeModel, this.model).apply(this, arguments);\n      }\n  \n      return data;\n    },\n  \n    // Renders the model and the collection.\n    render: function() {\n      this._ensureViewIsIntact();\n      this.isRendered = true;\n      this.resetChildViewContainer();\n  \n      this.triggerMethod('before:render', this);\n  \n      this._renderTemplate();\n      this._renderChildren();\n  \n      this.triggerMethod('render', this);\n      return this;\n    },\n  \n    _renderChildren: function() {\n      if (this.isRendered) {\n        Marionette.CollectionView.prototype._renderChildren.call(this);\n      }\n    },\n  \n    // Render the root template that the children\n    // views are appended to\n    _renderTemplate: function() {\n      var data = {};\n      data = this.serializeData();\n      data = this.mixinTemplateHelpers(data);\n  \n      this.triggerMethod('before:render:template');\n  \n      var template = this.getTemplate();\n      var html = Marionette.Renderer.render(template, data, this);\n      this.attachElContent(html);\n  \n      // the ui bindings is done here and not at the end of render since they\n      // will not be available until after the model is rendered, but should be\n      // available before the collection is rendered.\n      this.bindUIElements();\n      this.triggerMethod('render:template');\n    },\n  \n    // Attaches the content of the root.\n    // This method can be overridden to optimize rendering,\n    // or to render in a non standard way.\n    //\n    // For example, using `innerHTML` instead of `$el.html`\n    //\n    // ```js\n    // attachElContent: function(html) {\n    //   this.el.innerHTML = html;\n    //   return this;\n    // }\n    // ```\n    attachElContent: function(html) {\n      this.$el.html(html);\n  \n      return this;\n    },\n  \n    // You might need to override this if you've overridden attachHtml\n    attachBuffer: function(compositeView, buffer) {\n      var $container = this.getChildViewContainer(compositeView);\n      $container.append(buffer);\n    },\n  \n    // Internal method. Append a view to the end of the $el.\n    // Overidden from CollectionView to ensure view is appended to\n    // childViewContainer\n    _insertAfter: function (childView) {\n      var $container = this.getChildViewContainer(this, childView);\n      $container.append(childView.el);\n    },\n  \n    // Internal method to ensure an `$childViewContainer` exists, for the\n    // `attachHtml` method to use.\n    getChildViewContainer: function(containerView, childView) {\n      if ('$childViewContainer' in containerView) {\n        return containerView.$childViewContainer;\n      }\n  \n      var container;\n      var childViewContainer = Marionette.getOption(containerView, 'childViewContainer');\n      if (childViewContainer) {\n  \n        var selector = _.isFunction(childViewContainer) ? childViewContainer.call(containerView) : childViewContainer;\n  \n        if (selector.charAt(0) === '@' && containerView.ui) {\n          container = containerView.ui[selector.substr(4)];\n        } else {\n          container = containerView.$(selector);\n        }\n  \n        if (container.length <= 0) {\n          throw new Marionette.Error({\n            name: 'ChildViewContainerMissingError',\n            message: 'The specified \"childViewContainer\" was not found: ' + containerView.childViewContainer\n          });\n        }\n  \n      } else {\n        container = containerView.$el;\n      }\n  \n      containerView.$childViewContainer = container;\n      return container;\n    },\n  \n    // Internal method to reset the `$childViewContainer` on render\n    resetChildViewContainer: function() {\n      if (this.$childViewContainer) {\n        delete this.$childViewContainer;\n      }\n    }\n  });\n  \n  // Layout View\n  // -----------\n  \n  // Used for managing application layoutViews, nested layoutViews and\n  // multiple regions within an application or sub-application.\n  //\n  // A specialized view class that renders an area of HTML and then\n  // attaches `Region` instances to the specified `regions`.\n  // Used for composite view management and sub-application areas.\n  Marionette.LayoutView = Marionette.ItemView.extend({\n    regionClass: Marionette.Region,\n  \n    // Ensure the regions are available when the `initialize` method\n    // is called.\n    constructor: function(options) {\n      options = options || {};\n  \n      this._firstRender = true;\n      this._initializeRegions(options);\n  \n      Marionette.ItemView.call(this, options);\n    },\n  \n    // LayoutView's render will use the existing region objects the\n    // first time it is called. Subsequent calls will destroy the\n    // views that the regions are showing and then reset the `el`\n    // for the regions to the newly rendered DOM elements.\n    render: function() {\n      this._ensureViewIsIntact();\n  \n      if (this._firstRender) {\n        // if this is the first render, don't do anything to\n        // reset the regions\n        this._firstRender = false;\n      } else {\n        // If this is not the first render call, then we need to\n        // re-initialize the `el` for each region\n        this._reInitializeRegions();\n      }\n  \n      return Marionette.ItemView.prototype.render.apply(this, arguments);\n    },\n  \n    // Handle destroying regions, and then destroy the view itself.\n    destroy: function() {\n      if (this.isDestroyed) { return this; }\n  \n      this.regionManager.destroy();\n      return Marionette.ItemView.prototype.destroy.apply(this, arguments);\n    },\n  \n    // Add a single region, by name, to the layoutView\n    addRegion: function(name, definition) {\n      var regions = {};\n      regions[name] = definition;\n      return this._buildRegions(regions)[name];\n    },\n  \n    // Add multiple regions as a {name: definition, name2: def2} object literal\n    addRegions: function(regions) {\n      this.regions = _.extend({}, this.regions, regions);\n      return this._buildRegions(regions);\n    },\n  \n    // Remove a single region from the LayoutView, by name\n    removeRegion: function(name) {\n      delete this.regions[name];\n      return this.regionManager.removeRegion(name);\n    },\n  \n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this.regionManager.get(region);\n    },\n  \n    // Get all regions\n    getRegions: function(){\n      return this.regionManager.getRegions();\n    },\n  \n    // internal method to build regions\n    _buildRegions: function(regions) {\n      var defaults = {\n        regionClass: this.getOption('regionClass'),\n        parentEl: _.partial(_.result, this, '$el')\n      };\n  \n      return this.regionManager.addRegions(regions, defaults);\n    },\n  \n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on this layoutView.\n    _initializeRegions: function(options) {\n      var regions;\n      this._initRegionManager();\n  \n      if (_.isFunction(this.regions)) {\n        regions = this.regions(options);\n      } else {\n        regions = this.regions || {};\n      }\n  \n      // Enable users to define `regions` as instance options.\n      var regionOptions = this.getOption.call(options, 'regions');\n  \n      // enable region options to be a function\n      if (_.isFunction(regionOptions)) {\n        regionOptions = regionOptions.call(this, options);\n      }\n  \n      _.extend(regions, regionOptions);\n  \n      // Normalize region selectors hash to allow\n      // a user to use the @ui. syntax.\n      regions = this.normalizeUIValues(regions);\n  \n      this.addRegions(regions);\n    },\n  \n    // Internal method to re-initialize all of the regions by updating the `el` that\n    // they point to\n    _reInitializeRegions: function() {\n      this.regionManager.invoke('reset');\n    },\n  \n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n  \n    // Internal method to initialize the region manager\n    // and all regions in it\n    _initRegionManager: function() {\n      this.regionManager = this.getRegionManager();\n      this.regionManager._parent = this;\n  \n      this.listenTo(this.regionManager, 'before:add:region', function(name) {\n        this.triggerMethod('before:add:region', name);\n      });\n  \n      this.listenTo(this.regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        this.triggerMethod('add:region', name, region);\n      });\n  \n      this.listenTo(this.regionManager, 'before:remove:region', function(name) {\n        this.triggerMethod('before:remove:region', name);\n      });\n  \n      this.listenTo(this.regionManager, 'remove:region', function(name, region) {\n        delete this[name];\n        this.triggerMethod('remove:region', name, region);\n      });\n    },\n  \n    _getImmediateChildren: function() {\n      return _.chain(this.regionManager.getRegions())\n        .pluck('currentView')\n        .compact()\n        .value();\n    }\n  });\n  \n\n  // Behavior\n  // --------\n  \n  // A Behavior is an isolated set of DOM /\n  // user interactions that can be mixed into any View.\n  // Behaviors allow you to blackbox View specific interactions\n  // into portable logical chunks, keeping your views simple and your code DRY.\n  \n  Marionette.Behavior = Marionette.Object.extend({\n    constructor: function(options, view) {\n      // Setup reference to the view.\n      // this comes in handle when a behavior\n      // wants to directly talk up the chain\n      // to the view.\n      this.view = view;\n      this.defaults = _.result(this, 'defaults') || {};\n      this.options  = _.extend({}, this.defaults, options);\n  \n      Marionette.Object.apply(this, arguments);\n    },\n  \n    // proxy behavior $ method to the view\n    // this is useful for doing jquery DOM lookups\n    // scoped to behaviors view.\n    $: function() {\n      return this.view.$.apply(this.view, arguments);\n    },\n  \n    // Stops the behavior from listening to events.\n    // Overrides Object#destroy to prevent additional events from being triggered.\n    destroy: function() {\n      this.stopListening();\n    },\n  \n    proxyViewProperties: function (view) {\n      this.$el = view.$el;\n      this.el = view.el;\n    }\n  });\n  \n  /* jshint maxlen: 143 */\n  // Behaviors\n  // ---------\n  \n  // Behaviors is a utility class that takes care of\n  // gluing your behavior instances to their given View.\n  // The most important part of this class is that you\n  // **MUST** override the class level behaviorsLookup\n  // method for things to work properly.\n  \n  Marionette.Behaviors = (function(Marionette, _) {\n  \n    function Behaviors(view, behaviors) {\n  \n      if (!_.isObject(view.behaviors)) {\n        return {};\n      }\n  \n      // Behaviors defined on a view can be a flat object literal\n      // or it can be a function that returns an object.\n      behaviors = Behaviors.parseBehaviors(view, behaviors || _.result(view, 'behaviors'));\n  \n      // Wraps several of the view's methods\n      // calling the methods first on each behavior\n      // and then eventually calling the method on the view.\n      Behaviors.wrap(view, behaviors, _.keys(methods));\n      return behaviors;\n    }\n  \n    var methods = {\n      behaviorTriggers: function(behaviorTriggers, behaviors) {\n        var triggerBuilder = new BehaviorTriggersBuilder(this, behaviors);\n        return triggerBuilder.buildBehaviorTriggers();\n      },\n  \n      behaviorEvents: function(behaviorEvents, behaviors) {\n        var _behaviorsEvents = {};\n        var viewUI = _.result(this, 'ui');\n  \n        _.each(behaviors, function(b, i) {\n          var _events = {};\n          var behaviorEvents = _.clone(_.result(b, 'events')) || {};\n          var behaviorUI = _.result(b, 'ui');\n  \n          // Construct an internal UI hash first using\n          // the views UI hash and then the behaviors UI hash.\n          // This allows the user to use UI hash elements\n          // defined in the parent view as well as those\n          // defined in the given behavior.\n          var ui = _.extend({}, viewUI, behaviorUI);\n  \n          // Normalize behavior events hash to allow\n          // a user to use the @ui. syntax.\n          behaviorEvents = Marionette.normalizeUIKeys(behaviorEvents, ui);\n  \n          _.each(_.keys(behaviorEvents), function(key) {\n            // Append white-space at the end of each key to prevent behavior key collisions.\n            // This is relying on the fact that backbone events considers \"click .foo\" the same as\n            // \"click .foo \".\n  \n            // +2 is used because new Array(1) or 0 is \"\" and not \" \"\n            var whitespace = (new Array(i + 2)).join(' ');\n            var eventKey   = key + whitespace;\n            var handler    = _.isFunction(behaviorEvents[key]) ? behaviorEvents[key] : b[behaviorEvents[key]];\n  \n            _events[eventKey] = _.bind(handler, b);\n          });\n  \n          _behaviorsEvents = _.extend(_behaviorsEvents, _events);\n        });\n  \n        return _behaviorsEvents;\n      }\n    };\n  \n    _.extend(Behaviors, {\n  \n      // Placeholder method to be extended by the user.\n      // The method should define the object that stores the behaviors.\n      // i.e.\n      //\n      // ```js\n      // Marionette.Behaviors.behaviorsLookup: function() {\n      //   return App.Behaviors\n      // }\n      // ```\n      behaviorsLookup: function() {\n        throw new Marionette.Error({\n          message: 'You must define where your behaviors are stored.',\n          url: 'marionette.behaviors.html#behaviorslookup'\n        });\n      },\n  \n      // Takes care of getting the behavior class\n      // given options and a key.\n      // If a user passes in options.behaviorClass\n      // default to using that. Otherwise delegate\n      // the lookup to the users `behaviorsLookup` implementation.\n      getBehaviorClass: function(options, key) {\n        if (options.behaviorClass) {\n          return options.behaviorClass;\n        }\n  \n        // Get behavior class can be either a flat object or a method\n        return _.isFunction(Behaviors.behaviorsLookup) ? Behaviors.behaviorsLookup.apply(this, arguments)[key] : Behaviors.behaviorsLookup[key];\n      },\n  \n      // Iterate over the behaviors object, for each behavior\n      // instantiate it and get its grouped behaviors.\n      parseBehaviors: function(view, behaviors) {\n        return _.chain(behaviors).map(function(options, key) {\n          var BehaviorClass = Behaviors.getBehaviorClass(options, key);\n  \n          var behavior = new BehaviorClass(options, view);\n          var nestedBehaviors = Behaviors.parseBehaviors(view, _.result(behavior, 'behaviors'));\n  \n          return [behavior].concat(nestedBehaviors);\n        }).flatten().value();\n      },\n  \n      // Wrap view internal methods so that they delegate to behaviors. For example,\n      // `onDestroy` should trigger destroy on all of the behaviors and then destroy itself.\n      // i.e.\n      //\n      // `view.delegateEvents = _.partial(methods.delegateEvents, view.delegateEvents, behaviors);`\n      wrap: function(view, behaviors, methodNames) {\n        _.each(methodNames, function(methodName) {\n          view[methodName] = _.partial(methods[methodName], view[methodName], behaviors);\n        });\n      }\n    });\n  \n    // Class to build handlers for `triggers` on behaviors\n    // for views\n    function BehaviorTriggersBuilder(view, behaviors) {\n      this._view      = view;\n      this._viewUI    = _.result(view, 'ui');\n      this._behaviors = behaviors;\n      this._triggers  = {};\n    }\n  \n    _.extend(BehaviorTriggersBuilder.prototype, {\n      // Main method to build the triggers hash with event keys and handlers\n      buildBehaviorTriggers: function() {\n        _.each(this._behaviors, this._buildTriggerHandlersForBehavior, this);\n        return this._triggers;\n      },\n  \n      // Internal method to build all trigger handlers for a given behavior\n      _buildTriggerHandlersForBehavior: function(behavior, i) {\n        var ui = _.extend({}, this._viewUI, _.result(behavior, 'ui'));\n        var triggersHash = _.clone(_.result(behavior, 'triggers')) || {};\n  \n        triggersHash = Marionette.normalizeUIKeys(triggersHash, ui);\n  \n        _.each(triggersHash, _.partial(this._setHandlerForBehavior, behavior, i), this);\n      },\n  \n      // Internal method to create and assign the trigger handler for a given\n      // behavior\n      _setHandlerForBehavior: function(behavior, i, eventName, trigger) {\n        // Unique identifier for the `this._triggers` hash\n        var triggerKey = trigger.replace(/^\\S+/, function(triggerName) {\n          return triggerName + '.' + 'behaviortriggers' + i;\n        });\n  \n        this._triggers[triggerKey] = this._view._buildViewTrigger(eventName);\n      }\n    });\n  \n    return Behaviors;\n  \n  })(Marionette, _);\n  \n\n  // App Router\n  // ----------\n  \n  // Reduce the boilerplate code of handling route events\n  // and then calling a single method on another object.\n  // Have your routers configured to call the method on\n  // your object, directly.\n  //\n  // Configure an AppRouter with `appRoutes`.\n  //\n  // App routers can only take one `controller` object.\n  // It is recommended that you divide your controller\n  // objects in to smaller pieces of related functionality\n  // and have multiple routers / controllers, instead of\n  // just one giant router and controller.\n  //\n  // You can also add standard routes to an AppRouter.\n  \n  Marionette.AppRouter = Backbone.Router.extend({\n  \n    constructor: function(options) {\n      this.options = options || {};\n  \n      Backbone.Router.apply(this, arguments);\n  \n      var appRoutes = this.getOption('appRoutes');\n      var controller = this._getController();\n      this.processAppRoutes(controller, appRoutes);\n      this.on('route', this._processOnRoute, this);\n    },\n  \n    // Similar to route method on a Backbone Router but\n    // method is called on the controller\n    appRoute: function(route, methodName) {\n      var controller = this._getController();\n      this._addAppRoute(controller, route, methodName);\n    },\n  \n    // process the route event and trigger the onRoute\n    // method call, if it exists\n    _processOnRoute: function(routeName, routeArgs) {\n      // make sure an onRoute before trying to call it\n      if (_.isFunction(this.onRoute)) {\n        // find the path that matches the current route\n        var routePath = _.invert(this.getOption('appRoutes'))[routeName];\n        this.onRoute(routeName, routePath, routeArgs);\n      }\n    },\n  \n    // Internal method to process the `appRoutes` for the\n    // router, and turn them in to routes that trigger the\n    // specified method on the specified `controller`.\n    processAppRoutes: function(controller, appRoutes) {\n      if (!appRoutes) { return; }\n  \n      var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes\n  \n      _.each(routeNames, function(route) {\n        this._addAppRoute(controller, route, appRoutes[route]);\n      }, this);\n    },\n  \n    _getController: function() {\n      return this.getOption('controller');\n    },\n  \n    _addAppRoute: function(controller, route, methodName) {\n      var method = controller[methodName];\n  \n      if (!method) {\n        throw new Marionette.Error('Method \"' + methodName + '\" was not found on the controller');\n      }\n  \n      this.route(route, methodName, _.bind(method, controller));\n    },\n  \n    // Proxy `getOption` to enable getting options from this or this.options by name.\n    getOption: Marionette.proxyGetOption,\n  \n    triggerMethod: Marionette.triggerMethod,\n  \n    bindEntityEvents: Marionette.proxyBindEntityEvents,\n  \n    unbindEntityEvents: Marionette.proxyUnbindEntityEvents\n  });\n  \n  // Application\n  // -----------\n  \n  // Contain and manage the composite application as a whole.\n  // Stores and starts up `Region` objects, includes an\n  // event aggregator as `app.vent`\n  Marionette.Application = Marionette.Object.extend({\n    constructor: function(options) {\n      this._initializeRegions(options);\n      this._initCallbacks = new Marionette.Callbacks();\n      this.submodules = {};\n      _.extend(this, options);\n      this._initChannel();\n      Marionette.Object.call(this, options);\n    },\n  \n    // Command execution, facilitated by Backbone.Wreqr.Commands\n    execute: function() {\n      this.commands.execute.apply(this.commands, arguments);\n    },\n  \n    // Request/response, facilitated by Backbone.Wreqr.RequestResponse\n    request: function() {\n      return this.reqres.request.apply(this.reqres, arguments);\n    },\n  \n    // Add an initializer that is either run at when the `start`\n    // method is called, or run immediately if added after `start`\n    // has already been called.\n    addInitializer: function(initializer) {\n      this._initCallbacks.add(initializer);\n    },\n  \n    // kick off all of the application's processes.\n    // initializes all of the regions that have been added\n    // to the app, and runs all of the initializer functions\n    start: function(options) {\n      this.triggerMethod('before:start', options);\n      this._initCallbacks.run(options, this);\n      this.triggerMethod('start', options);\n    },\n  \n    // Add regions to your app.\n    // Accepts a hash of named strings or Region objects\n    // addRegions({something: \"#someRegion\"})\n    // addRegions({something: Region.extend({el: \"#someRegion\"}) });\n    addRegions: function(regions) {\n      return this._regionManager.addRegions(regions);\n    },\n  \n    // Empty all regions in the app, without removing them\n    emptyRegions: function() {\n      return this._regionManager.emptyRegions();\n    },\n  \n    // Removes a region from your app, by name\n    // Accepts the regions name\n    // removeRegion('myRegion')\n    removeRegion: function(region) {\n      return this._regionManager.removeRegion(region);\n    },\n  \n    // Provides alternative access to regions\n    // Accepts the region name\n    // getRegion('main')\n    getRegion: function(region) {\n      return this._regionManager.get(region);\n    },\n  \n    // Get all the regions from the region manager\n    getRegions: function(){\n      return this._regionManager.getRegions();\n    },\n  \n    // Create a module, attached to the application\n    module: function(moduleNames, moduleDefinition) {\n  \n      // Overwrite the module class if the user specifies one\n      var ModuleClass = Marionette.Module.getClass(moduleDefinition);\n  \n      var args = _.toArray(arguments);\n      args.unshift(this);\n  \n      // see the Marionette.Module object for more information\n      return ModuleClass.create.apply(ModuleClass, args);\n    },\n  \n    // Enable easy overriding of the default `RegionManager`\n    // for customized region interactions and business-specific\n    // view logic for better control over single regions.\n    getRegionManager: function() {\n      return new Marionette.RegionManager();\n    },\n  \n    // Internal method to initialize the regions that have been defined in a\n    // `regions` attribute on the application instance\n    _initializeRegions: function(options) {\n      var regions = _.isFunction(this.regions) ? this.regions(options) : this.regions || {};\n  \n      this._initRegionManager();\n  \n      // Enable users to define `regions` in instance options.\n      var optionRegions = Marionette.getOption(options, 'regions');\n  \n      // Enable region options to be a function\n      if (_.isFunction(optionRegions)) {\n        optionRegions = optionRegions.call(this, options);\n      }\n  \n      // Overwrite current regions with those passed in options\n      _.extend(regions, optionRegions);\n  \n      this.addRegions(regions);\n  \n      return this;\n    },\n  \n    // Internal method to set up the region manager\n    _initRegionManager: function() {\n      this._regionManager = this.getRegionManager();\n      this._regionManager._parent = this;\n  \n      this.listenTo(this._regionManager, 'before:add:region', function() {\n        Marionette._triggerMethod(this, 'before:add:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'add:region', function(name, region) {\n        this[name] = region;\n        Marionette._triggerMethod(this, 'add:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'before:remove:region', function() {\n        Marionette._triggerMethod(this, 'before:remove:region', arguments);\n      });\n  \n      this.listenTo(this._regionManager, 'remove:region', function(name) {\n        delete this[name];\n        Marionette._triggerMethod(this, 'remove:region', arguments);\n      });\n    },\n  \n    // Internal method to setup the Wreqr.radio channel\n    _initChannel: function() {\n      this.channelName = _.result(this, 'channelName') || 'global';\n      this.channel = _.result(this, 'channel') || Backbone.Wreqr.radio.channel(this.channelName);\n      this.vent = _.result(this, 'vent') || this.channel.vent;\n      this.commands = _.result(this, 'commands') || this.channel.commands;\n      this.reqres = _.result(this, 'reqres') || this.channel.reqres;\n    }\n  });\n  \n  /* jshint maxparams: 9 */\n  \n  // Module\n  // ------\n  \n  // A simple module system, used to create privacy and encapsulation in\n  // Marionette applications\n  Marionette.Module = function(moduleName, app, options) {\n    this.moduleName = moduleName;\n    this.options = _.extend({}, this.options, options);\n    // Allow for a user to overide the initialize\n    // for a given module instance.\n    this.initialize = options.initialize || this.initialize;\n  \n    // Set up an internal store for sub-modules.\n    this.submodules = {};\n  \n    this._setupInitializersAndFinalizers();\n  \n    // Set an internal reference to the app\n    // within a module.\n    this.app = app;\n  \n    if (_.isFunction(this.initialize)) {\n      this.initialize(moduleName, app, this.options);\n    }\n  };\n  \n  Marionette.Module.extend = Marionette.extend;\n  \n  // Extend the Module prototype with events / listenTo, so that the module\n  // can be used as an event aggregator or pub/sub.\n  _.extend(Marionette.Module.prototype, Backbone.Events, {\n  \n    // By default modules start with their parents.\n    startWithParent: true,\n  \n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic when extending Marionette.Module.\n    initialize: function() {},\n  \n    // Initializer for a specific module. Initializers are run when the\n    // module's `start` method is called.\n    addInitializer: function(callback) {\n      this._initializerCallbacks.add(callback);\n    },\n  \n    // Finalizers are run when a module is stopped. They are used to teardown\n    // and finalize any variables, references, events and other code that the\n    // module had set up.\n    addFinalizer: function(callback) {\n      this._finalizerCallbacks.add(callback);\n    },\n  \n    // Start the module, and run all of its initializers\n    start: function(options) {\n      // Prevent re-starting a module that is already started\n      if (this._isInitialized) { return; }\n  \n      // start the sub-modules (depth-first hierarchy)\n      _.each(this.submodules, function(mod) {\n        // check to see if we should start the sub-module with this parent\n        if (mod.startWithParent) {\n          mod.start(options);\n        }\n      });\n  \n      // run the callbacks to \"start\" the current module\n      this.triggerMethod('before:start', options);\n  \n      this._initializerCallbacks.run(options, this);\n      this._isInitialized = true;\n  \n      this.triggerMethod('start', options);\n    },\n  \n    // Stop this module by running its finalizers and then stop all of\n    // the sub-modules for this module\n    stop: function() {\n      // if we are not initialized, don't bother finalizing\n      if (!this._isInitialized) { return; }\n      this._isInitialized = false;\n  \n      this.triggerMethod('before:stop');\n  \n      // stop the sub-modules; depth-first, to make sure the\n      // sub-modules are stopped / finalized before parents\n      _.invoke(this.submodules, 'stop');\n  \n      // run the finalizers\n      this._finalizerCallbacks.run(undefined, this);\n  \n      // reset the initializers and finalizers\n      this._initializerCallbacks.reset();\n      this._finalizerCallbacks.reset();\n  \n      this.triggerMethod('stop');\n    },\n  \n    // Configure the module with a definition function and any custom args\n    // that are to be passed in to the definition function\n    addDefinition: function(moduleDefinition, customArgs) {\n      this._runModuleDefinition(moduleDefinition, customArgs);\n    },\n  \n    // Internal method: run the module definition function with the correct\n    // arguments\n    _runModuleDefinition: function(definition, customArgs) {\n      // If there is no definition short circut the method.\n      if (!definition) { return; }\n  \n      // build the correct list of arguments for the module definition\n      var args = _.flatten([\n        this,\n        this.app,\n        Backbone,\n        Marionette,\n        Backbone.$, _,\n        customArgs\n      ]);\n  \n      definition.apply(this, args);\n    },\n  \n    // Internal method: set up new copies of initializers and finalizers.\n    // Calling this method will wipe out all existing initializers and\n    // finalizers.\n    _setupInitializersAndFinalizers: function() {\n      this._initializerCallbacks = new Marionette.Callbacks();\n      this._finalizerCallbacks = new Marionette.Callbacks();\n    },\n  \n    // import the `triggerMethod` to trigger events with corresponding\n    // methods if the method exists\n    triggerMethod: Marionette.triggerMethod\n  });\n  \n  // Class methods to create modules\n  _.extend(Marionette.Module, {\n  \n    // Create a module, hanging off the app parameter as the parent object.\n    create: function(app, moduleNames, moduleDefinition) {\n      var module = app;\n  \n      // get the custom args passed in after the module definition and\n      // get rid of the module name and definition function\n      var customArgs = _.rest(arguments, 3);\n  \n      // Split the module names and get the number of submodules.\n      // i.e. an example module name of `Doge.Wow.Amaze` would\n      // then have the potential for 3 module definitions.\n      moduleNames = moduleNames.split('.');\n      var length = moduleNames.length;\n  \n      // store the module definition for the last module in the chain\n      var moduleDefinitions = [];\n      moduleDefinitions[length - 1] = moduleDefinition;\n  \n      // Loop through all the parts of the module definition\n      _.each(moduleNames, function(moduleName, i) {\n        var parentModule = module;\n        module = this._getModule(parentModule, moduleName, app, moduleDefinition);\n        this._addModuleDefinition(parentModule, module, moduleDefinitions[i], customArgs);\n      }, this);\n  \n      // Return the last module in the definition chain\n      return module;\n    },\n  \n    _getModule: function(parentModule, moduleName, app, def, args) {\n      var options = _.extend({}, def);\n      var ModuleClass = this.getClass(def);\n  \n      // Get an existing module of this name if we have one\n      var module = parentModule[moduleName];\n  \n      if (!module) {\n        // Create a new module if we don't have one\n        module = new ModuleClass(moduleName, app, options);\n        parentModule[moduleName] = module;\n        // store the module on the parent\n        parentModule.submodules[moduleName] = module;\n      }\n  \n      return module;\n    },\n  \n    // ## Module Classes\n    //\n    // Module classes can be used as an alternative to the define pattern.\n    // The extend function of a Module is identical to the extend functions\n    // on other Backbone and Marionette classes.\n    // This allows module lifecyle events like `onStart` and `onStop` to be called directly.\n    getClass: function(moduleDefinition) {\n      var ModuleClass = Marionette.Module;\n  \n      if (!moduleDefinition) {\n        return ModuleClass;\n      }\n  \n      // If all of the module's functionality is defined inside its class,\n      // then the class can be passed in directly. `MyApp.module(\"Foo\", FooModule)`.\n      if (moduleDefinition.prototype instanceof ModuleClass) {\n        return moduleDefinition;\n      }\n  \n      return moduleDefinition.moduleClass || ModuleClass;\n    },\n  \n    // Add the module definition and add a startWithParent initializer function.\n    // This is complicated because module definitions are heavily overloaded\n    // and support an anonymous function, module class, or options object\n    _addModuleDefinition: function(parentModule, module, def, args) {\n      var fn = this._getDefine(def);\n      var startWithParent = this._getStartWithParent(def, module);\n  \n      if (fn) {\n        module.addDefinition(fn, args);\n      }\n  \n      this._addStartWithParent(parentModule, module, startWithParent);\n    },\n  \n    _getStartWithParent: function(def, module) {\n      var swp;\n  \n      if (_.isFunction(def) && (def.prototype instanceof Marionette.Module)) {\n        swp = module.constructor.prototype.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n  \n      if (_.isObject(def)) {\n        swp = def.startWithParent;\n        return _.isUndefined(swp) ? true : swp;\n      }\n  \n      return true;\n    },\n  \n    _getDefine: function(def) {\n      if (_.isFunction(def) && !(def.prototype instanceof Marionette.Module)) {\n        return def;\n      }\n  \n      if (_.isObject(def)) {\n        return def.define;\n      }\n  \n      return null;\n    },\n  \n    _addStartWithParent: function(parentModule, module, startWithParent) {\n      module.startWithParent = module.startWithParent && startWithParent;\n  \n      if (!module.startWithParent || !!module.startWithParentIsConfigured) {\n        return;\n      }\n  \n      module.startWithParentIsConfigured = true;\n  \n      parentModule.addInitializer(function(options) {\n        if (module.startWithParent) {\n          module.start(options);\n        }\n      });\n    }\n  });\n  \n\n  return Marionette;\n}));\n","//     Backbone.js 1.1.2\n\n//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(root, factory) {\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require(\"./../underscore/underscore.js\");\n    factory(root, exports, _);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(this, function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create local references to array methods we'll want to use later.\n  var array = [];\n  var push = array.push;\n  var slice = array.slice;\n  var splice = array.splice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.1.2';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // custom events. You may bind with `on` or remove with `off` callback\n  // functions to an event; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {\n\n    // Bind an event to a `callback` function. Passing `\"all\"` will bind\n    // the callback to all events fired.\n    on: function(name, callback, context) {\n      if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;\n      this._events || (this._events = {});\n      var events = this._events[name] || (this._events[name] = []);\n      events.push({callback: callback, context: context, ctx: context || this});\n      return this;\n    },\n\n    // Bind an event to only be triggered a single time. After the first time\n    // the callback is invoked, it will be removed.\n    once: function(name, callback, context) {\n      if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;\n      var self = this;\n      var once = _.once(function() {\n        self.off(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n      return this.on(name, once, context);\n    },\n\n    // Remove one or many callbacks. If `context` is null, removes all\n    // callbacks with that function. If `callback` is null, removes all\n    // callbacks for the event. If `name` is null, removes all bound\n    // callbacks for all events.\n    off: function(name, callback, context) {\n      var retain, ev, events, names, i, l, j, k;\n      if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;\n      if (!name && !callback && !context) {\n        this._events = void 0;\n        return this;\n      }\n      names = name ? [name] : _.keys(this._events);\n      for (i = 0, l = names.length; i < l; i++) {\n        name = names[i];\n        if (events = this._events[name]) {\n          this._events[name] = retain = [];\n          if (callback || context) {\n            for (j = 0, k = events.length; j < k; j++) {\n              ev = events[j];\n              if ((callback && callback !== ev.callback && callback !== ev.callback._callback) ||\n                  (context && context !== ev.context)) {\n                retain.push(ev);\n              }\n            }\n          }\n          if (!retain.length) delete this._events[name];\n        }\n      }\n\n      return this;\n    },\n\n    // Trigger one or many events, firing all bound callbacks. Callbacks are\n    // passed the same arguments as `trigger` is, apart from the event name\n    // (unless you're listening on `\"all\"`, which will cause your callback to\n    // receive the true name of the event as the first argument).\n    trigger: function(name) {\n      if (!this._events) return this;\n      var args = slice.call(arguments, 1);\n      if (!eventsApi(this, 'trigger', name, args)) return this;\n      var events = this._events[name];\n      var allEvents = this._events.all;\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, arguments);\n      return this;\n    },\n\n    // Tell this object to stop listening to either specific events ... or\n    // to every object it's currently listening to.\n    stopListening: function(obj, name, callback) {\n      var listeningTo = this._listeningTo;\n      if (!listeningTo) return this;\n      var remove = !name && !callback;\n      if (!callback && typeof name === 'object') callback = this;\n      if (obj) (listeningTo = {})[obj._listenId] = obj;\n      for (var id in listeningTo) {\n        obj = listeningTo[id];\n        obj.off(name, callback, this);\n        if (remove || _.isEmpty(obj._events)) delete this._listeningTo[id];\n      }\n      return this;\n    }\n\n  };\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // Implement fancy features of the Events API such as multiple event\n  // names `\"change blur\"` and jQuery-style event maps `{change: action}`\n  // in terms of the existing API.\n  var eventsApi = function(obj, action, name, rest) {\n    if (!name) return true;\n\n    // Handle event maps.\n    if (typeof name === 'object') {\n      for (var key in name) {\n        obj[action].apply(obj, [key, name[key]].concat(rest));\n      }\n      return false;\n    }\n\n    // Handle space separated event names.\n    if (eventSplitter.test(name)) {\n      var names = name.split(eventSplitter);\n      for (var i = 0, l = names.length; i < l; i++) {\n        obj[action].apply(obj, [names[i]].concat(rest));\n      }\n      return false;\n    }\n\n    return true;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  var listenMethods = {listenTo: 'on', listenToOnce: 'once'};\n\n  // Inversion-of-control versions of `on` and `once`. Tell *this* object to\n  // listen to an event in another object ... keeping track of what it's\n  // listening to.\n  _.each(listenMethods, function(implementation, method) {\n    Events[method] = function(obj, name, callback) {\n      var listeningTo = this._listeningTo || (this._listeningTo = {});\n      var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n      listeningTo[id] = obj;\n      if (!callback && typeof name === 'object') callback = this;\n      obj[implementation](name, callback, this);\n      return this;\n    };\n  });\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.cid = _.uniqueId('c');\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    attrs = _.defaults({}, attrs, _.result(this, 'defaults'));\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      var attr, attrs, unset, changes, silent, changing, prev, current;\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      unset           = options.unset;\n      silent          = options.silent;\n      changes         = [];\n      changing        = this._changing;\n      this._changing  = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n      current = this.attributes, prev = this._previousAttributes;\n\n      // Check for changes of `id`.\n      if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];\n\n      // For each `set` attribute, update or delete the current value.\n      for (attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          this.changed[attr] = val;\n        } else {\n          delete this.changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0, l = changes.length; i < l; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var val, changed = false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      for (var attr in diff) {\n        if (_.isEqual(old[attr], (val = diff[attr]))) continue;\n        (changed || (changed = {}))[attr] = val;\n      }\n      return changed;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server. If the server's representation of the\n    // model differs from its current attributes, they will be overridden,\n    // triggering a `\"change\"` event.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        if (!model.set(model.parse(resp, options), options)) return false;\n        if (success) success(model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      var attrs, method, xhr, attributes = this.attributes;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true}, options);\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !options.wait) {\n        if (!this.set(attrs, options)) return false;\n      } else {\n        if (!this._validate(attrs, options)) return false;\n      }\n\n      // Set temporary attributes if `{wait: true}`.\n      if (attrs && options.wait) {\n        this.attributes = _.extend({}, attributes, attrs);\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      if (options.parse === void 0) options.parse = true;\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = model.parse(resp, options);\n        if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);\n        if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {\n          return false;\n        }\n        if (success) success(model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');\n      if (method === 'patch') options.attrs = attrs;\n      xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      if (attrs && options.wait) this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n\n      var destroy = function() {\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (options.wait || model.isNew()) destroy();\n        if (success) success(model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      if (this.isNew()) {\n        options.success();\n        return false;\n      }\n      wrapError(this, options);\n\n      var xhr = this.sync('delete', this, options);\n      if (!options.wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      return base.replace(/([^\\/])$/, '$1/') + encodeURIComponent(this.id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend(options || {}, { validate: true }));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Model.\n  var modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit'];\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  _.each(modelMethods, function(method) {\n    Model.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.attributes);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analagous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model){ return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      var singular = !_.isArray(models);\n      models = singular ? [models] : _.clone(models);\n      options || (options = {});\n      var i, l, index, model;\n      for (i = 0, l = models.length; i < l; i++) {\n        model = models[i] = this.get(models[i]);\n        if (!model) continue;\n        delete this._byId[model.id];\n        delete this._byId[model.cid];\n        index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n        this._removeReference(model, options);\n      }\n      return singular ? models[0] : models;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      options = _.defaults({}, options, setOptions);\n      if (options.parse) models = this.parse(models, options);\n      var singular = !_.isArray(models);\n      models = singular ? (models ? [models] : []) : _.clone(models);\n      var i, l, id, model, attrs, existing, sort;\n      var at = options.at;\n      var targetModel = this.model;\n      var sortable = this.comparator && (at == null) && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n      var toAdd = [], toRemove = [], modelMap = {};\n      var add = options.add, merge = options.merge, remove = options.remove;\n      var order = !sortable && add && remove ? [] : false;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      for (i = 0, l = models.length; i < l; i++) {\n        attrs = models[i] || {};\n        if (attrs instanceof Model) {\n          id = model = attrs;\n        } else {\n          id = attrs[targetModel.prototype.idAttribute || 'id'];\n        }\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        if (existing = this.get(id)) {\n          if (remove) modelMap[existing.cid] = true;\n          if (merge) {\n            attrs = attrs === model ? model.attributes : attrs;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            if (sortable && !sort && existing.hasChanged(sortAttr)) sort = true;\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(attrs, options);\n          if (!model) continue;\n          toAdd.push(model);\n          this._addReference(model, options);\n        }\n\n        // Do not add multiple models with the same `id`.\n        model = existing || model;\n        if (order && (model.isNew() || !modelMap[model.id])) order.push(model);\n        modelMap[model.id] = true;\n      }\n\n      // Remove nonexistent models if appropriate.\n      if (remove) {\n        for (i = 0, l = this.length; i < l; ++i) {\n          if (!modelMap[(model = this.models[i]).cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this.remove(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      if (toAdd.length || (order && order.length)) {\n        if (sortable) sort = true;\n        this.length += toAdd.length;\n        if (at != null) {\n          for (i = 0, l = toAdd.length; i < l; i++) {\n            this.models.splice(at + i, 0, toAdd[i]);\n          }\n        } else {\n          if (order) this.models.length = 0;\n          var orderedModels = order || toAdd;\n          for (i = 0, l = orderedModels.length; i < l; i++) {\n            this.models.push(orderedModels[i]);\n          }\n        }\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort events.\n      if (!options.silent) {\n        for (i = 0, l = toAdd.length; i < l; i++) {\n          (model = toAdd[i]).trigger('add', model, this, options);\n        }\n        if (sort || (order && order.length)) this.trigger('sort', this, options);\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options || (options = {});\n      for (var i = 0, l = this.models.length; i < l; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      this.remove(model, options);\n      return model;\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj] || this._byId[obj.id] || this._byId[obj.cid];\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      if (_.isEmpty(attrs)) return first ? void 0 : [];\n      return this[first ? 'find' : 'filter'](function(model) {\n        for (var key in attrs) {\n          if (attrs[key] !== model.get(key)) return false;\n        }\n        return true;\n      });\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      if (!this.comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      // Run sort based on type of `comparator`.\n      if (_.isString(this.comparator) || this.comparator.length === 1) {\n        this.models = this.sortBy(this.comparator, this);\n      } else {\n        this.models.sort(_.bind(this.comparator, this));\n      }\n\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return _.invoke(this.models, 'get', attr);\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = options ? _.clone(options) : {};\n      if (options.parse === void 0) options.parse = true;\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success(collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      if (!(model = this._prepareModel(model, options))) return false;\n      if (!options.wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(model, resp) {\n        if (options.wait) collection.add(model, options);\n        if (success) success(model, resp, options);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models);\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (attrs instanceof Model) return attrs;\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n      var model = new this.model(attrs, options);\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      if (model.id != null) this._byId[model.id] = model;\n      if (!model.collection) model.collection = this;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (model && event === 'change:' + model.idAttribute) {\n        delete this._byId[model.previous(model.idAttribute)];\n        if (model.id != null) this._byId[model.id] = model;\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',\n    'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',\n    'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',\n    'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest',\n    'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle',\n    'lastIndexOf', 'isEmpty', 'chain', 'sample'];\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  _.each(methods, function(method) {\n    Collection.prototype[method] = function() {\n      var args = slice.call(arguments);\n      args.unshift(this.models);\n      return _[method].apply(_, args);\n    };\n  });\n\n  // Underscore methods that take a property name as an argument.\n  var attributeMethods = ['groupBy', 'countBy', 'sortBy', 'indexBy'];\n\n  // Use attributes instead of properties.\n  _.each(attributeMethods, function(method) {\n    Collection.prototype[method] = function(value, context) {\n      var iterator = _.isFunction(value) ? value : function(model) {\n        return model.get(value);\n      };\n      return _[method](this.models, iterator, context);\n    };\n  });\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    options || (options = {});\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n    this.delegateEvents();\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be merged as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this.$el.remove();\n      this.stopListening();\n      return this;\n    },\n\n    // Change the view's element (`this.el` property), including event\n    // re-delegation.\n    setElement: function(element, delegate) {\n      if (this.$el) this.undelegateEvents();\n      this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);\n      this.el = this.$el[0];\n      if (delegate !== false) this.delegateEvents();\n      return this;\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    // This only works for delegate-able events: not `focus`, `blur`, and\n    // not `change`, `submit`, and `reset` in Internet Explorer.\n    delegateEvents: function(events) {\n      if (!(events || (events = _.result(this, 'events')))) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[events[key]];\n        if (!method) continue;\n\n        var match = key.match(delegateEventSplitter);\n        var eventName = match[1], selector = match[2];\n        method = _.bind(method, this);\n        eventName += '.delegateEvents' + this.cid;\n        if (selector === '') {\n          this.$el.on(eventName, method);\n        } else {\n          this.$el.on(eventName, selector, method);\n        }\n      }\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view with `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        var $el = Backbone.$('<' + _.result(this, 'tagName') + '>').attr(attrs);\n        this.setElement($el, false);\n      } else {\n        this.setElement(_.result(this, 'el'), false);\n      }\n    }\n\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // If we're sending a `PATCH` request, and we're in an old Internet Explorer\n    // that still has ActiveX enabled by default, override jQuery to use that\n    // for XHR instead. Remove this line when jQuery supports `PATCH` on IE8.\n    if (params.type === 'PATCH' && noXhrPatch) {\n      params.xhr = function() {\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\n      };\n    }\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  var noXhrPatch =\n    typeof window !== 'undefined' && !!window.ActiveXObject &&\n      !(window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent);\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch':  'PATCH',\n    'delete': 'DELETE',\n    'read':   'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        router.execute(callback, args);\n        router.trigger.apply(router, ['route:' + name].concat(args));\n        router.trigger('route', name, args);\n        Backbone.history.trigger('route', router, name, args);\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n                   .replace(optionalParam, '(?:$1)?')\n                   .replace(namedParam, function(match, optional) {\n                     return optional ? match : '([^/?]+)';\n                   })\n                   .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    _.bindAll(this, 'checkUrl');\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for detecting MSIE.\n  var isExplorer = /msie [\\w.]+/;\n\n  // Cached regex for removing a trailing slash.\n  var trailingSlash = /\\/$/;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      return this.location.pathname.replace(/[^\\/]$/, '$&/') === this.root;\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the cross-browser normalized URL fragment, either from the URL,\n    // the hash, or the override.\n    getFragment: function(fragment, forcePushState) {\n      if (fragment == null) {\n        if (this._hasPushState || !this._wantsHashChange || forcePushState) {\n          fragment = decodeURI(this.location.pathname + this.location.search);\n          var root = this.root.replace(trailingSlash, '');\n          if (!fragment.indexOf(root)) fragment = fragment.slice(root.length);\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error(\"Backbone.history has already been started\");\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.options.pushState && this.history && this.history.pushState);\n      var fragment          = this.getFragment();\n      var docMode           = document.documentMode;\n      var oldIE             = (isExplorer.exec(navigator.userAgent.toLowerCase()) && (!docMode || docMode <= 7));\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      if (oldIE && this._wantsHashChange) {\n        var frame = Backbone.$('<iframe src=\"javascript:0\" tabindex=\"-1\">');\n        this.iframe = frame.hide().appendTo('body')[0].contentWindow;\n        this.navigate(fragment);\n      }\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._hasPushState) {\n        Backbone.$(window).on('popstate', this.checkUrl);\n      } else if (this._wantsHashChange && ('onhashchange' in window) && !oldIE) {\n        Backbone.$(window).on('hashchange', this.checkUrl);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      // Determine if we need to change the base url, for a pushState link\n      // opened by a non-pushState browser.\n      this.fragment = fragment;\n      var loc = this.location;\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          this.fragment = this.getFragment(null, true);\n          this.location.replace(this.root + '#' + this.fragment);\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot() && loc.hash) {\n          this.fragment = this.getHash().replace(routeStripper, '');\n          this.history.replaceState({}, document.title, this.root + this.fragment);\n        }\n\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      Backbone.$(window).off('popstate', this.checkUrl).off('hashchange', this.checkUrl);\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n      if (current === this.fragment && this.iframe) {\n        current = this.getFragment(this.getHash(this.iframe));\n      }\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.any(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      var url = this.root + (fragment = this.getFragment(fragment || ''));\n\n      // Strip the hash for matching.\n      fragment = fragment.replace(pathStripper, '');\n\n      if (this.fragment === fragment) return;\n      this.fragment = fragment;\n\n      // Don't include a trailing slash on the root.\n      if (fragment === '' && url !== '/') url = url.slice(0, -1);\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._hasPushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && (fragment !== this.getFragment(this.getHash(this.iframe)))) {\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if(!options.replace) this.iframe.document.open().close();\n          this._updateHash(this.iframe.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain, for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function(){ this.constructor = child; };\n    Surrogate.prototype = parent.prototype;\n    child.prototype = new Surrogate;\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) _.extend(child.prototype, protoProps);\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error(model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n\n}));\n","//     Underscore.js 1.6.0\n//     http://underscorejs.org\n//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Establish the object that gets returned to break out of a loop iteration.\n  var breaker = {};\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    concat           = ArrayProto.concat,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeForEach      = ArrayProto.forEach,\n    nativeMap          = ArrayProto.map,\n    nativeReduce       = ArrayProto.reduce,\n    nativeReduceRight  = ArrayProto.reduceRight,\n    nativeFilter       = ArrayProto.filter,\n    nativeEvery        = ArrayProto.every,\n    nativeSome         = ArrayProto.some,\n    nativeIndexOf      = ArrayProto.indexOf,\n    nativeLastIndexOf  = ArrayProto.lastIndexOf,\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind;\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object via a string identifier,\n  // for Closure Compiler \"advanced\" mode.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.6.0';\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles objects with the built-in `forEach`, arrays, and raw objects.\n  // Delegates to **ECMAScript 5**'s native `forEach` if available.\n  var each = _.each = _.forEach = function(obj, iterator, context) {\n    if (obj == null) return obj;\n    if (nativeForEach && obj.forEach === nativeForEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n      for (var i = 0, length = obj.length; i < length; i++) {\n        if (iterator.call(context, obj[i], i, obj) === breaker) return;\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (var i = 0, length = keys.length; i < length; i++) {\n        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iterator to each element.\n  // Delegates to **ECMAScript 5**'s native `map` if available.\n  _.map = _.collect = function(obj, iterator, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n    each(obj, function(value, index, list) {\n      results.push(iterator.call(context, value, index, list));\n    });\n    return results;\n  };\n\n  var reduceError = 'Reduce of empty array with no initial value';\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\n  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduce && obj.reduce === nativeReduce) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\n    }\n    each(obj, function(value, index, list) {\n      if (!initial) {\n        memo = value;\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, value, index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // The right-associative version of reduce, also known as `foldr`.\n  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.\n  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\n    }\n    var length = obj.length;\n    if (length !== +length) {\n      var keys = _.keys(obj);\n      length = keys.length;\n    }\n    each(obj, function(value, index, list) {\n      index = keys ? keys[--length] : --length;\n      if (!initial) {\n        memo = obj[index];\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, obj[index], index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var result;\n    any(obj, function(value, index, list) {\n      if (predicate.call(context, value, index, list)) {\n        result = value;\n        return true;\n      }\n    });\n    return result;\n  };\n\n  // Return all the elements that pass a truth test.\n  // Delegates to **ECMAScript 5**'s native `filter` if available.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(predicate, context);\n    each(obj, function(value, index, list) {\n      if (predicate.call(context, value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, function(value, index, list) {\n      return !predicate.call(context, value, index, list);\n    }, context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Delegates to **ECMAScript 5**'s native `every` if available.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = true;\n    if (obj == null) return result;\n    if (nativeEvery && obj.every === nativeEvery) return obj.every(predicate, context);\n    each(obj, function(value, index, list) {\n      if (!(result = result && predicate.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Delegates to **ECMAScript 5**'s native `some` if available.\n  // Aliased as `any`.\n  var any = _.some = _.any = function(obj, predicate, context) {\n    predicate || (predicate = _.identity);\n    var result = false;\n    if (obj == null) return result;\n    if (nativeSome && obj.some === nativeSome) return obj.some(predicate, context);\n    each(obj, function(value, index, list) {\n      if (result || (result = predicate.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if the array or object contains a given value (using `===`).\n  // Aliased as `include`.\n  _.contains = _.include = function(obj, target) {\n    if (obj == null) return false;\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n    return any(obj, function(value) {\n      return value === target;\n    });\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      return (isFunc ? method : value[method]).apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matches(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matches(attrs));\n  };\n\n  // Return the maximum element or (element-based computation).\n  // Can't optimize arrays of integers longer than 65,535 elements.\n  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n  _.max = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.max.apply(Math, obj);\n    }\n    var result = -Infinity, lastComputed = -Infinity;\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed > lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.min.apply(Math, obj);\n    }\n    var result = Infinity, lastComputed = Infinity;\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      if (computed < lastComputed) {\n        result = value;\n        lastComputed = computed;\n      }\n    });\n    return result;\n  };\n\n  // Shuffle an array, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var rand;\n    var index = 0;\n    var shuffled = [];\n    each(obj, function(value) {\n      rand = _.random(index++);\n      shuffled[index - 1] = shuffled[rand];\n      shuffled[rand] = value;\n    });\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (obj.length !== +obj.length) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // An internal function to generate lookup iterators.\n  var lookupIterator = function(value) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return value;\n    return _.property(value);\n  };\n\n  // Sort the object's values by a criterion produced by an iterator.\n  _.sortBy = function(obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iterator.call(context, value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iterator, context) {\n      var result = {};\n      iterator = lookupIterator(iterator);\n      each(obj, function(value, index) {\n        var key = iterator.call(context, value, index, obj);\n        behavior(result, key, value);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, key, value) {\n    _.has(result, key) ? result[key].push(value) : result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, key, value) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, key) {\n    _.has(result, key) ? result[key]++ : result[key] = 1;\n  });\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iterator, context) {\n    iterator = lookupIterator(iterator);\n    var value = iterator.call(context, obj);\n    var low = 0, high = array.length;\n    while (low < high) {\n      var mid = (low + high) >>> 1;\n      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;\n    }\n    return low;\n  };\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (obj.length === +obj.length) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) return array[0];\n    if (n < 0) return [];\n    return slice.call(array, 0, n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N. The **guard** check allows it to work with\n  // `_.map`.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array. The **guard** check allows it to work with `_.map`.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) return array[array.length - 1];\n    return slice.call(array, Math.max(array.length - n, 0));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array. The **guard**\n  // check allows it to work with `_.map`.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, (n == null) || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, output) {\n    if (shallow && _.every(input, _.isArray)) {\n      return concat.apply(output, input);\n    }\n    each(input, function(value) {\n      if (_.isArray(value) || _.isArguments(value)) {\n        shallow ? push.apply(output, value) : flatten(value, shallow, output);\n      } else {\n        output.push(value);\n      }\n    });\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, []);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Split an array into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(array, predicate) {\n    var pass = [], fail = [];\n    each(array, function(elem) {\n      (predicate(elem) ? pass : fail).push(elem);\n    });\n    return [pass, fail];\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iterator, context) {\n    if (_.isFunction(isSorted)) {\n      context = iterator;\n      iterator = isSorted;\n      isSorted = false;\n    }\n    var initial = iterator ? _.map(array, iterator, context) : array;\n    var results = [];\n    var seen = [];\n    each(initial, function(value, index) {\n      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n        seen.push(value);\n        results.push(array[index]);\n      }\n    });\n    return results;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(_.flatten(arguments, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var rest = slice.call(arguments, 1);\n    return _.filter(_.uniq(array), function(item) {\n      return _.every(rest, function(other) {\n        return _.contains(other, item);\n      });\n    });\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n    return _.filter(array, function(value){ return !_.contains(rest, value); });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    var length = _.max(_.pluck(arguments, 'length').concat(0));\n    var results = new Array(length);\n    for (var i = 0; i < length; i++) {\n      results[i] = _.pluck(arguments, '' + i);\n    }\n    return results;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    if (list == null) return {};\n    var result = {};\n    for (var i = 0, length = list.length; i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\n  // we need this function. Return the position of the first occurrence of an\n  // item in an array, or -1 if the item is not included in the array.\n  // Delegates to **ECMAScript 5**'s native `indexOf` if available.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = function(array, item, isSorted) {\n    if (array == null) return -1;\n    var i = 0, length = array.length;\n    if (isSorted) {\n      if (typeof isSorted == 'number') {\n        i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\n      } else {\n        i = _.sortedIndex(array, item);\n        return array[i] === item ? i : -1;\n      }\n    }\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n    for (; i < length; i++) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\n  _.lastIndexOf = function(array, item, from) {\n    if (array == null) return -1;\n    var hasIndex = from != null;\n    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {\n      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);\n    }\n    var i = (hasIndex ? from : array.length);\n    while (i--) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (arguments.length <= 1) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = arguments[2] || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var idx = 0;\n    var range = new Array(length);\n\n    while(idx < length) {\n      range[idx++] = start;\n      start += step;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Reusable constructor function for prototype setting.\n  var ctor = function(){};\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    var args, bound;\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError;\n    args = slice.call(arguments, 2);\n    return bound = function() {\n      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));\n      ctor.prototype = func.prototype;\n      var self = new ctor;\n      ctor.prototype = null;\n      var result = func.apply(self, args.concat(slice.call(arguments)));\n      if (Object(result) === result) return result;\n      return self;\n    };\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    return function() {\n      var position = 0;\n      var args = boundArgs.slice();\n      for (var i = 0, length = args.length; i < length; i++) {\n        if (args[i] === _) args[i] = arguments[position++];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return func.apply(this, args);\n    };\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var funcs = slice.call(arguments, 1);\n    if (funcs.length === 0) throw new Error('bindAll must be passed function names');\n    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memo = {};\n    hasher || (hasher = _.identity);\n    return function() {\n      var key = hasher.apply(this, arguments);\n      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));\n    };\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){ return func.apply(null, args); }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = function(func) {\n    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\n  };\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    options || (options = {});\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n      if (last < wait) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) {\n        timeout = setTimeout(later, wait);\n      }\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = function(func) {\n    var ran = false, memo;\n    return function() {\n      if (ran) return memo;\n      ran = true;\n      memo = func.apply(this, arguments);\n      func = null;\n      return memo;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var funcs = arguments;\n    return function() {\n      var args = arguments;\n      for (var i = funcs.length - 1; i >= 0; i--) {\n        args = [funcs[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  };\n\n  // Returns a function that will only be executed after being called N times.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Object Functions\n  // ----------------\n\n  // Retrieve the names of an object's properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = new Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = new Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    each(keys, function(key) {\n      if (key in obj) copy[key] = obj[key];\n    });\n    return copy;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    for (var key in obj) {\n      if (!_.contains(keys, key)) copy[key] = obj[key];\n    }\n    return copy;\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          if (obj[prop] === void 0) obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a == 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className != toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, dates, and booleans are compared by value.\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return a == String(b);\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\n        // other numeric values.\n        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a == +b;\n      // RegExps are compared by their source patterns and flags.\n      case '[object RegExp]':\n        return a.source == b.source &&\n               a.global == b.global &&\n               a.multiline == b.multiline &&\n               a.ignoreCase == b.ignoreCase;\n    }\n    if (typeof a != 'object' || typeof b != 'object') return false;\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] == a) return bStack[length] == b;\n    }\n    // Objects with different constructors are not equivalent, but `Object`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&\n                             _.isFunction(bCtor) && (bCtor instanceof bCtor))\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    var size = 0, result = true;\n    // Recursively compare objects and arrays.\n    if (className == '[object Array]') {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      size = a.length;\n      result = size == b.length;\n      if (result) {\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (size--) {\n          if (!(result = eq(a[size], b[size], aStack, bStack))) break;\n        }\n      }\n    } else {\n      // Deep compare objects.\n      for (var key in a) {\n        if (_.has(a, key)) {\n          // Count the expected number of properties.\n          size++;\n          // Deep compare each member.\n          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;\n        }\n      }\n      // Ensure that both objects contain the same number of properties.\n      if (result) {\n        for (key in b) {\n          if (_.has(b, key) && !(size--)) break;\n        }\n        result = !size;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return result;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b, [], []);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n    for (var key in obj) if (_.has(obj, key)) return false;\n    return true;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    return obj === Object(obj);\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\n  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) == '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return !!(obj && _.has(obj, 'callee'));\n    };\n  }\n\n  // Optimize `isFunction` if appropriate.\n  if (typeof (/./) !== 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj === 'function';\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj != +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iterators.\n  _.identity = function(value) {\n    return value;\n  };\n\n  _.constant = function(value) {\n    return function () {\n      return value;\n    };\n  };\n\n  _.property = function(key) {\n    return function(obj) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of `key:value` pairs.\n  _.matches = function(attrs) {\n    return function(obj) {\n      if (obj === attrs) return true; //avoid comparing an object to itself.\n      for (var key in attrs) {\n        if (attrs[key] !== obj[key])\n          return false;\n      }\n      return true;\n    }\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iterator, context) {\n    var accum = Array(Math.max(0, n));\n    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() { return new Date().getTime(); };\n\n  // List of HTML entities for escaping.\n  var entityMap = {\n    escape: {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;'\n    }\n  };\n  entityMap.unescape = _.invert(entityMap.escape);\n\n  // Regexes containing the keys and values listed immediately above.\n  var entityRegexes = {\n    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),\n    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')\n  };\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  _.each(['escape', 'unescape'], function(method) {\n    _[method] = function(string) {\n      if (string == null) return '';\n      return ('' + string).replace(entityRegexes[method], function(match) {\n        return entityMap[method][match];\n      });\n    };\n  });\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property) {\n    if (object == null) return void 0;\n    var value = object[property];\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result.call(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\t':     't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  _.template = function(text, data, settings) {\n    var render;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = new RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset)\n        .replace(escaper, function(match) { return '\\\\' + escapes[match]; });\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      }\n      if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      }\n      if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n      index = offset + match.length;\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + \"return __p;\\n\";\n\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) return render(data, _);\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled function source as a convenience for precompilation.\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function, which will delegate to the wrapper.\n  _.chain = function(obj) {\n    return _(obj).chain();\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(obj) {\n    return this._chain ? _(obj).chain() : obj;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];\n      return result.call(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result.call(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  _.extend(_.prototype, {\n\n    // Start chaining a wrapped Underscore object.\n    chain: function() {\n      this._chain = true;\n      return this;\n    },\n\n    // Extracts the result from a wrapped and chained object.\n    value: function() {\n      return this._wrapped;\n    }\n\n  });\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}).call(this);\n","// Backbone.BabySitter\n// -------------------\n// v0.1.5\n//\n// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://github.com/marionettejs/backbone.babysitter\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return factory(Backbone, _);\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = require(\"./../../backbone/backbone.js\");\n    var _ = require(\"./../../underscore/underscore.js\");\n    module.exports = factory(Backbone, _);\n  } else {\n    factory(root.Backbone, root._);\n  }\n\n}(this, function(Backbone, _) {\n  'use strict';\n\n  var previousChildViewContainer = Backbone.ChildViewContainer;\n\n  // BabySitter.ChildViewContainer\n  // -----------------------------\n  //\n  // Provide a container to store, retrieve and\n  // shut down child views.\n  \n  Backbone.ChildViewContainer = (function (Backbone, _) {\n  \n    // Container Constructor\n    // ---------------------\n  \n    var Container = function(views){\n      this._views = {};\n      this._indexByModel = {};\n      this._indexByCustom = {};\n      this._updateLength();\n  \n      _.each(views, this.add, this);\n    };\n  \n    // Container Methods\n    // -----------------\n  \n    _.extend(Container.prototype, {\n  \n      // Add a view to this container. Stores the view\n      // by `cid` and makes it searchable by the model\n      // cid (and model itself). Optionally specify\n      // a custom key to store an retrieve the view.\n      add: function(view, customIndex){\n        var viewCid = view.cid;\n  \n        // store the view\n        this._views[viewCid] = view;\n  \n        // index it by model\n        if (view.model){\n          this._indexByModel[view.model.cid] = viewCid;\n        }\n  \n        // index by custom\n        if (customIndex){\n          this._indexByCustom[customIndex] = viewCid;\n        }\n  \n        this._updateLength();\n        return this;\n      },\n  \n      // Find a view by the model that was attached to\n      // it. Uses the model's `cid` to find it.\n      findByModel: function(model){\n        return this.findByModelCid(model.cid);\n      },\n  \n      // Find a view by the `cid` of the model that was attached to\n      // it. Uses the model's `cid` to find the view `cid` and\n      // retrieve the view using it.\n      findByModelCid: function(modelCid){\n        var viewCid = this._indexByModel[modelCid];\n        return this.findByCid(viewCid);\n      },\n  \n      // Find a view by a custom indexer.\n      findByCustom: function(index){\n        var viewCid = this._indexByCustom[index];\n        return this.findByCid(viewCid);\n      },\n  \n      // Find by index. This is not guaranteed to be a\n      // stable index.\n      findByIndex: function(index){\n        return _.values(this._views)[index];\n      },\n  \n      // retrieve a view by its `cid` directly\n      findByCid: function(cid){\n        return this._views[cid];\n      },\n  \n      // Remove a view\n      remove: function(view){\n        var viewCid = view.cid;\n  \n        // delete model index\n        if (view.model){\n          delete this._indexByModel[view.model.cid];\n        }\n  \n        // delete custom index\n        _.any(this._indexByCustom, function(cid, key) {\n          if (cid === viewCid) {\n            delete this._indexByCustom[key];\n            return true;\n          }\n        }, this);\n  \n        // remove the view from the container\n        delete this._views[viewCid];\n  \n        // update the length\n        this._updateLength();\n        return this;\n      },\n  \n      // Call a method on every view in the container,\n      // passing parameters to the call method one at a\n      // time, like `function.call`.\n      call: function(method){\n        this.apply(method, _.tail(arguments));\n      },\n  \n      // Apply a method on every view in the container,\n      // passing parameters to the call method one at a\n      // time, like `function.apply`.\n      apply: function(method, args){\n        _.each(this._views, function(view){\n          if (_.isFunction(view[method])){\n            view[method].apply(view, args || []);\n          }\n        });\n      },\n  \n      // Update the `.length` attribute on this container\n      _updateLength: function(){\n        this.length = _.size(this._views);\n      }\n    });\n  \n    // Borrowing this code from Backbone.Collection:\n    // http://backbonejs.org/docs/backbone.html#section-106\n    //\n    // Mix in methods from Underscore, for iteration, and other\n    // collection related features.\n    var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n      'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n      'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n      'last', 'without', 'isEmpty', 'pluck'];\n  \n    _.each(methods, function(method) {\n      Container.prototype[method] = function() {\n        var views = _.values(this._views);\n        var args = [views].concat(_.toArray(arguments));\n        return _[method].apply(_, args);\n      };\n    });\n  \n    // return the public API\n    return Container;\n  })(Backbone, _);\n  \n\n  Backbone.ChildViewContainer.VERSION = '0.1.5';\n\n  Backbone.ChildViewContainer.noConflict = function () {\n    Backbone.ChildViewContainer = previousChildViewContainer;\n    return this;\n  };\n\n  return Backbone.ChildViewContainer;\n\n}));\n","// Backbone.Wreqr (Backbone.Marionette)\n// ----------------------------------\n// v1.3.2\n//\n// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.\n// Distributed under MIT license\n//\n// http://github.com/marionettejs/backbone.wreqr\n\n\n(function(root, factory) {\n\n  if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], function(Backbone, _) {\n      return factory(Backbone, _);\n    });\n  } else if (typeof exports !== 'undefined') {\n    var Backbone = require(\"./../../backbone/backbone.js\");\n    var _ = require(\"./../../underscore/underscore.js\");\n    module.exports = factory(Backbone, _);\n  } else {\n    factory(root.Backbone, root._);\n  }\n\n}(this, function(Backbone, _) {\n  \"use strict\";\n\n  var previousWreqr = Backbone.Wreqr;\n\n  var Wreqr = Backbone.Wreqr = {};\n\n  Backbone.Wreqr.VERSION = '1.3.2';\n\n  Backbone.Wreqr.noConflict = function () {\n    Backbone.Wreqr = previousWreqr;\n    return this;\n  };\n\n  // Handlers\n  // --------\n  // A registry of functions to call, given a name\n  \n  Wreqr.Handlers = (function(Backbone, _){\n    \"use strict\";\n    \n    // Constructor\n    // -----------\n  \n    var Handlers = function(options){\n      this.options = options;\n      this._wreqrHandlers = {};\n      \n      if (_.isFunction(this.initialize)){\n        this.initialize(options);\n      }\n    };\n  \n    Handlers.extend = Backbone.Model.extend;\n  \n    // Instance Members\n    // ----------------\n  \n    _.extend(Handlers.prototype, Backbone.Events, {\n  \n      // Add multiple handlers using an object literal configuration\n      setHandlers: function(handlers){\n        _.each(handlers, function(handler, name){\n          var context = null;\n  \n          if (_.isObject(handler) && !_.isFunction(handler)){\n            context = handler.context;\n            handler = handler.callback;\n          }\n  \n          this.setHandler(name, handler, context);\n        }, this);\n      },\n  \n      // Add a handler for the given name, with an\n      // optional context to run the handler within\n      setHandler: function(name, handler, context){\n        var config = {\n          callback: handler,\n          context: context\n        };\n  \n        this._wreqrHandlers[name] = config;\n  \n        this.trigger(\"handler:add\", name, handler, context);\n      },\n  \n      // Determine whether or not a handler is registered\n      hasHandler: function(name){\n        return !! this._wreqrHandlers[name];\n      },\n  \n      // Get the currently registered handler for\n      // the specified name. Throws an exception if\n      // no handler is found.\n      getHandler: function(name){\n        var config = this._wreqrHandlers[name];\n  \n        if (!config){\n          return;\n        }\n  \n        return function(){\n          return config.callback.apply(config.context, arguments);\n        };\n      },\n  \n      // Remove a handler for the specified name\n      removeHandler: function(name){\n        delete this._wreqrHandlers[name];\n      },\n  \n      // Remove all handlers from this registry\n      removeAllHandlers: function(){\n        this._wreqrHandlers = {};\n      }\n    });\n  \n    return Handlers;\n  })(Backbone, _);\n  \n  // Wreqr.CommandStorage\n  // --------------------\n  //\n  // Store and retrieve commands for execution.\n  Wreqr.CommandStorage = (function(){\n    \"use strict\";\n  \n    // Constructor function\n    var CommandStorage = function(options){\n      this.options = options;\n      this._commands = {};\n  \n      if (_.isFunction(this.initialize)){\n        this.initialize(options);\n      }\n    };\n  \n    // Instance methods\n    _.extend(CommandStorage.prototype, Backbone.Events, {\n  \n      // Get an object literal by command name, that contains\n      // the `commandName` and the `instances` of all commands\n      // represented as an array of arguments to process\n      getCommands: function(commandName){\n        var commands = this._commands[commandName];\n  \n        // we don't have it, so add it\n        if (!commands){\n  \n          // build the configuration\n          commands = {\n            command: commandName, \n            instances: []\n          };\n  \n          // store it\n          this._commands[commandName] = commands;\n        }\n  \n        return commands;\n      },\n  \n      // Add a command by name, to the storage and store the\n      // args for the command\n      addCommand: function(commandName, args){\n        var command = this.getCommands(commandName);\n        command.instances.push(args);\n      },\n  \n      // Clear all commands for the given `commandName`\n      clearCommands: function(commandName){\n        var command = this.getCommands(commandName);\n        command.instances = [];\n      }\n    });\n  \n    return CommandStorage;\n  })();\n  \n  // Wreqr.Commands\n  // --------------\n  //\n  // A simple command pattern implementation. Register a command\n  // handler and execute it.\n  Wreqr.Commands = (function(Wreqr, _){\n    \"use strict\";\n  \n    return Wreqr.Handlers.extend({\n      // default storage type\n      storageType: Wreqr.CommandStorage,\n  \n      constructor: function(options){\n        this.options = options || {};\n  \n        this._initializeStorage(this.options);\n        this.on(\"handler:add\", this._executeCommands, this);\n  \n        Wreqr.Handlers.prototype.constructor.apply(this, arguments);\n      },\n  \n      // Execute a named command with the supplied args\n      execute: function(name){\n        name = arguments[0];\n        var args = _.rest(arguments);\n  \n        if (this.hasHandler(name)){\n          this.getHandler(name).apply(this, args);\n        } else {\n          this.storage.addCommand(name, args);\n        }\n  \n      },\n  \n      // Internal method to handle bulk execution of stored commands\n      _executeCommands: function(name, handler, context){\n        var command = this.storage.getCommands(name);\n  \n        // loop through and execute all the stored command instances\n        _.each(command.instances, function(args){\n          handler.apply(context, args);\n        });\n  \n        this.storage.clearCommands(name);\n      },\n  \n      // Internal method to initialize storage either from the type's\n      // `storageType` or the instance `options.storageType`.\n      _initializeStorage: function(options){\n        var storage;\n  \n        var StorageType = options.storageType || this.storageType;\n        if (_.isFunction(StorageType)){\n          storage = new StorageType();\n        } else {\n          storage = StorageType;\n        }\n  \n        this.storage = storage;\n      }\n    });\n  \n  })(Wreqr, _);\n  \n  // Wreqr.RequestResponse\n  // ---------------------\n  //\n  // A simple request/response implementation. Register a\n  // request handler, and return a response from it\n  Wreqr.RequestResponse = (function(Wreqr, _){\n    \"use strict\";\n  \n    return Wreqr.Handlers.extend({\n      request: function(name){\n        if (this.hasHandler(name)) {\n          return this.getHandler(name).apply(this, _.rest(arguments));\n        }\n      }\n    });\n  \n  })(Wreqr, _);\n  \n  // Event Aggregator\n  // ----------------\n  // A pub-sub object that can be used to decouple various parts\n  // of an application through event-driven architecture.\n  \n  Wreqr.EventAggregator = (function(Backbone, _){\n    \"use strict\";\n    var EA = function(){};\n  \n    // Copy the `extend` function used by Backbone's classes\n    EA.extend = Backbone.Model.extend;\n  \n    // Copy the basic Backbone.Events on to the event aggregator\n    _.extend(EA.prototype, Backbone.Events);\n  \n    return EA;\n  })(Backbone, _);\n  \n  // Wreqr.Channel\n  // --------------\n  //\n  // An object that wraps the three messaging systems:\n  // EventAggregator, RequestResponse, Commands\n  Wreqr.Channel = (function(Wreqr){\n    \"use strict\";\n  \n    var Channel = function(channelName) {\n      this.vent        = new Backbone.Wreqr.EventAggregator();\n      this.reqres      = new Backbone.Wreqr.RequestResponse();\n      this.commands    = new Backbone.Wreqr.Commands();\n      this.channelName = channelName;\n    };\n  \n    _.extend(Channel.prototype, {\n  \n      // Remove all handlers from the messaging systems of this channel\n      reset: function() {\n        this.vent.off();\n        this.vent.stopListening();\n        this.reqres.removeAllHandlers();\n        this.commands.removeAllHandlers();\n        return this;\n      },\n  \n      // Connect a hash of events; one for each messaging system\n      connectEvents: function(hash, context) {\n        this._connect('vent', hash, context);\n        return this;\n      },\n  \n      connectCommands: function(hash, context) {\n        this._connect('commands', hash, context);\n        return this;\n      },\n  \n      connectRequests: function(hash, context) {\n        this._connect('reqres', hash, context);\n        return this;\n      },\n  \n      // Attach the handlers to a given message system `type`\n      _connect: function(type, hash, context) {\n        if (!hash) {\n          return;\n        }\n  \n        context = context || this;\n        var method = (type === 'vent') ? 'on' : 'setHandler';\n  \n        _.each(hash, function(fn, eventName) {\n          this[type][method](eventName, _.bind(fn, context));\n        }, this);\n      }\n    });\n  \n  \n    return Channel;\n  })(Wreqr);\n  \n  // Wreqr.Radio\n  // --------------\n  //\n  // An object that lets you communicate with many channels.\n  Wreqr.radio = (function(Wreqr, _){\n    \"use strict\";\n  \n    var Radio = function() {\n      this._channels = {};\n      this.vent = {};\n      this.commands = {};\n      this.reqres = {};\n      this._proxyMethods();\n    };\n  \n    _.extend(Radio.prototype, {\n  \n      channel: function(channelName) {\n        if (!channelName) {\n          throw new Error('Channel must receive a name');\n        }\n  \n        return this._getChannel( channelName );\n      },\n  \n      _getChannel: function(channelName) {\n        var channel = this._channels[channelName];\n  \n        if(!channel) {\n          channel = new Wreqr.Channel(channelName);\n          this._channels[channelName] = channel;\n        }\n  \n        return channel;\n      },\n  \n      _proxyMethods: function() {\n        _.each(['vent', 'commands', 'reqres'], function(system) {\n          _.each( messageSystems[system], function(method) {\n            this[system][method] = proxyMethod(this, system, method);\n          }, this);\n        }, this);\n      }\n    });\n  \n  \n    var messageSystems = {\n      vent: [\n        'on',\n        'off',\n        'trigger',\n        'once',\n        'stopListening',\n        'listenTo',\n        'listenToOnce'\n      ],\n  \n      commands: [\n        'execute',\n        'setHandler',\n        'setHandlers',\n        'removeHandler',\n        'removeAllHandlers'\n      ],\n  \n      reqres: [\n        'request',\n        'setHandler',\n        'setHandlers',\n        'removeHandler',\n        'removeAllHandlers'\n      ]\n    };\n  \n    var proxyMethod = function(radio, system, method) {\n      return function(channelName) {\n        var messageSystem = radio._getChannel(channelName)[system];\n  \n        return messageSystem[method].apply(messageSystem, _.rest(arguments));\n      };\n    };\n  \n    return new Radio();\n  \n  })(Wreqr, _);\n  \n\n  return Backbone.Wreqr;\n\n}));\n"]}