/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!********************************!*\
  !*** ./assets/js/src/admin.js ***!
  \********************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar Application = __webpack_require__(/*! apps/admin/application */ 12);\n\n/**\n * Services\n */\nvar EntitiesService = __webpack_require__(/*! entities/service */ 4);\nvar ModalService = __webpack_require__(/*! lib/components/modal/service */ 7);\n\n/**\n * SubApps\n */\nvar SettingsRouter = __webpack_require__(/*! apps/settings/router */ 13);\n\n/**\n * Create the app\n */\nvar app = new Application();\n\n/**\n * ... add SubApps and Services\n */\napp.entities = new EntitiesService({\n  app: app\n});\n\napp.settingsApp = new SettingsRouter({\n  container: app.layout.mainRegion\n});\n\napp.modalApp = new ModalService({\n  container: app.layout.modalRegion\n});\n\n/**\n * Attach app to window for third party plugins\n */\nmodule.exports = window.POS = POS.create(app);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2FkbWluLmpzPzc0NzAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG52YXIgQXBwbGljYXRpb24gPSByZXF1aXJlKCdhcHBzL2FkbWluL2FwcGxpY2F0aW9uJyk7XG5cbi8qKlxuICogU2VydmljZXNcbiAqL1xudmFyIEVudGl0aWVzU2VydmljZSA9IHJlcXVpcmUoJ2VudGl0aWVzL3NlcnZpY2UnKTtcbnZhciBNb2RhbFNlcnZpY2UgPSByZXF1aXJlKCdsaWIvY29tcG9uZW50cy9tb2RhbC9zZXJ2aWNlJyk7XG5cbi8qKlxuICogU3ViQXBwc1xuICovXG52YXIgU2V0dGluZ3NSb3V0ZXIgPSByZXF1aXJlKCdhcHBzL3NldHRpbmdzL3JvdXRlcicpO1xuXG4vKipcbiAqIENyZWF0ZSB0aGUgYXBwXG4gKi9cbnZhciBhcHAgPSBuZXcgQXBwbGljYXRpb24oKTtcblxuLyoqXG4gKiAuLi4gYWRkIFN1YkFwcHMgYW5kIFNlcnZpY2VzXG4gKi9cbmFwcC5lbnRpdGllcyA9IG5ldyBFbnRpdGllc1NlcnZpY2Uoe1xuICBhcHA6IGFwcFxufSk7XG5cbmFwcC5zZXR0aW5nc0FwcCA9IG5ldyBTZXR0aW5nc1JvdXRlcih7XG4gIGNvbnRhaW5lcjogYXBwLmxheW91dC5tYWluUmVnaW9uXG59KTtcblxuYXBwLm1vZGFsQXBwID0gbmV3IE1vZGFsU2VydmljZSh7XG4gIGNvbnRhaW5lcjogYXBwLmxheW91dC5tb2RhbFJlZ2lvblxufSk7XG5cbi8qKlxuICogQXR0YWNoIGFwcCB0byB3aW5kb3cgZm9yIHRoaXJkIHBhcnR5IHBsdWdpbnNcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cuUE9TID0gUE9TLmNyZWF0ZShhcHApO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2FkbWluLmpzXG4gKiogbW9kdWxlIGlkID0gMFxuICoqIG1vZHVsZSBjaHVua3MgPSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiMC5qcyJ9");

/***/ },
/* 1 */
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/***/ function(module, exports, __webpack_require__) {

	eval("module.exports = jQuery;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqUXVlcnlcIj8wY2I4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGpRdWVyeTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwialF1ZXJ5XCJcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 2 */
/*!********************!*\
  !*** external "_" ***!
  \********************/
/***/ function(module, exports, __webpack_require__) {

	eval("module.exports = _;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJfXCI/YjNiOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJfXCJcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 3 */
/*!***************************!*\
  !*** external "Backbone" ***!
  \***************************/
/***/ function(module, exports, __webpack_require__) {

	eval("module.exports = Backbone;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJCYWNrYm9uZVwiPzcwOWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gQmFja2JvbmU7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIkJhY2tib25lXCJcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 4 */
/*!*******************************************!*\
  !*** ./assets/js/src/entities/service.js ***!
  \*******************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Service = __webpack_require__(/*! lib/config/service */ 26);\nvar Products = __webpack_require__(/*! ./products/collection */ 27);\nvar Orders = __webpack_require__(/*! ./orders/collection */ 28);\nvar Cart = __webpack_require__(/*! ./cart/collection */ 29);\nvar Customers = __webpack_require__(/*! ./customers/collection */ 30);\nvar Coupons = __webpack_require__(/*! ./coupons/collection */ 31);\nvar Settings = __webpack_require__(/*! ./settings/model */ 32);\nvar SettingsCollection = __webpack_require__(/*! ./settings/collection */ 33);\nvar Gateways = __webpack_require__(/*! ./gateways/collection */ 34);\nvar FilteredCollection = __webpack_require__(/*! lib/config/filtered-collection */ 35);\nvar debug = __webpack_require__(/*! debug */ 54)('entities');\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.Entities = Service.extend({\n  channelName: 'entities',\n\n  initialize: function() {\n    this.channel.reply('get', this.get, this);\n    this.channel.reply('set', this.set, this);\n    this.channel.comply('set:filter', this.setFilter, this);\n    this.channel.comply('add:to:cart', this.addToCart, this);\n  },\n\n  collections: {\n    products  : Products,\n    orders    : Orders,\n    cart      : Cart,\n    customers : Customers,\n    coupons   : Coupons,\n    gateways  : Gateways,\n    settings  : SettingsCollection\n  },\n\n  methods: {\n    collection  : 'getCollection',\n    filtered    : 'getFiltered',\n    option      : 'getOption',\n    settings    : 'getSettings'\n  },\n\n  get: function(options){\n    options = options || {};\n    var method = this.methods[options.type];\n    if( this[method] ){\n      return this[method](options);\n    }\n    debug('request needs a type, eg: \"collection\" or \"option\"');\n  },\n\n  /**\n   * init a new collection, attach to this and return a reference\n   */\n  attach: function(options){\n    var prop = '_' + options.name;\n    if( this.collections.hasOwnProperty(options.name) ){\n      this[prop] = new this.collections[options.name]([], options);\n    }\n    return this[prop];\n  },\n\n  /**\n   * return a reference to the collection\n   */\n  getCollection: function(options){\n    var prop = '_' + options.name;\n    if( options.init ) {\n      return new this.collections[options.name]([], options);\n    }\n    return ( this[prop] || this.attach(options) );\n  },\n\n  /**\n   * return a filtered collection and attach to this\n   */\n  getFiltered: function(options){\n    var prop = '_' + options.name;\n    var filteredProp = '_filtered' + options.name;\n    if( this[filteredProp] ){ return this[filteredProp]; }\n    if( !this[prop] ){ this.attach(options); }\n\n    this[filteredProp] = new FilteredCollection( this[prop] );\n    return this[filteredProp];\n  },\n\n  /**\n   * return an option set during app.start(options)\n   */\n  getOption: function(options){\n    return this.app.getOption(options.name);\n  },\n\n  /**\n   * settings are App options that can be changed by the user\n   * eg: HotKeys are bootstrapped as start options, but also\n   * can be updated through the POS\n   */\n  getSettings: function(options){\n    var option = this.app.getOption(options.name);\n    return new Settings(option);\n  },\n\n  setFilter: function(options){\n    options = options || {};\n    var filteredProp = '_filtered' + options.name;\n    if( this[filteredProp] ){\n      this[filteredProp].filterBy('search', options.filter);\n    }\n  },\n\n  addToCart: function(options) {\n    var orders = this.getCollection({ name: 'orders' });\n    var order = orders.active;\n    if(order && order.cart){\n      order.cart.addToCart(options);\n    } else {\n      debug('no active order or cart');\n    }\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL3NlcnZpY2UuanM/NTQ5MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyQkFBMkI7QUFDeEQsc0JBQXNCLHNCQUFzQjs7QUFFNUM7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLHFDQUFxQyxpQkFBaUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFNlcnZpY2UgPSByZXF1aXJlKCdsaWIvY29uZmlnL3NlcnZpY2UnKTtcbnZhciBQcm9kdWN0cyA9IHJlcXVpcmUoJy4vcHJvZHVjdHMvY29sbGVjdGlvbicpO1xudmFyIE9yZGVycyA9IHJlcXVpcmUoJy4vb3JkZXJzL2NvbGxlY3Rpb24nKTtcbnZhciBDYXJ0ID0gcmVxdWlyZSgnLi9jYXJ0L2NvbGxlY3Rpb24nKTtcbnZhciBDdXN0b21lcnMgPSByZXF1aXJlKCcuL2N1c3RvbWVycy9jb2xsZWN0aW9uJyk7XG52YXIgQ291cG9ucyA9IHJlcXVpcmUoJy4vY291cG9ucy9jb2xsZWN0aW9uJyk7XG52YXIgU2V0dGluZ3MgPSByZXF1aXJlKCcuL3NldHRpbmdzL21vZGVsJyk7XG52YXIgU2V0dGluZ3NDb2xsZWN0aW9uID0gcmVxdWlyZSgnLi9zZXR0aW5ncy9jb2xsZWN0aW9uJyk7XG52YXIgR2F0ZXdheXMgPSByZXF1aXJlKCcuL2dhdGV3YXlzL2NvbGxlY3Rpb24nKTtcbnZhciBGaWx0ZXJlZENvbGxlY3Rpb24gPSByZXF1aXJlKCdsaWIvY29uZmlnL2ZpbHRlcmVkLWNvbGxlY3Rpb24nKTtcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2VudGl0aWVzJyk7XG52YXIgUE9TID0gcmVxdWlyZSgnbGliL3V0aWxpdGllcy9nbG9iYWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQT1MuRW50aXRpZXMgPSBTZXJ2aWNlLmV4dGVuZCh7XG4gIGNoYW5uZWxOYW1lOiAnZW50aXRpZXMnLFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY2hhbm5lbC5yZXBseSgnZ2V0JywgdGhpcy5nZXQsIHRoaXMpO1xuICAgIHRoaXMuY2hhbm5lbC5yZXBseSgnc2V0JywgdGhpcy5zZXQsIHRoaXMpO1xuICAgIHRoaXMuY2hhbm5lbC5jb21wbHkoJ3NldDpmaWx0ZXInLCB0aGlzLnNldEZpbHRlciwgdGhpcyk7XG4gICAgdGhpcy5jaGFubmVsLmNvbXBseSgnYWRkOnRvOmNhcnQnLCB0aGlzLmFkZFRvQ2FydCwgdGhpcyk7XG4gIH0sXG5cbiAgY29sbGVjdGlvbnM6IHtcbiAgICBwcm9kdWN0cyAgOiBQcm9kdWN0cyxcbiAgICBvcmRlcnMgICAgOiBPcmRlcnMsXG4gICAgY2FydCAgICAgIDogQ2FydCxcbiAgICBjdXN0b21lcnMgOiBDdXN0b21lcnMsXG4gICAgY291cG9ucyAgIDogQ291cG9ucyxcbiAgICBnYXRld2F5cyAgOiBHYXRld2F5cyxcbiAgICBzZXR0aW5ncyAgOiBTZXR0aW5nc0NvbGxlY3Rpb25cbiAgfSxcblxuICBtZXRob2RzOiB7XG4gICAgY29sbGVjdGlvbiAgOiAnZ2V0Q29sbGVjdGlvbicsXG4gICAgZmlsdGVyZWQgICAgOiAnZ2V0RmlsdGVyZWQnLFxuICAgIG9wdGlvbiAgICAgIDogJ2dldE9wdGlvbicsXG4gICAgc2V0dGluZ3MgICAgOiAnZ2V0U2V0dGluZ3MnXG4gIH0sXG5cbiAgZ2V0OiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgbWV0aG9kID0gdGhpcy5tZXRob2RzW29wdGlvbnMudHlwZV07XG4gICAgaWYoIHRoaXNbbWV0aG9kXSApe1xuICAgICAgcmV0dXJuIHRoaXNbbWV0aG9kXShvcHRpb25zKTtcbiAgICB9XG4gICAgZGVidWcoJ3JlcXVlc3QgbmVlZHMgYSB0eXBlLCBlZzogXCJjb2xsZWN0aW9uXCIgb3IgXCJvcHRpb25cIicpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBpbml0IGEgbmV3IGNvbGxlY3Rpb24sIGF0dGFjaCB0byB0aGlzIGFuZCByZXR1cm4gYSByZWZlcmVuY2VcbiAgICovXG4gIGF0dGFjaDogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgdmFyIHByb3AgPSAnXycgKyBvcHRpb25zLm5hbWU7XG4gICAgaWYoIHRoaXMuY29sbGVjdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9ucy5uYW1lKSApe1xuICAgICAgdGhpc1twcm9wXSA9IG5ldyB0aGlzLmNvbGxlY3Rpb25zW29wdGlvbnMubmFtZV0oW10sIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpc1twcm9wXTtcbiAgfSxcblxuICAvKipcbiAgICogcmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBjb2xsZWN0aW9uXG4gICAqL1xuICBnZXRDb2xsZWN0aW9uOiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICB2YXIgcHJvcCA9ICdfJyArIG9wdGlvbnMubmFtZTtcbiAgICBpZiggb3B0aW9ucy5pbml0ICkge1xuICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbGxlY3Rpb25zW29wdGlvbnMubmFtZV0oW10sIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gKCB0aGlzW3Byb3BdIHx8IHRoaXMuYXR0YWNoKG9wdGlvbnMpICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIHJldHVybiBhIGZpbHRlcmVkIGNvbGxlY3Rpb24gYW5kIGF0dGFjaCB0byB0aGlzXG4gICAqL1xuICBnZXRGaWx0ZXJlZDogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgdmFyIHByb3AgPSAnXycgKyBvcHRpb25zLm5hbWU7XG4gICAgdmFyIGZpbHRlcmVkUHJvcCA9ICdfZmlsdGVyZWQnICsgb3B0aW9ucy5uYW1lO1xuICAgIGlmKCB0aGlzW2ZpbHRlcmVkUHJvcF0gKXsgcmV0dXJuIHRoaXNbZmlsdGVyZWRQcm9wXTsgfVxuICAgIGlmKCAhdGhpc1twcm9wXSApeyB0aGlzLmF0dGFjaChvcHRpb25zKTsgfVxuXG4gICAgdGhpc1tmaWx0ZXJlZFByb3BdID0gbmV3IEZpbHRlcmVkQ29sbGVjdGlvbiggdGhpc1twcm9wXSApO1xuICAgIHJldHVybiB0aGlzW2ZpbHRlcmVkUHJvcF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIHJldHVybiBhbiBvcHRpb24gc2V0IGR1cmluZyBhcHAuc3RhcnQob3B0aW9ucylcbiAgICovXG4gIGdldE9wdGlvbjogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgcmV0dXJuIHRoaXMuYXBwLmdldE9wdGlvbihvcHRpb25zLm5hbWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBzZXR0aW5ncyBhcmUgQXBwIG9wdGlvbnMgdGhhdCBjYW4gYmUgY2hhbmdlZCBieSB0aGUgdXNlclxuICAgKiBlZzogSG90S2V5cyBhcmUgYm9vdHN0cmFwcGVkIGFzIHN0YXJ0IG9wdGlvbnMsIGJ1dCBhbHNvXG4gICAqIGNhbiBiZSB1cGRhdGVkIHRocm91Z2ggdGhlIFBPU1xuICAgKi9cbiAgZ2V0U2V0dGluZ3M6IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgIHZhciBvcHRpb24gPSB0aGlzLmFwcC5nZXRPcHRpb24ob3B0aW9ucy5uYW1lKTtcbiAgICByZXR1cm4gbmV3IFNldHRpbmdzKG9wdGlvbik7XG4gIH0sXG5cbiAgc2V0RmlsdGVyOiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZmlsdGVyZWRQcm9wID0gJ19maWx0ZXJlZCcgKyBvcHRpb25zLm5hbWU7XG4gICAgaWYoIHRoaXNbZmlsdGVyZWRQcm9wXSApe1xuICAgICAgdGhpc1tmaWx0ZXJlZFByb3BdLmZpbHRlckJ5KCdzZWFyY2gnLCBvcHRpb25zLmZpbHRlcik7XG4gICAgfVxuICB9LFxuXG4gIGFkZFRvQ2FydDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBvcmRlcnMgPSB0aGlzLmdldENvbGxlY3Rpb24oeyBuYW1lOiAnb3JkZXJzJyB9KTtcbiAgICB2YXIgb3JkZXIgPSBvcmRlcnMuYWN0aXZlO1xuICAgIGlmKG9yZGVyICYmIG9yZGVyLmNhcnQpe1xuICAgICAgb3JkZXIuY2FydC5hZGRUb0NhcnQob3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnKCdubyBhY3RpdmUgb3JkZXIgb3IgY2FydCcpO1xuICAgIH1cbiAgfVxuXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9lbnRpdGllcy9zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI0LmpzIn0=");

/***/ },
/* 5 */
/*!***********************************************!*\
  !*** ./assets/js/src/lib/utilities/global.js ***!
  \***********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var version = version || '';\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar debugFunc = __webpack_require__(/*! debug */ 54);\nvar bb = __webpack_require__(/*! backbone */ 3);\nvar $ = __webpack_require__(/*! jquery */ 1);\n\n/**\n * check debugging flag\n */\nbb.Radio.DEBUG = debugFunc().enabled;\n\nconsole.info(\n    'Debugging is ' +\n    ( debugFunc().enabled ? 'on' : 'off' )  +\n    ', visit http://woopos.com.au/docs/debugging'\n);\n\n/**\n * create a global variable\n */\nmodule.exports = {\n  VERSION: version,\n  attach: function(deepProperty, value){\n    deepProperty = deepProperty.split('.');\n    var nestedObj = _.reduceRight(deepProperty, function (child, parent) {\n      var obj = {};\n      obj[parent] = child;\n      return obj;\n    }, value || {});\n    //_.merge(this, nestedObj); // not avail in underscore\n    $.extend(true, this, nestedObj);\n  },\n  create: function(app){\n    return _.defaults( app, this );\n  },\n  debug: debugFunc,\n  getOption: function(){}\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi91dGlsaXRpZXMvZ2xvYmFsLmpzPzFjNDciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGFBQWE7QUFDbEIsK0JBQStCO0FBQy9CO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHZlcnNpb24gPSB2ZXJzaW9uIHx8ICcnO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBkZWJ1Z0Z1bmMgPSByZXF1aXJlKCdkZWJ1ZycpO1xudmFyIGJiID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG5cbi8qKlxuICogY2hlY2sgZGVidWdnaW5nIGZsYWdcbiAqL1xuYmIuUmFkaW8uREVCVUcgPSBkZWJ1Z0Z1bmMoKS5lbmFibGVkO1xuXG5jb25zb2xlLmluZm8oXG4gICAgJ0RlYnVnZ2luZyBpcyAnICtcbiAgICAoIGRlYnVnRnVuYygpLmVuYWJsZWQgPyAnb24nIDogJ29mZicgKSAgK1xuICAgICcsIHZpc2l0IGh0dHA6Ly93b29wb3MuY29tLmF1L2RvY3MvZGVidWdnaW5nJ1xuKTtcblxuLyoqXG4gKiBjcmVhdGUgYSBnbG9iYWwgdmFyaWFibGVcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFZFUlNJT046IHZlcnNpb24sXG4gIGF0dGFjaDogZnVuY3Rpb24oZGVlcFByb3BlcnR5LCB2YWx1ZSl7XG4gICAgZGVlcFByb3BlcnR5ID0gZGVlcFByb3BlcnR5LnNwbGl0KCcuJyk7XG4gICAgdmFyIG5lc3RlZE9iaiA9IF8ucmVkdWNlUmlnaHQoZGVlcFByb3BlcnR5LCBmdW5jdGlvbiAoY2hpbGQsIHBhcmVudCkge1xuICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAgb2JqW3BhcmVudF0gPSBjaGlsZDtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSwgdmFsdWUgfHwge30pO1xuICAgIC8vXy5tZXJnZSh0aGlzLCBuZXN0ZWRPYmopOyAvLyBub3QgYXZhaWwgaW4gdW5kZXJzY29yZVxuICAgICQuZXh0ZW5kKHRydWUsIHRoaXMsIG5lc3RlZE9iaik7XG4gIH0sXG4gIGNyZWF0ZTogZnVuY3Rpb24oYXBwKXtcbiAgICByZXR1cm4gXy5kZWZhdWx0cyggYXBwLCB0aGlzICk7XG4gIH0sXG4gIGRlYnVnOiBkZWJ1Z0Z1bmMsXG4gIGdldE9wdGlvbjogZnVuY3Rpb24oKXt9XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi91dGlsaXRpZXMvZ2xvYmFsLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI1LmpzIn0=");

/***/ },
/* 6 */,
/* 7 */
/*!*******************************************************!*\
  !*** ./assets/js/src/lib/components/modal/service.js ***!
  \*******************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Service = __webpack_require__(/*! lib/config/service */ 26);\nvar Backbone = __webpack_require__(/*! backbone */ 3);\nvar LayoutView = __webpack_require__(/*! ./layout-view */ 39);\nvar $ = __webpack_require__(/*! jquery */ 1);\n\nmodule.exports = Service.extend({\n  channelName: 'modal',\n\n  initialize: function(options){\n    this.container = options.container;\n    this.start();\n  },\n\n  onStart: function(){\n    this.channel.reply({\n      'open' : this.open,\n      'close' : this.close,\n      'alert' : this.alert,\n      'confirm' : this.confirm,\n      'prompt' : this.prompt\n    }, this);\n\n    this.layout = new LayoutView();\n    this.container.show(this.layout);\n\n    this.listenTo(Backbone.history, {\n      'route' : this.onRoute\n    });\n\n    this.listenTo(this.layout, 'all', function(e){\n      console.log(e);\n    });\n  },\n\n  onStop: function(){\n    delete this.layout;\n    this.container.reset();\n    this.channel.reset();\n  },\n\n  onRoute: function(){\n    if (this.fragment !== Backbone.history.fragment) {\n      this.close();\n    }\n  },\n\n  //alert: function(options){\n  //  var deferred = $.Deferred();\n  //  var view = new AlertView(options);\n  //\n  //  view.on({\n  //    'confirm' : deferred.resolve,\n  //    'cancel'  : deferred.resolve\n  //  });\n  //\n  //  return deferred;\n  //},\n  //\n  //confirm: function(options){\n  //  var deferred = $.Deferred();\n  //  var view = new ConfirmView(options);\n  //\n  //  view.on({\n  //    'confirm' : deferred.resolve,\n  //    'cancel'  : deferred.reject\n  //  });\n  //\n  //  return deferred;\n  //},\n  //\n  //prompt: function(options){\n  //  var deferred = $.Deferred();\n  //  var view = new PromptView(options);\n  //\n  //  view.on({\n  //    'submit' : deferred.resolve,\n  //    'cancel' : deferred.reject\n  //  });\n  //\n  //  return deferred;\n  //},\n\n  open: function(view){\n    var self = this;\n    this.fragment = Backbone.history.fragment;\n    return this.close().then(function() {\n      self.isOpen = true;\n      return self.layout.open(view);\n    });\n  },\n\n  close: function(){\n    if (this.isOpen) {\n      this.isOpen = false;\n      return this.layout.close();\n    } else {\n      return $.Deferred().resolve();\n    }\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL21vZGFsL3NlcnZpY2UuanM/ZTkxMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBTZXJ2aWNlID0gcmVxdWlyZSgnbGliL2NvbmZpZy9zZXJ2aWNlJyk7XG52YXIgQmFja2JvbmUgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xudmFyIExheW91dFZpZXcgPSByZXF1aXJlKCcuL2xheW91dC12aWV3Jyk7XG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcnZpY2UuZXh0ZW5kKHtcbiAgY2hhbm5lbE5hbWU6ICdtb2RhbCcsXG5cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgdGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcbiAgICB0aGlzLnN0YXJ0KCk7XG4gIH0sXG5cbiAgb25TdGFydDogZnVuY3Rpb24oKXtcbiAgICB0aGlzLmNoYW5uZWwucmVwbHkoe1xuICAgICAgJ29wZW4nIDogdGhpcy5vcGVuLFxuICAgICAgJ2Nsb3NlJyA6IHRoaXMuY2xvc2UsXG4gICAgICAnYWxlcnQnIDogdGhpcy5hbGVydCxcbiAgICAgICdjb25maXJtJyA6IHRoaXMuY29uZmlybSxcbiAgICAgICdwcm9tcHQnIDogdGhpcy5wcm9tcHRcbiAgICB9LCB0aGlzKTtcblxuICAgIHRoaXMubGF5b3V0ID0gbmV3IExheW91dFZpZXcoKTtcbiAgICB0aGlzLmNvbnRhaW5lci5zaG93KHRoaXMubGF5b3V0KTtcblxuICAgIHRoaXMubGlzdGVuVG8oQmFja2JvbmUuaGlzdG9yeSwge1xuICAgICAgJ3JvdXRlJyA6IHRoaXMub25Sb3V0ZVxuICAgIH0pO1xuXG4gICAgdGhpcy5saXN0ZW5Ubyh0aGlzLmxheW91dCwgJ2FsbCcsIGZ1bmN0aW9uKGUpe1xuICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgb25TdG9wOiBmdW5jdGlvbigpe1xuICAgIGRlbGV0ZSB0aGlzLmxheW91dDtcbiAgICB0aGlzLmNvbnRhaW5lci5yZXNldCgpO1xuICAgIHRoaXMuY2hhbm5lbC5yZXNldCgpO1xuICB9LFxuXG4gIG9uUm91dGU6IGZ1bmN0aW9uKCl7XG4gICAgaWYgKHRoaXMuZnJhZ21lbnQgIT09IEJhY2tib25lLmhpc3RvcnkuZnJhZ21lbnQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH0sXG5cbiAgLy9hbGVydDogZnVuY3Rpb24ob3B0aW9ucyl7XG4gIC8vICB2YXIgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG4gIC8vICB2YXIgdmlldyA9IG5ldyBBbGVydFZpZXcob3B0aW9ucyk7XG4gIC8vXG4gIC8vICB2aWV3Lm9uKHtcbiAgLy8gICAgJ2NvbmZpcm0nIDogZGVmZXJyZWQucmVzb2x2ZSxcbiAgLy8gICAgJ2NhbmNlbCcgIDogZGVmZXJyZWQucmVzb2x2ZVxuICAvLyAgfSk7XG4gIC8vXG4gIC8vICByZXR1cm4gZGVmZXJyZWQ7XG4gIC8vfSxcbiAgLy9cbiAgLy9jb25maXJtOiBmdW5jdGlvbihvcHRpb25zKXtcbiAgLy8gIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgLy8gIHZhciB2aWV3ID0gbmV3IENvbmZpcm1WaWV3KG9wdGlvbnMpO1xuICAvL1xuICAvLyAgdmlldy5vbih7XG4gIC8vICAgICdjb25maXJtJyA6IGRlZmVycmVkLnJlc29sdmUsXG4gIC8vICAgICdjYW5jZWwnICA6IGRlZmVycmVkLnJlamVjdFxuICAvLyAgfSk7XG4gIC8vXG4gIC8vICByZXR1cm4gZGVmZXJyZWQ7XG4gIC8vfSxcbiAgLy9cbiAgLy9wcm9tcHQ6IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAvLyAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAvLyAgdmFyIHZpZXcgPSBuZXcgUHJvbXB0VmlldyhvcHRpb25zKTtcbiAgLy9cbiAgLy8gIHZpZXcub24oe1xuICAvLyAgICAnc3VibWl0JyA6IGRlZmVycmVkLnJlc29sdmUsXG4gIC8vICAgICdjYW5jZWwnIDogZGVmZXJyZWQucmVqZWN0XG4gIC8vICB9KTtcbiAgLy9cbiAgLy8gIHJldHVybiBkZWZlcnJlZDtcbiAgLy99LFxuXG4gIG9wZW46IGZ1bmN0aW9uKHZpZXcpe1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLmZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5mcmFnbWVudDtcbiAgICByZXR1cm4gdGhpcy5jbG9zZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmlzT3BlbiA9IHRydWU7XG4gICAgICByZXR1cm4gc2VsZi5sYXlvdXQub3Blbih2aWV3KTtcbiAgICB9KTtcbiAgfSxcblxuICBjbG9zZTogZnVuY3Rpb24oKXtcbiAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcy5sYXlvdXQuY2xvc2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICQuRGVmZXJyZWQoKS5yZXNvbHZlKCk7XG4gICAgfVxuICB9XG5cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL21vZGFsL3NlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjcuanMifQ==");

/***/ },
/* 8 */,
/* 9 */,
/* 10 */,
/* 11 */,
/* 12 */
/*!*************************************************!*\
  !*** ./assets/js/src/apps/admin/application.js ***!
  \*************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Application = __webpack_require__(/*! lib/config/application */ 37);\nvar bb = __webpack_require__(/*! backbone */ 3);\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar LayoutView = __webpack_require__(/*! ./layout-view */ 50);\nvar debug = __webpack_require__(/*! debug */ 54)('admin');\n//var accounting = require('accounting');\nvar Radio = __webpack_require__(/*! backbone */ 3).Radio;\nvar routerChannel = Radio.channel('router');\n\nmodule.exports = Application.extend({\n\n  initialize: function() {\n\n    // init Root LayoutView\n    this.layout = new LayoutView();\n    this.layout.render();\n\n    this.listenTo(routerChannel, {\n      'before:enter:route' : this.onBeforeEnterRoute,\n      'enter:route'        : this.onEnterRoute,\n      'error:route'        : this.onErrorRoute\n    });\n  },\n\n  /**\n   * Set up application with start params\n   */\n  onBeforeStart: function(options){\n    debug( 'starting WooCommerce POS admin app' );\n\n    //// app settings\n    this.options = options || {};\n    //\n    //// bootstrap accounting settings\n    //accounting.settings = options.accounting;\n    //\n    //// global ajax settings\n    //bb.$.ajaxSetup({\n    //    data: {\n    //        security: function(){\n    //            return entitiesChannel.request( 'get:options', 'nonce' );\n    //        }\n    //    },\n    //    beforeSend: function(xhr){\n    //        xhr.setRequestHeader('X-WC-POS', 1);\n    //    },\n    //    timeout: 50000\n    //});\n  },\n\n  onStart: function(){\n    bb.history.start();\n  },\n\n  onBeforeEnterRoute: function() {\n    var self = this;\n    this.transitioning = true;\n    // Don't show for synchronous route changes\n    _.defer(function() {\n      if (self.transitioning) {\n        console.log('loading');\n        //nprogress.start();\n      }\n    });\n  },\n\n  onEnterRoute: function() {\n    this.transitioning = false;\n    //this.$body.scrollTop(0);\n    //nprogress.done();\n  },\n\n  onErrorRoute: function() {\n    this.transitioning = false;\n    //nprogress.done(true);\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2FwcHMvYWRtaW4vYXBwbGljYXRpb24uanM/YTE3YSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1AsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEFwcGxpY2F0aW9uID0gcmVxdWlyZSgnbGliL2NvbmZpZy9hcHBsaWNhdGlvbicpO1xudmFyIGJiID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgTGF5b3V0VmlldyA9IHJlcXVpcmUoJy4vbGF5b3V0LXZpZXcnKTtcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2FkbWluJyk7XG4vL3ZhciBhY2NvdW50aW5nID0gcmVxdWlyZSgnYWNjb3VudGluZycpO1xudmFyIFJhZGlvID0gcmVxdWlyZSgnYmFja2JvbmUnKS5SYWRpbztcbnZhciByb3V0ZXJDaGFubmVsID0gUmFkaW8uY2hhbm5lbCgncm91dGVyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXBwbGljYXRpb24uZXh0ZW5kKHtcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblxuICAgIC8vIGluaXQgUm9vdCBMYXlvdXRWaWV3XG4gICAgdGhpcy5sYXlvdXQgPSBuZXcgTGF5b3V0VmlldygpO1xuICAgIHRoaXMubGF5b3V0LnJlbmRlcigpO1xuXG4gICAgdGhpcy5saXN0ZW5Ubyhyb3V0ZXJDaGFubmVsLCB7XG4gICAgICAnYmVmb3JlOmVudGVyOnJvdXRlJyA6IHRoaXMub25CZWZvcmVFbnRlclJvdXRlLFxuICAgICAgJ2VudGVyOnJvdXRlJyAgICAgICAgOiB0aGlzLm9uRW50ZXJSb3V0ZSxcbiAgICAgICdlcnJvcjpyb3V0ZScgICAgICAgIDogdGhpcy5vbkVycm9yUm91dGVcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogU2V0IHVwIGFwcGxpY2F0aW9uIHdpdGggc3RhcnQgcGFyYW1zXG4gICAqL1xuICBvbkJlZm9yZVN0YXJ0OiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICBkZWJ1ZyggJ3N0YXJ0aW5nIFdvb0NvbW1lcmNlIFBPUyBhZG1pbiBhcHAnICk7XG5cbiAgICAvLy8vIGFwcCBzZXR0aW5nc1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgLy9cbiAgICAvLy8vIGJvb3RzdHJhcCBhY2NvdW50aW5nIHNldHRpbmdzXG4gICAgLy9hY2NvdW50aW5nLnNldHRpbmdzID0gb3B0aW9ucy5hY2NvdW50aW5nO1xuICAgIC8vXG4gICAgLy8vLyBnbG9iYWwgYWpheCBzZXR0aW5nc1xuICAgIC8vYmIuJC5hamF4U2V0dXAoe1xuICAgIC8vICAgIGRhdGE6IHtcbiAgICAvLyAgICAgICAgc2VjdXJpdHk6IGZ1bmN0aW9uKCl7XG4gICAgLy8gICAgICAgICAgICByZXR1cm4gZW50aXRpZXNDaGFubmVsLnJlcXVlc3QoICdnZXQ6b3B0aW9ucycsICdub25jZScgKTtcbiAgICAvLyAgICAgICAgfVxuICAgIC8vICAgIH0sXG4gICAgLy8gICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyKXtcbiAgICAvLyAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtV0MtUE9TJywgMSk7XG4gICAgLy8gICAgfSxcbiAgICAvLyAgICB0aW1lb3V0OiA1MDAwMFxuICAgIC8vfSk7XG4gIH0sXG5cbiAgb25TdGFydDogZnVuY3Rpb24oKXtcbiAgICBiYi5oaXN0b3J5LnN0YXJ0KCk7XG4gIH0sXG5cbiAgb25CZWZvcmVFbnRlclJvdXRlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy50cmFuc2l0aW9uaW5nID0gdHJ1ZTtcbiAgICAvLyBEb24ndCBzaG93IGZvciBzeW5jaHJvbm91cyByb3V0ZSBjaGFuZ2VzXG4gICAgXy5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZWxmLnRyYW5zaXRpb25pbmcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcnKTtcbiAgICAgICAgLy9ucHJvZ3Jlc3Muc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBvbkVudGVyUm91dGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgIC8vdGhpcy4kYm9keS5zY3JvbGxUb3AoMCk7XG4gICAgLy9ucHJvZ3Jlc3MuZG9uZSgpO1xuICB9LFxuXG4gIG9uRXJyb3JSb3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy50cmFuc2l0aW9uaW5nID0gZmFsc2U7XG4gICAgLy9ucHJvZ3Jlc3MuZG9uZSh0cnVlKTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvYXBwcy9hZG1pbi9hcHBsaWNhdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIxMi5qcyJ9");

/***/ },
/* 13 */
/*!***********************************************!*\
  !*** ./assets/js/src/apps/settings/router.js ***!
  \***********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar Router = __webpack_require__(/*! lib/config/router */ 41);\nvar LayoutView = __webpack_require__(/*! ./layout-view */ 51);\nvar SettingsRoute = __webpack_require__(/*! ./show/route */ 52);\nvar Tabs = __webpack_require__(/*! lib/components/tabs/view */ 53);\nvar bb = __webpack_require__(/*! backbone */ 3);\nvar Radio = bb.Radio;\nvar $ = __webpack_require__(/*! jquery */ 1);\nvar _ = __webpack_require__(/*! lodash */ 2);\n\nvar SettingsRouter = Router.extend({\n  settings: [],\n\n  constructor: function() {\n    var self = this;\n    $('.tmpl-wc-pos-settings').each(function(){\n      self.settings.push({\n        id: $(this).data('id'),\n        label: $(this).data('label')\n      });\n    });\n    Router.apply(this, arguments);\n  },\n\n  initialize: function(options) {\n    this.container = options.container;\n    this.collection = Radio.request('entities', 'get', {\n      type: 'collection',\n      name: 'settings'\n    });\n    this.collection.add(this.settings);\n  },\n\n  // add settings routes\n  routes: function(){\n    var routes = {\n      '': 'showSettings'\n    };\n    _.each(this.settings, function(setting){\n      routes[setting.id] = 'showSettings';\n    });\n    return routes;\n  },\n\n  onBeforeEnter: function() {\n    this.layout = new LayoutView();\n    this.listenTo(this.layout, 'show', this.showTabs);\n    this.container.show(this.layout);\n  },\n\n  showTabs: function(){\n    var tabs = new Tabs({\n      collection: this.settings\n    });\n\n    // init active tab\n    var id = bb.history.getFragment() || 'general';\n    tabs.collection.get(id).set({active:true});\n\n    this.listenTo(tabs, 'show', function(){\n      // use wordpress admin styles\n      tabs.$el.addClass('nav-tab-wrapper');\n      tabs.children.each(function(tab){\n        tab.$el.addClass('nav-tab');\n      });\n    });\n\n    this.listenTo(tabs.collection, 'change:active', function(model, active){\n      if(active){\n        this.navigate(model.id, {\n          trigger: true,\n          replace: true\n        });\n      }\n    });\n\n    this.layout.tabsRegion.show(tabs);\n  },\n\n  showSettings: function(){\n    var id = bb.history.getFragment() || 'general';\n    return new SettingsRoute({\n      container : this.layout.settingsRegion,\n      model: this.collection.get(id)\n    });\n  }\n\n});\n\nmodule.exports = SettingsRouter;\nPOS.attach('SettingsApp.Router', SettingsRouter);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2FwcHMvc2V0dGluZ3Mvcm91dGVyLmpzP2NkMDciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxpQ0FBaUMsWUFBWTs7QUFFN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBLENBQUM7O0FBRUQ7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xudmFyIFJvdXRlciA9IHJlcXVpcmUoJ2xpYi9jb25maWcvcm91dGVyJyk7XG52YXIgTGF5b3V0VmlldyA9IHJlcXVpcmUoJy4vbGF5b3V0LXZpZXcnKTtcbnZhciBTZXR0aW5nc1JvdXRlID0gcmVxdWlyZSgnLi9zaG93L3JvdXRlJyk7XG52YXIgVGFicyA9IHJlcXVpcmUoJ2xpYi9jb21wb25lbnRzL3RhYnMvdmlldycpO1xudmFyIGJiID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciBSYWRpbyA9IGJiLlJhZGlvO1xudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbnZhciBTZXR0aW5nc1JvdXRlciA9IFJvdXRlci5leHRlbmQoe1xuICBzZXR0aW5nczogW10sXG5cbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAkKCcudG1wbC13Yy1wb3Mtc2V0dGluZ3MnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLnNldHRpbmdzLnB1c2goe1xuICAgICAgICBpZDogJCh0aGlzKS5kYXRhKCdpZCcpLFxuICAgICAgICBsYWJlbDogJCh0aGlzKS5kYXRhKCdsYWJlbCcpXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBSb3V0ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcbiAgICB0aGlzLmNvbGxlY3Rpb24gPSBSYWRpby5yZXF1ZXN0KCdlbnRpdGllcycsICdnZXQnLCB7XG4gICAgICB0eXBlOiAnY29sbGVjdGlvbicsXG4gICAgICBuYW1lOiAnc2V0dGluZ3MnXG4gICAgfSk7XG4gICAgdGhpcy5jb2xsZWN0aW9uLmFkZCh0aGlzLnNldHRpbmdzKTtcbiAgfSxcblxuICAvLyBhZGQgc2V0dGluZ3Mgcm91dGVzXG4gIHJvdXRlczogZnVuY3Rpb24oKXtcbiAgICB2YXIgcm91dGVzID0ge1xuICAgICAgJyc6ICdzaG93U2V0dGluZ3MnXG4gICAgfTtcbiAgICBfLmVhY2godGhpcy5zZXR0aW5ncywgZnVuY3Rpb24oc2V0dGluZyl7XG4gICAgICByb3V0ZXNbc2V0dGluZy5pZF0gPSAnc2hvd1NldHRpbmdzJztcbiAgICB9KTtcbiAgICByZXR1cm4gcm91dGVzO1xuICB9LFxuXG4gIG9uQmVmb3JlRW50ZXI6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubGF5b3V0ID0gbmV3IExheW91dFZpZXcoKTtcbiAgICB0aGlzLmxpc3RlblRvKHRoaXMubGF5b3V0LCAnc2hvdycsIHRoaXMuc2hvd1RhYnMpO1xuICAgIHRoaXMuY29udGFpbmVyLnNob3codGhpcy5sYXlvdXQpO1xuICB9LFxuXG4gIHNob3dUYWJzOiBmdW5jdGlvbigpe1xuICAgIHZhciB0YWJzID0gbmV3IFRhYnMoe1xuICAgICAgY29sbGVjdGlvbjogdGhpcy5zZXR0aW5nc1xuICAgIH0pO1xuXG4gICAgLy8gaW5pdCBhY3RpdmUgdGFiXG4gICAgdmFyIGlkID0gYmIuaGlzdG9yeS5nZXRGcmFnbWVudCgpIHx8ICdnZW5lcmFsJztcbiAgICB0YWJzLmNvbGxlY3Rpb24uZ2V0KGlkKS5zZXQoe2FjdGl2ZTp0cnVlfSk7XG5cbiAgICB0aGlzLmxpc3RlblRvKHRhYnMsICdzaG93JywgZnVuY3Rpb24oKXtcbiAgICAgIC8vIHVzZSB3b3JkcHJlc3MgYWRtaW4gc3R5bGVzXG4gICAgICB0YWJzLiRlbC5hZGRDbGFzcygnbmF2LXRhYi13cmFwcGVyJyk7XG4gICAgICB0YWJzLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24odGFiKXtcbiAgICAgICAgdGFiLiRlbC5hZGRDbGFzcygnbmF2LXRhYicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmxpc3RlblRvKHRhYnMuY29sbGVjdGlvbiwgJ2NoYW5nZTphY3RpdmUnLCBmdW5jdGlvbihtb2RlbCwgYWN0aXZlKXtcbiAgICAgIGlmKGFjdGl2ZSl7XG4gICAgICAgIHRoaXMubmF2aWdhdGUobW9kZWwuaWQsIHtcbiAgICAgICAgICB0cmlnZ2VyOiB0cnVlLFxuICAgICAgICAgIHJlcGxhY2U6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmxheW91dC50YWJzUmVnaW9uLnNob3codGFicyk7XG4gIH0sXG5cbiAgc2hvd1NldHRpbmdzOiBmdW5jdGlvbigpe1xuICAgIHZhciBpZCA9IGJiLmhpc3RvcnkuZ2V0RnJhZ21lbnQoKSB8fCAnZ2VuZXJhbCc7XG4gICAgcmV0dXJuIG5ldyBTZXR0aW5nc1JvdXRlKHtcbiAgICAgIGNvbnRhaW5lciA6IHRoaXMubGF5b3V0LnNldHRpbmdzUmVnaW9uLFxuICAgICAgbW9kZWw6IHRoaXMuY29sbGVjdGlvbi5nZXQoaWQpXG4gICAgfSk7XG4gIH1cblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU2V0dGluZ3NSb3V0ZXI7XG5QT1MuYXR0YWNoKCdTZXR0aW5nc0FwcC5Sb3V0ZXInLCBTZXR0aW5nc1JvdXRlcik7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvYXBwcy9zZXR0aW5ncy9yb3V0ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiMTMuanMifQ==");

/***/ },
/* 14 */,
/* 15 */,
/* 16 */,
/* 17 */,
/* 18 */
/*!*****************************!*\
  !*** external "Handlebars" ***!
  \*****************************/
/***/ function(module, exports, __webpack_require__) {

	eval("module.exports = Handlebars;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJIYW5kbGViYXJzXCI/YzMxOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwiSGFuZGxlYmFyc1wiXG4gKiogbW9kdWxlIGlkID0gMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 19 */
/*!*****************************!*\
  !*** external "accounting" ***!
  \*****************************/
/***/ function(module, exports, __webpack_require__) {

	eval("module.exports = accounting;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJhY2NvdW50aW5nXCI/MWQxYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiIxOS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gYWNjb3VudGluZztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwiYWNjb3VudGluZ1wiXG4gKiogbW9kdWxlIGlkID0gMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 20 */,
/* 21 */,
/* 22 */,
/* 23 */,
/* 24 */,
/* 25 */,
/* 26 */
/*!*********************************************!*\
  !*** ./assets/js/src/lib/config/service.js ***!
  \*********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar _ = __webpack_require__(/*! lodash */ 2);\n\nmodule.exports = POS.Service = bb.Marionette.Object.extend({\n  constructor: function(options) {\n    //this.attachGlobals(arguments[0]);\n\n    if (this.channelName) {\n      this.channel = bb.Radio.channel(_.result(this, 'channelName'));\n    }\n\n    // add reference to the app, like old Marionette.Module\n    if(options.app){\n      this.app = options.app;\n    }\n\n    bb.Marionette.Object.apply(this, arguments);\n  },\n\n  start: function(){\n    this.triggerMethod('before:start');\n    this._isStarted = true;\n    this.triggerMethod('start');\n  },\n\n  stop: function(){\n    this.triggerMethod('before:stop');\n    this._isStarted = false;\n    this.triggerMethod('stop');\n  },\n\n  isStarted: function(){\n    return this._isStarted === true;\n  }\n\n  /**\n   * attach any POS.POSApp globals before it gets overwritten\n   * this is required so third party plugins can access\n   * Router, Routes etc\n   */\n  //attachGlobals: function(moduleName){\n  //  if( _(POS).has(moduleName) ){\n  //    _.defaults( this, POS[moduleName] );\n  //  }\n  //}\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvc2VydmljZS5qcz82NDRlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJiID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQT1MuU2VydmljZSA9IGJiLk1hcmlvbmV0dGUuT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy90aGlzLmF0dGFjaEdsb2JhbHMoYXJndW1lbnRzWzBdKTtcblxuICAgIGlmICh0aGlzLmNoYW5uZWxOYW1lKSB7XG4gICAgICB0aGlzLmNoYW5uZWwgPSBiYi5SYWRpby5jaGFubmVsKF8ucmVzdWx0KHRoaXMsICdjaGFubmVsTmFtZScpKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgcmVmZXJlbmNlIHRvIHRoZSBhcHAsIGxpa2Ugb2xkIE1hcmlvbmV0dGUuTW9kdWxlXG4gICAgaWYob3B0aW9ucy5hcHApe1xuICAgICAgdGhpcy5hcHAgPSBvcHRpb25zLmFwcDtcbiAgICB9XG5cbiAgICBiYi5NYXJpb25ldHRlLk9iamVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LFxuXG4gIHN0YXJ0OiBmdW5jdGlvbigpe1xuICAgIHRoaXMudHJpZ2dlck1ldGhvZCgnYmVmb3JlOnN0YXJ0Jyk7XG4gICAgdGhpcy5faXNTdGFydGVkID0gdHJ1ZTtcbiAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ3N0YXJ0Jyk7XG4gIH0sXG5cbiAgc3RvcDogZnVuY3Rpb24oKXtcbiAgICB0aGlzLnRyaWdnZXJNZXRob2QoJ2JlZm9yZTpzdG9wJyk7XG4gICAgdGhpcy5faXNTdGFydGVkID0gZmFsc2U7XG4gICAgdGhpcy50cmlnZ2VyTWV0aG9kKCdzdG9wJyk7XG4gIH0sXG5cbiAgaXNTdGFydGVkOiBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzLl9pc1N0YXJ0ZWQgPT09IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogYXR0YWNoIGFueSBQT1MuUE9TQXBwIGdsb2JhbHMgYmVmb3JlIGl0IGdldHMgb3ZlcndyaXR0ZW5cbiAgICogdGhpcyBpcyByZXF1aXJlZCBzbyB0aGlyZCBwYXJ0eSBwbHVnaW5zIGNhbiBhY2Nlc3NcbiAgICogUm91dGVyLCBSb3V0ZXMgZXRjXG4gICAqL1xuICAvL2F0dGFjaEdsb2JhbHM6IGZ1bmN0aW9uKG1vZHVsZU5hbWUpe1xuICAvLyAgaWYoIF8oUE9TKS5oYXMobW9kdWxlTmFtZSkgKXtcbiAgLy8gICAgXy5kZWZhdWx0cyggdGhpcywgUE9TW21vZHVsZU5hbWVdICk7XG4gIC8vICB9XG4gIC8vfVxuXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29uZmlnL3NlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIyNi5qcyJ9");

/***/ },
/* 27 */
/*!*******************************************************!*\
  !*** ./assets/js/src/entities/products/collection.js ***!
  \*******************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Backbone = __webpack_require__(/*! backbone */ 3);\nvar DualCollection = __webpack_require__(/*! lib/config/dual-collection */ 55);\nvar Model = __webpack_require__(/*! ./model */ 56);\n//var IndexedDB = require('lib/config/indexeddb');\nvar _ = __webpack_require__(/*! lodash */ 2);\n\nmodule.exports = DualCollection.extend({\n  name: 'products',\n  model: Model,\n\n  initialize: function(){\n    this.indexedDB = new Backbone.IndexedDB({\n      storeName: 'products',\n      storePrefix: 'wc_pos_',\n      dualStorage: true,\n      dbVersion: 1,\n      keyPath: 'local_id',\n      autoIncrement: true,\n      indexes: [\n        {name: 'local_id', keyPath: 'local_id', unique: true},\n        {name: 'id', keyPath: 'id', unique: true},\n        {name: 'status', keyPath: 'status', unique: false}\n      ]\n    }, this);\n\n    //this.indexedDB.sayHello();\n\n    //\n    this.on( 'remote:sync', this.remoteSync );\n  },\n\n  parse: function (resp) {\n    if( resp.products ){\n      this.serverResponse(resp);\n      return resp.products;\n    } else {\n      return resp;\n    }\n  },\n\n  serverResponse: function(resp){\n    var variable = _.where(resp.products, { type: 'variable' });\n    _.each( variable, function( product ) {\n      _.each( product.variations, function( variation ){\n        variation.type      = 'variation';\n        variation.title     = product.title;\n        variation.parent    = product.id;\n        variation.categories= product.categories;\n        resp.products.push( variation );\n      });\n    });\n  },\n\n  remoteSync: function(){\n    this.fullSync()\n      .done( function() {\n\n      });\n      //.fail( function( item, jqXHR, textStatus, errorThrown ){\n      //  // error alert\n      //  var errors = POS.Utils.parseErrorResponse( jqXHR );\n      //  POS.Components.Alerts.channel.command( 'open:alert', {\n      //    type: 'danger',\n      //    title: item.title,\n      //    message: errors\n      //  });\n      //});\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL3Byb2R1Y3RzL2NvbGxlY3Rpb24uanM/ZTk5YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG9EQUFvRDtBQUM3RCxTQUFTLHdDQUF3QztBQUNqRCxTQUFTO0FBQ1Q7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMkNBQTJDLG1CQUFtQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUEsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEJhY2tib25lID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciBEdWFsQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ2xpYi9jb25maWcvZHVhbC1jb2xsZWN0aW9uJyk7XG52YXIgTW9kZWwgPSByZXF1aXJlKCcuL21vZGVsJyk7XG4vL3ZhciBJbmRleGVkREIgPSByZXF1aXJlKCdsaWIvY29uZmlnL2luZGV4ZWRkYicpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEdWFsQ29sbGVjdGlvbi5leHRlbmQoe1xuICBuYW1lOiAncHJvZHVjdHMnLFxuICBtb2RlbDogTW9kZWwsXG5cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXtcbiAgICB0aGlzLmluZGV4ZWREQiA9IG5ldyBCYWNrYm9uZS5JbmRleGVkREIoe1xuICAgICAgc3RvcmVOYW1lOiAncHJvZHVjdHMnLFxuICAgICAgc3RvcmVQcmVmaXg6ICd3Y19wb3NfJyxcbiAgICAgIGR1YWxTdG9yYWdlOiB0cnVlLFxuICAgICAgZGJWZXJzaW9uOiAxLFxuICAgICAga2V5UGF0aDogJ2xvY2FsX2lkJyxcbiAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICBpbmRleGVzOiBbXG4gICAgICAgIHtuYW1lOiAnbG9jYWxfaWQnLCBrZXlQYXRoOiAnbG9jYWxfaWQnLCB1bmlxdWU6IHRydWV9LFxuICAgICAgICB7bmFtZTogJ2lkJywga2V5UGF0aDogJ2lkJywgdW5pcXVlOiB0cnVlfSxcbiAgICAgICAge25hbWU6ICdzdGF0dXMnLCBrZXlQYXRoOiAnc3RhdHVzJywgdW5pcXVlOiBmYWxzZX1cbiAgICAgIF1cbiAgICB9LCB0aGlzKTtcblxuICAgIC8vdGhpcy5pbmRleGVkREIuc2F5SGVsbG8oKTtcblxuICAgIC8vXG4gICAgdGhpcy5vbiggJ3JlbW90ZTpzeW5jJywgdGhpcy5yZW1vdGVTeW5jICk7XG4gIH0sXG5cbiAgcGFyc2U6IGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgaWYoIHJlc3AucHJvZHVjdHMgKXtcbiAgICAgIHRoaXMuc2VydmVyUmVzcG9uc2UocmVzcCk7XG4gICAgICByZXR1cm4gcmVzcC5wcm9kdWN0cztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfVxuICB9LFxuXG4gIHNlcnZlclJlc3BvbnNlOiBmdW5jdGlvbihyZXNwKXtcbiAgICB2YXIgdmFyaWFibGUgPSBfLndoZXJlKHJlc3AucHJvZHVjdHMsIHsgdHlwZTogJ3ZhcmlhYmxlJyB9KTtcbiAgICBfLmVhY2goIHZhcmlhYmxlLCBmdW5jdGlvbiggcHJvZHVjdCApIHtcbiAgICAgIF8uZWFjaCggcHJvZHVjdC52YXJpYXRpb25zLCBmdW5jdGlvbiggdmFyaWF0aW9uICl7XG4gICAgICAgIHZhcmlhdGlvbi50eXBlICAgICAgPSAndmFyaWF0aW9uJztcbiAgICAgICAgdmFyaWF0aW9uLnRpdGxlICAgICA9IHByb2R1Y3QudGl0bGU7XG4gICAgICAgIHZhcmlhdGlvbi5wYXJlbnQgICAgPSBwcm9kdWN0LmlkO1xuICAgICAgICB2YXJpYXRpb24uY2F0ZWdvcmllcz0gcHJvZHVjdC5jYXRlZ29yaWVzO1xuICAgICAgICByZXNwLnByb2R1Y3RzLnB1c2goIHZhcmlhdGlvbiApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVtb3RlU3luYzogZnVuY3Rpb24oKXtcbiAgICB0aGlzLmZ1bGxTeW5jKClcbiAgICAgIC5kb25lKCBmdW5jdGlvbigpIHtcblxuICAgICAgfSk7XG4gICAgICAvLy5mYWlsKCBmdW5jdGlvbiggaXRlbSwganFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duICl7XG4gICAgICAvLyAgLy8gZXJyb3IgYWxlcnRcbiAgICAgIC8vICB2YXIgZXJyb3JzID0gUE9TLlV0aWxzLnBhcnNlRXJyb3JSZXNwb25zZSgganFYSFIgKTtcbiAgICAgIC8vICBQT1MuQ29tcG9uZW50cy5BbGVydHMuY2hhbm5lbC5jb21tYW5kKCAnb3BlbjphbGVydCcsIHtcbiAgICAgIC8vICAgIHR5cGU6ICdkYW5nZXInLFxuICAgICAgLy8gICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAvLyAgICBtZXNzYWdlOiBlcnJvcnNcbiAgICAgIC8vICB9KTtcbiAgICAgIC8vfSk7XG4gIH1cblxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvZW50aXRpZXMvcHJvZHVjdHMvY29sbGVjdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjI3LmpzIn0=");

/***/ },
/* 28 */
/*!*****************************************************!*\
  !*** ./assets/js/src/entities/orders/collection.js ***!
  \*****************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar DualCollection = __webpack_require__(/*! lib/config/dual-collection */ 55);\nvar Model = __webpack_require__(/*! ./model */ 57);\nvar debug = __webpack_require__(/*! debug */ 54)('ordersCollection');\nvar $ = __webpack_require__(/*! jquery */ 1);\nvar IndexedDB = __webpack_require__(/*! lib/config/indexeddb */ 58);\n\nmodule.exports = DualCollection.extend({\n  name: 'orders',\n  model: Model,\n\n  comparator: function( model ){\n    if( model.get('id') === undefined ) { return 0; }\n    return 1;\n  },\n\n  initialize: function() {\n\n    this.indexedDB = new IndexedDB({\n      storeName: 'orders',\n      storePrefix: 'wc_pos_',\n      dualStorage: true,\n      dbVersion: 1,\n      keyPath: 'local_id',\n      autoIncrement: true,\n      indexes: [\n        {name: 'local_id', keyPath: 'local_id', unique: true},\n        {name: 'id', keyPath: 'id', unique: true},\n        {name: 'status', keyPath: 'status', unique: false}\n      ]\n    }, this);\n\n  },\n\n  fetch: function(options){\n    options = options || {};\n    var self = this;\n    return $.when(this._isReady).then(function() {\n      if( options.local ){\n        debug('fetching: local orders');\n        var promise = $.Deferred();\n        self.fetchLocalOrders(promise);\n        return promise;\n      } else {\n        debug('fetching: orders');\n        return DualCollection.prototype.fetch.call(self, options);\n      }\n    });\n  },\n\n  fetchLocalOrders: function(promise){\n    var self = this;\n    var onItem = function(item) {\n      if( !item.id ) {\n        self.add(item);\n      }\n    };\n    var onEnd = function() {\n      promise.resolve();\n    };\n    self.indexedDB.iterate(onItem, {\n      index: 'local_id',\n      order: 'ASC',\n      onEnd: onEnd\n    });\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL29yZGVycy9jb2xsZWN0aW9uLmpzP2JkNmYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlDQUF5QyxVQUFVO0FBQ25EO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxvREFBb0Q7QUFDN0QsU0FBUyx3Q0FBd0M7QUFDakQsU0FBUztBQUNUO0FBQ0EsS0FBSzs7QUFFTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYmIgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xudmFyIER1YWxDb2xsZWN0aW9uID0gcmVxdWlyZSgnbGliL2NvbmZpZy9kdWFsLWNvbGxlY3Rpb24nKTtcbnZhciBNb2RlbCA9IHJlcXVpcmUoJy4vbW9kZWwnKTtcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ29yZGVyc0NvbGxlY3Rpb24nKTtcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgSW5kZXhlZERCID0gcmVxdWlyZSgnbGliL2NvbmZpZy9pbmRleGVkZGInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEdWFsQ29sbGVjdGlvbi5leHRlbmQoe1xuICBuYW1lOiAnb3JkZXJzJyxcbiAgbW9kZWw6IE1vZGVsLFxuXG4gIGNvbXBhcmF0b3I6IGZ1bmN0aW9uKCBtb2RlbCApe1xuICAgIGlmKCBtb2RlbC5nZXQoJ2lkJykgPT09IHVuZGVmaW5lZCApIHsgcmV0dXJuIDA7IH1cbiAgICByZXR1cm4gMTtcbiAgfSxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcblxuICAgIHRoaXMuaW5kZXhlZERCID0gbmV3IEluZGV4ZWREQih7XG4gICAgICBzdG9yZU5hbWU6ICdvcmRlcnMnLFxuICAgICAgc3RvcmVQcmVmaXg6ICd3Y19wb3NfJyxcbiAgICAgIGR1YWxTdG9yYWdlOiB0cnVlLFxuICAgICAgZGJWZXJzaW9uOiAxLFxuICAgICAga2V5UGF0aDogJ2xvY2FsX2lkJyxcbiAgICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgICBpbmRleGVzOiBbXG4gICAgICAgIHtuYW1lOiAnbG9jYWxfaWQnLCBrZXlQYXRoOiAnbG9jYWxfaWQnLCB1bmlxdWU6IHRydWV9LFxuICAgICAgICB7bmFtZTogJ2lkJywga2V5UGF0aDogJ2lkJywgdW5pcXVlOiB0cnVlfSxcbiAgICAgICAge25hbWU6ICdzdGF0dXMnLCBrZXlQYXRoOiAnc3RhdHVzJywgdW5pcXVlOiBmYWxzZX1cbiAgICAgIF1cbiAgICB9LCB0aGlzKTtcblxuICB9LFxuXG4gIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuICQud2hlbih0aGlzLl9pc1JlYWR5KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgaWYoIG9wdGlvbnMubG9jYWwgKXtcbiAgICAgICAgZGVidWcoJ2ZldGNoaW5nOiBsb2NhbCBvcmRlcnMnKTtcbiAgICAgICAgdmFyIHByb21pc2UgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgIHNlbGYuZmV0Y2hMb2NhbE9yZGVycyhwcm9taXNlKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWJ1ZygnZmV0Y2hpbmc6IG9yZGVycycpO1xuICAgICAgICByZXR1cm4gRHVhbENvbGxlY3Rpb24ucHJvdG90eXBlLmZldGNoLmNhbGwoc2VsZiwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgZmV0Y2hMb2NhbE9yZGVyczogZnVuY3Rpb24ocHJvbWlzZSl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBvbkl0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICBpZiggIWl0ZW0uaWQgKSB7XG4gICAgICAgIHNlbGYuYWRkKGl0ZW0pO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIG9uRW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuICAgIHNlbGYuaW5kZXhlZERCLml0ZXJhdGUob25JdGVtLCB7XG4gICAgICBpbmRleDogJ2xvY2FsX2lkJyxcbiAgICAgIG9yZGVyOiAnQVNDJyxcbiAgICAgIG9uRW5kOiBvbkVuZFxuICAgIH0pO1xuICB9XG5cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL29yZGVycy9jb2xsZWN0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiMjguanMifQ==");

/***/ },
/* 29 */
/*!***************************************************!*\
  !*** ./assets/js/src/entities/cart/collection.js ***!
  \***************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar Collection = __webpack_require__(/*! lib/config/collection */ 59);\nvar Model = __webpack_require__(/*! ./model */ 60);\nvar Utils = __webpack_require__(/*! lib/utilities/utils */ 36);\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar entitiesChannel = bb.Radio.channel('entities');\nvar IndexedDB = __webpack_require__(/*! lib/config/indexeddb */ 58);\n\nmodule.exports = Collection.extend({\n  model: Model,\n\n  comparator: function( model ){\n    var type = model.get( 'type' );\n    if( type === 'fee' ) { return 2; }\n    if( type === 'shipping' ) { return 1; }\n    return 0;\n  },\n\n  initialize: function () {\n\n    this.indexedDB = new IndexedDB({\n      storeName: 'cart',\n      storePrefix: 'wc_pos_',\n      dbVersion: 1,\n      keyPath: 'local_id',\n      autoIncrement: true,\n      indexes: [\n        {name: 'local_id', keyPath: 'local_id', unique: true},\n        {name: 'order', keyPath: 'order', unique: false},\n        {name: 'type', keyPath: 'type', unique: false}\n      ]\n    }, this);\n\n    this.on( 'add remove change', this.calcTotals );\n  },\n\n  calcTotals: function() {\n    var subtotal,\n      subtotal_tax,\n      total_tax = 0,\n      total;\n\n    // sum up the line totals\n    subtotal      = this.sum('subtotal');\n    subtotal_tax  = this.sum('subtotal_tax');\n    total         = this.sum('total');\n\n    var tax = entitiesChannel.request('get', {\n      type: 'option',\n      name: 'tax'\n    });\n    if( tax && tax.calc_taxes === 'yes' ) {\n      total_tax = this.sum('total_tax');\n    }\n\n    // create totals object\n    var totals = {\n      'total'         : Utils.round( total, 4 ),\n      'subtotal'      : Utils.round( subtotal, 4 ),\n      'subtotal_tax'  : Utils.round( subtotal_tax, 4 ),\n      'cart_discount' : Utils.round( subtotal - total, 4 ),\n      'total_tax'     : Utils.round( total_tax, 4 )\n      //'itemized_tax'  : itemized_tax\n    };\n\n    this.trigger('update:totals', totals);\n  },\n\n  fetchCartItems: function (options) {\n    var options = options || {};\n    if(!options.order_id){\n      return;\n    }\n\n    this.order_id = options.order_id;\n    var onItem = function (item) {\n      if (item.order === this.order_id) {\n        this.add(item);\n      }\n    }.bind(this);\n    var onEnd = function () {};\n    this.indexedDB.iterate(onItem, {\n      index: 'order',\n      order: 'ASC',\n      onEnd: onEnd\n    });\n  },\n\n  // convenience method to sum attributes in collection\n  sum: function(attribute){\n    var array = this.pluck(attribute);\n    return _( array ).reduce( function(memo, num){ return memo + num; }, 0 );\n  },\n\n  /**\n   * add/increase item\n   */\n  addToCart: function(options){\n    options = options || {};\n    var attributes,\n        model;\n\n    if(options.model){\n      attributes = options.model.attributes;\n    } else {\n      attributes = options;\n    }\n\n    if( attributes.id ) {\n      model = this.findWhere({ id: attributes.id });\n    }\n\n    if( model ) {\n      model.quantity('increase');\n    } else {\n      model = this.add(attributes);\n    }\n\n    model.trigger('focus');\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2NhcnQvY29sbGVjdGlvbi5qcz82OTkzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQixVQUFVO0FBQ3BDLCtCQUErQixVQUFVO0FBQ3pDO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsb0RBQW9EO0FBQzdELFNBQVMsK0NBQStDO0FBQ3hELFNBQVM7QUFDVDtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELG1CQUFtQixFQUFFO0FBQ3ZFLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLG9CQUFvQjtBQUNsRDs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYmIgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xudmFyIENvbGxlY3Rpb24gPSByZXF1aXJlKCdsaWIvY29uZmlnL2NvbGxlY3Rpb24nKTtcbnZhciBNb2RlbCA9IHJlcXVpcmUoJy4vbW9kZWwnKTtcbnZhciBVdGlscyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvdXRpbHMnKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgZW50aXRpZXNDaGFubmVsID0gYmIuUmFkaW8uY2hhbm5lbCgnZW50aXRpZXMnKTtcbnZhciBJbmRleGVkREIgPSByZXF1aXJlKCdsaWIvY29uZmlnL2luZGV4ZWRkYicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgbW9kZWw6IE1vZGVsLFxuXG4gIGNvbXBhcmF0b3I6IGZ1bmN0aW9uKCBtb2RlbCApe1xuICAgIHZhciB0eXBlID0gbW9kZWwuZ2V0KCAndHlwZScgKTtcbiAgICBpZiggdHlwZSA9PT0gJ2ZlZScgKSB7IHJldHVybiAyOyB9XG4gICAgaWYoIHR5cGUgPT09ICdzaGlwcGluZycgKSB7IHJldHVybiAxOyB9XG4gICAgcmV0dXJuIDA7XG4gIH0sXG5cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgdGhpcy5pbmRleGVkREIgPSBuZXcgSW5kZXhlZERCKHtcbiAgICAgIHN0b3JlTmFtZTogJ2NhcnQnLFxuICAgICAgc3RvcmVQcmVmaXg6ICd3Y19wb3NfJyxcbiAgICAgIGRiVmVyc2lvbjogMSxcbiAgICAgIGtleVBhdGg6ICdsb2NhbF9pZCcsXG4gICAgICBhdXRvSW5jcmVtZW50OiB0cnVlLFxuICAgICAgaW5kZXhlczogW1xuICAgICAgICB7bmFtZTogJ2xvY2FsX2lkJywga2V5UGF0aDogJ2xvY2FsX2lkJywgdW5pcXVlOiB0cnVlfSxcbiAgICAgICAge25hbWU6ICdvcmRlcicsIGtleVBhdGg6ICdvcmRlcicsIHVuaXF1ZTogZmFsc2V9LFxuICAgICAgICB7bmFtZTogJ3R5cGUnLCBrZXlQYXRoOiAndHlwZScsIHVuaXF1ZTogZmFsc2V9XG4gICAgICBdXG4gICAgfSwgdGhpcyk7XG5cbiAgICB0aGlzLm9uKCAnYWRkIHJlbW92ZSBjaGFuZ2UnLCB0aGlzLmNhbGNUb3RhbHMgKTtcbiAgfSxcblxuICBjYWxjVG90YWxzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3VidG90YWwsXG4gICAgICBzdWJ0b3RhbF90YXgsXG4gICAgICB0b3RhbF90YXggPSAwLFxuICAgICAgdG90YWw7XG5cbiAgICAvLyBzdW0gdXAgdGhlIGxpbmUgdG90YWxzXG4gICAgc3VidG90YWwgICAgICA9IHRoaXMuc3VtKCdzdWJ0b3RhbCcpO1xuICAgIHN1YnRvdGFsX3RheCAgPSB0aGlzLnN1bSgnc3VidG90YWxfdGF4Jyk7XG4gICAgdG90YWwgICAgICAgICA9IHRoaXMuc3VtKCd0b3RhbCcpO1xuXG4gICAgdmFyIHRheCA9IGVudGl0aWVzQ2hhbm5lbC5yZXF1ZXN0KCdnZXQnLCB7XG4gICAgICB0eXBlOiAnb3B0aW9uJyxcbiAgICAgIG5hbWU6ICd0YXgnXG4gICAgfSk7XG4gICAgaWYoIHRheCAmJiB0YXguY2FsY190YXhlcyA9PT0gJ3llcycgKSB7XG4gICAgICB0b3RhbF90YXggPSB0aGlzLnN1bSgndG90YWxfdGF4Jyk7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIHRvdGFscyBvYmplY3RcbiAgICB2YXIgdG90YWxzID0ge1xuICAgICAgJ3RvdGFsJyAgICAgICAgIDogVXRpbHMucm91bmQoIHRvdGFsLCA0ICksXG4gICAgICAnc3VidG90YWwnICAgICAgOiBVdGlscy5yb3VuZCggc3VidG90YWwsIDQgKSxcbiAgICAgICdzdWJ0b3RhbF90YXgnICA6IFV0aWxzLnJvdW5kKCBzdWJ0b3RhbF90YXgsIDQgKSxcbiAgICAgICdjYXJ0X2Rpc2NvdW50JyA6IFV0aWxzLnJvdW5kKCBzdWJ0b3RhbCAtIHRvdGFsLCA0ICksXG4gICAgICAndG90YWxfdGF4JyAgICAgOiBVdGlscy5yb3VuZCggdG90YWxfdGF4LCA0IClcbiAgICAgIC8vJ2l0ZW1pemVkX3RheCcgIDogaXRlbWl6ZWRfdGF4XG4gICAgfTtcblxuICAgIHRoaXMudHJpZ2dlcigndXBkYXRlOnRvdGFscycsIHRvdGFscyk7XG4gIH0sXG5cbiAgZmV0Y2hDYXJ0SXRlbXM6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIGlmKCFvcHRpb25zLm9yZGVyX2lkKXtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm9yZGVyX2lkID0gb3B0aW9ucy5vcmRlcl9pZDtcbiAgICB2YXIgb25JdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIGlmIChpdGVtLm9yZGVyID09PSB0aGlzLm9yZGVyX2lkKSB7XG4gICAgICAgIHRoaXMuYWRkKGl0ZW0pO1xuICAgICAgfVxuICAgIH0uYmluZCh0aGlzKTtcbiAgICB2YXIgb25FbmQgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICB0aGlzLmluZGV4ZWREQi5pdGVyYXRlKG9uSXRlbSwge1xuICAgICAgaW5kZXg6ICdvcmRlcicsXG4gICAgICBvcmRlcjogJ0FTQycsXG4gICAgICBvbkVuZDogb25FbmRcbiAgICB9KTtcbiAgfSxcblxuICAvLyBjb252ZW5pZW5jZSBtZXRob2QgdG8gc3VtIGF0dHJpYnV0ZXMgaW4gY29sbGVjdGlvblxuICBzdW06IGZ1bmN0aW9uKGF0dHJpYnV0ZSl7XG4gICAgdmFyIGFycmF5ID0gdGhpcy5wbHVjayhhdHRyaWJ1dGUpO1xuICAgIHJldHVybiBfKCBhcnJheSApLnJlZHVjZSggZnVuY3Rpb24obWVtbywgbnVtKXsgcmV0dXJuIG1lbW8gKyBudW07IH0sIDAgKTtcbiAgfSxcblxuICAvKipcbiAgICogYWRkL2luY3JlYXNlIGl0ZW1cbiAgICovXG4gIGFkZFRvQ2FydDogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdmFyIGF0dHJpYnV0ZXMsXG4gICAgICAgIG1vZGVsO1xuXG4gICAgaWYob3B0aW9ucy5tb2RlbCl7XG4gICAgICBhdHRyaWJ1dGVzID0gb3B0aW9ucy5tb2RlbC5hdHRyaWJ1dGVzO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdHRyaWJ1dGVzID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBpZiggYXR0cmlidXRlcy5pZCApIHtcbiAgICAgIG1vZGVsID0gdGhpcy5maW5kV2hlcmUoeyBpZDogYXR0cmlidXRlcy5pZCB9KTtcbiAgICB9XG5cbiAgICBpZiggbW9kZWwgKSB7XG4gICAgICBtb2RlbC5xdWFudGl0eSgnaW5jcmVhc2UnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbW9kZWwgPSB0aGlzLmFkZChhdHRyaWJ1dGVzKTtcbiAgICB9XG5cbiAgICBtb2RlbC50cmlnZ2VyKCdmb2N1cycpO1xuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9lbnRpdGllcy9jYXJ0L2NvbGxlY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIyOS5qcyJ9");

/***/ },
/* 30 */
/*!********************************************************!*\
  !*** ./assets/js/src/entities/customers/collection.js ***!
  \********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Collection = __webpack_require__(/*! lib/config/collection */ 59);\nvar Model = __webpack_require__(/*! ./model */ 61);\nvar Radio = __webpack_require__(/*! backbone */ 3).Radio;\n\nmodule.exports = Collection.extend({\n  model: Model,\n\n  initialize: function(){\n    var ajaxurl = Radio.request('entities', 'get', {\n      type: 'option',\n      name: 'ajaxurl'\n    });\n    this.url = ajaxurl + '?action=pos_json_search_customers';\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2N1c3RvbWVycy9jb2xsZWN0aW9uLmpzPzE3ZmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ2xpYi9jb25maWcvY29sbGVjdGlvbicpO1xudmFyIE1vZGVsID0gcmVxdWlyZSgnLi9tb2RlbCcpO1xudmFyIFJhZGlvID0gcmVxdWlyZSgnYmFja2JvbmUnKS5SYWRpbztcblxubW9kdWxlLmV4cG9ydHMgPSBDb2xsZWN0aW9uLmV4dGVuZCh7XG4gIG1vZGVsOiBNb2RlbCxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpe1xuICAgIHZhciBhamF4dXJsID0gUmFkaW8ucmVxdWVzdCgnZW50aXRpZXMnLCAnZ2V0Jywge1xuICAgICAgdHlwZTogJ29wdGlvbicsXG4gICAgICBuYW1lOiAnYWpheHVybCdcbiAgICB9KTtcbiAgICB0aGlzLnVybCA9IGFqYXh1cmwgKyAnP2FjdGlvbj1wb3NfanNvbl9zZWFyY2hfY3VzdG9tZXJzJztcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvZW50aXRpZXMvY3VzdG9tZXJzL2NvbGxlY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAzMFxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIzMC5qcyJ9");

/***/ },
/* 31 */
/*!******************************************************!*\
  !*** ./assets/js/src/entities/coupons/collection.js ***!
  \******************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Collection = __webpack_require__(/*! lib/config/collection */ 59);\nvar Model = __webpack_require__(/*! ./model */ 62);\n\nmodule.exports = Collection.extend({\n  model: Model\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2NvdXBvbnMvY29sbGVjdGlvbi5qcz9lYjBmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ2xpYi9jb25maWcvY29sbGVjdGlvbicpO1xudmFyIE1vZGVsID0gcmVxdWlyZSgnLi9tb2RlbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgbW9kZWw6IE1vZGVsXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9lbnRpdGllcy9jb3Vwb25zL2NvbGxlY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIzMS5qcyJ9");

/***/ },
/* 32 */
/*!**************************************************!*\
  !*** ./assets/js/src/entities/settings/model.js ***!
  \**************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Model = __webpack_require__(/*! lib/config/model */ 63);\nvar bb = __webpack_require__(/*! backbone */ 3);\nvar entitiesChannel = bb.Radio.channel('entities');\nvar _ = __webpack_require__(/*! lodash */ 2);\n\nmodule.exports = Model.extend({\n\n  initialize: function() {\n    this.url = entitiesChannel.request('get', {\n      type: 'option',\n      name: 'ajaxurl'\n    });\n    this._saving = false;\n  },\n\n  sync: function (method, model, options) {\n    var id       = 'id=' + model.get('id'),\n      action   = 'action=wc_pos_admin_settings';\n\n    options.emulateHTTP = true;\n    options.url = model.url + '?' + action + '&' + id;\n\n    var methods = {\n      beforeSend: function(){\n        this.trigger('update:start');\n        this._saving = true;\n      },\n      complete: function() {\n        this.trigger('update:stop');\n        this._saving = false;\n      }\n    };\n\n    if( !this._saving && method === 'update' ) {\n      _.defaults( options, {\n        beforeSend: _.bind(methods.beforeSend, model),\n        complete:\t_.bind(methods.complete, model)\n      });\n    }\n\n    return bb.sync(method, model, options);\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL3NldHRpbmdzL21vZGVsLmpzP2NkOGIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIE1vZGVsID0gcmVxdWlyZSgnbGliL2NvbmZpZy9tb2RlbCcpO1xudmFyIGJiID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciBlbnRpdGllc0NoYW5uZWwgPSBiYi5SYWRpby5jaGFubmVsKCdlbnRpdGllcycpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBNb2RlbC5leHRlbmQoe1xuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudXJsID0gZW50aXRpZXNDaGFubmVsLnJlcXVlc3QoJ2dldCcsIHtcbiAgICAgIHR5cGU6ICdvcHRpb24nLFxuICAgICAgbmFtZTogJ2FqYXh1cmwnXG4gICAgfSk7XG4gICAgdGhpcy5fc2F2aW5nID0gZmFsc2U7XG4gIH0sXG5cbiAgc3luYzogZnVuY3Rpb24gKG1ldGhvZCwgbW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgaWQgICAgICAgPSAnaWQ9JyArIG1vZGVsLmdldCgnaWQnKSxcbiAgICAgIGFjdGlvbiAgID0gJ2FjdGlvbj13Y19wb3NfYWRtaW5fc2V0dGluZ3MnO1xuXG4gICAgb3B0aW9ucy5lbXVsYXRlSFRUUCA9IHRydWU7XG4gICAgb3B0aW9ucy51cmwgPSBtb2RlbC51cmwgKyAnPycgKyBhY3Rpb24gKyAnJicgKyBpZDtcblxuICAgIHZhciBtZXRob2RzID0ge1xuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCd1cGRhdGU6c3RhcnQnKTtcbiAgICAgICAgdGhpcy5fc2F2aW5nID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcigndXBkYXRlOnN0b3AnKTtcbiAgICAgICAgdGhpcy5fc2F2aW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmKCAhdGhpcy5fc2F2aW5nICYmIG1ldGhvZCA9PT0gJ3VwZGF0ZScgKSB7XG4gICAgICBfLmRlZmF1bHRzKCBvcHRpb25zLCB7XG4gICAgICAgIGJlZm9yZVNlbmQ6IF8uYmluZChtZXRob2RzLmJlZm9yZVNlbmQsIG1vZGVsKSxcbiAgICAgICAgY29tcGxldGU6XHRfLmJpbmQobWV0aG9kcy5jb21wbGV0ZSwgbW9kZWwpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYmIuc3luYyhtZXRob2QsIG1vZGVsLCBvcHRpb25zKTtcbiAgfVxuXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9lbnRpdGllcy9zZXR0aW5ncy9tb2RlbC5qc1xuICoqIG1vZHVsZSBpZCA9IDMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjMyLmpzIn0=");

/***/ },
/* 33 */
/*!*******************************************************!*\
  !*** ./assets/js/src/entities/settings/collection.js ***!
  \*******************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Collection = __webpack_require__(/*! lib/config/collection */ 59);\nvar Model = __webpack_require__(/*! ./model */ 32);\nvar $ = __webpack_require__(/*! jquery */ 1);\n\nmodule.exports = Collection.extend({\n  model: Model,\n\n  initialize: function( models, options ) {\n\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL3NldHRpbmdzL2NvbGxlY3Rpb24uanM/OGY3ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIENvbGxlY3Rpb24gPSByZXF1aXJlKCdsaWIvY29uZmlnL2NvbGxlY3Rpb24nKTtcbnZhciBNb2RlbCA9IHJlcXVpcmUoJy4vbW9kZWwnKTtcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ29sbGVjdGlvbi5leHRlbmQoe1xuICBtb2RlbDogTW9kZWwsXG5cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oIG1vZGVscywgb3B0aW9ucyApIHtcblxuICB9XG5cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL3NldHRpbmdzL2NvbGxlY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIzMy5qcyJ9");

/***/ },
/* 34 */
/*!*******************************************************!*\
  !*** ./assets/js/src/entities/gateways/collection.js ***!
  \*******************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Collection = __webpack_require__(/*! lib/config/collection */ 59);\nvar Model = __webpack_require__(/*! ./model */ 64);\nvar $ = __webpack_require__(/*! jquery */ 1);\n\nmodule.exports = Collection.extend({\n  model: Model,\n  initialize: function() {\n  },\n\n  fetch: function(){\n\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2dhdGV3YXlzL2NvbGxlY3Rpb24uanM/MGFiYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ29sbGVjdGlvbiA9IHJlcXVpcmUoJ2xpYi9jb25maWcvY29sbGVjdGlvbicpO1xudmFyIE1vZGVsID0gcmVxdWlyZSgnLi9tb2RlbCcpO1xudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb2xsZWN0aW9uLmV4dGVuZCh7XG4gIG1vZGVsOiBNb2RlbCxcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gIH0sXG5cbiAgZmV0Y2g6IGZ1bmN0aW9uKCl7XG5cbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvZW50aXRpZXMvZ2F0ZXdheXMvY29sbGVjdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDM0XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjM0LmpzIn0=");

/***/ },
/* 35 */
/*!*********************************************************!*\
  !*** ./assets/js/src/lib/config/filtered-collection.js ***!
  \*********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar Parser = __webpack_require__(/*! lib/utilities/parser */ 65);\nvar _ = __webpack_require__(/*! lodash */ 2);\n\n/**\n * Extend the FilteredCollection class\n */\n_.extend( bb.FilteredCollection.prototype, {\n\n  query: function( query, label ){\n    label = label || 'search';\n    var criterion = Parser.parse( query );\n\n    // syphon off special cases\n    this.checkCriterion( criterion );\n    this.filterBy( label,\n      //_.bind( collection.matchMaker, collection, criterion, fields )\n      _.partial( this.matchMaker, criterion )\n    );\n  },\n\n  checkCriterion: function(criterion){\n\n    // special cases for product search\n    if( _(this._superset).has('indexedDB') &&\n      this._superset.indexedDB.dbName === 'wc_pos_products' ){\n\n      if( _(criterion).has('parent') ){\n        this.removeFilter('hideVariations');\n        //criterion.type = ['variation'];\n      } else {\n        this.hideVariations();\n      }\n\n      if( _( criterion ).has( 'barcode' ) ){\n        this.barcodeSearch( criterion.barcode );\n      }\n    }\n  },\n\n  matchMaker: function( criterion, model ){\n\n    return _.all( criterion, function( array, key ) {\n\n      if( key === '' ) {\n        return _.all( array, function( value ) {\n          var attributes = _.pick(model.attributes, (model.fields || 'title'));\n          return _.any( _.values( attributes ), function( attribute ) {\n            return attribute.toLowerCase().indexOf( value ) !== -1;\n          });\n        });\n      }\n\n      // special shorthand for category\n      else if( key === 'cat' ) {\n        return _.any( array, function( value ) {\n          var cats = _( model.get('categories') ).map( function( category ) {\n            return category.toLowerCase();\n          });\n          return _( cats ).contains( value );\n        });\n      }\n\n      // match any attribute\n      else if( _( model.attributes ).has( key ) ) {\n\n        // if attribute is array, return any match\n        if( _( model.get( key ) ).isArray() ) {\n          return _.any( array, function( value ) {\n            var arr = _( model.get( key ) ).map( function( value ) {\n              return value;\n            });\n            return _( arr ).contains( value );\n          });\n        }\n\n        // else match as string\n        else {\n          return _.any( array, function( value ) {\n            return model.get( key ).toString().toLowerCase() === value;\n          });\n        }\n      }\n\n      return false;\n\n    }, this);\n\n  },\n\n  hideVariations: function(){\n    this.filterBy( 'hideVariations', function( model ){\n      return model.get('type') !== 'variation';\n    });\n  }\n\n//barcodeSearch: function( barcode ) {\n//var filteredVariations = [];\n\n//filteredProducts = products.filter( function(product){\n//    if( product.get('type') === 'variable' ) {\n//        _( product.get('variations') ).each( function(variation) {\n//            if( variation.barcode.toLowerCase() === query.toLowerCase() ) {\n//                variation['type'] = 'variation';\n//                variation['title'] = product.get('title');\n//                variation['categories'] = product.get('categories');\n//                var model = new Entities.Product( variation );\n//                filteredVariations.push( model );\n//            }\n//        })\n//    }\n//    return product.get( 'barcode' ).toLowerCase() === query.toLowerCase();\n//}, this);\n//\n//products = filteredProducts.concat(filteredVariations);\n//if(POS.debug) console.log('found ' + products.length + ' products');\n//\n//// add product to cart and reset search field\n//if( products.length === 1 && products[0].get('type') !== 'variable' ){\n//    if(POS.debug) console.log('adding ' +\n// products[0].get('title') +\n// ' to cart');\n//    POS.CartApp.channel.command( 'cart:add', products[0] );\n//    POS.ProductsApp.channel.command( 'clear:filter' );\n//}\n\n//}\n\n});\n\n/**\n * note: FilteredCollection is not a Backbone.Collection\n * which means it lacks some methods, such as extend\n */\nmodule.exports = POS.FilteredCollection = bb.FilteredCollection;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvZmlsdGVyZWQtY29sbGVjdGlvbi5qcz80YjU4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJiID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xudmFyIFBhcnNlciA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvcGFyc2VyJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgRmlsdGVyZWRDb2xsZWN0aW9uIGNsYXNzXG4gKi9cbl8uZXh0ZW5kKCBiYi5GaWx0ZXJlZENvbGxlY3Rpb24ucHJvdG90eXBlLCB7XG5cbiAgcXVlcnk6IGZ1bmN0aW9uKCBxdWVyeSwgbGFiZWwgKXtcbiAgICBsYWJlbCA9IGxhYmVsIHx8ICdzZWFyY2gnO1xuICAgIHZhciBjcml0ZXJpb24gPSBQYXJzZXIucGFyc2UoIHF1ZXJ5ICk7XG5cbiAgICAvLyBzeXBob24gb2ZmIHNwZWNpYWwgY2FzZXNcbiAgICB0aGlzLmNoZWNrQ3JpdGVyaW9uKCBjcml0ZXJpb24gKTtcbiAgICB0aGlzLmZpbHRlckJ5KCBsYWJlbCxcbiAgICAgIC8vXy5iaW5kKCBjb2xsZWN0aW9uLm1hdGNoTWFrZXIsIGNvbGxlY3Rpb24sIGNyaXRlcmlvbiwgZmllbGRzIClcbiAgICAgIF8ucGFydGlhbCggdGhpcy5tYXRjaE1ha2VyLCBjcml0ZXJpb24gKVxuICAgICk7XG4gIH0sXG5cbiAgY2hlY2tDcml0ZXJpb246IGZ1bmN0aW9uKGNyaXRlcmlvbil7XG5cbiAgICAvLyBzcGVjaWFsIGNhc2VzIGZvciBwcm9kdWN0IHNlYXJjaFxuICAgIGlmKCBfKHRoaXMuX3N1cGVyc2V0KS5oYXMoJ2luZGV4ZWREQicpICYmXG4gICAgICB0aGlzLl9zdXBlcnNldC5pbmRleGVkREIuZGJOYW1lID09PSAnd2NfcG9zX3Byb2R1Y3RzJyApe1xuXG4gICAgICBpZiggXyhjcml0ZXJpb24pLmhhcygncGFyZW50JykgKXtcbiAgICAgICAgdGhpcy5yZW1vdmVGaWx0ZXIoJ2hpZGVWYXJpYXRpb25zJyk7XG4gICAgICAgIC8vY3JpdGVyaW9uLnR5cGUgPSBbJ3ZhcmlhdGlvbiddO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oaWRlVmFyaWF0aW9ucygpO1xuICAgICAgfVxuXG4gICAgICBpZiggXyggY3JpdGVyaW9uICkuaGFzKCAnYmFyY29kZScgKSApe1xuICAgICAgICB0aGlzLmJhcmNvZGVTZWFyY2goIGNyaXRlcmlvbi5iYXJjb2RlICk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG1hdGNoTWFrZXI6IGZ1bmN0aW9uKCBjcml0ZXJpb24sIG1vZGVsICl7XG5cbiAgICByZXR1cm4gXy5hbGwoIGNyaXRlcmlvbiwgZnVuY3Rpb24oIGFycmF5LCBrZXkgKSB7XG5cbiAgICAgIGlmKCBrZXkgPT09ICcnICkge1xuICAgICAgICByZXR1cm4gXy5hbGwoIGFycmF5LCBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBfLnBpY2sobW9kZWwuYXR0cmlidXRlcywgKG1vZGVsLmZpZWxkcyB8fCAndGl0bGUnKSk7XG4gICAgICAgICAgcmV0dXJuIF8uYW55KCBfLnZhbHVlcyggYXR0cmlidXRlcyApLCBmdW5jdGlvbiggYXR0cmlidXRlICkge1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIHZhbHVlICkgIT09IC0xO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gc3BlY2lhbCBzaG9ydGhhbmQgZm9yIGNhdGVnb3J5XG4gICAgICBlbHNlIGlmKCBrZXkgPT09ICdjYXQnICkge1xuICAgICAgICByZXR1cm4gXy5hbnkoIGFycmF5LCBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgICAgdmFyIGNhdHMgPSBfKCBtb2RlbC5nZXQoJ2NhdGVnb3JpZXMnKSApLm1hcCggZnVuY3Rpb24oIGNhdGVnb3J5ICkge1xuICAgICAgICAgICAgcmV0dXJuIGNhdGVnb3J5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIF8oIGNhdHMgKS5jb250YWlucyggdmFsdWUgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIG1hdGNoIGFueSBhdHRyaWJ1dGVcbiAgICAgIGVsc2UgaWYoIF8oIG1vZGVsLmF0dHJpYnV0ZXMgKS5oYXMoIGtleSApICkge1xuXG4gICAgICAgIC8vIGlmIGF0dHJpYnV0ZSBpcyBhcnJheSwgcmV0dXJuIGFueSBtYXRjaFxuICAgICAgICBpZiggXyggbW9kZWwuZ2V0KCBrZXkgKSApLmlzQXJyYXkoKSApIHtcbiAgICAgICAgICByZXR1cm4gXy5hbnkoIGFycmF5LCBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgICAgICB2YXIgYXJyID0gXyggbW9kZWwuZ2V0KCBrZXkgKSApLm1hcCggZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBfKCBhcnIgKS5jb250YWlucyggdmFsdWUgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVsc2UgbWF0Y2ggYXMgc3RyaW5nXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybiBfLmFueSggYXJyYXksIGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgICAgIHJldHVybiBtb2RlbC5nZXQoIGtleSApLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA9PT0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgfSwgdGhpcyk7XG5cbiAgfSxcblxuICBoaWRlVmFyaWF0aW9uczogZnVuY3Rpb24oKXtcbiAgICB0aGlzLmZpbHRlckJ5KCAnaGlkZVZhcmlhdGlvbnMnLCBmdW5jdGlvbiggbW9kZWwgKXtcbiAgICAgIHJldHVybiBtb2RlbC5nZXQoJ3R5cGUnKSAhPT0gJ3ZhcmlhdGlvbic7XG4gICAgfSk7XG4gIH1cblxuLy9iYXJjb2RlU2VhcmNoOiBmdW5jdGlvbiggYmFyY29kZSApIHtcbi8vdmFyIGZpbHRlcmVkVmFyaWF0aW9ucyA9IFtdO1xuXG4vL2ZpbHRlcmVkUHJvZHVjdHMgPSBwcm9kdWN0cy5maWx0ZXIoIGZ1bmN0aW9uKHByb2R1Y3Qpe1xuLy8gICAgaWYoIHByb2R1Y3QuZ2V0KCd0eXBlJykgPT09ICd2YXJpYWJsZScgKSB7XG4vLyAgICAgICAgXyggcHJvZHVjdC5nZXQoJ3ZhcmlhdGlvbnMnKSApLmVhY2goIGZ1bmN0aW9uKHZhcmlhdGlvbikge1xuLy8gICAgICAgICAgICBpZiggdmFyaWF0aW9uLmJhcmNvZGUudG9Mb3dlckNhc2UoKSA9PT0gcXVlcnkudG9Mb3dlckNhc2UoKSApIHtcbi8vICAgICAgICAgICAgICAgIHZhcmlhdGlvblsndHlwZSddID0gJ3ZhcmlhdGlvbic7XG4vLyAgICAgICAgICAgICAgICB2YXJpYXRpb25bJ3RpdGxlJ10gPSBwcm9kdWN0LmdldCgndGl0bGUnKTtcbi8vICAgICAgICAgICAgICAgIHZhcmlhdGlvblsnY2F0ZWdvcmllcyddID0gcHJvZHVjdC5nZXQoJ2NhdGVnb3JpZXMnKTtcbi8vICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IG5ldyBFbnRpdGllcy5Qcm9kdWN0KCB2YXJpYXRpb24gKTtcbi8vICAgICAgICAgICAgICAgIGZpbHRlcmVkVmFyaWF0aW9ucy5wdXNoKCBtb2RlbCApO1xuLy8gICAgICAgICAgICB9XG4vLyAgICAgICAgfSlcbi8vICAgIH1cbi8vICAgIHJldHVybiBwcm9kdWN0LmdldCggJ2JhcmNvZGUnICkudG9Mb3dlckNhc2UoKSA9PT0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbi8vfSwgdGhpcyk7XG4vL1xuLy9wcm9kdWN0cyA9IGZpbHRlcmVkUHJvZHVjdHMuY29uY2F0KGZpbHRlcmVkVmFyaWF0aW9ucyk7XG4vL2lmKFBPUy5kZWJ1ZykgY29uc29sZS5sb2coJ2ZvdW5kICcgKyBwcm9kdWN0cy5sZW5ndGggKyAnIHByb2R1Y3RzJyk7XG4vL1xuLy8vLyBhZGQgcHJvZHVjdCB0byBjYXJ0IGFuZCByZXNldCBzZWFyY2ggZmllbGRcbi8vaWYoIHByb2R1Y3RzLmxlbmd0aCA9PT0gMSAmJiBwcm9kdWN0c1swXS5nZXQoJ3R5cGUnKSAhPT0gJ3ZhcmlhYmxlJyApe1xuLy8gICAgaWYoUE9TLmRlYnVnKSBjb25zb2xlLmxvZygnYWRkaW5nICcgK1xuLy8gcHJvZHVjdHNbMF0uZ2V0KCd0aXRsZScpICtcbi8vICcgdG8gY2FydCcpO1xuLy8gICAgUE9TLkNhcnRBcHAuY2hhbm5lbC5jb21tYW5kKCAnY2FydDphZGQnLCBwcm9kdWN0c1swXSApO1xuLy8gICAgUE9TLlByb2R1Y3RzQXBwLmNoYW5uZWwuY29tbWFuZCggJ2NsZWFyOmZpbHRlcicgKTtcbi8vfVxuXG4vL31cblxufSk7XG5cbi8qKlxuICogbm90ZTogRmlsdGVyZWRDb2xsZWN0aW9uIGlzIG5vdCBhIEJhY2tib25lLkNvbGxlY3Rpb25cbiAqIHdoaWNoIG1lYW5zIGl0IGxhY2tzIHNvbWUgbWV0aG9kcywgc3VjaCBhcyBleHRlbmRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBQT1MuRmlsdGVyZWRDb2xsZWN0aW9uID0gYmIuRmlsdGVyZWRDb2xsZWN0aW9uO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvZmlsdGVyZWQtY29sbGVjdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjM1LmpzIn0=");

/***/ },
/* 36 */
/*!**********************************************!*\
  !*** ./assets/js/src/lib/utilities/utils.js ***!
  \**********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var accounting = __webpack_require__(/*! accounting */ 19);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.Utils = {\n\n  /**\n   * Number and Currency helpers\n   */\n  round: function( num, precision ) {\n    if( precision === undefined ) {\n      precision = accounting.settings.number.precision;\n    }\n    return parseFloat( accounting.toFixed( num, precision ) );\n  },\n\n  unformat: function( num ) {\n    return accounting.unformat( num, accounting.settings.number.decimal );\n  },\n\n  formatNumber: function( num, precision ) {\n    if( precision === undefined ) {\n      precision = accounting.settings.number.precision;\n    }\n    if( precision === 'auto' ) {\n      precision = this.decimalPlaces(num);\n    }\n    return accounting.formatNumber(num, precision);\n  },\n\n  formatMoney: function( num, precision ) {\n    if( precision === undefined ) {\n      precision = accounting.settings.currency.precision;\n    }\n    if( precision === 'auto' ) {\n      precision = this.decimalPlaces(num);\n    }\n    // round the number to even\n    num = this.round(num, precision);\n    return accounting.formatMoney(num);\n  },\n\n  isPositiveInteger: function( num, allowZero ){\n    var n = ~~Number(num);\n    if(allowZero) {\n      return String(n) === num && n >= 0;\n    } else {\n      return String(n) === num && n > 0;\n    }\n  },\n\n  decimalPlaces: function(num){\n    return ((+num).toFixed(4)).replace(/^-?\\d*\\.?|0+$/g, '').length;\n  },\n\n  /**\n   * Parse error messages from the server\n   */\n  parseErrorResponse: function( jqXHR ){\n    var resp = jqXHR.responseJSON;\n    if( resp.errors ){\n      return resp.errors[0].message;\n    }\n\n    return jqXHR.responseText;\n  }\n\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi91dGlsaXRpZXMvdXRpbHMuanM/NjUyYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYWNjb3VudGluZyA9IHJlcXVpcmUoJ2FjY291bnRpbmcnKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBPUy5VdGlscyA9IHtcblxuICAvKipcbiAgICogTnVtYmVyIGFuZCBDdXJyZW5jeSBoZWxwZXJzXG4gICAqL1xuICByb3VuZDogZnVuY3Rpb24oIG51bSwgcHJlY2lzaW9uICkge1xuICAgIGlmKCBwcmVjaXNpb24gPT09IHVuZGVmaW5lZCApIHtcbiAgICAgIHByZWNpc2lvbiA9IGFjY291bnRpbmcuc2V0dGluZ3MubnVtYmVyLnByZWNpc2lvbjtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoIGFjY291bnRpbmcudG9GaXhlZCggbnVtLCBwcmVjaXNpb24gKSApO1xuICB9LFxuXG4gIHVuZm9ybWF0OiBmdW5jdGlvbiggbnVtICkge1xuICAgIHJldHVybiBhY2NvdW50aW5nLnVuZm9ybWF0KCBudW0sIGFjY291bnRpbmcuc2V0dGluZ3MubnVtYmVyLmRlY2ltYWwgKTtcbiAgfSxcblxuICBmb3JtYXROdW1iZXI6IGZ1bmN0aW9uKCBudW0sIHByZWNpc2lvbiApIHtcbiAgICBpZiggcHJlY2lzaW9uID09PSB1bmRlZmluZWQgKSB7XG4gICAgICBwcmVjaXNpb24gPSBhY2NvdW50aW5nLnNldHRpbmdzLm51bWJlci5wcmVjaXNpb247XG4gICAgfVxuICAgIGlmKCBwcmVjaXNpb24gPT09ICdhdXRvJyApIHtcbiAgICAgIHByZWNpc2lvbiA9IHRoaXMuZGVjaW1hbFBsYWNlcyhudW0pO1xuICAgIH1cbiAgICByZXR1cm4gYWNjb3VudGluZy5mb3JtYXROdW1iZXIobnVtLCBwcmVjaXNpb24pO1xuICB9LFxuXG4gIGZvcm1hdE1vbmV5OiBmdW5jdGlvbiggbnVtLCBwcmVjaXNpb24gKSB7XG4gICAgaWYoIHByZWNpc2lvbiA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgcHJlY2lzaW9uID0gYWNjb3VudGluZy5zZXR0aW5ncy5jdXJyZW5jeS5wcmVjaXNpb247XG4gICAgfVxuICAgIGlmKCBwcmVjaXNpb24gPT09ICdhdXRvJyApIHtcbiAgICAgIHByZWNpc2lvbiA9IHRoaXMuZGVjaW1hbFBsYWNlcyhudW0pO1xuICAgIH1cbiAgICAvLyByb3VuZCB0aGUgbnVtYmVyIHRvIGV2ZW5cbiAgICBudW0gPSB0aGlzLnJvdW5kKG51bSwgcHJlY2lzaW9uKTtcbiAgICByZXR1cm4gYWNjb3VudGluZy5mb3JtYXRNb25leShudW0pO1xuICB9LFxuXG4gIGlzUG9zaXRpdmVJbnRlZ2VyOiBmdW5jdGlvbiggbnVtLCBhbGxvd1plcm8gKXtcbiAgICB2YXIgbiA9IH5+TnVtYmVyKG51bSk7XG4gICAgaWYoYWxsb3daZXJvKSB7XG4gICAgICByZXR1cm4gU3RyaW5nKG4pID09PSBudW0gJiYgbiA+PSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gU3RyaW5nKG4pID09PSBudW0gJiYgbiA+IDA7XG4gICAgfVxuICB9LFxuXG4gIGRlY2ltYWxQbGFjZXM6IGZ1bmN0aW9uKG51bSl7XG4gICAgcmV0dXJuICgoK251bSkudG9GaXhlZCg0KSkucmVwbGFjZSgvXi0/XFxkKlxcLj98MCskL2csICcnKS5sZW5ndGg7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBhcnNlIGVycm9yIG1lc3NhZ2VzIGZyb20gdGhlIHNlcnZlclxuICAgKi9cbiAgcGFyc2VFcnJvclJlc3BvbnNlOiBmdW5jdGlvbigganFYSFIgKXtcbiAgICB2YXIgcmVzcCA9IGpxWEhSLnJlc3BvbnNlSlNPTjtcbiAgICBpZiggcmVzcC5lcnJvcnMgKXtcbiAgICAgIHJldHVybiByZXNwLmVycm9yc1swXS5tZXNzYWdlO1xuICAgIH1cblxuICAgIHJldHVybiBqcVhIUi5yZXNwb25zZVRleHQ7XG4gIH1cblxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvdXRpbGl0aWVzL3V0aWxzLmpzXG4gKiogbW9kdWxlIGlkID0gMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiMzYuanMifQ==");

/***/ },
/* 37 */
/*!*************************************************!*\
  !*** ./assets/js/src/lib/config/application.js ***!
  \*************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.Application = bb.Marionette.Application.extend({\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvYXBwbGljYXRpb24uanM/ZmVhYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBOztBQUVBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYmIgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xudmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUE9TLkFwcGxpY2F0aW9uID0gYmIuTWFyaW9uZXR0ZS5BcHBsaWNhdGlvbi5leHRlbmQoe1xuXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29uZmlnL2FwcGxpY2F0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gMzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiMzcuanMifQ==");

/***/ },
/* 38 */,
/* 39 */
/*!***********************************************************!*\
  !*** ./assets/js/src/lib/components/modal/layout-view.js ***!
  \***********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var LayoutView = __webpack_require__(/*! lib/config/layout-view */ 66);\n//var _ = require('lodash');\nvar $ = __webpack_require__(/*! jquery */ 1);\nvar hbs = __webpack_require__(/*! handlebars */ 18);\nvar Radio = __webpack_require__(/*! backbone */ 3).Radio;\n\nmodule.exports = LayoutView.extend({\n  className: 'modal',\n  attributes: {\n    'tabindex' : -1,\n    'role' : 'dialog'\n  },\n\n  regions: {\n    content: '.modal-body'\n  },\n\n  events: {\n    'click [data-action=\"close\"]' : function(e){\n      e.preventDefault();\n      Radio.request('modal', 'close');\n    }\n    //'click .action-save'    : 'saving',\n    //'click .modal-footer a' : 'onButtonClick'\n  },\n\n  initialize: function () {\n    this.template = hbs.compile( $('#tmpl-modal').html() );\n    this.$el.modal({ show: false, backdrop: 'static' });\n  },\n\n  //onButtonClick: function(e) {\n  //  e.preventDefault();\n  //  this.content.currentView.trigger('button:clicked', e);\n  //},\n\n  triggers: {\n    'show.bs.modal'   : { preventDefault: false, event: 'before:open' },\n    'shown.bs.modal'  : { preventDefault: false, event: 'open' },\n    'hide.bs.modal'   : { preventDefault: false, event: 'before:close' },\n    'hidden.bs.modal' : { preventDefault: false, event: 'close' }\n  },\n\n  open: function(view){\n    var deferred = $.Deferred();\n    this.once('open', deferred.resolve);\n    this.content.show(view);\n    this.$el.modal('show');\n    return deferred;\n  },\n\n  close: function() {\n    var deferred = $.Deferred();\n    this.once('close', function() {\n      this.content.empty();\n      deferred.resolve();\n    });\n    this.$el.modal('hide');\n    return deferred;\n  }\n  //\n  //openModal: function (options) {\n  //  options = options || {};\n  //  this.once('after:show', options.callback); // 'after:show' = 'show' ??\n  //  this.setupModal(options);\n  //  this.$el.modal('show');\n  //},\n  //\n  //destroyModal: function (options) {\n  //  options = options || {};\n  //  this.once('hide', options.callback);\n  //  this.once('hide', this.teardownModal);\n  //  this.$el.modal('hide');\n  //},\n  //\n  //setupModal: function (options) {\n  //  options = options || {};\n  //  if (this.isShown) {\n  //    this.teardownModal();\n  //  }\n  //\n  //  // pass on attributes\n  //  if( options.attributes ){\n  //\n  //    // modal class\n  //    if( options.attributes.className ){\n  //      this.$('.modal-dialog').addClass( options.attributes.className );\n  //    }\n  //\n  //    // modal title\n  //    if( options.attributes.title ) {\n  //      this.$('.modal-header h1').html( options.attributes.title );\n  //    }\n  //  }\n  //\n  //  this.content.show(options.view);\n  //  this.isShown = true;\n  //\n  //  if( options.view.model ) {\n  //    this.listenTo(options.view.model, 'save:status', this.updateSaveStatus);\n  //  }\n  //\n  //},\n  //\n  //teardownModal: function () {\n  //  if (!this.isShown) {\n  //    return;\n  //  }\n  //  this.content.empty();\n  //  this.render(); // re-render to reset attributes\n  //  this.isShown = false;\n  //},\n  //\n  //saving: function(){\n  //  this.$('.modal-footer .action-save')\n  //      .addClass( 'disabled' );\n  //\n  //  this.$('.modal-footer p.response')\n  //      .removeClass('success error')\n  //      .html( '<i class=\"icon icon-spinner\"></i>' );\n  //},\n  //\n  //updateSaveStatus: function( status, message ){\n  //  if( _.isUndefined(message) ){\n  //    message = this.$('.modal-footer p.response').data(status);\n  //  }\n  //\n  //  this.$('.modal-footer p.response')\n  //      .addClass(status)\n  //      .html( '<i class=\"icon icon-' + status + '\"></i> ' + message );\n  //\n  //  this.$('.modal-footer .action-save')\n  //      .removeClass( 'disabled' );\n  //}\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL21vZGFsL2xheW91dC12aWV3LmpzPzg3M2IiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLG9CQUFvQixrQ0FBa0M7QUFDdEQsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EseUJBQXlCLDhDQUE4QztBQUN2RSx5QkFBeUIsdUNBQXVDO0FBQ2hFLHlCQUF5QiwrQ0FBK0M7QUFDeEUseUJBQXlCO0FBQ3pCLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIExheW91dFZpZXcgPSByZXF1aXJlKCdsaWIvY29uZmlnL2xheW91dC12aWV3Jyk7XG4vL3ZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xudmFyIGhicyA9IHJlcXVpcmUoJ2hhbmRsZWJhcnMnKTtcbnZhciBSYWRpbyA9IHJlcXVpcmUoJ2JhY2tib25lJykuUmFkaW87XG5cbm1vZHVsZS5leHBvcnRzID0gTGF5b3V0Vmlldy5leHRlbmQoe1xuICBjbGFzc05hbWU6ICdtb2RhbCcsXG4gIGF0dHJpYnV0ZXM6IHtcbiAgICAndGFiaW5kZXgnIDogLTEsXG4gICAgJ3JvbGUnIDogJ2RpYWxvZydcbiAgfSxcblxuICByZWdpb25zOiB7XG4gICAgY29udGVudDogJy5tb2RhbC1ib2R5J1xuICB9LFxuXG4gIGV2ZW50czoge1xuICAgICdjbGljayBbZGF0YS1hY3Rpb249XCJjbG9zZVwiXScgOiBmdW5jdGlvbihlKXtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIFJhZGlvLnJlcXVlc3QoJ21vZGFsJywgJ2Nsb3NlJyk7XG4gICAgfVxuICAgIC8vJ2NsaWNrIC5hY3Rpb24tc2F2ZScgICAgOiAnc2F2aW5nJyxcbiAgICAvLydjbGljayAubW9kYWwtZm9vdGVyIGEnIDogJ29uQnV0dG9uQ2xpY2snXG4gIH0sXG5cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudGVtcGxhdGUgPSBoYnMuY29tcGlsZSggJCgnI3RtcGwtbW9kYWwnKS5odG1sKCkgKTtcbiAgICB0aGlzLiRlbC5tb2RhbCh7IHNob3c6IGZhbHNlLCBiYWNrZHJvcDogJ3N0YXRpYycgfSk7XG4gIH0sXG5cbiAgLy9vbkJ1dHRvbkNsaWNrOiBmdW5jdGlvbihlKSB7XG4gIC8vICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIC8vICB0aGlzLmNvbnRlbnQuY3VycmVudFZpZXcudHJpZ2dlcignYnV0dG9uOmNsaWNrZWQnLCBlKTtcbiAgLy99LFxuXG4gIHRyaWdnZXJzOiB7XG4gICAgJ3Nob3cuYnMubW9kYWwnICAgOiB7IHByZXZlbnREZWZhdWx0OiBmYWxzZSwgZXZlbnQ6ICdiZWZvcmU6b3BlbicgfSxcbiAgICAnc2hvd24uYnMubW9kYWwnICA6IHsgcHJldmVudERlZmF1bHQ6IGZhbHNlLCBldmVudDogJ29wZW4nIH0sXG4gICAgJ2hpZGUuYnMubW9kYWwnICAgOiB7IHByZXZlbnREZWZhdWx0OiBmYWxzZSwgZXZlbnQ6ICdiZWZvcmU6Y2xvc2UnIH0sXG4gICAgJ2hpZGRlbi5icy5tb2RhbCcgOiB7IHByZXZlbnREZWZhdWx0OiBmYWxzZSwgZXZlbnQ6ICdjbG9zZScgfVxuICB9LFxuXG4gIG9wZW46IGZ1bmN0aW9uKHZpZXcpe1xuICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICB0aGlzLm9uY2UoJ29wZW4nLCBkZWZlcnJlZC5yZXNvbHZlKTtcbiAgICB0aGlzLmNvbnRlbnQuc2hvdyh2aWV3KTtcbiAgICB0aGlzLiRlbC5tb2RhbCgnc2hvdycpO1xuICAgIHJldHVybiBkZWZlcnJlZDtcbiAgfSxcblxuICBjbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgIHRoaXMub25jZSgnY2xvc2UnLCBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuY29udGVudC5lbXB0eSgpO1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuJGVsLm1vZGFsKCdoaWRlJyk7XG4gICAgcmV0dXJuIGRlZmVycmVkO1xuICB9XG4gIC8vXG4gIC8vb3Blbk1vZGFsOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAvLyAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIC8vICB0aGlzLm9uY2UoJ2FmdGVyOnNob3cnLCBvcHRpb25zLmNhbGxiYWNrKTsgLy8gJ2FmdGVyOnNob3cnID0gJ3Nob3cnID8/XG4gIC8vICB0aGlzLnNldHVwTW9kYWwob3B0aW9ucyk7XG4gIC8vICB0aGlzLiRlbC5tb2RhbCgnc2hvdycpO1xuICAvL30sXG4gIC8vXG4gIC8vZGVzdHJveU1vZGFsOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAvLyAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIC8vICB0aGlzLm9uY2UoJ2hpZGUnLCBvcHRpb25zLmNhbGxiYWNrKTtcbiAgLy8gIHRoaXMub25jZSgnaGlkZScsIHRoaXMudGVhcmRvd25Nb2RhbCk7XG4gIC8vICB0aGlzLiRlbC5tb2RhbCgnaGlkZScpO1xuICAvL30sXG4gIC8vXG4gIC8vc2V0dXBNb2RhbDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgLy8gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAvLyAgaWYgKHRoaXMuaXNTaG93bikge1xuICAvLyAgICB0aGlzLnRlYXJkb3duTW9kYWwoKTtcbiAgLy8gIH1cbiAgLy9cbiAgLy8gIC8vIHBhc3Mgb24gYXR0cmlidXRlc1xuICAvLyAgaWYoIG9wdGlvbnMuYXR0cmlidXRlcyApe1xuICAvL1xuICAvLyAgICAvLyBtb2RhbCBjbGFzc1xuICAvLyAgICBpZiggb3B0aW9ucy5hdHRyaWJ1dGVzLmNsYXNzTmFtZSApe1xuICAvLyAgICAgIHRoaXMuJCgnLm1vZGFsLWRpYWxvZycpLmFkZENsYXNzKCBvcHRpb25zLmF0dHJpYnV0ZXMuY2xhc3NOYW1lICk7XG4gIC8vICAgIH1cbiAgLy9cbiAgLy8gICAgLy8gbW9kYWwgdGl0bGVcbiAgLy8gICAgaWYoIG9wdGlvbnMuYXR0cmlidXRlcy50aXRsZSApIHtcbiAgLy8gICAgICB0aGlzLiQoJy5tb2RhbC1oZWFkZXIgaDEnKS5odG1sKCBvcHRpb25zLmF0dHJpYnV0ZXMudGl0bGUgKTtcbiAgLy8gICAgfVxuICAvLyAgfVxuICAvL1xuICAvLyAgdGhpcy5jb250ZW50LnNob3cob3B0aW9ucy52aWV3KTtcbiAgLy8gIHRoaXMuaXNTaG93biA9IHRydWU7XG4gIC8vXG4gIC8vICBpZiggb3B0aW9ucy52aWV3Lm1vZGVsICkge1xuICAvLyAgICB0aGlzLmxpc3RlblRvKG9wdGlvbnMudmlldy5tb2RlbCwgJ3NhdmU6c3RhdHVzJywgdGhpcy51cGRhdGVTYXZlU3RhdHVzKTtcbiAgLy8gIH1cbiAgLy9cbiAgLy99LFxuICAvL1xuICAvL3RlYXJkb3duTW9kYWw6IGZ1bmN0aW9uICgpIHtcbiAgLy8gIGlmICghdGhpcy5pc1Nob3duKSB7XG4gIC8vICAgIHJldHVybjtcbiAgLy8gIH1cbiAgLy8gIHRoaXMuY29udGVudC5lbXB0eSgpO1xuICAvLyAgdGhpcy5yZW5kZXIoKTsgLy8gcmUtcmVuZGVyIHRvIHJlc2V0IGF0dHJpYnV0ZXNcbiAgLy8gIHRoaXMuaXNTaG93biA9IGZhbHNlO1xuICAvL30sXG4gIC8vXG4gIC8vc2F2aW5nOiBmdW5jdGlvbigpe1xuICAvLyAgdGhpcy4kKCcubW9kYWwtZm9vdGVyIC5hY3Rpb24tc2F2ZScpXG4gIC8vICAgICAgLmFkZENsYXNzKCAnZGlzYWJsZWQnICk7XG4gIC8vXG4gIC8vICB0aGlzLiQoJy5tb2RhbC1mb290ZXIgcC5yZXNwb25zZScpXG4gIC8vICAgICAgLnJlbW92ZUNsYXNzKCdzdWNjZXNzIGVycm9yJylcbiAgLy8gICAgICAuaHRtbCggJzxpIGNsYXNzPVwiaWNvbiBpY29uLXNwaW5uZXJcIj48L2k+JyApO1xuICAvL30sXG4gIC8vXG4gIC8vdXBkYXRlU2F2ZVN0YXR1czogZnVuY3Rpb24oIHN0YXR1cywgbWVzc2FnZSApe1xuICAvLyAgaWYoIF8uaXNVbmRlZmluZWQobWVzc2FnZSkgKXtcbiAgLy8gICAgbWVzc2FnZSA9IHRoaXMuJCgnLm1vZGFsLWZvb3RlciBwLnJlc3BvbnNlJykuZGF0YShzdGF0dXMpO1xuICAvLyAgfVxuICAvL1xuICAvLyAgdGhpcy4kKCcubW9kYWwtZm9vdGVyIHAucmVzcG9uc2UnKVxuICAvLyAgICAgIC5hZGRDbGFzcyhzdGF0dXMpXG4gIC8vICAgICAgLmh0bWwoICc8aSBjbGFzcz1cImljb24gaWNvbi0nICsgc3RhdHVzICsgJ1wiPjwvaT4gJyArIG1lc3NhZ2UgKTtcbiAgLy9cbiAgLy8gIHRoaXMuJCgnLm1vZGFsLWZvb3RlciAuYWN0aW9uLXNhdmUnKVxuICAvLyAgICAgIC5yZW1vdmVDbGFzcyggJ2Rpc2FibGVkJyApO1xuICAvL31cblxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvbGliL2NvbXBvbmVudHMvbW9kYWwvbGF5b3V0LXZpZXcuanNcbiAqKiBtb2R1bGUgaWQgPSAzOVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIzOS5qcyJ9");

/***/ },
/* 40 */,
/* 41 */
/*!********************************************!*\
  !*** ./assets/js/src/lib/config/router.js ***!
  \********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar $ = __webpack_require__(/*! jquery */ 1);\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar Route = __webpack_require__(/*! ./route */ 70);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.Router = bb.Marionette.AppRouter.extend({\n  constructor: function() {\n    this.channel = bb.Radio.channel('router');\n    this.on('all', this._onRouterEvent);\n    this.listenTo(bb.history, 'route', this._onHistoryRoute);\n    bb.Marionette.AppRouter.apply(this, arguments);\n  },\n\n  _onRouterEvent: function(name) {\n    var args = _.toArray(arguments).slice(1);\n    this.channel.trigger.apply(this.channel, [name, this].concat(args));\n  },\n\n  _onHistoryRoute: function(router) {\n    if (this === router) {\n      this.active = true;\n    } else {\n      this.active = false;\n    }\n  },\n\n  execute: function(callback, args) {\n    var self = this;\n\n    if (!this.active) {\n      this.triggerMethod.apply(this, ['before:enter'].concat(args));\n    }\n\n    this.triggerMethod.apply(this, ['before:route'].concat(args));\n\n    $.when(this._execute(callback, args)).then(function() {\n      if (!self.active) {\n        self.triggerMethod.apply(self, ['enter'].concat(args));\n      }\n\n      self.triggerMethod.apply(self, ['route'].concat(args));\n    });\n  },\n\n  _execute: function(callback, args) {\n    var route = callback.apply(this, args);\n\n    if (route instanceof Route) {\n      route.router = this;\n      return route.enter(args);\n    }\n  },\n\n  triggerMethod: bb.Marionette.triggerMethod\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvcm91dGVyLmpzPzcwN2UiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJiID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIFJvdXRlID0gcmVxdWlyZSgnLi9yb3V0ZScpO1xudmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUE9TLlJvdXRlciA9IGJiLk1hcmlvbmV0dGUuQXBwUm91dGVyLmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNoYW5uZWwgPSBiYi5SYWRpby5jaGFubmVsKCdyb3V0ZXInKTtcbiAgICB0aGlzLm9uKCdhbGwnLCB0aGlzLl9vblJvdXRlckV2ZW50KTtcbiAgICB0aGlzLmxpc3RlblRvKGJiLmhpc3RvcnksICdyb3V0ZScsIHRoaXMuX29uSGlzdG9yeVJvdXRlKTtcbiAgICBiYi5NYXJpb25ldHRlLkFwcFJvdXRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9LFxuXG4gIF9vblJvdXRlckV2ZW50OiBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBfLnRvQXJyYXkoYXJndW1lbnRzKS5zbGljZSgxKTtcbiAgICB0aGlzLmNoYW5uZWwudHJpZ2dlci5hcHBseSh0aGlzLmNoYW5uZWwsIFtuYW1lLCB0aGlzXS5jb25jYXQoYXJncykpO1xuICB9LFxuXG4gIF9vbkhpc3RvcnlSb3V0ZTogZnVuY3Rpb24ocm91dGVyKSB7XG4gICAgaWYgKHRoaXMgPT09IHJvdXRlcikge1xuICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICBleGVjdXRlOiBmdW5jdGlvbihjYWxsYmFjaywgYXJncykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGlmICghdGhpcy5hY3RpdmUpIHtcbiAgICAgIHRoaXMudHJpZ2dlck1ldGhvZC5hcHBseSh0aGlzLCBbJ2JlZm9yZTplbnRlciddLmNvbmNhdChhcmdzKSk7XG4gICAgfVxuXG4gICAgdGhpcy50cmlnZ2VyTWV0aG9kLmFwcGx5KHRoaXMsIFsnYmVmb3JlOnJvdXRlJ10uY29uY2F0KGFyZ3MpKTtcblxuICAgICQud2hlbih0aGlzLl9leGVjdXRlKGNhbGxiYWNrLCBhcmdzKSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIGlmICghc2VsZi5hY3RpdmUpIHtcbiAgICAgICAgc2VsZi50cmlnZ2VyTWV0aG9kLmFwcGx5KHNlbGYsIFsnZW50ZXInXS5jb25jYXQoYXJncykpO1xuICAgICAgfVxuXG4gICAgICBzZWxmLnRyaWdnZXJNZXRob2QuYXBwbHkoc2VsZiwgWydyb3V0ZSddLmNvbmNhdChhcmdzKSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgX2V4ZWN1dGU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBhcmdzKSB7XG4gICAgdmFyIHJvdXRlID0gY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XG5cbiAgICBpZiAocm91dGUgaW5zdGFuY2VvZiBSb3V0ZSkge1xuICAgICAgcm91dGUucm91dGVyID0gdGhpcztcbiAgICAgIHJldHVybiByb3V0ZS5lbnRlcihhcmdzKTtcbiAgICB9XG4gIH0sXG5cbiAgdHJpZ2dlck1ldGhvZDogYmIuTWFyaW9uZXR0ZS50cmlnZ2VyTWV0aG9kXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29uZmlnL3JvdXRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQxXG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjQxLmpzIn0=");

/***/ },
/* 42 */,
/* 43 */,
/* 44 */,
/* 45 */,
/* 46 */,
/* 47 */,
/* 48 */,
/* 49 */,
/* 50 */
/*!*************************************************!*\
  !*** ./assets/js/src/apps/admin/layout-view.js ***!
  \*************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var LayoutView = __webpack_require__(/*! lib/config/layout-view */ 66);\nvar _ = __webpack_require__(/*! lodash */ 2);\n\nmodule.exports = LayoutView.extend({\n\n  el: '#wpbody-content .wrap',\n\n  template: function(){\n    return '<div id=\"wc-pos-admin\"></div>' +\n      '<div id=\"wc-pos-modal\"></div>';\n  },\n\n  regions: {\n    mainRegion  : '#wc-pos-admin',\n    modalRegion : '#wc-pos-modal'\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2FwcHMvYWRtaW4vbGF5b3V0LXZpZXcuanM/ZWUzOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBMYXlvdXRWaWV3ID0gcmVxdWlyZSgnbGliL2NvbmZpZy9sYXlvdXQtdmlldycpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBMYXlvdXRWaWV3LmV4dGVuZCh7XG5cbiAgZWw6ICcjd3Bib2R5LWNvbnRlbnQgLndyYXAnLFxuXG4gIHRlbXBsYXRlOiBmdW5jdGlvbigpe1xuICAgIHJldHVybiAnPGRpdiBpZD1cIndjLXBvcy1hZG1pblwiPjwvZGl2PicgK1xuICAgICAgJzxkaXYgaWQ9XCJ3Yy1wb3MtbW9kYWxcIj48L2Rpdj4nO1xuICB9LFxuXG4gIHJlZ2lvbnM6IHtcbiAgICBtYWluUmVnaW9uICA6ICcjd2MtcG9zLWFkbWluJyxcbiAgICBtb2RhbFJlZ2lvbiA6ICcjd2MtcG9zLW1vZGFsJ1xuICB9XG5cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2FwcHMvYWRtaW4vbGF5b3V0LXZpZXcuanNcbiAqKiBtb2R1bGUgaWQgPSA1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiNTAuanMifQ==");

/***/ },
/* 51 */
/*!****************************************************!*\
  !*** ./assets/js/src/apps/settings/layout-view.js ***!
  \****************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var LayoutView = __webpack_require__(/*! lib/config/layout-view */ 66);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nvar Layout = LayoutView.extend({\n\n  template: function(){\n    return '' +\n      '<div id=\"wc-pos-settings-tabs\"></div>' +\n      '<div id=\"wc-pos-settings\"></div>';\n  },\n\n  regions: {\n    tabsRegion: '#wc-pos-settings-tabs',\n    settingsRegion: '#wc-pos-settings'\n  }\n\n});\n\nmodule.exports = Layout;\nPOS.attach('SettingsApp.LayoutView', Layout);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2FwcHMvc2V0dGluZ3MvbGF5b3V0LXZpZXcuanM/YTZkMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgTGF5b3V0VmlldyA9IHJlcXVpcmUoJ2xpYi9jb25maWcvbGF5b3V0LXZpZXcnKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xuXG52YXIgTGF5b3V0ID0gTGF5b3V0Vmlldy5leHRlbmQoe1xuXG4gIHRlbXBsYXRlOiBmdW5jdGlvbigpe1xuICAgIHJldHVybiAnJyArXG4gICAgICAnPGRpdiBpZD1cIndjLXBvcy1zZXR0aW5ncy10YWJzXCI+PC9kaXY+JyArXG4gICAgICAnPGRpdiBpZD1cIndjLXBvcy1zZXR0aW5nc1wiPjwvZGl2Pic7XG4gIH0sXG5cbiAgcmVnaW9uczoge1xuICAgIHRhYnNSZWdpb246ICcjd2MtcG9zLXNldHRpbmdzLXRhYnMnLFxuICAgIHNldHRpbmdzUmVnaW9uOiAnI3djLXBvcy1zZXR0aW5ncydcbiAgfVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBMYXlvdXQ7XG5QT1MuYXR0YWNoKCdTZXR0aW5nc0FwcC5MYXlvdXRWaWV3JywgTGF5b3V0KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9hcHBzL3NldHRpbmdzL2xheW91dC12aWV3LmpzXG4gKiogbW9kdWxlIGlkID0gNTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjUxLmpzIn0=");

/***/ },
/* 52 */
/*!***************************************************!*\
  !*** ./assets/js/src/apps/settings/show/route.js ***!
  \***************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Route = __webpack_require__(/*! lib/config/route */ 70);\n//var debug = require('debug')('receipt');\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar View = __webpack_require__(/*! ./view */ 85);\n\nvar SettingsRoute = Route.extend({\n\n  initialize: function( options ) {\n    options = options || {};\n    this.container = options.container;\n    this.model = options.model;\n  },\n\n  fetch: function() {\n\n  },\n\n  render: function() {\n    var view = new View({\n      model: this.model\n    });\n    this.container.show(view);\n  }\n\n});\n\nmodule.exports = SettingsRoute;\nPOS.attach('SettingsApp.Route', SettingsRoute);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2FwcHMvc2V0dGluZ3Mvc2hvdy9yb3V0ZS5qcz8wNjIxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBSb3V0ZSA9IHJlcXVpcmUoJ2xpYi9jb25maWcvcm91dGUnKTtcbi8vdmFyIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgncmVjZWlwdCcpO1xudmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG52YXIgVmlldyA9IHJlcXVpcmUoJy4vdmlldycpO1xuXG52YXIgU2V0dGluZ3NSb3V0ZSA9IFJvdXRlLmV4dGVuZCh7XG5cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcbiAgICB0aGlzLm1vZGVsID0gb3B0aW9ucy5tb2RlbDtcbiAgfSxcblxuICBmZXRjaDogZnVuY3Rpb24oKSB7XG5cbiAgfSxcblxuICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2aWV3ID0gbmV3IFZpZXcoe1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRhaW5lci5zaG93KHZpZXcpO1xuICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNldHRpbmdzUm91dGU7XG5QT1MuYXR0YWNoKCdTZXR0aW5nc0FwcC5Sb3V0ZScsIFNldHRpbmdzUm91dGUpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2FwcHMvc2V0dGluZ3Mvc2hvdy9yb3V0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDUyXG4gKiogbW9kdWxlIGNodW5rcyA9IDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI1Mi5qcyJ9");

/***/ },
/* 53 */
/*!***************************************************!*\
  !*** ./assets/js/src/lib/components/tabs/view.js ***!
  \***************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var ItemView = __webpack_require__(/*! lib/config/item-view */ 67);\nvar CollectionView = __webpack_require__(/*! lib/config/collection-view */ 86);\nvar hbs = __webpack_require__(/*! handlebars */ 18);\nvar Collection = __webpack_require__(/*! ./entities */ 87);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nvar Tab = ItemView.extend({\n  tagName: 'li',\n\n  initialize: function () {\n    this.template = hbs.compile('' +\n      '{{#unless fixed}}' +\n      '<a href=\"#\" data-action=\"remove\">' +\n        '<i class=\"icon icon-times-circle\"></i>' +\n      '</a>' +\n      '{{/unless}}' +\n      '{{{ label }}}'\n    );\n  },\n\n  className: function () {\n    if (this.model.get('active')) {\n      return 'active';\n    }\n  },\n\n  modelEvents: {\n    'change:active': 'toggleClass'\n  },\n\n  triggers: {\n    'click': 'tab:clicked',\n    'click *[data-action=\"remove\"]': 'remove:tab'\n  },\n\n  toggleClass: function(){\n    this.$el.toggleClass('active', this.model.get('active'));\n  },\n\n  onTabClicked: function () {\n    if (!this.model.get('active')) {\n      this.model.collection.setActive(this.model.id);\n    }\n  },\n\n  onRemoveTab: function(){\n    this.model.collection.remove(this.model);\n  }\n\n});\n\nvar Tabs = CollectionView.extend({\n  tagName: 'ul',\n  childView: Tab,\n  attributes: {\n    'role' : 'tablist'\n  },\n\n  initialize: function(options) {\n    options = options || {};\n    this.collection = new Collection( options.collection );\n  }\n\n});\n\nmodule.exports = Tabs;\nPOS.attach('Components.Tabs.View', Tabs);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL3RhYnMvdmlldy5qcz81ZjU0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUyxlQUFlO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsU0FBUztBQUNsQixVQUFVLFVBQVU7QUFDcEI7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgSXRlbVZpZXcgPSByZXF1aXJlKCdsaWIvY29uZmlnL2l0ZW0tdmlldycpO1xudmFyIENvbGxlY3Rpb25WaWV3ID0gcmVxdWlyZSgnbGliL2NvbmZpZy9jb2xsZWN0aW9uLXZpZXcnKTtcbnZhciBoYnMgPSByZXF1aXJlKCdoYW5kbGViYXJzJyk7XG52YXIgQ29sbGVjdGlvbiA9IHJlcXVpcmUoJy4vZW50aXRpZXMnKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xuXG52YXIgVGFiID0gSXRlbVZpZXcuZXh0ZW5kKHtcbiAgdGFnTmFtZTogJ2xpJyxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy50ZW1wbGF0ZSA9IGhicy5jb21waWxlKCcnICtcbiAgICAgICd7eyN1bmxlc3MgZml4ZWR9fScgK1xuICAgICAgJzxhIGhyZWY9XCIjXCIgZGF0YS1hY3Rpb249XCJyZW1vdmVcIj4nICtcbiAgICAgICAgJzxpIGNsYXNzPVwiaWNvbiBpY29uLXRpbWVzLWNpcmNsZVwiPjwvaT4nICtcbiAgICAgICc8L2E+JyArXG4gICAgICAne3svdW5sZXNzfX0nICtcbiAgICAgICd7e3sgbGFiZWwgfX19J1xuICAgICk7XG4gIH0sXG5cbiAgY2xhc3NOYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMubW9kZWwuZ2V0KCdhY3RpdmUnKSkge1xuICAgICAgcmV0dXJuICdhY3RpdmUnO1xuICAgIH1cbiAgfSxcblxuICBtb2RlbEV2ZW50czoge1xuICAgICdjaGFuZ2U6YWN0aXZlJzogJ3RvZ2dsZUNsYXNzJ1xuICB9LFxuXG4gIHRyaWdnZXJzOiB7XG4gICAgJ2NsaWNrJzogJ3RhYjpjbGlja2VkJyxcbiAgICAnY2xpY2sgKltkYXRhLWFjdGlvbj1cInJlbW92ZVwiXSc6ICdyZW1vdmU6dGFiJ1xuICB9LFxuXG4gIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbigpe1xuICAgIHRoaXMuJGVsLnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCB0aGlzLm1vZGVsLmdldCgnYWN0aXZlJykpO1xuICB9LFxuXG4gIG9uVGFiQ2xpY2tlZDogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5tb2RlbC5nZXQoJ2FjdGl2ZScpKSB7XG4gICAgICB0aGlzLm1vZGVsLmNvbGxlY3Rpb24uc2V0QWN0aXZlKHRoaXMubW9kZWwuaWQpO1xuICAgIH1cbiAgfSxcblxuICBvblJlbW92ZVRhYjogZnVuY3Rpb24oKXtcbiAgICB0aGlzLm1vZGVsLmNvbGxlY3Rpb24ucmVtb3ZlKHRoaXMubW9kZWwpO1xuICB9XG5cbn0pO1xuXG52YXIgVGFicyA9IENvbGxlY3Rpb25WaWV3LmV4dGVuZCh7XG4gIHRhZ05hbWU6ICd1bCcsXG4gIGNoaWxkVmlldzogVGFiLFxuICBhdHRyaWJ1dGVzOiB7XG4gICAgJ3JvbGUnIDogJ3RhYmxpc3QnXG4gIH0sXG5cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuY29sbGVjdGlvbiA9IG5ldyBDb2xsZWN0aW9uKCBvcHRpb25zLmNvbGxlY3Rpb24gKTtcbiAgfVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUYWJzO1xuUE9TLmF0dGFjaCgnQ29tcG9uZW50cy5UYWJzLlZpZXcnLCBUYWJzKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29tcG9uZW50cy90YWJzL3ZpZXcuanNcbiAqKiBtb2R1bGUgaWQgPSA1M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI1My5qcyJ9");

/***/ },
/* 54 */
/*!****************************!*\
  !*** ./~/debug/browser.js ***!
  \****************************/
/***/ function(module, exports, __webpack_require__) {

	eval("\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = __webpack_require__(/*! ./debug */ 90);\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Use chrome.storage.local if we are in an app\n */\n\nvar storage;\n\nif (typeof chrome !== 'undefined' && typeof chrome.storage !== 'undefined')\n  storage = chrome.storage.local;\nelse\n  storage = window.localStorage;\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      storage.removeItem('debug');\n    } else {\n      storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2RlYnVnL2Jyb3dzZXIuanM/Y2MyNCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIFRoaXMgaXMgdGhlIHdlYiBicm93c2VyIGltcGxlbWVudGF0aW9uIG9mIGBkZWJ1ZygpYC5cbiAqXG4gKiBFeHBvc2UgYGRlYnVnKClgIGFzIHRoZSBtb2R1bGUuXG4gKi9cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kZWJ1ZycpO1xuZXhwb3J0cy5sb2cgPSBsb2c7XG5leHBvcnRzLmZvcm1hdEFyZ3MgPSBmb3JtYXRBcmdzO1xuZXhwb3J0cy5zYXZlID0gc2F2ZTtcbmV4cG9ydHMubG9hZCA9IGxvYWQ7XG5leHBvcnRzLnVzZUNvbG9ycyA9IHVzZUNvbG9ycztcblxuLyoqXG4gKiBVc2UgY2hyb21lLnN0b3JhZ2UubG9jYWwgaWYgd2UgYXJlIGluIGFuIGFwcFxuICovXG5cbnZhciBzdG9yYWdlO1xuXG5pZiAodHlwZW9mIGNocm9tZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNocm9tZS5zdG9yYWdlICE9PSAndW5kZWZpbmVkJylcbiAgc3RvcmFnZSA9IGNocm9tZS5zdG9yYWdlLmxvY2FsO1xuZWxzZVxuICBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbXG4gICdsaWdodHNlYWdyZWVuJyxcbiAgJ2ZvcmVzdGdyZWVuJyxcbiAgJ2dvbGRlbnJvZCcsXG4gICdkb2RnZXJibHVlJyxcbiAgJ2RhcmtvcmNoaWQnLFxuICAnY3JpbXNvbidcbl07XG5cbi8qKlxuICogQ3VycmVudGx5IG9ubHkgV2ViS2l0LWJhc2VkIFdlYiBJbnNwZWN0b3JzLCBGaXJlZm94ID49IHYzMSxcbiAqIGFuZCB0aGUgRmlyZWJ1ZyBleHRlbnNpb24gKGFueSBGaXJlZm94IHZlcnNpb24pIGFyZSBrbm93blxuICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuICpcbiAqIFRPRE86IGFkZCBhIGBsb2NhbFN0b3JhZ2VgIHZhcmlhYmxlIHRvIGV4cGxpY2l0bHkgZW5hYmxlL2Rpc2FibGUgY29sb3JzXG4gKi9cblxuZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuICAvLyBpcyB3ZWJraXQ/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE2NDU5NjA2LzM3Njc3M1xuICByZXR1cm4gKCdXZWJraXRBcHBlYXJhbmNlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpIHx8XG4gICAgLy8gaXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuICAgICh3aW5kb3cuY29uc29sZSAmJiAoY29uc29sZS5maXJlYnVnIHx8IChjb25zb2xlLmV4Y2VwdGlvbiAmJiBjb25zb2xlLnRhYmxlKSkpIHx8XG4gICAgLy8gaXMgZmlyZWZveCA+PSB2MzE/XG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG4gICAgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pICYmIHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApID49IDMxKTtcbn1cblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXR0ZXJzLmogPSBmdW5jdGlvbih2KSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeSh2KTtcbn07XG5cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKCkge1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgdmFyIHVzZUNvbG9ycyA9IHRoaXMudXNlQ29sb3JzO1xuXG4gIGFyZ3NbMF0gPSAodXNlQ29sb3JzID8gJyVjJyA6ICcnKVxuICAgICsgdGhpcy5uYW1lc3BhY2VcbiAgICArICh1c2VDb2xvcnMgPyAnICVjJyA6ICcgJylcbiAgICArIGFyZ3NbMF1cbiAgICArICh1c2VDb2xvcnMgPyAnJWMgJyA6ICcgJylcbiAgICArICcrJyArIGV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuICBpZiAoIXVzZUNvbG9ycykgcmV0dXJuIGFyZ3M7XG5cbiAgdmFyIGMgPSAnY29sb3I6ICcgKyB0aGlzLmNvbG9yO1xuICBhcmdzID0gW2FyZ3NbMF0sIGMsICdjb2xvcjogaW5oZXJpdCddLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzLCAxKSk7XG5cbiAgLy8gdGhlIGZpbmFsIFwiJWNcIiBpcyBzb21ld2hhdCB0cmlja3ksIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb3RoZXJcbiAgLy8gYXJndW1lbnRzIHBhc3NlZCBlaXRoZXIgYmVmb3JlIG9yIGFmdGVyIHRoZSAlYywgc28gd2UgbmVlZCB0b1xuICAvLyBmaWd1cmUgb3V0IHRoZSBjb3JyZWN0IGluZGV4IHRvIGluc2VydCB0aGUgQ1NTIGludG9cbiAgdmFyIGluZGV4ID0gMDtcbiAgdmFyIGxhc3RDID0gMDtcbiAgYXJnc1swXS5yZXBsYWNlKC8lW2EteiVdL2csIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgaWYgKCclJScgPT09IG1hdGNoKSByZXR1cm47XG4gICAgaW5kZXgrKztcbiAgICBpZiAoJyVjJyA9PT0gbWF0Y2gpIHtcbiAgICAgIC8vIHdlIG9ubHkgYXJlIGludGVyZXN0ZWQgaW4gdGhlICpsYXN0KiAlY1xuICAgICAgLy8gKHRoZSB1c2VyIG1heSBoYXZlIHByb3ZpZGVkIHRoZWlyIG93bilcbiAgICAgIGxhc3RDID0gaW5kZXg7XG4gICAgfVxuICB9KTtcblxuICBhcmdzLnNwbGljZShsYXN0QywgMCwgYyk7XG4gIHJldHVybiBhcmdzO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUubG9nKClgIHdoZW4gYXZhaWxhYmxlLlxuICogTm8tb3Agd2hlbiBgY29uc29sZS5sb2dgIGlzIG5vdCBhIFwiZnVuY3Rpb25cIi5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGxvZygpIHtcbiAgLy8gdGhpcyBoYWNrZXJ5IGlzIHJlcXVpcmVkIGZvciBJRTgvOSwgd2hlcmVcbiAgLy8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24gZG9lc24ndCBoYXZlICdhcHBseSdcbiAgcmV0dXJuICdvYmplY3QnID09PSB0eXBlb2YgY29uc29sZVxuICAgICYmIGNvbnNvbGUubG9nXG4gICAgJiYgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoY29uc29sZS5sb2csIGNvbnNvbGUsIGFyZ3VtZW50cyk7XG59XG5cbi8qKlxuICogU2F2ZSBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuICB0cnkge1xuICAgIGlmIChudWxsID09IG5hbWVzcGFjZXMpIHtcbiAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVidWcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RvcmFnZS5kZWJ1ZyA9IG5hbWVzcGFjZXM7XG4gICAgfVxuICB9IGNhdGNoKGUpIHt9XG59XG5cbi8qKlxuICogTG9hZCBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfSByZXR1cm5zIHRoZSBwcmV2aW91c2x5IHBlcnNpc3RlZCBkZWJ1ZyBtb2Rlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9hZCgpIHtcbiAgdmFyIHI7XG4gIHRyeSB7XG4gICAgciA9IHN0b3JhZ2UuZGVidWc7XG4gIH0gY2F0Y2goZSkge31cbiAgcmV0dXJuIHI7XG59XG5cbi8qKlxuICogRW5hYmxlIG5hbWVzcGFjZXMgbGlzdGVkIGluIGBsb2NhbFN0b3JhZ2UuZGVidWdgIGluaXRpYWxseS5cbiAqL1xuXG5leHBvcnRzLmVuYWJsZShsb2FkKCkpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZGVidWcvYnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDU0XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjU0LmpzIn0=");

/***/ },
/* 55 */
/*!*****************************************************!*\
  !*** ./assets/js/src/lib/config/dual-collection.js ***!
  \*****************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Radio = __webpack_require__(/*! backbone */ 3).Radio;\nvar debug = __webpack_require__(/*! debug */ 54)('dualCollection');\nvar Collection = __webpack_require__(/*! ./collection */ 59);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar $ = __webpack_require__(/*! jquery */ 1);\n\nvar wrapError = function(model, options) {\n  var error;\n  error = options.error;\n  return options.error = function(resp) {\n    if (error) {\n      error(model, resp, options);\n    }\n    return model.trigger('error', model, resp, options);\n  };\n};\n\nmodule.exports = POS.DualCollection = Collection.extend({\n  states: {\n    SYNCHRONIZED  : 'SYNCHRONIZED',\n    SYNCHRONIZING : 'SYNCHRONIZING',\n    UPDATE_FAILED : 'UPDATE_FAILED',\n    CREATE_FAILED : 'CREATE_FAILED',\n    DELETE_FAILED : 'DELETE_FAILED'\n  },\n\n  eventNames: {\n    LOCAL_SYNC_FAIL     : 'LOCAL_SYNC_FAIL',\n    LOCAL_SYNC_SUCCESS  : 'LOCAL_SYNC_SUCCESS',\n    REMOTE_SYNC_FAIL    : 'REMOTE_SYNC_FAIL',\n    REMOTE_SYNC_SUCCESS : 'REMOTE_SYNC_SUCCESS',\n    SYNCHRONIZED        : 'SYNCHRONIZED'\n  },\n\n  constructor: function() {\n    Collection.apply(this, arguments);\n\n    this._isReady = $.Deferred();\n    this.once('idb:ready', function() {\n      this._isReady.resolve();\n    });\n\n  },\n\n  url: function(){\n    var wc_api = Radio.request('entities', 'get', {\n      type: 'option',\n      name: 'wc_api'\n    });\n    return wc_api + this.name;\n  },\n\n  fetch: function(options){\n    var self = this;\n    return $.when(this._isReady).then(function() {\n      debug('fetching: ' + self.name);\n      return Collection.prototype.fetch.call(self, options);\n    });\n  },\n\n  state: {\n    pageSize: 10\n  },\n\n  parseState: function (resp, queryParams, state, options) {\n    // totals are always in the WC API headers\n    var totalRecords = options.xhr.getResponseHeader('X-WC-Total');\n    var totalPages = options.xhr.getResponseHeader('X-WC-Total');\n\n    // return as decimal\n    return {\n      totalRecords: parseInt(totalRecords, 10),\n      totalPages: parseInt(totalPages, 10)\n    };\n  },\n\n  parse: function (resp) {\n    return resp[this.name] ? resp[this.name] : resp ;\n  },\n\n  getSyncMethodsByState: function(state){\n    var method;\n    return method = (function() {\n      switch (false) {\n        case this.states.CREATE_FAILED !== state:\n          return 'create';\n        case this.states.UPDATE_FAILED !== state:\n          return 'update';\n        case this.states.DELETE_FAILED !== state:\n          return 'delete';\n      }\n    }).call(this);\n  },\n\n  mergeFirstSync: function(newData) {\n    return newData;\n  },\n\n  mergeFullSync: function(newData) {\n    return newData;\n  },\n\n  firstSync: function(options) {\n    var event, fetchSuccess, originalSuccess, syncError, syncSuccess;\n    if (options == null) {\n      options = {};\n    }\n    originalSuccess = options.success || $.noop;\n    event = _.extend({}, Backbone.Events);\n    syncSuccess = (function(_this) {\n      return function(response) {\n        var data, method;\n        data = _this.mergeFirstSync(_this.parse(response));\n        event.trigger(_this.eventNames.REMOTE_SYNC_SUCCESS);\n        method = options.reset ? 'reset' : 'set';\n        _this[method](data, options);\n        originalSuccess(_this, data, options);\n        _this.trigger('sync', _this, data, options);\n        wrapError(_this, options);\n        return _this.save().done(function() {\n          return _this.fetch().done(function() {\n            return event.trigger(_this.eventNames.SYNCHRONIZED);\n          });\n        });\n      };\n    })(this);\n    syncError = (function(_this) {\n      return function(error) {\n        return event.trigger(_this.eventNames.REMOTE_SYNC_FAIL, error, options);\n      };\n    })(this);\n    fetchSuccess = (function(_this) {\n      return function(data) {\n        options.success = syncSuccess;\n        options.error = syncError;\n        event.trigger(_this.eventNames.LOCAL_SYNC_SUCCESS, data);\n        return Backbone.ajaxSync('read', _this, options);\n      };\n    })(this);\n    this.fetch({\n      success: fetchSuccess,\n      error: function(error) {\n        return event.trigger(this.eventNames.LOCAL_SYNC_FAIL, error);\n      }\n    });\n    return event;\n  },\n\n  removeGarbage: function(delayedData) {\n    var deferred, idsForRemove, key;\n    deferred = new $.Deferred();\n    key = this.indexedDB.keyPath;\n    idsForRemove = _.map(delayedData, function(item) {\n      return item[key];\n    });\n    this.indexedDB.removeBatch(idsForRemove, (function() {\n      return deferred.resolve();\n    }), (function() {\n      return deferred.reject();\n    }));\n    return deferred.promise();\n  },\n\n  _getDelayedData: function(status) {\n    var data, deferred, keyRange, options;\n    deferred = new $.Deferred();\n    data = [];\n    keyRange = this.indexedDB.makeKeyRange({\n      lower: status,\n      upper: status\n    });\n    options = {\n      index: 'status',\n      keyRange: keyRange,\n      onEnd: function() {\n        return deferred.resolve(data);\n      }\n    };\n    this.indexedDB.iterate(function(item) {\n      return data.push(item);\n    }, options);\n    return deferred.promise();\n  },\n\n  getDelayedData: function() {\n    var created, deferred, deleted, updated;\n    deferred = new $.Deferred();\n    deleted = this._getDelayedData(this.states.DELETE_FAILED);\n    created = this._getDelayedData(this.states.CREATE_FAILED);\n    updated = this._getDelayedData(this.states.UPDATE_FAILED);\n    $.when(deleted, created, updated).done(function(a, b, c) {\n      return deferred.resolve(_.union(a, b, c));\n    });\n    return deferred.promise();\n  },\n\n  fullSync: function() {\n    var deferred;\n    deferred = new $.Deferred();\n    this.getDelayedData().done((function(_this) {\n      return function(delayedData) {\n        var count, done;\n        debug('start full sync', delayedData);\n        count = 0;\n        done = function() {\n          count++;\n          if (count === delayedData.length) {\n            return _this.fetch().done(function() {\n              return deferred.resolve();\n            });\n          }\n        };\n        return _.each(delayedData, function(item) {\n          var method, model, status;\n          status = item.status;\n          method = _this.getSyncMethodsByState(status);\n          delete item.status;\n          model = new _this.model(item);\n          debug('full sync model', item, method);\n          model.url = model.getUrlForSync(_.result(_this, 'url'), method);\n          return Backbone.ajaxSync(method, model, {\n            success: (function(response) {\n              var data;\n              if (status === _this.states.DELETE_FAILED) {\n                return _this.removeGarbage([item]).done(done());\n              } else {\n                data = _this.mergeFullSync(model.parse(response));\n                if (!data.status) {\n                  data.status = '';\n                }\n                model = _this.get(item[_this.indexedDB.keyPath]).set(data);\n                return _this.indexedDB.store.put(model.attributes, done, done);\n              }\n            }),\n            error: function(jqXHR, textStatus, errorThrown) {\n              var collection;\n              if (method === 'update') {\n                collection = _this;\n                model.fetch({\n                  success: function(model) {\n                    return collection.indexedDB.store.put(model.attributes);\n                  }\n                });\n              }\n              return deferred.reject(item, jqXHR, textStatus, errorThrown);\n            }\n          });\n        });\n      };\n    })(this));\n    return deferred.promise();\n  },\n\n  save: function() {\n    var deferred;\n    deferred = new $.Deferred();\n    this.indexedDB.saveAll((function() {\n      return deferred.resolve();\n    }), (function() {\n      return deferred.reject();\n    }));\n    return deferred.promise();\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvZHVhbC1jb2xsZWN0aW9uLmpzP2I1MzciXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFJhZGlvID0gcmVxdWlyZSgnYmFja2JvbmUnKS5SYWRpbztcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2R1YWxDb2xsZWN0aW9uJyk7XG52YXIgQ29sbGVjdGlvbiA9IHJlcXVpcmUoJy4vY29sbGVjdGlvbicpO1xudmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xuXG52YXIgd3JhcEVycm9yID0gZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgdmFyIGVycm9yO1xuICBlcnJvciA9IG9wdGlvbnMuZXJyb3I7XG4gIHJldHVybiBvcHRpb25zLmVycm9yID0gZnVuY3Rpb24ocmVzcCkge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3IobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWwudHJpZ2dlcignZXJyb3InLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBPUy5EdWFsQ29sbGVjdGlvbiA9IENvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgc3RhdGVzOiB7XG4gICAgU1lOQ0hST05JWkVEICA6ICdTWU5DSFJPTklaRUQnLFxuICAgIFNZTkNIUk9OSVpJTkcgOiAnU1lOQ0hST05JWklORycsXG4gICAgVVBEQVRFX0ZBSUxFRCA6ICdVUERBVEVfRkFJTEVEJyxcbiAgICBDUkVBVEVfRkFJTEVEIDogJ0NSRUFURV9GQUlMRUQnLFxuICAgIERFTEVURV9GQUlMRUQgOiAnREVMRVRFX0ZBSUxFRCdcbiAgfSxcblxuICBldmVudE5hbWVzOiB7XG4gICAgTE9DQUxfU1lOQ19GQUlMICAgICA6ICdMT0NBTF9TWU5DX0ZBSUwnLFxuICAgIExPQ0FMX1NZTkNfU1VDQ0VTUyAgOiAnTE9DQUxfU1lOQ19TVUNDRVNTJyxcbiAgICBSRU1PVEVfU1lOQ19GQUlMICAgIDogJ1JFTU9URV9TWU5DX0ZBSUwnLFxuICAgIFJFTU9URV9TWU5DX1NVQ0NFU1MgOiAnUkVNT1RFX1NZTkNfU1VDQ0VTUycsXG4gICAgU1lOQ0hST05JWkVEICAgICAgICA6ICdTWU5DSFJPTklaRUQnXG4gIH0sXG5cbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKCkge1xuICAgIENvbGxlY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuX2lzUmVhZHkgPSAkLkRlZmVycmVkKCk7XG4gICAgdGhpcy5vbmNlKCdpZGI6cmVhZHknLCBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2lzUmVhZHkucmVzb2x2ZSgpO1xuICAgIH0pO1xuXG4gIH0sXG5cbiAgdXJsOiBmdW5jdGlvbigpe1xuICAgIHZhciB3Y19hcGkgPSBSYWRpby5yZXF1ZXN0KCdlbnRpdGllcycsICdnZXQnLCB7XG4gICAgICB0eXBlOiAnb3B0aW9uJyxcbiAgICAgIG5hbWU6ICd3Y19hcGknXG4gICAgfSk7XG4gICAgcmV0dXJuIHdjX2FwaSArIHRoaXMubmFtZTtcbiAgfSxcblxuICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucyl7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiAkLndoZW4odGhpcy5faXNSZWFkeSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIGRlYnVnKCdmZXRjaGluZzogJyArIHNlbGYubmFtZSk7XG4gICAgICByZXR1cm4gQ29sbGVjdGlvbi5wcm90b3R5cGUuZmV0Y2guY2FsbChzZWxmLCBvcHRpb25zKTtcbiAgICB9KTtcbiAgfSxcblxuICBzdGF0ZToge1xuICAgIHBhZ2VTaXplOiAxMFxuICB9LFxuXG4gIHBhcnNlU3RhdGU6IGZ1bmN0aW9uIChyZXNwLCBxdWVyeVBhcmFtcywgc3RhdGUsIG9wdGlvbnMpIHtcbiAgICAvLyB0b3RhbHMgYXJlIGFsd2F5cyBpbiB0aGUgV0MgQVBJIGhlYWRlcnNcbiAgICB2YXIgdG90YWxSZWNvcmRzID0gb3B0aW9ucy54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtV0MtVG90YWwnKTtcbiAgICB2YXIgdG90YWxQYWdlcyA9IG9wdGlvbnMueGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVdDLVRvdGFsJyk7XG5cbiAgICAvLyByZXR1cm4gYXMgZGVjaW1hbFxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFJlY29yZHM6IHBhcnNlSW50KHRvdGFsUmVjb3JkcywgMTApLFxuICAgICAgdG90YWxQYWdlczogcGFyc2VJbnQodG90YWxQYWdlcywgMTApXG4gICAgfTtcbiAgfSxcblxuICBwYXJzZTogZnVuY3Rpb24gKHJlc3ApIHtcbiAgICByZXR1cm4gcmVzcFt0aGlzLm5hbWVdID8gcmVzcFt0aGlzLm5hbWVdIDogcmVzcCA7XG4gIH0sXG5cbiAgZ2V0U3luY01ldGhvZHNCeVN0YXRlOiBmdW5jdGlvbihzdGF0ZSl7XG4gICAgdmFyIG1ldGhvZDtcbiAgICByZXR1cm4gbWV0aG9kID0gKGZ1bmN0aW9uKCkge1xuICAgICAgc3dpdGNoIChmYWxzZSkge1xuICAgICAgICBjYXNlIHRoaXMuc3RhdGVzLkNSRUFURV9GQUlMRUQgIT09IHN0YXRlOlxuICAgICAgICAgIHJldHVybiAnY3JlYXRlJztcbiAgICAgICAgY2FzZSB0aGlzLnN0YXRlcy5VUERBVEVfRkFJTEVEICE9PSBzdGF0ZTpcbiAgICAgICAgICByZXR1cm4gJ3VwZGF0ZSc7XG4gICAgICAgIGNhc2UgdGhpcy5zdGF0ZXMuREVMRVRFX0ZBSUxFRCAhPT0gc3RhdGU6XG4gICAgICAgICAgcmV0dXJuICdkZWxldGUnO1xuICAgICAgfVxuICAgIH0pLmNhbGwodGhpcyk7XG4gIH0sXG5cbiAgbWVyZ2VGaXJzdFN5bmM6IGZ1bmN0aW9uKG5ld0RhdGEpIHtcbiAgICByZXR1cm4gbmV3RGF0YTtcbiAgfSxcblxuICBtZXJnZUZ1bGxTeW5jOiBmdW5jdGlvbihuZXdEYXRhKSB7XG4gICAgcmV0dXJuIG5ld0RhdGE7XG4gIH0sXG5cbiAgZmlyc3RTeW5jOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgdmFyIGV2ZW50LCBmZXRjaFN1Y2Nlc3MsIG9yaWdpbmFsU3VjY2Vzcywgc3luY0Vycm9yLCBzeW5jU3VjY2VzcztcbiAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIG9yaWdpbmFsU3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcyB8fCAkLm5vb3A7XG4gICAgZXZlbnQgPSBfLmV4dGVuZCh7fSwgQmFja2JvbmUuRXZlbnRzKTtcbiAgICBzeW5jU3VjY2VzcyA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBkYXRhLCBtZXRob2Q7XG4gICAgICAgIGRhdGEgPSBfdGhpcy5tZXJnZUZpcnN0U3luYyhfdGhpcy5wYXJzZShyZXNwb25zZSkpO1xuICAgICAgICBldmVudC50cmlnZ2VyKF90aGlzLmV2ZW50TmFtZXMuUkVNT1RFX1NZTkNfU1VDQ0VTUyk7XG4gICAgICAgIG1ldGhvZCA9IG9wdGlvbnMucmVzZXQgPyAncmVzZXQnIDogJ3NldCc7XG4gICAgICAgIF90aGlzW21ldGhvZF0oZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgIG9yaWdpbmFsU3VjY2VzcyhfdGhpcywgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgIF90aGlzLnRyaWdnZXIoJ3N5bmMnLCBfdGhpcywgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgIHdyYXBFcnJvcihfdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBfdGhpcy5zYXZlKCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuZmV0Y2goKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LnRyaWdnZXIoX3RoaXMuZXZlbnROYW1lcy5TWU5DSFJPTklaRUQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSkodGhpcyk7XG4gICAgc3luY0Vycm9yID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50LnRyaWdnZXIoX3RoaXMuZXZlbnROYW1lcy5SRU1PVEVfU1lOQ19GQUlMLCBlcnJvciwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpO1xuICAgIGZldGNoU3VjY2VzcyA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgb3B0aW9ucy5zdWNjZXNzID0gc3luY1N1Y2Nlc3M7XG4gICAgICAgIG9wdGlvbnMuZXJyb3IgPSBzeW5jRXJyb3I7XG4gICAgICAgIGV2ZW50LnRyaWdnZXIoX3RoaXMuZXZlbnROYW1lcy5MT0NBTF9TWU5DX1NVQ0NFU1MsIGRhdGEpO1xuICAgICAgICByZXR1cm4gQmFja2JvbmUuYWpheFN5bmMoJ3JlYWQnLCBfdGhpcywgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpO1xuICAgIHRoaXMuZmV0Y2goe1xuICAgICAgc3VjY2VzczogZmV0Y2hTdWNjZXNzLFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBldmVudC50cmlnZ2VyKHRoaXMuZXZlbnROYW1lcy5MT0NBTF9TWU5DX0ZBSUwsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0sXG5cbiAgcmVtb3ZlR2FyYmFnZTogZnVuY3Rpb24oZGVsYXllZERhdGEpIHtcbiAgICB2YXIgZGVmZXJyZWQsIGlkc0ZvclJlbW92ZSwga2V5O1xuICAgIGRlZmVycmVkID0gbmV3ICQuRGVmZXJyZWQoKTtcbiAgICBrZXkgPSB0aGlzLmluZGV4ZWREQi5rZXlQYXRoO1xuICAgIGlkc0ZvclJlbW92ZSA9IF8ubWFwKGRlbGF5ZWREYXRhLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbVtrZXldO1xuICAgIH0pO1xuICAgIHRoaXMuaW5kZXhlZERCLnJlbW92ZUJhdGNoKGlkc0ZvclJlbW92ZSwgKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICB9KSwgKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnJlamVjdCgpO1xuICAgIH0pKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9LFxuXG4gIF9nZXREZWxheWVkRGF0YTogZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgdmFyIGRhdGEsIGRlZmVycmVkLCBrZXlSYW5nZSwgb3B0aW9ucztcbiAgICBkZWZlcnJlZCA9IG5ldyAkLkRlZmVycmVkKCk7XG4gICAgZGF0YSA9IFtdO1xuICAgIGtleVJhbmdlID0gdGhpcy5pbmRleGVkREIubWFrZUtleVJhbmdlKHtcbiAgICAgIGxvd2VyOiBzdGF0dXMsXG4gICAgICB1cHBlcjogc3RhdHVzXG4gICAgfSk7XG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIGluZGV4OiAnc3RhdHVzJyxcbiAgICAgIGtleVJhbmdlOiBrZXlSYW5nZSxcbiAgICAgIG9uRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmluZGV4ZWREQi5pdGVyYXRlKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIHJldHVybiBkYXRhLnB1c2goaXRlbSk7XG4gICAgfSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgfSxcblxuICBnZXREZWxheWVkRGF0YTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNyZWF0ZWQsIGRlZmVycmVkLCBkZWxldGVkLCB1cGRhdGVkO1xuICAgIGRlZmVycmVkID0gbmV3ICQuRGVmZXJyZWQoKTtcbiAgICBkZWxldGVkID0gdGhpcy5fZ2V0RGVsYXllZERhdGEodGhpcy5zdGF0ZXMuREVMRVRFX0ZBSUxFRCk7XG4gICAgY3JlYXRlZCA9IHRoaXMuX2dldERlbGF5ZWREYXRhKHRoaXMuc3RhdGVzLkNSRUFURV9GQUlMRUQpO1xuICAgIHVwZGF0ZWQgPSB0aGlzLl9nZXREZWxheWVkRGF0YSh0aGlzLnN0YXRlcy5VUERBVEVfRkFJTEVEKTtcbiAgICAkLndoZW4oZGVsZXRlZCwgY3JlYXRlZCwgdXBkYXRlZCkuZG9uZShmdW5jdGlvbihhLCBiLCBjKSB7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucmVzb2x2ZShfLnVuaW9uKGEsIGIsIGMpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9LFxuXG4gIGZ1bGxTeW5jOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVmZXJyZWQ7XG4gICAgZGVmZXJyZWQgPSBuZXcgJC5EZWZlcnJlZCgpO1xuICAgIHRoaXMuZ2V0RGVsYXllZERhdGEoKS5kb25lKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRlbGF5ZWREYXRhKSB7XG4gICAgICAgIHZhciBjb3VudCwgZG9uZTtcbiAgICAgICAgZGVidWcoJ3N0YXJ0IGZ1bGwgc3luYycsIGRlbGF5ZWREYXRhKTtcbiAgICAgICAgY291bnQgPSAwO1xuICAgICAgICBkb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY291bnQrKztcbiAgICAgICAgICBpZiAoY291bnQgPT09IGRlbGF5ZWREYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZldGNoKCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF8uZWFjaChkZWxheWVkRGF0YSwgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgIHZhciBtZXRob2QsIG1vZGVsLCBzdGF0dXM7XG4gICAgICAgICAgc3RhdHVzID0gaXRlbS5zdGF0dXM7XG4gICAgICAgICAgbWV0aG9kID0gX3RoaXMuZ2V0U3luY01ldGhvZHNCeVN0YXRlKHN0YXR1cyk7XG4gICAgICAgICAgZGVsZXRlIGl0ZW0uc3RhdHVzO1xuICAgICAgICAgIG1vZGVsID0gbmV3IF90aGlzLm1vZGVsKGl0ZW0pO1xuICAgICAgICAgIGRlYnVnKCdmdWxsIHN5bmMgbW9kZWwnLCBpdGVtLCBtZXRob2QpO1xuICAgICAgICAgIG1vZGVsLnVybCA9IG1vZGVsLmdldFVybEZvclN5bmMoXy5yZXN1bHQoX3RoaXMsICd1cmwnKSwgbWV0aG9kKTtcbiAgICAgICAgICByZXR1cm4gQmFja2JvbmUuYWpheFN5bmMobWV0aG9kLCBtb2RlbCwge1xuICAgICAgICAgICAgc3VjY2VzczogKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhO1xuICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBfdGhpcy5zdGF0ZXMuREVMRVRFX0ZBSUxFRCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVHYXJiYWdlKFtpdGVtXSkuZG9uZShkb25lKCkpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBfdGhpcy5tZXJnZUZ1bGxTeW5jKG1vZGVsLnBhcnNlKHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbW9kZWwgPSBfdGhpcy5nZXQoaXRlbVtfdGhpcy5pbmRleGVkREIua2V5UGF0aF0pLnNldChkYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaW5kZXhlZERCLnN0b3JlLnB1dChtb2RlbC5hdHRyaWJ1dGVzLCBkb25lLCBkb25lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uO1xuICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSAndXBkYXRlJykge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBfdGhpcztcbiAgICAgICAgICAgICAgICBtb2RlbC5mZXRjaCh7XG4gICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sbGVjdGlvbi5pbmRleGVkREIuc3RvcmUucHV0KG1vZGVsLmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZWplY3QoaXRlbSwganFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pKHRoaXMpKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICB9LFxuXG4gIHNhdmU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWZlcnJlZDtcbiAgICBkZWZlcnJlZCA9IG5ldyAkLkRlZmVycmVkKCk7XG4gICAgdGhpcy5pbmRleGVkREIuc2F2ZUFsbCgoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgIH0pLCAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgfSkpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gIH1cblxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvbGliL2NvbmZpZy9kdWFsLWNvbGxlY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSA1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI1NS5qcyJ9");

/***/ },
/* 56 */
/*!**************************************************!*\
  !*** ./assets/js/src/entities/products/model.js ***!
  \**************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var DualModel = __webpack_require__(/*! lib/config/dual-model */ 91);\nvar _ = __webpack_require__(/*! lodash */ 2);\n\nmodule.exports = DualModel.extend({\n  name: 'product',\n\n  // this is an array of fields used by FilterCollection.matchmaker()\n  fields: ['title'],\n\n  parse: function (resp) {\n    if( resp.product ){\n      if( resp.product.type === 'variable' ) {\n        this.serverResponse(resp);\n      }\n      return resp.product;\n    } else {\n      return resp;\n    }\n  },\n\n  serverResponse: function(resp){\n    _.each( resp.product.variations, function( variation ){\n      variation.type      = 'variation';\n      variation.title     = resp.product.title;\n      variation.parent    = resp.product.id;\n      variation.categories= resp.product.categories;\n      resp.product.push( variation );\n    });\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL3Byb2R1Y3RzL21vZGVsLmpzPzM5MjgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBEdWFsTW9kZWwgPSByZXF1aXJlKCdsaWIvY29uZmlnL2R1YWwtbW9kZWwnKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRHVhbE1vZGVsLmV4dGVuZCh7XG4gIG5hbWU6ICdwcm9kdWN0JyxcblxuICAvLyB0aGlzIGlzIGFuIGFycmF5IG9mIGZpZWxkcyB1c2VkIGJ5IEZpbHRlckNvbGxlY3Rpb24ubWF0Y2htYWtlcigpXG4gIGZpZWxkczogWyd0aXRsZSddLFxuXG4gIHBhcnNlOiBmdW5jdGlvbiAocmVzcCkge1xuICAgIGlmKCByZXNwLnByb2R1Y3QgKXtcbiAgICAgIGlmKCByZXNwLnByb2R1Y3QudHlwZSA9PT0gJ3ZhcmlhYmxlJyApIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJSZXNwb25zZShyZXNwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwLnByb2R1Y3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH1cbiAgfSxcblxuICBzZXJ2ZXJSZXNwb25zZTogZnVuY3Rpb24ocmVzcCl7XG4gICAgXy5lYWNoKCByZXNwLnByb2R1Y3QudmFyaWF0aW9ucywgZnVuY3Rpb24oIHZhcmlhdGlvbiApe1xuICAgICAgdmFyaWF0aW9uLnR5cGUgICAgICA9ICd2YXJpYXRpb24nO1xuICAgICAgdmFyaWF0aW9uLnRpdGxlICAgICA9IHJlc3AucHJvZHVjdC50aXRsZTtcbiAgICAgIHZhcmlhdGlvbi5wYXJlbnQgICAgPSByZXNwLnByb2R1Y3QuaWQ7XG4gICAgICB2YXJpYXRpb24uY2F0ZWdvcmllcz0gcmVzcC5wcm9kdWN0LmNhdGVnb3JpZXM7XG4gICAgICByZXNwLnByb2R1Y3QucHVzaCggdmFyaWF0aW9uICk7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL3Byb2R1Y3RzL21vZGVsLmpzXG4gKiogbW9kdWxlIGlkID0gNTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiNTYuanMifQ==");

/***/ },
/* 57 */
/*!************************************************!*\
  !*** ./assets/js/src/entities/orders/model.js ***!
  \************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var DualModel = __webpack_require__(/*! lib/config/dual-model */ 91);\nvar Radio = __webpack_require__(/*! backbone */ 3).Radio;\nvar debug = __webpack_require__(/*! debug */ 54)('orderModel');\nvar _ = __webpack_require__(/*! lodash */ 2);\n\nmodule.exports = DualModel.extend({\n  name: 'order',\n  defaults: function(){\n    var defaults = { note: '' },\n        customers,\n        default_customer;\n\n    customers = Radio.request('entities', 'get', {\n      type : 'option',\n      name : 'customers'\n    });\n\n    if(customers){\n      default_customer = customers['default'] || customers.guest;\n    }\n\n    if(default_customer){\n      defaults.customer_id = default_customer.id;\n      defaults.customer = default_customer;\n    }\n\n    return defaults;\n  },\n\n  initialize: function(){\n    if( !this.hasRemoteId() ){\n      this.attachCart();\n      this.attachGateways();\n    }\n    _.bindAll(this, 'onSaveSuccess', 'process');\n  },\n\n  /**\n   * Attach cart\n   */\n  attachCart: function(){\n    var cart = Radio.request('entities', 'get', {\n      init : true,\n      type : 'collection',\n      name : 'cart'\n    });\n\n    this.listenToOnce(cart, 'idb:ready', function() {\n      cart.fetchCartItems({order_id: this.id});\n    });\n\n    this.listenTo(cart, {\n      'update:totals': function(totals){\n        this.save(totals, { success: this.onSaveSuccess });\n      },\n      'remove': function(){\n        if(cart.length === 0){\n          this.destroy();\n        }\n      }\n    });\n\n    this.cart = cart;\n  },\n\n  /**\n   * Attach gateways\n   */\n  attachGateways: function(){\n    this.gateways = Radio.request('entities', 'get', {\n      init : true,\n      type : 'collection',\n      name : 'gateways'\n    });\n  },\n\n  /**\n   * special case, first save, update order_id\n   */\n  onSaveSuccess: function(){\n    if(this.cart.order_id){\n      return;\n    }\n    this.cart.order_id = this.id;\n    this.cart.each(function(model) {\n      model.save({order: this.id}, {silent: true});\n    }, this);\n  },\n\n  /**\n   * Convenience method to sum attributes\n   */\n  sum: function(array){\n    var sum = 0;\n    for (var i = 0; i < array.length; i++) {\n      sum += this.get(array[i]);\n    }\n    return sum;\n  },\n\n  /**\n   * process order\n   */\n  process: function(){\n    debug('process order ' + this.id);\n    this.collection.fullSync();\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL29yZGVycy9tb2RlbC5qcz81NWUzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSwyQkFBMkIsa0JBQWtCO0FBQzdDLEtBQUs7O0FBRUw7QUFDQTtBQUNBLDJCQUEyQiw4QkFBOEI7QUFDekQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGVBQWUsR0FBRyxhQUFhO0FBQ2pELEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0JBQWtCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBEdWFsTW9kZWwgPSByZXF1aXJlKCdsaWIvY29uZmlnL2R1YWwtbW9kZWwnKTtcbnZhciBSYWRpbyA9IHJlcXVpcmUoJ2JhY2tib25lJykuUmFkaW87XG52YXIgZGVidWcgPSByZXF1aXJlKCdkZWJ1ZycpKCdvcmRlck1vZGVsJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IER1YWxNb2RlbC5leHRlbmQoe1xuICBuYW1lOiAnb3JkZXInLFxuICBkZWZhdWx0czogZnVuY3Rpb24oKXtcbiAgICB2YXIgZGVmYXVsdHMgPSB7IG5vdGU6ICcnIH0sXG4gICAgICAgIGN1c3RvbWVycyxcbiAgICAgICAgZGVmYXVsdF9jdXN0b21lcjtcblxuICAgIGN1c3RvbWVycyA9IFJhZGlvLnJlcXVlc3QoJ2VudGl0aWVzJywgJ2dldCcsIHtcbiAgICAgIHR5cGUgOiAnb3B0aW9uJyxcbiAgICAgIG5hbWUgOiAnY3VzdG9tZXJzJ1xuICAgIH0pO1xuXG4gICAgaWYoY3VzdG9tZXJzKXtcbiAgICAgIGRlZmF1bHRfY3VzdG9tZXIgPSBjdXN0b21lcnNbJ2RlZmF1bHQnXSB8fCBjdXN0b21lcnMuZ3Vlc3Q7XG4gICAgfVxuXG4gICAgaWYoZGVmYXVsdF9jdXN0b21lcil7XG4gICAgICBkZWZhdWx0cy5jdXN0b21lcl9pZCA9IGRlZmF1bHRfY3VzdG9tZXIuaWQ7XG4gICAgICBkZWZhdWx0cy5jdXN0b21lciA9IGRlZmF1bHRfY3VzdG9tZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlZmF1bHRzO1xuICB9LFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7XG4gICAgaWYoICF0aGlzLmhhc1JlbW90ZUlkKCkgKXtcbiAgICAgIHRoaXMuYXR0YWNoQ2FydCgpO1xuICAgICAgdGhpcy5hdHRhY2hHYXRld2F5cygpO1xuICAgIH1cbiAgICBfLmJpbmRBbGwodGhpcywgJ29uU2F2ZVN1Y2Nlc3MnLCAncHJvY2VzcycpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBdHRhY2ggY2FydFxuICAgKi9cbiAgYXR0YWNoQ2FydDogZnVuY3Rpb24oKXtcbiAgICB2YXIgY2FydCA9IFJhZGlvLnJlcXVlc3QoJ2VudGl0aWVzJywgJ2dldCcsIHtcbiAgICAgIGluaXQgOiB0cnVlLFxuICAgICAgdHlwZSA6ICdjb2xsZWN0aW9uJyxcbiAgICAgIG5hbWUgOiAnY2FydCdcbiAgICB9KTtcblxuICAgIHRoaXMubGlzdGVuVG9PbmNlKGNhcnQsICdpZGI6cmVhZHknLCBmdW5jdGlvbigpIHtcbiAgICAgIGNhcnQuZmV0Y2hDYXJ0SXRlbXMoe29yZGVyX2lkOiB0aGlzLmlkfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmxpc3RlblRvKGNhcnQsIHtcbiAgICAgICd1cGRhdGU6dG90YWxzJzogZnVuY3Rpb24odG90YWxzKXtcbiAgICAgICAgdGhpcy5zYXZlKHRvdGFscywgeyBzdWNjZXNzOiB0aGlzLm9uU2F2ZVN1Y2Nlc3MgfSk7XG4gICAgICB9LFxuICAgICAgJ3JlbW92ZSc6IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKGNhcnQubGVuZ3RoID09PSAwKXtcbiAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jYXJ0ID0gY2FydDtcbiAgfSxcblxuICAvKipcbiAgICogQXR0YWNoIGdhdGV3YXlzXG4gICAqL1xuICBhdHRhY2hHYXRld2F5czogZnVuY3Rpb24oKXtcbiAgICB0aGlzLmdhdGV3YXlzID0gUmFkaW8ucmVxdWVzdCgnZW50aXRpZXMnLCAnZ2V0Jywge1xuICAgICAgaW5pdCA6IHRydWUsXG4gICAgICB0eXBlIDogJ2NvbGxlY3Rpb24nLFxuICAgICAgbmFtZSA6ICdnYXRld2F5cydcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogc3BlY2lhbCBjYXNlLCBmaXJzdCBzYXZlLCB1cGRhdGUgb3JkZXJfaWRcbiAgICovXG4gIG9uU2F2ZVN1Y2Nlc3M6IGZ1bmN0aW9uKCl7XG4gICAgaWYodGhpcy5jYXJ0Lm9yZGVyX2lkKXtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jYXJ0Lm9yZGVyX2lkID0gdGhpcy5pZDtcbiAgICB0aGlzLmNhcnQuZWFjaChmdW5jdGlvbihtb2RlbCkge1xuICAgICAgbW9kZWwuc2F2ZSh7b3JkZXI6IHRoaXMuaWR9LCB7c2lsZW50OiB0cnVlfSk7XG4gICAgfSwgdGhpcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBzdW0gYXR0cmlidXRlc1xuICAgKi9cbiAgc3VtOiBmdW5jdGlvbihhcnJheSl7XG4gICAgdmFyIHN1bSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgc3VtICs9IHRoaXMuZ2V0KGFycmF5W2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1bTtcbiAgfSxcblxuICAvKipcbiAgICogcHJvY2VzcyBvcmRlclxuICAgKi9cbiAgcHJvY2VzczogZnVuY3Rpb24oKXtcbiAgICBkZWJ1ZygncHJvY2VzcyBvcmRlciAnICsgdGhpcy5pZCk7XG4gICAgdGhpcy5jb2xsZWN0aW9uLmZ1bGxTeW5jKCk7XG4gIH1cblxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvZW50aXRpZXMvb3JkZXJzL21vZGVsLmpzXG4gKiogbW9kdWxlIGlkID0gNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiNTcuanMifQ==");

/***/ },
/* 58 */
/*!***********************************************!*\
  !*** ./assets/js/src/lib/config/indexeddb.js ***!
  \***********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(global) {/**\n This is a customised version of https://github.com/vincentmac/backbone-idb\n\n The MIT License (MIT)\n\n Copyright (c) 2013 Vincent Mac\n\n Permission is hereby granted, free of charge, to any person obtaining a copy of\n this software and associated documentation files (the \"Software\"), to deal in\n the Software without restriction, including without limitation the rights to\n use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n the Software, and to permit persons to whom the Software is furnished to do so,\n subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nvar Backbone = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar IDBStore = __webpack_require__(/*! idb-wrapper */ 89);\n\nvar defaultErrorHandler = function (error) {\n  throw error;\n};\n\nvar noop = function () {\n};\n\nBackbone.IndexedDB = function IndexedDB(options, parent) {\n  var that = this;\n  this.parent = parent;  // reference to the model or collection\n\n  var defaultReadyHandler = function () {\n    // console.log('idb:ready this:', this);  // <IDBStore>\n    // console.log('idb:ready that:', that);  // <IndexedDB>\n\n    // By default, make the Backbone.IndexedDB available through `parent.indexedDB`\n    // that.parent.indexedDB = that;\n    // Fire ready event on parent model or collection\n    that.parent.trigger('idb:ready', that);\n  };\n\n  var defaults = {\n    storeName: 'Store',\n    storePrefix: '',\n    dbVersion: 1,\n    keyPath: 'id',\n    autoIncrement: true,\n    onStoreReady: defaultReadyHandler,\n    onError: defaultErrorHandler,\n    indexes: []\n  };\n\n  options = _.defaults(options || {}, defaults);\n  this.dbName = options.storePrefix + options.storeName;\n  this.store = new IDBStore(options);\n  this.keyPath = options.keyPath;\n};\n\nBackbone.IndexedDB.prototype = {\n\n  /**\n   * Add a new model to the store\n   *\n   * @param {Backbone.Model} model - Backbone model to add to store\n   * @param {Object} options - sync options created by Backbone\n   * @param {Function} [options.success] - overridable success callback\n   * @param {Function} [options.error] - overridable error callback\n   */\n  create: function(model, options) {\n    var data = model.attributes;\n    var that = this;\n\n    if(this.dualStorage){\n      model.set('status', model.states.CREATE_FAILED);\n    }\n\n    this.store.put(data, function(insertedId) {\n      data[that.keyPath] = insertedId;\n      options.success(data)\n    }, options.error);\n\n  },\n\n  /**\n   * Update a model in the store\n   *\n   * @param {Backbone.Model} model - Backbone model to update and save to store\n   * @param {Object} options - sync options created by Backbone\n   * @param {Function} [options.success] - overridable success callback\n   * @param {Function} [options.error] - overridable error callback\n   */\n  update: function(model, options) {\n    if(this.dualStorage && model.hasRemoteId()) {\n      model.set('status', model.states.UPDATE_FAILED);\n    }\n    this.store.put(model.attributes, options.success, options.error);\n  },\n\n  /**\n   * Retrieve a model from the store\n   *\n   * @param {Backbone.Model} model - Backbone model to get from store\n   * @param {Object} options - sync options created by Backbone\n   * @param {Function} [options.success] - overridable success callback\n   * @param {Function} [options.error] - overridable error callback\n   */\n  read: function(model, options) {\n    this.store.get(model.id, options.success, options.error);\n  },\n\n  /**\n   * Retrieve a collection from the store\n   *\n   * @param {Object} options - sync options created by Backbone\n   * @param {Function} [options.success] - overridable success callback\n   * @param {Function} [options.error] - overridable error callback\n   */\n  getAll: function(options) {\n\n    if(this.dualStorage){\n      var data = [];\n      return this.iterate(function(item) {\n        if (item.status !== item.states.DELETE_FAILED) {\n          return data.push(item);\n        }\n      }, {\n        onEnd: function() {\n          return options.success(data);\n        }\n      });\n    } else {\n      this.store.getAll(options.success, options.error);\n    }\n\n  },\n\n  /**\n   * Delete a model from the store\n   *\n   * @param {Backbone.Model} model - Backbone model to delete from store\n   * @param {Object} options - sync options created by Backbone\n   * @param {Function} [options.success] - overridable success callback\n   * @param {Function} [options.error] - overridable error callback\n   */\n  destroy: function(model, options) {\n    if (model.isNew()) {\n      return false;\n    }\n\n    if(this.dualStorage){\n      model.set('status', model.states.DELETE_FAILED);\n      this.store.put(model.attributes, options.success, options.error);\n    } else {\n      this.store.remove(model.id, options.success, options.error);\n    }\n\n  },\n\n  /**\n   * Iterates over the store using the given options and calling onItem\n   * for each entry matching the options.\n   *\n   * @param {Function} onItem - A callback to be called for each match\n   * @param {Object} [options] - An object defining specific options\n   * @param {Object} [options.index=null] - An IDBIndex to operate on\n   * @param {String} [options.order=ASC] - The order in which to provide the\n   *  results, can be 'DESC' or 'ASC'\n   * @param {Boolean} [options.autoContinue=true] - Whether to automatically\n   *  iterate the cursor to the next result\n   * @param {Boolean} [options.filterDuplicates=false] - Whether to exclude\n   *  duplicate matches\n   * @param {Object} [options.keyRange=null] - An IDBKeyRange to use\n   * @param {Boolean} [options.writeAccess=false] - Whether grant write access\n   *  to the store in the onItem callback\n   * @param {Function} [options.onEnd=null] - A callback to be called after\n   *  iteration has ended\n   * @param {Function} [options.onError=throw] - A callback to be called\n   *  if an error occurred during the operation.\n   */\n  iterate: function(onItem, options) {\n    if (options.keyRange && !(options.keyRange instanceof global.IDBKeyRange)) {\n      options.keyRange = this.makeKeyRange(options.keyRange);\n    }\n\n    this.store.iterate(onItem, options);\n  },\n\n  /**\n   * Creates a key range using specified options. This key range can be\n   * handed over to the count() and iterate() methods.\n   *\n   * Note: You must provide at least one or both of \"lower\" or \"upper\" value.\n   *\n   * @param {Object} options The options for the key range to create\n   * @param {*} [options.lower] The lower bound\n   * @param {Boolean} [options.excludeLower] Whether to exclude the lower\n   *  bound passed in options.lower from the key range\n   * @param {*} [options.upper] The upper bound\n   * @param {Boolean} [options.excludeUpper] Whether to exclude the upper\n   *  bound passed in options.upper from the key range\n   * @param {*} [options.only] A single key value. Use this if you need a key\n   *  range that only includes one value for a key. Providing this\n   *  property invalidates all other properties.\n   * @return {Object} The IDBKeyRange representing the specified options\n   */\n  makeKeyRange: function(options) {\n    return this.store.makeKeyRange(options);\n  },\n\n  /**\n   * Perform a batch operation to save all models in the current collection to indexedDB.\n   *\n   * @param {Function} [onSuccess] - success callback\n   * @param {Function} [onError] - error callback\n   */\n  saveAll: function(onSuccess, onError) {\n    onSuccess || (onSuccess = noop);\n    onError || (onError = defaultErrorHandler);\n\n    this.store.putBatch(this.parent.toJSON(), onSuccess, onError);\n  },\n\n  /**\n   * Perform a batch operation to save and/or remove models in the current collection to\n   * indexedDB. This is a proxy to the idbstore `batch` method\n   *\n   * @param {Array} dataArray - Array of objects containing the operation to run and\n   *  the model (for put operations).\n   * @param {Function} [onSuccess] - success callback\n   * @param {Function} [onError] - error callback\n   */\n  batch: function(dataArray, onSuccess, onError) {\n    onSuccess || (onSuccess = noop);\n    onError || (onError = defaultErrorHandler);\n\n    this.store.batch(dataArray, onSuccess, onError);\n  },\n\n  /**\n   * Perform a batch put operation to save models to indexedDB. This is a\n   * proxy to the idbstore `putBatch` method\n   *\n   * @param {Array} dataArray - Array of models (in JSON) to store\n   * @param {Function} [onSuccess] - success callback\n   * @param {Function} [onError] - error callback\n   */\n  putBatch: function(dataArray, onSuccess, onError) {\n    onSuccess || (onSuccess = noop);\n    onError || (onError = defaultErrorHandler);\n\n    this.store.putBatch(dataArray, onSuccess, onError);\n  },\n\n  /**\n   * Perform a batch operation to remove models from indexedDB. This is a\n   * proxy to the idbstore `removeBtch` method\n   *\n   * @param {Array} keyArray - keyArray An array of keys to remove\n   * @param {Function} [onSuccess] - success callback\n   * @param {Function} [onError] - error callback\n   */\n  removeBatch: function(keyArray, onSuccess, onError) {\n    onSuccess || (onSuccess = noop);\n    onError || (onError = defaultErrorHandler);\n\n    this.store.removeBatch(keyArray, onSuccess, onError);\n  },\n\n  /**\n   * Clears all content from the current indexedDB for this collection/model\n   *\n   * @param {Function} [onSuccess] - success callback\n   * @param {Function} [onError] - error callback\n   */\n  clear: function(onSuccess, onError) {\n    onSuccess || (onSuccess = noop);\n    onError || (onError = defaultErrorHandler);\n\n    this.store.clear(onSuccess, onError);\n  },\n\n  /**\n   * Deletes the current indexedDB for this collection/model\n   */\n  deleteDatabase: function() {\n    this.store.deleteDatabase();\n  }\n\n  // });\n};\n\n\n/**\n * Backbone.sync drop-in replacement\n *\n * This function replaces the model or collection's sync method and remains\n * compliant with Backbone's api.\n */\nBackbone.IndexedDB.sync = Backbone.idbSync = function(method, model, options) {\n  var deferred = new $.Deferred();\n  var db = model.indexedDB || model.collection.indexedDB;\n  // console.log('Backbone.IndexedDB.sync', method, model, options);\n  var success = options.success || noop;\n  var error = options.success || noop;\n  options.success = function (result) {\n    success.apply(this, arguments);\n    deferred.resolve(result);\n  };\n  options.error = function (result) {\n    error.apply(this, arguments);\n    deferred.reject(result);\n  };\n  switch (method) {\n\n    // Retrieve an individual model or entire collection from indexedDB\n    case 'read':\n      model.id !== undefined ? db.read(model, options) : db.getAll(options);\n      break;\n\n    case 'create':\n      if (model.id) {\n        db.update(model, options);\n      } else {\n        db.create(model, options);\n      }\n      break;\n\n    case 'update':\n      if (model.id) {\n        db.update(model, options);\n      } else {\n        db.create(model, options);\n      }\n      break;\n\n    case 'delete':\n      if (model.id) {\n        db.destroy(model, options);\n      }\n      break;\n  }\n  return deferred.promise();\n\n};\n\n// Reference original `Backbone.sync`\nBackbone.ajaxSync = Backbone.sync;\n\nBackbone.getIDBSyncMethod = function(model) {\n  if(model.indexedDB || (model.collection && model.collection.indexedDB)) {\n    return Backbone.idbSync;\n  }\n\n  return Backbone.ajaxSync;\n};\n\n// Override 'Backbone.sync' to default to idbSync,\n// the original 'Backbone.sync' is still available in 'Backbone.ajaxSync'\nBackbone.sync = function(method, model, options) {\n  return Backbone.getIDBSyncMethod(model).apply(this, [method, model, options]);\n};\n\nmodule.exports = Backbone.IndexedDB;\n/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvaW5kZXhlZGRiLmpzP2E4NDUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1Qjs7QUFFdkI7QUFDQSw0Q0FBNEM7QUFDNUMsNENBQTRDOztBQUU1QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsU0FBUztBQUN0QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsU0FBUztBQUN0QixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsT0FBTztBQUNwQixhQUFhLE9BQU87QUFDcEIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixhQUFhLEVBQUU7QUFDZixhQUFhLFFBQVE7QUFDckI7QUFDQSxhQUFhLEVBQUU7QUFDZixhQUFhLFFBQVE7QUFDckI7QUFDQSxhQUFhLEVBQUU7QUFDZjtBQUNBO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE1BQU07QUFDbkI7QUFDQSxhQUFhLFNBQVM7QUFDdEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsTUFBTTtBQUNuQixhQUFhLFNBQVM7QUFDdEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsTUFBTTtBQUNuQixhQUFhLFNBQVM7QUFDdEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtBQUNOOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9DIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gVGhpcyBpcyBhIGN1c3RvbWlzZWQgdmVyc2lvbiBvZiBodHRwczovL2dpdGh1Yi5jb20vdmluY2VudG1hYy9iYWNrYm9uZS1pZGJcblxuIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuXG4gQ29weXJpZ2h0IChjKSAyMDEzIFZpbmNlbnQgTWFjXG5cbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mXG4gdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpblxuIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cbiB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZlxuIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbyxcbiBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1NcbiBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1JcbiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVJcbiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTlxuIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG4gKi9cblxudmFyIEJhY2tib25lID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xudmFyIElEQlN0b3JlID0gcmVxdWlyZSgnaWRiLXdyYXBwZXInKTtcblxudmFyIGRlZmF1bHRFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgdGhyb3cgZXJyb3I7XG59O1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uICgpIHtcbn07XG5cbkJhY2tib25lLkluZGV4ZWREQiA9IGZ1bmN0aW9uIEluZGV4ZWREQihvcHRpb25zLCBwYXJlbnQpIHtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB0aGlzLnBhcmVudCA9IHBhcmVudDsgIC8vIHJlZmVyZW5jZSB0byB0aGUgbW9kZWwgb3IgY29sbGVjdGlvblxuXG4gIHZhciBkZWZhdWx0UmVhZHlIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdpZGI6cmVhZHkgdGhpczonLCB0aGlzKTsgIC8vIDxJREJTdG9yZT5cbiAgICAvLyBjb25zb2xlLmxvZygnaWRiOnJlYWR5IHRoYXQ6JywgdGhhdCk7ICAvLyA8SW5kZXhlZERCPlxuXG4gICAgLy8gQnkgZGVmYXVsdCwgbWFrZSB0aGUgQmFja2JvbmUuSW5kZXhlZERCIGF2YWlsYWJsZSB0aHJvdWdoIGBwYXJlbnQuaW5kZXhlZERCYFxuICAgIC8vIHRoYXQucGFyZW50LmluZGV4ZWREQiA9IHRoYXQ7XG4gICAgLy8gRmlyZSByZWFkeSBldmVudCBvbiBwYXJlbnQgbW9kZWwgb3IgY29sbGVjdGlvblxuICAgIHRoYXQucGFyZW50LnRyaWdnZXIoJ2lkYjpyZWFkeScsIHRoYXQpO1xuICB9O1xuXG4gIHZhciBkZWZhdWx0cyA9IHtcbiAgICBzdG9yZU5hbWU6ICdTdG9yZScsXG4gICAgc3RvcmVQcmVmaXg6ICcnLFxuICAgIGRiVmVyc2lvbjogMSxcbiAgICBrZXlQYXRoOiAnaWQnLFxuICAgIGF1dG9JbmNyZW1lbnQ6IHRydWUsXG4gICAgb25TdG9yZVJlYWR5OiBkZWZhdWx0UmVhZHlIYW5kbGVyLFxuICAgIG9uRXJyb3I6IGRlZmF1bHRFcnJvckhhbmRsZXIsXG4gICAgaW5kZXhlczogW11cbiAgfTtcblxuICBvcHRpb25zID0gXy5kZWZhdWx0cyhvcHRpb25zIHx8IHt9LCBkZWZhdWx0cyk7XG4gIHRoaXMuZGJOYW1lID0gb3B0aW9ucy5zdG9yZVByZWZpeCArIG9wdGlvbnMuc3RvcmVOYW1lO1xuICB0aGlzLnN0b3JlID0gbmV3IElEQlN0b3JlKG9wdGlvbnMpO1xuICB0aGlzLmtleVBhdGggPSBvcHRpb25zLmtleVBhdGg7XG59O1xuXG5CYWNrYm9uZS5JbmRleGVkREIucHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBBZGQgYSBuZXcgbW9kZWwgdG8gdGhlIHN0b3JlXG4gICAqXG4gICAqIEBwYXJhbSB7QmFja2JvbmUuTW9kZWx9IG1vZGVsIC0gQmFja2JvbmUgbW9kZWwgdG8gYWRkIHRvIHN0b3JlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gc3luYyBvcHRpb25zIGNyZWF0ZWQgYnkgQmFja2JvbmVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuc3VjY2Vzc10gLSBvdmVycmlkYWJsZSBzdWNjZXNzIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmVycm9yXSAtIG92ZXJyaWRhYmxlIGVycm9yIGNhbGxiYWNrXG4gICAqL1xuICBjcmVhdGU6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgdmFyIGRhdGEgPSBtb2RlbC5hdHRyaWJ1dGVzO1xuICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgIGlmKHRoaXMuZHVhbFN0b3JhZ2Upe1xuICAgICAgbW9kZWwuc2V0KCdzdGF0dXMnLCBtb2RlbC5zdGF0ZXMuQ1JFQVRFX0ZBSUxFRCk7XG4gICAgfVxuXG4gICAgdGhpcy5zdG9yZS5wdXQoZGF0YSwgZnVuY3Rpb24oaW5zZXJ0ZWRJZCkge1xuICAgICAgZGF0YVt0aGF0LmtleVBhdGhdID0gaW5zZXJ0ZWRJZDtcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyhkYXRhKVxuICAgIH0sIG9wdGlvbnMuZXJyb3IpO1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIG1vZGVsIGluIHRoZSBzdG9yZVxuICAgKlxuICAgKiBAcGFyYW0ge0JhY2tib25lLk1vZGVsfSBtb2RlbCAtIEJhY2tib25lIG1vZGVsIHRvIHVwZGF0ZSBhbmQgc2F2ZSB0byBzdG9yZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHN5bmMgb3B0aW9ucyBjcmVhdGVkIGJ5IEJhY2tib25lXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLnN1Y2Nlc3NdIC0gb3ZlcnJpZGFibGUgc3VjY2VzcyBjYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5lcnJvcl0gLSBvdmVycmlkYWJsZSBlcnJvciBjYWxsYmFja1xuICAgKi9cbiAgdXBkYXRlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgIGlmKHRoaXMuZHVhbFN0b3JhZ2UgJiYgbW9kZWwuaGFzUmVtb3RlSWQoKSkge1xuICAgICAgbW9kZWwuc2V0KCdzdGF0dXMnLCBtb2RlbC5zdGF0ZXMuVVBEQVRFX0ZBSUxFRCk7XG4gICAgfVxuICAgIHRoaXMuc3RvcmUucHV0KG1vZGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMuc3VjY2Vzcywgb3B0aW9ucy5lcnJvcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGEgbW9kZWwgZnJvbSB0aGUgc3RvcmVcbiAgICpcbiAgICogQHBhcmFtIHtCYWNrYm9uZS5Nb2RlbH0gbW9kZWwgLSBCYWNrYm9uZSBtb2RlbCB0byBnZXQgZnJvbSBzdG9yZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHN5bmMgb3B0aW9ucyBjcmVhdGVkIGJ5IEJhY2tib25lXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLnN1Y2Nlc3NdIC0gb3ZlcnJpZGFibGUgc3VjY2VzcyBjYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5lcnJvcl0gLSBvdmVycmlkYWJsZSBlcnJvciBjYWxsYmFja1xuICAgKi9cbiAgcmVhZDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnN0b3JlLmdldChtb2RlbC5pZCwgb3B0aW9ucy5zdWNjZXNzLCBvcHRpb25zLmVycm9yKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0cmlldmUgYSBjb2xsZWN0aW9uIGZyb20gdGhlIHN0b3JlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gc3luYyBvcHRpb25zIGNyZWF0ZWQgYnkgQmFja2JvbmVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuc3VjY2Vzc10gLSBvdmVycmlkYWJsZSBzdWNjZXNzIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmVycm9yXSAtIG92ZXJyaWRhYmxlIGVycm9yIGNhbGxiYWNrXG4gICAqL1xuICBnZXRBbGw6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgIGlmKHRoaXMuZHVhbFN0b3JhZ2Upe1xuICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgIHJldHVybiB0aGlzLml0ZXJhdGUoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICBpZiAoaXRlbS5zdGF0dXMgIT09IGl0ZW0uc3RhdGVzLkRFTEVURV9GQUlMRUQpIHtcbiAgICAgICAgICByZXR1cm4gZGF0YS5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9LCB7XG4gICAgICAgIG9uRW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gb3B0aW9ucy5zdWNjZXNzKGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdG9yZS5nZXRBbGwob3B0aW9ucy5zdWNjZXNzLCBvcHRpb25zLmVycm9yKTtcbiAgICB9XG5cbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlIGEgbW9kZWwgZnJvbSB0aGUgc3RvcmVcbiAgICpcbiAgICogQHBhcmFtIHtCYWNrYm9uZS5Nb2RlbH0gbW9kZWwgLSBCYWNrYm9uZSBtb2RlbCB0byBkZWxldGUgZnJvbSBzdG9yZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHN5bmMgb3B0aW9ucyBjcmVhdGVkIGJ5IEJhY2tib25lXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLnN1Y2Nlc3NdIC0gb3ZlcnJpZGFibGUgc3VjY2VzcyBjYWxsYmFja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5lcnJvcl0gLSBvdmVycmlkYWJsZSBlcnJvciBjYWxsYmFja1xuICAgKi9cbiAgZGVzdHJveTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICBpZiAobW9kZWwuaXNOZXcoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmKHRoaXMuZHVhbFN0b3JhZ2Upe1xuICAgICAgbW9kZWwuc2V0KCdzdGF0dXMnLCBtb2RlbC5zdGF0ZXMuREVMRVRFX0ZBSUxFRCk7XG4gICAgICB0aGlzLnN0b3JlLnB1dChtb2RlbC5hdHRyaWJ1dGVzLCBvcHRpb25zLnN1Y2Nlc3MsIG9wdGlvbnMuZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0b3JlLnJlbW92ZShtb2RlbC5pZCwgb3B0aW9ucy5zdWNjZXNzLCBvcHRpb25zLmVycm9yKTtcbiAgICB9XG5cbiAgfSxcblxuICAvKipcbiAgICogSXRlcmF0ZXMgb3ZlciB0aGUgc3RvcmUgdXNpbmcgdGhlIGdpdmVuIG9wdGlvbnMgYW5kIGNhbGxpbmcgb25JdGVtXG4gICAqIGZvciBlYWNoIGVudHJ5IG1hdGNoaW5nIHRoZSBvcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkl0ZW0gLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBmb3IgZWFjaCBtYXRjaFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gQW4gb2JqZWN0IGRlZmluaW5nIHNwZWNpZmljIG9wdGlvbnNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmluZGV4PW51bGxdIC0gQW4gSURCSW5kZXggdG8gb3BlcmF0ZSBvblxuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMub3JkZXI9QVNDXSAtIFRoZSBvcmRlciBpbiB3aGljaCB0byBwcm92aWRlIHRoZVxuICAgKiAgcmVzdWx0cywgY2FuIGJlICdERVNDJyBvciAnQVNDJ1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmF1dG9Db250aW51ZT10cnVlXSAtIFdoZXRoZXIgdG8gYXV0b21hdGljYWxseVxuICAgKiAgaXRlcmF0ZSB0aGUgY3Vyc29yIHRvIHRoZSBuZXh0IHJlc3VsdFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmZpbHRlckR1cGxpY2F0ZXM9ZmFsc2VdIC0gV2hldGhlciB0byBleGNsdWRlXG4gICAqICBkdXBsaWNhdGUgbWF0Y2hlc1xuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMua2V5UmFuZ2U9bnVsbF0gLSBBbiBJREJLZXlSYW5nZSB0byB1c2VcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy53cml0ZUFjY2Vzcz1mYWxzZV0gLSBXaGV0aGVyIGdyYW50IHdyaXRlIGFjY2Vzc1xuICAgKiAgdG8gdGhlIHN0b3JlIGluIHRoZSBvbkl0ZW0gY2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMub25FbmQ9bnVsbF0gLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBhZnRlclxuICAgKiAgaXRlcmF0aW9uIGhhcyBlbmRlZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5vbkVycm9yPXRocm93XSAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkXG4gICAqICBpZiBhbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdGhlIG9wZXJhdGlvbi5cbiAgICovXG4gIGl0ZXJhdGU6IGZ1bmN0aW9uKG9uSXRlbSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmtleVJhbmdlICYmICEob3B0aW9ucy5rZXlSYW5nZSBpbnN0YW5jZW9mIGdsb2JhbC5JREJLZXlSYW5nZSkpIHtcbiAgICAgIG9wdGlvbnMua2V5UmFuZ2UgPSB0aGlzLm1ha2VLZXlSYW5nZShvcHRpb25zLmtleVJhbmdlKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0b3JlLml0ZXJhdGUob25JdGVtLCBvcHRpb25zKTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGtleSByYW5nZSB1c2luZyBzcGVjaWZpZWQgb3B0aW9ucy4gVGhpcyBrZXkgcmFuZ2UgY2FuIGJlXG4gICAqIGhhbmRlZCBvdmVyIHRvIHRoZSBjb3VudCgpIGFuZCBpdGVyYXRlKCkgbWV0aG9kcy5cbiAgICpcbiAgICogTm90ZTogWW91IG11c3QgcHJvdmlkZSBhdCBsZWFzdCBvbmUgb3IgYm90aCBvZiBcImxvd2VyXCIgb3IgXCJ1cHBlclwiIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBUaGUgb3B0aW9ucyBmb3IgdGhlIGtleSByYW5nZSB0byBjcmVhdGVcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5sb3dlcl0gVGhlIGxvd2VyIGJvdW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZXhjbHVkZUxvd2VyXSBXaGV0aGVyIHRvIGV4Y2x1ZGUgdGhlIGxvd2VyXG4gICAqICBib3VuZCBwYXNzZWQgaW4gb3B0aW9ucy5sb3dlciBmcm9tIHRoZSBrZXkgcmFuZ2VcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy51cHBlcl0gVGhlIHVwcGVyIGJvdW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZXhjbHVkZVVwcGVyXSBXaGV0aGVyIHRvIGV4Y2x1ZGUgdGhlIHVwcGVyXG4gICAqICBib3VuZCBwYXNzZWQgaW4gb3B0aW9ucy51cHBlciBmcm9tIHRoZSBrZXkgcmFuZ2VcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5vbmx5XSBBIHNpbmdsZSBrZXkgdmFsdWUuIFVzZSB0aGlzIGlmIHlvdSBuZWVkIGEga2V5XG4gICAqICByYW5nZSB0aGF0IG9ubHkgaW5jbHVkZXMgb25lIHZhbHVlIGZvciBhIGtleS4gUHJvdmlkaW5nIHRoaXNcbiAgICogIHByb3BlcnR5IGludmFsaWRhdGVzIGFsbCBvdGhlciBwcm9wZXJ0aWVzLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBJREJLZXlSYW5nZSByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBvcHRpb25zXG4gICAqL1xuICBtYWtlS2V5UmFuZ2U6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5zdG9yZS5tYWtlS2V5UmFuZ2Uob3B0aW9ucyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSBiYXRjaCBvcGVyYXRpb24gdG8gc2F2ZSBhbGwgbW9kZWxzIGluIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gdG8gaW5kZXhlZERCLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25TdWNjZXNzXSAtIHN1Y2Nlc3MgY2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdIC0gZXJyb3IgY2FsbGJhY2tcbiAgICovXG4gIHNhdmVBbGw6IGZ1bmN0aW9uKG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIG9uU3VjY2VzcyB8fCAob25TdWNjZXNzID0gbm9vcCk7XG4gICAgb25FcnJvciB8fCAob25FcnJvciA9IGRlZmF1bHRFcnJvckhhbmRsZXIpO1xuXG4gICAgdGhpcy5zdG9yZS5wdXRCYXRjaCh0aGlzLnBhcmVudC50b0pTT04oKSwgb25TdWNjZXNzLCBvbkVycm9yKTtcbiAgfSxcblxuICAvKipcbiAgICogUGVyZm9ybSBhIGJhdGNoIG9wZXJhdGlvbiB0byBzYXZlIGFuZC9vciByZW1vdmUgbW9kZWxzIGluIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gdG9cbiAgICogaW5kZXhlZERCLiBUaGlzIGlzIGEgcHJveHkgdG8gdGhlIGlkYnN0b3JlIGBiYXRjaGAgbWV0aG9kXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFBcnJheSAtIEFycmF5IG9mIG9iamVjdHMgY29udGFpbmluZyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBhbmRcbiAgICogIHRoZSBtb2RlbCAoZm9yIHB1dCBvcGVyYXRpb25zKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uU3VjY2Vzc10gLSBzdWNjZXNzIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSAtIGVycm9yIGNhbGxiYWNrXG4gICAqL1xuICBiYXRjaDogZnVuY3Rpb24oZGF0YUFycmF5LCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICBvblN1Y2Nlc3MgfHwgKG9uU3VjY2VzcyA9IG5vb3ApO1xuICAgIG9uRXJyb3IgfHwgKG9uRXJyb3IgPSBkZWZhdWx0RXJyb3JIYW5kbGVyKTtcblxuICAgIHRoaXMuc3RvcmUuYmF0Y2goZGF0YUFycmF5LCBvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGEgYmF0Y2ggcHV0IG9wZXJhdGlvbiB0byBzYXZlIG1vZGVscyB0byBpbmRleGVkREIuIFRoaXMgaXMgYVxuICAgKiBwcm94eSB0byB0aGUgaWRic3RvcmUgYHB1dEJhdGNoYCBtZXRob2RcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gZGF0YUFycmF5IC0gQXJyYXkgb2YgbW9kZWxzIChpbiBKU09OKSB0byBzdG9yZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25TdWNjZXNzXSAtIHN1Y2Nlc3MgY2FsbGJhY2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdIC0gZXJyb3IgY2FsbGJhY2tcbiAgICovXG4gIHB1dEJhdGNoOiBmdW5jdGlvbihkYXRhQXJyYXksIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIG9uU3VjY2VzcyB8fCAob25TdWNjZXNzID0gbm9vcCk7XG4gICAgb25FcnJvciB8fCAob25FcnJvciA9IGRlZmF1bHRFcnJvckhhbmRsZXIpO1xuXG4gICAgdGhpcy5zdG9yZS5wdXRCYXRjaChkYXRhQXJyYXksIG9uU3VjY2Vzcywgb25FcnJvcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBlcmZvcm0gYSBiYXRjaCBvcGVyYXRpb24gdG8gcmVtb3ZlIG1vZGVscyBmcm9tIGluZGV4ZWREQi4gVGhpcyBpcyBhXG4gICAqIHByb3h5IHRvIHRoZSBpZGJzdG9yZSBgcmVtb3ZlQnRjaGAgbWV0aG9kXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGtleUFycmF5IC0ga2V5QXJyYXkgQW4gYXJyYXkgb2Yga2V5cyB0byByZW1vdmVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uU3VjY2Vzc10gLSBzdWNjZXNzIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSAtIGVycm9yIGNhbGxiYWNrXG4gICAqL1xuICByZW1vdmVCYXRjaDogZnVuY3Rpb24oa2V5QXJyYXksIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIG9uU3VjY2VzcyB8fCAob25TdWNjZXNzID0gbm9vcCk7XG4gICAgb25FcnJvciB8fCAob25FcnJvciA9IGRlZmF1bHRFcnJvckhhbmRsZXIpO1xuXG4gICAgdGhpcy5zdG9yZS5yZW1vdmVCYXRjaChrZXlBcnJheSwgb25TdWNjZXNzLCBvbkVycm9yKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBjb250ZW50IGZyb20gdGhlIGN1cnJlbnQgaW5kZXhlZERCIGZvciB0aGlzIGNvbGxlY3Rpb24vbW9kZWxcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uU3VjY2Vzc10gLSBzdWNjZXNzIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSAtIGVycm9yIGNhbGxiYWNrXG4gICAqL1xuICBjbGVhcjogZnVuY3Rpb24ob25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgb25TdWNjZXNzIHx8IChvblN1Y2Nlc3MgPSBub29wKTtcbiAgICBvbkVycm9yIHx8IChvbkVycm9yID0gZGVmYXVsdEVycm9ySGFuZGxlcik7XG5cbiAgICB0aGlzLnN0b3JlLmNsZWFyKG9uU3VjY2Vzcywgb25FcnJvcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgdGhlIGN1cnJlbnQgaW5kZXhlZERCIGZvciB0aGlzIGNvbGxlY3Rpb24vbW9kZWxcbiAgICovXG4gIGRlbGV0ZURhdGFiYXNlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN0b3JlLmRlbGV0ZURhdGFiYXNlKCk7XG4gIH1cblxuICAvLyB9KTtcbn07XG5cblxuLyoqXG4gKiBCYWNrYm9uZS5zeW5jIGRyb3AtaW4gcmVwbGFjZW1lbnRcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHJlcGxhY2VzIHRoZSBtb2RlbCBvciBjb2xsZWN0aW9uJ3Mgc3luYyBtZXRob2QgYW5kIHJlbWFpbnNcbiAqIGNvbXBsaWFudCB3aXRoIEJhY2tib25lJ3MgYXBpLlxuICovXG5CYWNrYm9uZS5JbmRleGVkREIuc3luYyA9IEJhY2tib25lLmlkYlN5bmMgPSBmdW5jdGlvbihtZXRob2QsIG1vZGVsLCBvcHRpb25zKSB7XG4gIHZhciBkZWZlcnJlZCA9IG5ldyAkLkRlZmVycmVkKCk7XG4gIHZhciBkYiA9IG1vZGVsLmluZGV4ZWREQiB8fCBtb2RlbC5jb2xsZWN0aW9uLmluZGV4ZWREQjtcbiAgLy8gY29uc29sZS5sb2coJ0JhY2tib25lLkluZGV4ZWREQi5zeW5jJywgbWV0aG9kLCBtb2RlbCwgb3B0aW9ucyk7XG4gIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzIHx8IG5vb3A7XG4gIHZhciBlcnJvciA9IG9wdGlvbnMuc3VjY2VzcyB8fCBub29wO1xuICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgc3VjY2Vzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0KTtcbiAgfTtcbiAgb3B0aW9ucy5lcnJvciA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICBlcnJvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGRlZmVycmVkLnJlamVjdChyZXN1bHQpO1xuICB9O1xuICBzd2l0Y2ggKG1ldGhvZCkge1xuXG4gICAgLy8gUmV0cmlldmUgYW4gaW5kaXZpZHVhbCBtb2RlbCBvciBlbnRpcmUgY29sbGVjdGlvbiBmcm9tIGluZGV4ZWREQlxuICAgIGNhc2UgJ3JlYWQnOlxuICAgICAgbW9kZWwuaWQgIT09IHVuZGVmaW5lZCA/IGRiLnJlYWQobW9kZWwsIG9wdGlvbnMpIDogZGIuZ2V0QWxsKG9wdGlvbnMpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdjcmVhdGUnOlxuICAgICAgaWYgKG1vZGVsLmlkKSB7XG4gICAgICAgIGRiLnVwZGF0ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYi5jcmVhdGUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICd1cGRhdGUnOlxuICAgICAgaWYgKG1vZGVsLmlkKSB7XG4gICAgICAgIGRiLnVwZGF0ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYi5jcmVhdGUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdkZWxldGUnOlxuICAgICAgaWYgKG1vZGVsLmlkKSB7XG4gICAgICAgIGRiLmRlc3Ryb3kobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblxufTtcblxuLy8gUmVmZXJlbmNlIG9yaWdpbmFsIGBCYWNrYm9uZS5zeW5jYFxuQmFja2JvbmUuYWpheFN5bmMgPSBCYWNrYm9uZS5zeW5jO1xuXG5CYWNrYm9uZS5nZXRJREJTeW5jTWV0aG9kID0gZnVuY3Rpb24obW9kZWwpIHtcbiAgaWYobW9kZWwuaW5kZXhlZERCIHx8IChtb2RlbC5jb2xsZWN0aW9uICYmIG1vZGVsLmNvbGxlY3Rpb24uaW5kZXhlZERCKSkge1xuICAgIHJldHVybiBCYWNrYm9uZS5pZGJTeW5jO1xuICB9XG5cbiAgcmV0dXJuIEJhY2tib25lLmFqYXhTeW5jO1xufTtcblxuLy8gT3ZlcnJpZGUgJ0JhY2tib25lLnN5bmMnIHRvIGRlZmF1bHQgdG8gaWRiU3luYyxcbi8vIHRoZSBvcmlnaW5hbCAnQmFja2JvbmUuc3luYycgaXMgc3RpbGwgYXZhaWxhYmxlIGluICdCYWNrYm9uZS5hamF4U3luYydcbkJhY2tib25lLnN5bmMgPSBmdW5jdGlvbihtZXRob2QsIG1vZGVsLCBvcHRpb25zKSB7XG4gIHJldHVybiBCYWNrYm9uZS5nZXRJREJTeW5jTWV0aG9kKG1vZGVsKS5hcHBseSh0aGlzLCBbbWV0aG9kLCBtb2RlbCwgb3B0aW9uc10pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCYWNrYm9uZS5JbmRleGVkREI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvbGliL2NvbmZpZy9pbmRleGVkZGIuanNcbiAqKiBtb2R1bGUgaWQgPSA1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI1OC5qcyJ9");

/***/ },
/* 59 */
/*!************************************************!*\
  !*** ./assets/js/src/lib/config/collection.js ***!
  \************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.Collection = bb.Collection.extend({\n  constructor: function() {\n    bb.Collection.apply(this, arguments);\n    this._isNew = true;\n    this.once('sync', function() {\n      this._isNew = false;\n    });\n  },\n\n  isNew: function() {\n    return this._isNew;\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvY29sbGVjdGlvbi5qcz83ODMwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBiYiA9IHJlcXVpcmUoJ2JhY2tib25lJyk7XG52YXIgUE9TID0gcmVxdWlyZSgnbGliL3V0aWxpdGllcy9nbG9iYWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQT1MuQ29sbGVjdGlvbiA9IGJiLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKCkge1xuICAgIGJiLkNvbGxlY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLl9pc05ldyA9IHRydWU7XG4gICAgdGhpcy5vbmNlKCdzeW5jJywgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9pc05ldyA9IGZhbHNlO1xuICAgIH0pO1xuICB9LFxuXG4gIGlzTmV3OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faXNOZXc7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvY29sbGVjdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDU5XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjU5LmpzIn0=");

/***/ },
/* 60 */
/*!**********************************************!*\
  !*** ./assets/js/src/entities/cart/model.js ***!
  \**********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Model = __webpack_require__(/*! lib/config/model */ 63);\n//var debug = require('debug')('cartModel');\nvar Utils = __webpack_require__(/*! lib/utilities/utils */ 36);\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar Radio = __webpack_require__(/*! backbone */ 3).Radio;\n\nmodule.exports = Model.extend({\n  idAttribute: 'local_id',\n\n  defaults : {\n    'subtotal'      : 0,\n    'subtotal_tax'  : 0,\n    'total_tax'     : 0,\n    'total'         : 0,\n    'item_price'    : 0,\n    'item_tax'      : 0,\n    'qty'           : 1,\n    'taxable'       : true,\n    'tax_class'     : ''\n  },\n\n  initialize: function() {\n    // set order id\n    if(this.collection){\n      this.set({ order: this.collection.order_id });\n    }\n\n    // get tax settings\n    var tax = Radio.request('entities', 'get', {\n      type: 'option',\n      name: 'tax'\n    });\n    this.tax = tax || {};\n\n    // get tax settings\n    var tax_rates = Radio.request('entities', 'get', {\n      type: 'option',\n      name: 'tax_rates'\n    });\n    this.tax_rates = tax_rates || {};\n\n    // update on change to qty, item_price ...\n    this.on(\n      'change:qty ' +\n      'change:item_price ' +\n      'change:regular_price ' +\n      'change:taxable ' +\n      'change:tax_class',\n      this.updateLineTotals );\n\n    // set item price on init, this will trigger updateLineTotals()\n    if( this.get('item_price') === 0 ) {\n      this.set({ 'item_price': parseFloat( this.get('price') ) });\n    }\n\n  },\n\n  updateLineTotals: function() {\n    var qty             = this.get('qty'),\n        item_price      = this.get('item_price'),\n        type            = this.get('type'),\n        regular_price   = parseFloat( this.get('regular_price') ),\n        item_tax        = this.calcTax( item_price, qty),\n        item_subtotal_tax = this.calcTax( regular_price );\n\n    // if shipping or fee\n    if( type === 'shipping' || type === 'fee' ) {\n      regular_price = item_price;\n    }\n\n    // if price does not include tax\n    if( this.tax.prices_include_tax === 'yes' ) {\n      regular_price -= item_subtotal_tax;\n      item_price -= item_tax;\n    }\n\n    this.save({\n      'item_subtotal'     : regular_price,\n      'item_subtotal_tax' : item_subtotal_tax,\n      'item_tax'          : Utils.round( item_tax, 4 ),\n      'subtotal'          : Utils.round( regular_price * qty, 4 ),\n      'subtotal_tax'      : Utils.round( item_subtotal_tax * qty, 4 ),\n      'total_tax'         : Utils.round( item_tax * qty, 4 ),\n      'total'             : Utils.round( item_price * qty, 4 )\n    });\n\n  },\n\n  /**\n   * Calculate the line item tax total\n   * based on the calc_tax function in woocommerce/includes/class-wc-tax.php\n   */\n  calcTax: function( price, qty ) {\n    var item_tax = 0,\n      tax_class = this.get('tax_class'),\n      rates = this.tax_rates[tax_class];\n\n    if( this.tax.calc_taxes === 'yes' && this.get('taxable') && rates ) {\n      if( this.tax.prices_include_tax === 'yes' ) {\n        item_tax = this.calcInclusiveTax( price, rates, qty );\n      }\n      else {\n        item_tax = this.calcExclusiveTax( price, rates, qty );\n      }\n    }\n\n    // use for init subtotal_tax\n    return item_tax;\n  },\n\n  /**\n   * Calculate the line item tax total\n   * based on the calc_inclusive_tax function in woocommerce/includes/class-wc-tax.php\n   */\n  calcInclusiveTax: function( price, rates, qty ) {\n    var regular_tax_rates = 0,\n      compound_tax_rates = 0,\n      non_compound_price = 0,\n      tax_amount = 0,\n      item_tax = 0,\n      line_tax = 0;\n\n    if( qty === undefined ) {\n      var subtotal_calc = true;\n      qty = 1;\n    }\n\n    _(rates).each( function(rate) {\n      if ( rate.compound === 'yes' ) {\n        compound_tax_rates = compound_tax_rates + parseFloat(rate.rate);\n      }\n      else {\n        regular_tax_rates = regular_tax_rates + parseFloat(rate.rate);\n      }\n    });\n\n    var regular_tax_rate  = 1 + ( regular_tax_rates / 100 );\n    var compound_tax_rate   = 1 + ( compound_tax_rates / 100 );\n    non_compound_price = price / compound_tax_rate;\n\n    _(rates).each( function(rate, key) {\n      var the_rate = parseFloat(rate.rate) / 100;\n      var the_price = 0;\n\n      if ( rate.compound === 'yes' ) {\n        the_price = price;\n        the_rate  = the_rate / compound_tax_rate;\n      }\n      else {\n        the_price = non_compound_price;\n        the_rate  = the_rate / regular_tax_rate;\n      }\n\n      var net_price = price - ( the_rate * the_price );\n      tax_amount = price - net_price;\n\n      // do the rounding now if required\n      var item_tax_ = Utils.round( tax_amount, 4 );\n      var line_tax_ = Utils.round( tax_amount * qty, 4 );\n\n      // set the itemized taxes\n      this.set( 'item_tax_' + key, item_tax_ );\n      this.set( 'line_tax_' + key, line_tax_ );\n      rate.tax_amount = line_tax_; // nested attribute, for WC API\n\n      // sum item taxes\n      item_tax += item_tax_;\n\n      // WC API v2\n      if( subtotal_calc ) {\n        rate.subtotal_tax = item_tax_;\n      }\n\n    }, this);\n\n    // return the item tax\n    return Utils.round( item_tax, 4 );\n  },\n\n  /**\n   * Calculate the line item tax total\n   * based on the calc_exclusive_tax function in woocommerce/includes/class-wc-tax.php\n   */\n  calcExclusiveTax: function( price, rates, qty ) {\n    var taxes = [],\n      pre_compound_total = 0,\n      tax_amount = 0,\n      item_tax = 0,\n      line_tax =0;\n\n    if( qty === undefined ) {\n      var subtotal_calc = true;\n      qty = 1;\n    }\n\n    // multiple taxes\n    _(rates).each( function(rate, key) {\n      tax_amount = 0;\n      if ( rate.compound !== 'yes' ) {\n        tax_amount = price * ( parseFloat(rate.rate) / 100 );\n      }\n      taxes[ key ] = tax_amount;\n    });\n\n    if( taxes.length > 0 ) {\n      pre_compound_total = taxes.reduce( function(sum, num) { return sum + num; } );\n    }\n\n    // compound taxes\n    _(rates).each( function(rate, key) {\n      if ( rate.compound === 'yes' ) {\n        var the_price_inc_tax = price + pre_compound_total;\n        taxes[ key ] = the_price_inc_tax * ( parseFloat(rate.rate) / 100 );\n      }\n\n      // do the rounding now if required\n      var item_tax_ = Utils.round( taxes[ key ], 4 );\n      var line_tax_ = Utils.round( taxes[ key ] * qty, 4 );\n\n      // set the itemized taxes\n      this.set( 'item_tax_' + key, item_tax_ );\n      this.set( 'line_tax_' + key, line_tax_ );\n      rate.tax_amount = line_tax_; // nested attribute, for WC API\n\n      // sum item taxes\n      item_tax += item_tax_;\n\n      // WC API v2\n      if( subtotal_calc ) {\n        rate.subtotal_tax = item_tax_;\n      }\n\n    }, this);\n\n    // return the item tax\n    return Utils.round(item_tax, 4);\n  },\n\n  // Convenience method to increase or decrease qty\n  quantity: function( type ) {\n    var qty = this.get('qty');\n    this.set('qty', (type === 'increase' ? ++qty : --qty) );\n  },\n\n  // Convenience method to sum attributes\n  sum: function(array){\n    var sum = 0;\n    for (var i = 0; i < array.length; i++) {\n      sum += this.get(array[i]);\n    }\n    return Utils.round(sum, 4);\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2NhcnQvbW9kZWwuanM/MzlmYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrQ0FBa0M7QUFDbEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGdEQUFnRDtBQUNoRTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUwsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQzs7QUFFbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLDZEQUE2RCxrQkFBa0IsRUFBRTtBQUNqRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQzs7QUFFbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0JBQWtCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBNb2RlbCA9IHJlcXVpcmUoJ2xpYi9jb25maWcvbW9kZWwnKTtcbi8vdmFyIGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnY2FydE1vZGVsJyk7XG52YXIgVXRpbHMgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL3V0aWxzJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIFJhZGlvID0gcmVxdWlyZSgnYmFja2JvbmUnKS5SYWRpbztcblxubW9kdWxlLmV4cG9ydHMgPSBNb2RlbC5leHRlbmQoe1xuICBpZEF0dHJpYnV0ZTogJ2xvY2FsX2lkJyxcblxuICBkZWZhdWx0cyA6IHtcbiAgICAnc3VidG90YWwnICAgICAgOiAwLFxuICAgICdzdWJ0b3RhbF90YXgnICA6IDAsXG4gICAgJ3RvdGFsX3RheCcgICAgIDogMCxcbiAgICAndG90YWwnICAgICAgICAgOiAwLFxuICAgICdpdGVtX3ByaWNlJyAgICA6IDAsXG4gICAgJ2l0ZW1fdGF4JyAgICAgIDogMCxcbiAgICAncXR5JyAgICAgICAgICAgOiAxLFxuICAgICd0YXhhYmxlJyAgICAgICA6IHRydWUsXG4gICAgJ3RheF9jbGFzcycgICAgIDogJydcbiAgfSxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAvLyBzZXQgb3JkZXIgaWRcbiAgICBpZih0aGlzLmNvbGxlY3Rpb24pe1xuICAgICAgdGhpcy5zZXQoeyBvcmRlcjogdGhpcy5jb2xsZWN0aW9uLm9yZGVyX2lkIH0pO1xuICAgIH1cblxuICAgIC8vIGdldCB0YXggc2V0dGluZ3NcbiAgICB2YXIgdGF4ID0gUmFkaW8ucmVxdWVzdCgnZW50aXRpZXMnLCAnZ2V0Jywge1xuICAgICAgdHlwZTogJ29wdGlvbicsXG4gICAgICBuYW1lOiAndGF4J1xuICAgIH0pO1xuICAgIHRoaXMudGF4ID0gdGF4IHx8IHt9O1xuXG4gICAgLy8gZ2V0IHRheCBzZXR0aW5nc1xuICAgIHZhciB0YXhfcmF0ZXMgPSBSYWRpby5yZXF1ZXN0KCdlbnRpdGllcycsICdnZXQnLCB7XG4gICAgICB0eXBlOiAnb3B0aW9uJyxcbiAgICAgIG5hbWU6ICd0YXhfcmF0ZXMnXG4gICAgfSk7XG4gICAgdGhpcy50YXhfcmF0ZXMgPSB0YXhfcmF0ZXMgfHwge307XG5cbiAgICAvLyB1cGRhdGUgb24gY2hhbmdlIHRvIHF0eSwgaXRlbV9wcmljZSAuLi5cbiAgICB0aGlzLm9uKFxuICAgICAgJ2NoYW5nZTpxdHkgJyArXG4gICAgICAnY2hhbmdlOml0ZW1fcHJpY2UgJyArXG4gICAgICAnY2hhbmdlOnJlZ3VsYXJfcHJpY2UgJyArXG4gICAgICAnY2hhbmdlOnRheGFibGUgJyArXG4gICAgICAnY2hhbmdlOnRheF9jbGFzcycsXG4gICAgICB0aGlzLnVwZGF0ZUxpbmVUb3RhbHMgKTtcblxuICAgIC8vIHNldCBpdGVtIHByaWNlIG9uIGluaXQsIHRoaXMgd2lsbCB0cmlnZ2VyIHVwZGF0ZUxpbmVUb3RhbHMoKVxuICAgIGlmKCB0aGlzLmdldCgnaXRlbV9wcmljZScpID09PSAwICkge1xuICAgICAgdGhpcy5zZXQoeyAnaXRlbV9wcmljZSc6IHBhcnNlRmxvYXQoIHRoaXMuZ2V0KCdwcmljZScpICkgfSk7XG4gICAgfVxuXG4gIH0sXG5cbiAgdXBkYXRlTGluZVRvdGFsczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHF0eSAgICAgICAgICAgICA9IHRoaXMuZ2V0KCdxdHknKSxcbiAgICAgICAgaXRlbV9wcmljZSAgICAgID0gdGhpcy5nZXQoJ2l0ZW1fcHJpY2UnKSxcbiAgICAgICAgdHlwZSAgICAgICAgICAgID0gdGhpcy5nZXQoJ3R5cGUnKSxcbiAgICAgICAgcmVndWxhcl9wcmljZSAgID0gcGFyc2VGbG9hdCggdGhpcy5nZXQoJ3JlZ3VsYXJfcHJpY2UnKSApLFxuICAgICAgICBpdGVtX3RheCAgICAgICAgPSB0aGlzLmNhbGNUYXgoIGl0ZW1fcHJpY2UsIHF0eSksXG4gICAgICAgIGl0ZW1fc3VidG90YWxfdGF4ID0gdGhpcy5jYWxjVGF4KCByZWd1bGFyX3ByaWNlICk7XG5cbiAgICAvLyBpZiBzaGlwcGluZyBvciBmZWVcbiAgICBpZiggdHlwZSA9PT0gJ3NoaXBwaW5nJyB8fCB0eXBlID09PSAnZmVlJyApIHtcbiAgICAgIHJlZ3VsYXJfcHJpY2UgPSBpdGVtX3ByaWNlO1xuICAgIH1cblxuICAgIC8vIGlmIHByaWNlIGRvZXMgbm90IGluY2x1ZGUgdGF4XG4gICAgaWYoIHRoaXMudGF4LnByaWNlc19pbmNsdWRlX3RheCA9PT0gJ3llcycgKSB7XG4gICAgICByZWd1bGFyX3ByaWNlIC09IGl0ZW1fc3VidG90YWxfdGF4O1xuICAgICAgaXRlbV9wcmljZSAtPSBpdGVtX3RheDtcbiAgICB9XG5cbiAgICB0aGlzLnNhdmUoe1xuICAgICAgJ2l0ZW1fc3VidG90YWwnICAgICA6IHJlZ3VsYXJfcHJpY2UsXG4gICAgICAnaXRlbV9zdWJ0b3RhbF90YXgnIDogaXRlbV9zdWJ0b3RhbF90YXgsXG4gICAgICAnaXRlbV90YXgnICAgICAgICAgIDogVXRpbHMucm91bmQoIGl0ZW1fdGF4LCA0ICksXG4gICAgICAnc3VidG90YWwnICAgICAgICAgIDogVXRpbHMucm91bmQoIHJlZ3VsYXJfcHJpY2UgKiBxdHksIDQgKSxcbiAgICAgICdzdWJ0b3RhbF90YXgnICAgICAgOiBVdGlscy5yb3VuZCggaXRlbV9zdWJ0b3RhbF90YXggKiBxdHksIDQgKSxcbiAgICAgICd0b3RhbF90YXgnICAgICAgICAgOiBVdGlscy5yb3VuZCggaXRlbV90YXggKiBxdHksIDQgKSxcbiAgICAgICd0b3RhbCcgICAgICAgICAgICAgOiBVdGlscy5yb3VuZCggaXRlbV9wcmljZSAqIHF0eSwgNCApXG4gICAgfSk7XG5cbiAgfSxcblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBsaW5lIGl0ZW0gdGF4IHRvdGFsXG4gICAqIGJhc2VkIG9uIHRoZSBjYWxjX3RheCBmdW5jdGlvbiBpbiB3b29jb21tZXJjZS9pbmNsdWRlcy9jbGFzcy13Yy10YXgucGhwXG4gICAqL1xuICBjYWxjVGF4OiBmdW5jdGlvbiggcHJpY2UsIHF0eSApIHtcbiAgICB2YXIgaXRlbV90YXggPSAwLFxuICAgICAgdGF4X2NsYXNzID0gdGhpcy5nZXQoJ3RheF9jbGFzcycpLFxuICAgICAgcmF0ZXMgPSB0aGlzLnRheF9yYXRlc1t0YXhfY2xhc3NdO1xuXG4gICAgaWYoIHRoaXMudGF4LmNhbGNfdGF4ZXMgPT09ICd5ZXMnICYmIHRoaXMuZ2V0KCd0YXhhYmxlJykgJiYgcmF0ZXMgKSB7XG4gICAgICBpZiggdGhpcy50YXgucHJpY2VzX2luY2x1ZGVfdGF4ID09PSAneWVzJyApIHtcbiAgICAgICAgaXRlbV90YXggPSB0aGlzLmNhbGNJbmNsdXNpdmVUYXgoIHByaWNlLCByYXRlcywgcXR5ICk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaXRlbV90YXggPSB0aGlzLmNhbGNFeGNsdXNpdmVUYXgoIHByaWNlLCByYXRlcywgcXR5ICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdXNlIGZvciBpbml0IHN1YnRvdGFsX3RheFxuICAgIHJldHVybiBpdGVtX3RheDtcbiAgfSxcblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBsaW5lIGl0ZW0gdGF4IHRvdGFsXG4gICAqIGJhc2VkIG9uIHRoZSBjYWxjX2luY2x1c2l2ZV90YXggZnVuY3Rpb24gaW4gd29vY29tbWVyY2UvaW5jbHVkZXMvY2xhc3Mtd2MtdGF4LnBocFxuICAgKi9cbiAgY2FsY0luY2x1c2l2ZVRheDogZnVuY3Rpb24oIHByaWNlLCByYXRlcywgcXR5ICkge1xuICAgIHZhciByZWd1bGFyX3RheF9yYXRlcyA9IDAsXG4gICAgICBjb21wb3VuZF90YXhfcmF0ZXMgPSAwLFxuICAgICAgbm9uX2NvbXBvdW5kX3ByaWNlID0gMCxcbiAgICAgIHRheF9hbW91bnQgPSAwLFxuICAgICAgaXRlbV90YXggPSAwLFxuICAgICAgbGluZV90YXggPSAwO1xuXG4gICAgaWYoIHF0eSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgdmFyIHN1YnRvdGFsX2NhbGMgPSB0cnVlO1xuICAgICAgcXR5ID0gMTtcbiAgICB9XG5cbiAgICBfKHJhdGVzKS5lYWNoKCBmdW5jdGlvbihyYXRlKSB7XG4gICAgICBpZiAoIHJhdGUuY29tcG91bmQgPT09ICd5ZXMnICkge1xuICAgICAgICBjb21wb3VuZF90YXhfcmF0ZXMgPSBjb21wb3VuZF90YXhfcmF0ZXMgKyBwYXJzZUZsb2F0KHJhdGUucmF0ZSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVndWxhcl90YXhfcmF0ZXMgPSByZWd1bGFyX3RheF9yYXRlcyArIHBhcnNlRmxvYXQocmF0ZS5yYXRlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciByZWd1bGFyX3RheF9yYXRlICA9IDEgKyAoIHJlZ3VsYXJfdGF4X3JhdGVzIC8gMTAwICk7XG4gICAgdmFyIGNvbXBvdW5kX3RheF9yYXRlICAgPSAxICsgKCBjb21wb3VuZF90YXhfcmF0ZXMgLyAxMDAgKTtcbiAgICBub25fY29tcG91bmRfcHJpY2UgPSBwcmljZSAvIGNvbXBvdW5kX3RheF9yYXRlO1xuXG4gICAgXyhyYXRlcykuZWFjaCggZnVuY3Rpb24ocmF0ZSwga2V5KSB7XG4gICAgICB2YXIgdGhlX3JhdGUgPSBwYXJzZUZsb2F0KHJhdGUucmF0ZSkgLyAxMDA7XG4gICAgICB2YXIgdGhlX3ByaWNlID0gMDtcblxuICAgICAgaWYgKCByYXRlLmNvbXBvdW5kID09PSAneWVzJyApIHtcbiAgICAgICAgdGhlX3ByaWNlID0gcHJpY2U7XG4gICAgICAgIHRoZV9yYXRlICA9IHRoZV9yYXRlIC8gY29tcG91bmRfdGF4X3JhdGU7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhlX3ByaWNlID0gbm9uX2NvbXBvdW5kX3ByaWNlO1xuICAgICAgICB0aGVfcmF0ZSAgPSB0aGVfcmF0ZSAvIHJlZ3VsYXJfdGF4X3JhdGU7XG4gICAgICB9XG5cbiAgICAgIHZhciBuZXRfcHJpY2UgPSBwcmljZSAtICggdGhlX3JhdGUgKiB0aGVfcHJpY2UgKTtcbiAgICAgIHRheF9hbW91bnQgPSBwcmljZSAtIG5ldF9wcmljZTtcblxuICAgICAgLy8gZG8gdGhlIHJvdW5kaW5nIG5vdyBpZiByZXF1aXJlZFxuICAgICAgdmFyIGl0ZW1fdGF4XyA9IFV0aWxzLnJvdW5kKCB0YXhfYW1vdW50LCA0ICk7XG4gICAgICB2YXIgbGluZV90YXhfID0gVXRpbHMucm91bmQoIHRheF9hbW91bnQgKiBxdHksIDQgKTtcblxuICAgICAgLy8gc2V0IHRoZSBpdGVtaXplZCB0YXhlc1xuICAgICAgdGhpcy5zZXQoICdpdGVtX3RheF8nICsga2V5LCBpdGVtX3RheF8gKTtcbiAgICAgIHRoaXMuc2V0KCAnbGluZV90YXhfJyArIGtleSwgbGluZV90YXhfICk7XG4gICAgICByYXRlLnRheF9hbW91bnQgPSBsaW5lX3RheF87IC8vIG5lc3RlZCBhdHRyaWJ1dGUsIGZvciBXQyBBUElcblxuICAgICAgLy8gc3VtIGl0ZW0gdGF4ZXNcbiAgICAgIGl0ZW1fdGF4ICs9IGl0ZW1fdGF4XztcblxuICAgICAgLy8gV0MgQVBJIHYyXG4gICAgICBpZiggc3VidG90YWxfY2FsYyApIHtcbiAgICAgICAgcmF0ZS5zdWJ0b3RhbF90YXggPSBpdGVtX3RheF87XG4gICAgICB9XG5cbiAgICB9LCB0aGlzKTtcblxuICAgIC8vIHJldHVybiB0aGUgaXRlbSB0YXhcbiAgICByZXR1cm4gVXRpbHMucm91bmQoIGl0ZW1fdGF4LCA0ICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgbGluZSBpdGVtIHRheCB0b3RhbFxuICAgKiBiYXNlZCBvbiB0aGUgY2FsY19leGNsdXNpdmVfdGF4IGZ1bmN0aW9uIGluIHdvb2NvbW1lcmNlL2luY2x1ZGVzL2NsYXNzLXdjLXRheC5waHBcbiAgICovXG4gIGNhbGNFeGNsdXNpdmVUYXg6IGZ1bmN0aW9uKCBwcmljZSwgcmF0ZXMsIHF0eSApIHtcbiAgICB2YXIgdGF4ZXMgPSBbXSxcbiAgICAgIHByZV9jb21wb3VuZF90b3RhbCA9IDAsXG4gICAgICB0YXhfYW1vdW50ID0gMCxcbiAgICAgIGl0ZW1fdGF4ID0gMCxcbiAgICAgIGxpbmVfdGF4ID0wO1xuXG4gICAgaWYoIHF0eSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgdmFyIHN1YnRvdGFsX2NhbGMgPSB0cnVlO1xuICAgICAgcXR5ID0gMTtcbiAgICB9XG5cbiAgICAvLyBtdWx0aXBsZSB0YXhlc1xuICAgIF8ocmF0ZXMpLmVhY2goIGZ1bmN0aW9uKHJhdGUsIGtleSkge1xuICAgICAgdGF4X2Ftb3VudCA9IDA7XG4gICAgICBpZiAoIHJhdGUuY29tcG91bmQgIT09ICd5ZXMnICkge1xuICAgICAgICB0YXhfYW1vdW50ID0gcHJpY2UgKiAoIHBhcnNlRmxvYXQocmF0ZS5yYXRlKSAvIDEwMCApO1xuICAgICAgfVxuICAgICAgdGF4ZXNbIGtleSBdID0gdGF4X2Ftb3VudDtcbiAgICB9KTtcblxuICAgIGlmKCB0YXhlcy5sZW5ndGggPiAwICkge1xuICAgICAgcHJlX2NvbXBvdW5kX3RvdGFsID0gdGF4ZXMucmVkdWNlKCBmdW5jdGlvbihzdW0sIG51bSkgeyByZXR1cm4gc3VtICsgbnVtOyB9ICk7XG4gICAgfVxuXG4gICAgLy8gY29tcG91bmQgdGF4ZXNcbiAgICBfKHJhdGVzKS5lYWNoKCBmdW5jdGlvbihyYXRlLCBrZXkpIHtcbiAgICAgIGlmICggcmF0ZS5jb21wb3VuZCA9PT0gJ3llcycgKSB7XG4gICAgICAgIHZhciB0aGVfcHJpY2VfaW5jX3RheCA9IHByaWNlICsgcHJlX2NvbXBvdW5kX3RvdGFsO1xuICAgICAgICB0YXhlc1sga2V5IF0gPSB0aGVfcHJpY2VfaW5jX3RheCAqICggcGFyc2VGbG9hdChyYXRlLnJhdGUpIC8gMTAwICk7XG4gICAgICB9XG5cbiAgICAgIC8vIGRvIHRoZSByb3VuZGluZyBub3cgaWYgcmVxdWlyZWRcbiAgICAgIHZhciBpdGVtX3RheF8gPSBVdGlscy5yb3VuZCggdGF4ZXNbIGtleSBdLCA0ICk7XG4gICAgICB2YXIgbGluZV90YXhfID0gVXRpbHMucm91bmQoIHRheGVzWyBrZXkgXSAqIHF0eSwgNCApO1xuXG4gICAgICAvLyBzZXQgdGhlIGl0ZW1pemVkIHRheGVzXG4gICAgICB0aGlzLnNldCggJ2l0ZW1fdGF4XycgKyBrZXksIGl0ZW1fdGF4XyApO1xuICAgICAgdGhpcy5zZXQoICdsaW5lX3RheF8nICsga2V5LCBsaW5lX3RheF8gKTtcbiAgICAgIHJhdGUudGF4X2Ftb3VudCA9IGxpbmVfdGF4XzsgLy8gbmVzdGVkIGF0dHJpYnV0ZSwgZm9yIFdDIEFQSVxuXG4gICAgICAvLyBzdW0gaXRlbSB0YXhlc1xuICAgICAgaXRlbV90YXggKz0gaXRlbV90YXhfO1xuXG4gICAgICAvLyBXQyBBUEkgdjJcbiAgICAgIGlmKCBzdWJ0b3RhbF9jYWxjICkge1xuICAgICAgICByYXRlLnN1YnRvdGFsX3RheCA9IGl0ZW1fdGF4XztcbiAgICAgIH1cblxuICAgIH0sIHRoaXMpO1xuXG4gICAgLy8gcmV0dXJuIHRoZSBpdGVtIHRheFxuICAgIHJldHVybiBVdGlscy5yb3VuZChpdGVtX3RheCwgNCk7XG4gIH0sXG5cbiAgLy8gQ29udmVuaWVuY2UgbWV0aG9kIHRvIGluY3JlYXNlIG9yIGRlY3JlYXNlIHF0eVxuICBxdWFudGl0eTogZnVuY3Rpb24oIHR5cGUgKSB7XG4gICAgdmFyIHF0eSA9IHRoaXMuZ2V0KCdxdHknKTtcbiAgICB0aGlzLnNldCgncXR5JywgKHR5cGUgPT09ICdpbmNyZWFzZScgPyArK3F0eSA6IC0tcXR5KSApO1xuICB9LFxuXG4gIC8vIENvbnZlbmllbmNlIG1ldGhvZCB0byBzdW0gYXR0cmlidXRlc1xuICBzdW06IGZ1bmN0aW9uKGFycmF5KXtcbiAgICB2YXIgc3VtID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBzdW0gKz0gdGhpcy5nZXQoYXJyYXlbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gVXRpbHMucm91bmQoc3VtLCA0KTtcbiAgfVxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvZW50aXRpZXMvY2FydC9tb2RlbC5qc1xuICoqIG1vZHVsZSBpZCA9IDYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjYwLmpzIn0=");

/***/ },
/* 61 */
/*!***************************************************!*\
  !*** ./assets/js/src/entities/customers/model.js ***!
  \***************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Model = __webpack_require__(/*! lib/config/model */ 63);\n\nmodule.exports = Model.extend({});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2N1c3RvbWVycy9tb2RlbC5qcz9mNTJkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLGdDQUFnQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBNb2RlbCA9IHJlcXVpcmUoJ2xpYi9jb25maWcvbW9kZWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBNb2RlbC5leHRlbmQoe30pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2N1c3RvbWVycy9tb2RlbC5qc1xuICoqIG1vZHVsZSBpZCA9IDYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjYxLmpzIn0=");

/***/ },
/* 62 */
/*!*************************************************!*\
  !*** ./assets/js/src/entities/coupons/model.js ***!
  \*************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Model = __webpack_require__(/*! lib/config/model */ 63);\n\nmodule.exports = Model.extend({});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2NvdXBvbnMvbW9kZWwuanM/NDBkYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxnQ0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgTW9kZWwgPSByZXF1aXJlKCdsaWIvY29uZmlnL21vZGVsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gTW9kZWwuZXh0ZW5kKHt9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9lbnRpdGllcy9jb3Vwb25zL21vZGVsLmpzXG4gKiogbW9kdWxlIGlkID0gNjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiNjIuanMifQ==");

/***/ },
/* 63 */
/*!*******************************************!*\
  !*** ./assets/js/src/lib/config/model.js ***!
  \*******************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Backbone = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.Model = Backbone.Model.extend({});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvbW9kZWwuanM/ZTI3ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBLHFEQUFxRCIsInNvdXJjZXNDb250ZW50IjpbInZhciBCYWNrYm9uZSA9IHJlcXVpcmUoJ2JhY2tib25lJyk7XG52YXIgUE9TID0gcmVxdWlyZSgnbGliL3V0aWxpdGllcy9nbG9iYWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQT1MuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe30pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvbW9kZWwuanNcbiAqKiBtb2R1bGUgaWQgPSA2M1xuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI2My5qcyJ9");

/***/ },
/* 64 */
/*!**************************************************!*\
  !*** ./assets/js/src/entities/gateways/model.js ***!
  \**************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Model = __webpack_require__(/*! lib/config/model */ 63);\n\nmodule.exports = Model.extend({\n  defaults: {\n    active: false\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2VudGl0aWVzL2dhdGV3YXlzL21vZGVsLmpzP2UwMGIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIE1vZGVsID0gcmVxdWlyZSgnbGliL2NvbmZpZy9tb2RlbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1vZGVsLmV4dGVuZCh7XG4gIGRlZmF1bHRzOiB7XG4gICAgYWN0aXZlOiBmYWxzZVxuICB9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9lbnRpdGllcy9nYXRld2F5cy9tb2RlbC5qc1xuICoqIG1vZHVsZSBpZCA9IDY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjY0LmpzIn0=");

/***/ },
/* 65 */
/*!***********************************************!*\
  !*** ./assets/js/src/lib/utilities/parser.js ***!
  \***********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * TODO: this file is bit of a mess\n * a cleaner solution may be to combine with\n * FilteredCollection and create one class\n */\n\n/* jshint -W109, -W083, -W071, -W074 */\n\nvar _ = __webpack_require__(/*! lodash */ 2);\n\n/**\n * Search Parser\n * Used to extract keywords and facets from the search query.\n * based on https://github.com/documentcloud/visualsearch/\n */\n\nvar QUOTES_RE   = \"('[^']+'|\\\"[^\\\"]+\\\")\";\nvar FREETEXT_RE = \"('[^']+'|\\\"[^\\\"]+\\\"|[^'\\\"\\\\s]\\\\S*)\";\nvar CATEGORY_RE = FREETEXT_RE +                     ':\\\\s*';\nvar FREETEXT_CAT = '';\n\nmodule.exports = {\n  ALL_FIELDS : new RegExp(CATEGORY_RE + FREETEXT_RE, 'g'),\n  CATEGORY   : new RegExp(CATEGORY_RE),\n\n  parse : function(query) {\n    var searchFacets = this._extractAllFacets(query);\n    return searchFacets;\n  },\n\n  // Walks the query and extracts facets, categories, and free text.\n  _extractAllFacets : function(query) {\n    var facets = {};\n    var originalQuery = query;\n    while (query) {\n      var key, value;\n      originalQuery = query;\n      var field = this._extractNextField(query);\n      if (!field) {\n        key   = FREETEXT_CAT;\n        value = this._extractSearchText(query);\n        query = query.replace(value, '').trim();\n      } else if (field.indexOf(':') !== -1) {\n        key   = field.match(this.CATEGORY)[1].replace(/(^['\"]|['\"]$)/g, '');\n        value = field.replace(this.CATEGORY, '').replace(/(^['\"]|['\"]$)/g, '');\n        query = query.replace(field, '').trim();\n      } else if (field.indexOf(':') === -1) {\n        key   = FREETEXT_CAT;\n        value = field;\n        query = query.replace(value, '').trim();\n      }\n\n      if ( value ) {\n        _( value.split('|') ).each(function( value ){\n          var val = value.trim().toLowerCase();\n          if( val ) {\n            if( facets[key] ) {\n              facets[key].push(val);\n            } else {\n              facets[key] = [val];\n            }\n          }\n        });\n      }\n      if (originalQuery === query) {\n        break;\n      }\n    }\n    return facets;\n  },\n\n  // Extracts the first field found, capturing any free text that comes\n  // before the category.\n  _extractNextField : function(query) {\n    var textRe = new RegExp('^\\\\s*(\\\\S+)\\\\s+(?=' +\n    QUOTES_RE + FREETEXT_RE +\n    ')');\n    var textMatch = query.match(textRe);\n    if (textMatch && textMatch.length >= 1) {\n      return textMatch[1];\n    } else {\n      return this._extractFirstField(query);\n    }\n  },\n\n  // If there is no free text before the facet,\n  // extract the category and value.\n  _extractFirstField : function(query) {\n    var fields = query.match(this.ALL_FIELDS);\n    return fields && fields.length && fields[0];\n  },\n\n  // If the found match is not a category and facet,\n  // extract the trimmed free text.\n  _extractSearchText : function(query) {\n    query = query || '';\n    var text = query.replace(this.ALL_FIELDS, '').trim();\n    return text;\n  }\n\n};//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi91dGlsaXRpZXMvcGFyc2VyLmpzP2I2NGUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVE9ETzogdGhpcyBmaWxlIGlzIGJpdCBvZiBhIG1lc3NcbiAqIGEgY2xlYW5lciBzb2x1dGlvbiBtYXkgYmUgdG8gY29tYmluZSB3aXRoXG4gKiBGaWx0ZXJlZENvbGxlY3Rpb24gYW5kIGNyZWF0ZSBvbmUgY2xhc3NcbiAqL1xuXG4vKiBqc2hpbnQgLVcxMDksIC1XMDgzLCAtVzA3MSwgLVcwNzQgKi9cblxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuLyoqXG4gKiBTZWFyY2ggUGFyc2VyXG4gKiBVc2VkIHRvIGV4dHJhY3Qga2V5d29yZHMgYW5kIGZhY2V0cyBmcm9tIHRoZSBzZWFyY2ggcXVlcnkuXG4gKiBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vZG9jdW1lbnRjbG91ZC92aXN1YWxzZWFyY2gvXG4gKi9cblxudmFyIFFVT1RFU19SRSAgID0gXCIoJ1teJ10rJ3xcXFwiW15cXFwiXStcXFwiKVwiO1xudmFyIEZSRUVURVhUX1JFID0gXCIoJ1teJ10rJ3xcXFwiW15cXFwiXStcXFwifFteJ1xcXCJcXFxcc11cXFxcUyopXCI7XG52YXIgQ0FURUdPUllfUkUgPSBGUkVFVEVYVF9SRSArICAgICAgICAgICAgICAgICAgICAgJzpcXFxccyonO1xudmFyIEZSRUVURVhUX0NBVCA9ICcnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQUxMX0ZJRUxEUyA6IG5ldyBSZWdFeHAoQ0FURUdPUllfUkUgKyBGUkVFVEVYVF9SRSwgJ2cnKSxcbiAgQ0FURUdPUlkgICA6IG5ldyBSZWdFeHAoQ0FURUdPUllfUkUpLFxuXG4gIHBhcnNlIDogZnVuY3Rpb24ocXVlcnkpIHtcbiAgICB2YXIgc2VhcmNoRmFjZXRzID0gdGhpcy5fZXh0cmFjdEFsbEZhY2V0cyhxdWVyeSk7XG4gICAgcmV0dXJuIHNlYXJjaEZhY2V0cztcbiAgfSxcblxuICAvLyBXYWxrcyB0aGUgcXVlcnkgYW5kIGV4dHJhY3RzIGZhY2V0cywgY2F0ZWdvcmllcywgYW5kIGZyZWUgdGV4dC5cbiAgX2V4dHJhY3RBbGxGYWNldHMgOiBmdW5jdGlvbihxdWVyeSkge1xuICAgIHZhciBmYWNldHMgPSB7fTtcbiAgICB2YXIgb3JpZ2luYWxRdWVyeSA9IHF1ZXJ5O1xuICAgIHdoaWxlIChxdWVyeSkge1xuICAgICAgdmFyIGtleSwgdmFsdWU7XG4gICAgICBvcmlnaW5hbFF1ZXJ5ID0gcXVlcnk7XG4gICAgICB2YXIgZmllbGQgPSB0aGlzLl9leHRyYWN0TmV4dEZpZWxkKHF1ZXJ5KTtcbiAgICAgIGlmICghZmllbGQpIHtcbiAgICAgICAga2V5ICAgPSBGUkVFVEVYVF9DQVQ7XG4gICAgICAgIHZhbHVlID0gdGhpcy5fZXh0cmFjdFNlYXJjaFRleHQocXVlcnkpO1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5LnJlcGxhY2UodmFsdWUsICcnKS50cmltKCk7XG4gICAgICB9IGVsc2UgaWYgKGZpZWxkLmluZGV4T2YoJzonKSAhPT0gLTEpIHtcbiAgICAgICAga2V5ICAgPSBmaWVsZC5tYXRjaCh0aGlzLkNBVEVHT1JZKVsxXS5yZXBsYWNlKC8oXlsnXCJdfFsnXCJdJCkvZywgJycpO1xuICAgICAgICB2YWx1ZSA9IGZpZWxkLnJlcGxhY2UodGhpcy5DQVRFR09SWSwgJycpLnJlcGxhY2UoLyheWydcIl18WydcIl0kKS9nLCAnJyk7XG4gICAgICAgIHF1ZXJ5ID0gcXVlcnkucmVwbGFjZShmaWVsZCwgJycpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSBpZiAoZmllbGQuaW5kZXhPZignOicpID09PSAtMSkge1xuICAgICAgICBrZXkgICA9IEZSRUVURVhUX0NBVDtcbiAgICAgICAgdmFsdWUgPSBmaWVsZDtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5yZXBsYWNlKHZhbHVlLCAnJykudHJpbSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIHZhbHVlICkge1xuICAgICAgICBfKCB2YWx1ZS5zcGxpdCgnfCcpICkuZWFjaChmdW5jdGlvbiggdmFsdWUgKXtcbiAgICAgICAgICB2YXIgdmFsID0gdmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgaWYoIHZhbCApIHtcbiAgICAgICAgICAgIGlmKCBmYWNldHNba2V5XSApIHtcbiAgICAgICAgICAgICAgZmFjZXRzW2tleV0ucHVzaCh2YWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZmFjZXRzW2tleV0gPSBbdmFsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKG9yaWdpbmFsUXVlcnkgPT09IHF1ZXJ5KSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFjZXRzO1xuICB9LFxuXG4gIC8vIEV4dHJhY3RzIHRoZSBmaXJzdCBmaWVsZCBmb3VuZCwgY2FwdHVyaW5nIGFueSBmcmVlIHRleHQgdGhhdCBjb21lc1xuICAvLyBiZWZvcmUgdGhlIGNhdGVnb3J5LlxuICBfZXh0cmFjdE5leHRGaWVsZCA6IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgdmFyIHRleHRSZSA9IG5ldyBSZWdFeHAoJ15cXFxccyooXFxcXFMrKVxcXFxzKyg/PScgK1xuICAgIFFVT1RFU19SRSArIEZSRUVURVhUX1JFICtcbiAgICAnKScpO1xuICAgIHZhciB0ZXh0TWF0Y2ggPSBxdWVyeS5tYXRjaCh0ZXh0UmUpO1xuICAgIGlmICh0ZXh0TWF0Y2ggJiYgdGV4dE1hdGNoLmxlbmd0aCA+PSAxKSB7XG4gICAgICByZXR1cm4gdGV4dE1hdGNoWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXh0cmFjdEZpcnN0RmllbGQocXVlcnkpO1xuICAgIH1cbiAgfSxcblxuICAvLyBJZiB0aGVyZSBpcyBubyBmcmVlIHRleHQgYmVmb3JlIHRoZSBmYWNldCxcbiAgLy8gZXh0cmFjdCB0aGUgY2F0ZWdvcnkgYW5kIHZhbHVlLlxuICBfZXh0cmFjdEZpcnN0RmllbGQgOiBmdW5jdGlvbihxdWVyeSkge1xuICAgIHZhciBmaWVsZHMgPSBxdWVyeS5tYXRjaCh0aGlzLkFMTF9GSUVMRFMpO1xuICAgIHJldHVybiBmaWVsZHMgJiYgZmllbGRzLmxlbmd0aCAmJiBmaWVsZHNbMF07XG4gIH0sXG5cbiAgLy8gSWYgdGhlIGZvdW5kIG1hdGNoIGlzIG5vdCBhIGNhdGVnb3J5IGFuZCBmYWNldCxcbiAgLy8gZXh0cmFjdCB0aGUgdHJpbW1lZCBmcmVlIHRleHQuXG4gIF9leHRyYWN0U2VhcmNoVGV4dCA6IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgcXVlcnkgPSBxdWVyeSB8fCAnJztcbiAgICB2YXIgdGV4dCA9IHF1ZXJ5LnJlcGxhY2UodGhpcy5BTExfRklFTERTLCAnJykudHJpbSgpO1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvbGliL3V0aWxpdGllcy9wYXJzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI2NS5qcyJ9");

/***/ },
/* 66 */
/*!*************************************************!*\
  !*** ./assets/js/src/lib/config/layout-view.js ***!
  \*************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.LayoutView = bb.Marionette.LayoutView.extend({\n\n  working: function( action ) {\n    if (action === 'start') {\n      this.$el.addClass('working');\n    } else {\n      this.$el.removeClass('working');\n    }\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvbGF5b3V0LXZpZXcuanM/ZmQxNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbInZhciBiYiA9IHJlcXVpcmUoJ2JhY2tib25lJyk7XG52YXIgUE9TID0gcmVxdWlyZSgnbGliL3V0aWxpdGllcy9nbG9iYWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQT1MuTGF5b3V0VmlldyA9IGJiLk1hcmlvbmV0dGUuTGF5b3V0Vmlldy5leHRlbmQoe1xuXG4gIHdvcmtpbmc6IGZ1bmN0aW9uKCBhY3Rpb24gKSB7XG4gICAgaWYgKGFjdGlvbiA9PT0gJ3N0YXJ0Jykge1xuICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ3dvcmtpbmcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ3dvcmtpbmcnKTtcbiAgICB9XG4gIH1cblxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvbGliL2NvbmZpZy9sYXlvdXQtdmlldy5qc1xuICoqIG1vZHVsZSBpZCA9IDY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjY2LmpzIn0=");

/***/ },
/* 67 */
/*!***********************************************!*\
  !*** ./assets/js/src/lib/config/item-view.js ***!
  \***********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.ItemView = bb.Marionette.ItemView;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvaXRlbS12aWV3LmpzPzI5MjkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBiYiA9IHJlcXVpcmUoJ2JhY2tib25lJyk7XG52YXIgUE9TID0gcmVxdWlyZSgnbGliL3V0aWxpdGllcy9nbG9iYWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQT1MuSXRlbVZpZXcgPSBiYi5NYXJpb25ldHRlLkl0ZW1WaWV3O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvaXRlbS12aWV3LmpzXG4gKiogbW9kdWxlIGlkID0gNjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiNjcuanMifQ==");

/***/ },
/* 68 */,
/* 69 */
/*!**********************************************************!*\
  !*** ./assets/js/src/lib/components/tooltip/behavior.js ***!
  \**********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Behavior = __webpack_require__(/*! lib/config/behavior */ 92);\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nvar Tooltip = Behavior.extend({\n\n  initialize: function(options){\n\n    this.options = _.defaults(options, {\n\n    });\n\n  },\n\n  ui: {\n    tooltip: '*[data-toggle=\"tooltip\"]'\n  },\n\n  onRender: function() {\n    this.ui.tooltip.tooltip( this.options );\n  },\n\n  onBeforeDestroy: function() {\n    this.ui.tooltip.tooltip( 'destroy' );\n  }\n\n});\n\nmodule.exports = Tooltip;\nPOS.attach('Behaviors.Tooltip');//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL3Rvb2x0aXAvYmVoYXZpb3IuanM/MDBkMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQmVoYXZpb3IgPSByZXF1aXJlKCdsaWIvY29uZmlnL2JlaGF2aW9yJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG5cbnZhciBUb29sdGlwID0gQmVoYXZpb3IuZXh0ZW5kKHtcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKXtcblxuICAgIHRoaXMub3B0aW9ucyA9IF8uZGVmYXVsdHMob3B0aW9ucywge1xuXG4gICAgfSk7XG5cbiAgfSxcblxuICB1aToge1xuICAgIHRvb2x0aXA6ICcqW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXSdcbiAgfSxcblxuICBvblJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy51aS50b29sdGlwLnRvb2x0aXAoIHRoaXMub3B0aW9ucyApO1xuICB9LFxuXG4gIG9uQmVmb3JlRGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy51aS50b29sdGlwLnRvb2x0aXAoICdkZXN0cm95JyApO1xuICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvb2x0aXA7XG5QT1MuYXR0YWNoKCdCZWhhdmlvcnMuVG9vbHRpcCcpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL3Rvb2x0aXAvYmVoYXZpb3IuanNcbiAqKiBtb2R1bGUgaWQgPSA2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI2OS5qcyJ9");

/***/ },
/* 70 */
/*!*******************************************!*\
  !*** ./assets/js/src/lib/config/route.js ***!
  \*******************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar $ = __webpack_require__(/*! jquery */ 1);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.Route = bb.Marionette.Object.extend({\n  constructor: function() {\n    this.initialize.apply(this, arguments);\n  },\n\n  _triggerMethod: function(name, args) {\n    if (this.router) {\n      this.router.triggerMethod.apply(\n        this.router,\n        [name + ':route'].concat(args)\n      );\n    }\n    this.triggerMethod.apply(this, [name].concat(args));\n  },\n\n  enter: function(args) {\n    var self = this;\n    this._triggerMethod('before:enter', args);\n    this._triggerMethod('before:fetch', args);\n\n    return $.when(this.fetch.apply(this, args)).then(function() {\n      self._triggerMethod('fetch', args);\n      self._triggerMethod('before:render', args);\n    }).then(function() {\n      return self.render.apply(self, args);\n    }).then(function() {\n      self._triggerMethod('render', args);\n      self._triggerMethod('enter', args);\n    }).fail(function() {\n      self._triggerMethod('error', args);\n    });\n  },\n\n  navigate: function() {\n    bb.history.navigate.apply(bb.history, arguments);\n  },\n\n  fetch  : function() {},\n  render : function() {}\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvcm91dGUuanM/NzMyMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVILHdCQUF3QjtBQUN4QjtBQUNBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYmIgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBPUy5Sb3V0ZSA9IGJiLk1hcmlvbmV0dGUuT2JqZWN0LmV4dGVuZCh7XG4gIGNvbnN0cnVjdG9yOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSxcblxuICBfdHJpZ2dlck1ldGhvZDogZnVuY3Rpb24obmFtZSwgYXJncykge1xuICAgIGlmICh0aGlzLnJvdXRlcikge1xuICAgICAgdGhpcy5yb3V0ZXIudHJpZ2dlck1ldGhvZC5hcHBseShcbiAgICAgICAgdGhpcy5yb3V0ZXIsXG4gICAgICAgIFtuYW1lICsgJzpyb3V0ZSddLmNvbmNhdChhcmdzKVxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy50cmlnZ2VyTWV0aG9kLmFwcGx5KHRoaXMsIFtuYW1lXS5jb25jYXQoYXJncykpO1xuICB9LFxuXG4gIGVudGVyOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuX3RyaWdnZXJNZXRob2QoJ2JlZm9yZTplbnRlcicsIGFyZ3MpO1xuICAgIHRoaXMuX3RyaWdnZXJNZXRob2QoJ2JlZm9yZTpmZXRjaCcsIGFyZ3MpO1xuXG4gICAgcmV0dXJuICQud2hlbih0aGlzLmZldGNoLmFwcGx5KHRoaXMsIGFyZ3MpKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5fdHJpZ2dlck1ldGhvZCgnZmV0Y2gnLCBhcmdzKTtcbiAgICAgIHNlbGYuX3RyaWdnZXJNZXRob2QoJ2JlZm9yZTpyZW5kZXInLCBhcmdzKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNlbGYucmVuZGVyLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl90cmlnZ2VyTWV0aG9kKCdyZW5kZXInLCBhcmdzKTtcbiAgICAgIHNlbGYuX3RyaWdnZXJNZXRob2QoJ2VudGVyJywgYXJncyk7XG4gICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX3RyaWdnZXJNZXRob2QoJ2Vycm9yJywgYXJncyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgbmF2aWdhdGU6IGZ1bmN0aW9uKCkge1xuICAgIGJiLmhpc3RvcnkubmF2aWdhdGUuYXBwbHkoYmIuaGlzdG9yeSwgYXJndW1lbnRzKTtcbiAgfSxcblxuICBmZXRjaCAgOiBmdW5jdGlvbigpIHt9LFxuICByZW5kZXIgOiBmdW5jdGlvbigpIHt9XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29uZmlnL3JvdXRlLmpzXG4gKiogbW9kdWxlIGlkID0gNzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiNzAuanMifQ==");

/***/ },
/* 71 */,
/* 72 */,
/* 73 */,
/* 74 */,
/* 75 */,
/* 76 */,
/* 77 */
/*!**************************************************************!*\
  !*** ./assets/js/src/lib/components/customer-select/view.js ***!
  \**************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var ItemView = __webpack_require__(/*! lib/config/item-view */ 67);\nvar Select2 = __webpack_require__(/*! lib/components/select2/behavior */ 97);\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar Radio = __webpack_require__(/*! backbone */ 3).Radio;\nvar hbs = __webpack_require__(/*! handlebars */ 18);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar debug = __webpack_require__(/*! debug */ 54)('customerSelect');\n\n// Select view\nvar View = ItemView.extend({\n  template: function() {\n    return '<input name=\"customer\" type=\"hidden\" class=\"select2\">';\n  },\n\n  initialize: function(options){\n    options = options || {};\n    this.model = options.model;\n    this.filtered = Radio.request('entities', 'get', {\n      type: 'filtered',\n      name: 'customers'\n    });\n    var customers = Radio.request('entities', 'get', {\n      type: 'option',\n      name: 'customers'\n    });\n    if(customers){\n      this.guest = customers.guest;\n    }\n  },\n\n  behaviors: {\n    Select2: {\n      behaviorClass: Select2,\n      minimumInputLength: 2\n    }\n  },\n\n  ui: {\n    select: 'input[name=\"customer\"]'\n  },\n\n  events: {\n    'change @ui.select' : 'onSelect'\n  },\n\n  /**\n   *\n   */\n  query: function(query){\n    var self = this;\n    this.filtered.superset()\n      .fetch()\n      .done(function(){\n        self.filtered.query(query.term);\n        var results = self.filtered.toJSON();\n        results.unshift(self.guest);\n        query.callback({ results: results });\n        self.filtered.resetFilters();\n      });\n  },\n\n  /**\n   *\n   */\n  initSelection: function( element, callback ) {\n    var customer;\n    if(this.model){\n      customer = this.model.get('customer');\n    } else {\n      debug('no initial customer');\n    }\n    callback( customer );\n  },\n\n  /**\n   * select2 parse results\n   */\n  formatResult: function( customer ) {\n    var format = '{{first_name}} {{last_name}} ' +\n      '{{#if email}}({{email}}){{/if}}';\n\n    if( this.hasNoNames(customer) ){\n      format = '{{username}} ({{email}})';\n    }\n\n    var template = hbs.compile(format);\n    return template(customer);\n  },\n\n  /**\n   * select2 parse selection\n   */\n  formatSelection: function( customer ) {\n    var format = '{{first_name}} {{last_name}}';\n    if( this.hasNoNames(customer) ){\n      format = '{{username}}';\n    }\n\n    var template = hbs.compile(format);\n    return template(customer);\n  },\n\n  /**\n   *\n   */\n  hasNoNames: function(customer){\n    return _.chain(customer)\n      .pick('first_name', 'last_name')\n      .values()\n      .compact()\n      .isEmpty()\n      .value();\n  },\n\n  /**\n   *\n   */\n  onSelect: function(e) {\n    this.trigger( 'customer:select', e.added );\n  }\n\n});\n\nmodule.exports = View;\nPOS.attach('Components.CustomerSelect.View', View);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL2N1c3RvbWVyLXNlbGVjdC92aWV3LmpzPzM4NjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG1CQUFtQjtBQUMzQztBQUNBLE9BQU87QUFDUCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsWUFBWSxHQUFHLFdBQVc7QUFDOUMsU0FBUyxXQUFXLEdBQUcsT0FBTyxHQUFHLEtBQUs7O0FBRXRDO0FBQ0Esa0JBQWtCLFVBQVUsSUFBSSxPQUFPO0FBQ3ZDOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVksR0FBRyxXQUFXO0FBQzlDO0FBQ0Esa0JBQWtCLFVBQVU7QUFDNUI7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgSXRlbVZpZXcgPSByZXF1aXJlKCdsaWIvY29uZmlnL2l0ZW0tdmlldycpO1xudmFyIFNlbGVjdDIgPSByZXF1aXJlKCdsaWIvY29tcG9uZW50cy9zZWxlY3QyL2JlaGF2aW9yJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIFJhZGlvID0gcmVxdWlyZSgnYmFja2JvbmUnKS5SYWRpbztcbnZhciBoYnMgPSByZXF1aXJlKCdoYW5kbGViYXJzJyk7XG52YXIgUE9TID0gcmVxdWlyZSgnbGliL3V0aWxpdGllcy9nbG9iYWwnKTtcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2N1c3RvbWVyU2VsZWN0Jyk7XG5cbi8vIFNlbGVjdCB2aWV3XG52YXIgVmlldyA9IEl0ZW1WaWV3LmV4dGVuZCh7XG4gIHRlbXBsYXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJzxpbnB1dCBuYW1lPVwiY3VzdG9tZXJcIiB0eXBlPVwiaGlkZGVuXCIgY2xhc3M9XCJzZWxlY3QyXCI+JztcbiAgfSxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB0aGlzLm1vZGVsID0gb3B0aW9ucy5tb2RlbDtcbiAgICB0aGlzLmZpbHRlcmVkID0gUmFkaW8ucmVxdWVzdCgnZW50aXRpZXMnLCAnZ2V0Jywge1xuICAgICAgdHlwZTogJ2ZpbHRlcmVkJyxcbiAgICAgIG5hbWU6ICdjdXN0b21lcnMnXG4gICAgfSk7XG4gICAgdmFyIGN1c3RvbWVycyA9IFJhZGlvLnJlcXVlc3QoJ2VudGl0aWVzJywgJ2dldCcsIHtcbiAgICAgIHR5cGU6ICdvcHRpb24nLFxuICAgICAgbmFtZTogJ2N1c3RvbWVycydcbiAgICB9KTtcbiAgICBpZihjdXN0b21lcnMpe1xuICAgICAgdGhpcy5ndWVzdCA9IGN1c3RvbWVycy5ndWVzdDtcbiAgICB9XG4gIH0sXG5cbiAgYmVoYXZpb3JzOiB7XG4gICAgU2VsZWN0Mjoge1xuICAgICAgYmVoYXZpb3JDbGFzczogU2VsZWN0MixcbiAgICAgIG1pbmltdW1JbnB1dExlbmd0aDogMlxuICAgIH1cbiAgfSxcblxuICB1aToge1xuICAgIHNlbGVjdDogJ2lucHV0W25hbWU9XCJjdXN0b21lclwiXSdcbiAgfSxcblxuICBldmVudHM6IHtcbiAgICAnY2hhbmdlIEB1aS5zZWxlY3QnIDogJ29uU2VsZWN0J1xuICB9LFxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgcXVlcnk6IGZ1bmN0aW9uKHF1ZXJ5KXtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5maWx0ZXJlZC5zdXBlcnNldCgpXG4gICAgICAuZmV0Y2goKVxuICAgICAgLmRvbmUoZnVuY3Rpb24oKXtcbiAgICAgICAgc2VsZi5maWx0ZXJlZC5xdWVyeShxdWVyeS50ZXJtKTtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBzZWxmLmZpbHRlcmVkLnRvSlNPTigpO1xuICAgICAgICByZXN1bHRzLnVuc2hpZnQoc2VsZi5ndWVzdCk7XG4gICAgICAgIHF1ZXJ5LmNhbGxiYWNrKHsgcmVzdWx0czogcmVzdWx0cyB9KTtcbiAgICAgICAgc2VsZi5maWx0ZXJlZC5yZXNldEZpbHRlcnMoKTtcbiAgICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgaW5pdFNlbGVjdGlvbjogZnVuY3Rpb24oIGVsZW1lbnQsIGNhbGxiYWNrICkge1xuICAgIHZhciBjdXN0b21lcjtcbiAgICBpZih0aGlzLm1vZGVsKXtcbiAgICAgIGN1c3RvbWVyID0gdGhpcy5tb2RlbC5nZXQoJ2N1c3RvbWVyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYnVnKCdubyBpbml0aWFsIGN1c3RvbWVyJyk7XG4gICAgfVxuICAgIGNhbGxiYWNrKCBjdXN0b21lciApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBzZWxlY3QyIHBhcnNlIHJlc3VsdHNcbiAgICovXG4gIGZvcm1hdFJlc3VsdDogZnVuY3Rpb24oIGN1c3RvbWVyICkge1xuICAgIHZhciBmb3JtYXQgPSAne3tmaXJzdF9uYW1lfX0ge3tsYXN0X25hbWV9fSAnICtcbiAgICAgICd7eyNpZiBlbWFpbH19KHt7ZW1haWx9fSl7ey9pZn19JztcblxuICAgIGlmKCB0aGlzLmhhc05vTmFtZXMoY3VzdG9tZXIpICl7XG4gICAgICBmb3JtYXQgPSAne3t1c2VybmFtZX19ICh7e2VtYWlsfX0pJztcbiAgICB9XG5cbiAgICB2YXIgdGVtcGxhdGUgPSBoYnMuY29tcGlsZShmb3JtYXQpO1xuICAgIHJldHVybiB0ZW1wbGF0ZShjdXN0b21lcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIHNlbGVjdDIgcGFyc2Ugc2VsZWN0aW9uXG4gICAqL1xuICBmb3JtYXRTZWxlY3Rpb246IGZ1bmN0aW9uKCBjdXN0b21lciApIHtcbiAgICB2YXIgZm9ybWF0ID0gJ3t7Zmlyc3RfbmFtZX19IHt7bGFzdF9uYW1lfX0nO1xuICAgIGlmKCB0aGlzLmhhc05vTmFtZXMoY3VzdG9tZXIpICl7XG4gICAgICBmb3JtYXQgPSAne3t1c2VybmFtZX19JztcbiAgICB9XG5cbiAgICB2YXIgdGVtcGxhdGUgPSBoYnMuY29tcGlsZShmb3JtYXQpO1xuICAgIHJldHVybiB0ZW1wbGF0ZShjdXN0b21lcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBoYXNOb05hbWVzOiBmdW5jdGlvbihjdXN0b21lcil7XG4gICAgcmV0dXJuIF8uY2hhaW4oY3VzdG9tZXIpXG4gICAgICAucGljaygnZmlyc3RfbmFtZScsICdsYXN0X25hbWUnKVxuICAgICAgLnZhbHVlcygpXG4gICAgICAuY29tcGFjdCgpXG4gICAgICAuaXNFbXB0eSgpXG4gICAgICAudmFsdWUoKTtcbiAgfSxcblxuICAvKipcbiAgICpcbiAgICovXG4gIG9uU2VsZWN0OiBmdW5jdGlvbihlKSB7XG4gICAgdGhpcy50cmlnZ2VyKCAnY3VzdG9tZXI6c2VsZWN0JywgZS5hZGRlZCApO1xuICB9XG5cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXc7XG5QT1MuYXR0YWNoKCdDb21wb25lbnRzLkN1c3RvbWVyU2VsZWN0LlZpZXcnLCBWaWV3KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29tcG9uZW50cy9jdXN0b21lci1zZWxlY3Qvdmlldy5qc1xuICoqIG1vZHVsZSBpZCA9IDc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6Ijc3LmpzIn0=");

/***/ },
/* 78 */,
/* 79 */,
/* 80 */,
/* 81 */,
/* 82 */,
/* 83 */,
/* 84 */,
/* 85 */
/*!**************************************************!*\
  !*** ./assets/js/src/apps/settings/show/view.js ***!
  \**************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var FormView = __webpack_require__(/*! lib/config/form-view */ 99);\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar $ = __webpack_require__(/*! jquery */ 1);\nvar Backbone = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\nvar GatewaySettingsModal = ('../modals/gateway-settings');\nvar TranslationUpdateModal = ('../modals/translation-update');\nvar Select2 = __webpack_require__(/*! lib/components/select2/behavior */ 97);\nvar Tooltip = __webpack_require__(/*! lib/components/tooltip/behavior */ 69);\nvar Sortable = __webpack_require__(/*! lib/components/sortable/behavior */ 100);\nvar CustomerSelect = __webpack_require__(/*! lib/components/customer-select/view */ 77);\n\nvar View = FormView.extend({\n  tagName: 'form',\n\n  initialize: function() {\n    var id = this.model.id;\n    this.template = function(){\n      return $('script[data-id=\"' + id + '\"]').html();\n    };\n    //this.listenTo( this.model, 'update:start', this.saving );\n    //this.listenTo( this.model, 'update:stop', this.saved );\n  },\n\n  onRender: function(){\n    this.getComponents();\n    var self = this;\n    this.$('input, select, textarea').each(function(){\n      var name = $(this).attr('name');\n      if(name){\n        self.addBinding(null, '*[name=\"' + name + '\"]', name);\n      }\n    });\n  },\n\n  // special case for customer select component\n  getComponents: function(){\n    var el = this.$('*[data-component=\"customer-select\"]');\n    if(el.length){\n      var view = new CustomerSelect();\n      view.render();\n      el.append(view);\n    }\n  },\n\n  //ui: {\n  //  submit  : 'input[type=\"submit\"]',\n  //  id      : 'input[name=\"id\"]'\n  //},\n  //\n  //events: {\n  //  'click @ui.submit': 'onSubmit',\n  //  'mouseenter a.wc-pos-modal': 'proLoadSettings',\n  //  'click a.wc-pos-modal': 'openModal',\n  //  'click a.action-translation': 'translationUpdate'\n  //},\n\n  behaviors: {\n    Select2: {\n      behaviorClass: Select2\n    },\n    Tooltip: {\n      behaviorClass: Tooltip\n    },\n    Sortable: {\n      behaviorClass: Sortable\n    }\n  },\n\n  //onBeforeShow: function() {\n  //  //Backbone.Syphon.deserialize( this, this.model.toJSON() );\n  //},\n  //\n  //onBeforeDestroy: function() {\n  //  this.storeState();\n  //},\n  //\n  //onSubmit: function(e) {\n  //  e.preventDefault();\n  //  this.storeState().save();\n  //},\n  //\n  //storeState: function() {\n  //  //var data = Backbone.Syphon.serialize( this );\n  //  return this.model.set( data );\n  //},\n  //\n  //saving: function() {\n  //  this.ui.submit\n  //    .prop( 'disabled', true )\n  //    .next( 'p.response' )\n  //    .html( '<i class=\"spinner\"></i>' );\n  //},\n  //\n  //saved: function() {\n  //  var response = this.model.get('response');\n  //  var success = response.result === 'success' ? 'yes' : 'no';\n  //  this.ui.submit\n  //    .prop( 'disabled', false)\n  //    .next( 'p.response' )\n  //    .html( '' +\n  //      '<i class=\"dashicons dashicons-' + success + '\"></i>' +\n  //      response.notice\n  //    );\n  //\n  //  this.model.unset( 'response', { silent: true } );\n  //},\n  //\n  //proLoadSettings: function(e) {\n  //  var id = 'gateway_' + $(e.target).data('gateway');\n  //\n  //  if( _.isUndefined( this.collection.get( id ) ) ) {\n  //    var modalModel = this.collection.add({\n  //      id: id,\n  //      security: this.model.get('security'),\n  //      title: 'Loading ...'\n  //    });\n  //    modalModel.fetch();\n  //  }\n  //},\n  //\n  //openModal: function(e) {\n  //  e.preventDefault();\n  //  var id = 'gateway_' + $(e.target).data('gateway');\n  //\n  //  new GatewaySettingsModal({\n  //    model: this.collection.get( id )\n  //  });\n  //},\n  //\n  //translationUpdate: function(e) {\n  //  e.preventDefault();\n  //  var title = $(e.target).parent('td').prev('th').html();\n  //\n  //  new TranslationUpdateModal({\n  //    model: new Backbone.Model({\n  //      title: title\n  //    })\n  //  });\n  //}\n\n});\n\nmodule.exports = View;\nPOS.attach('SettingsApp.View');//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2FwcHMvc2V0dGluZ3Mvc2hvdy92aWV3LmpzPzdhNTUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGVBQWU7QUFDcEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDs7QUFFQSxDQUFDOztBQUVEO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRm9ybVZpZXcgPSByZXF1aXJlKCdsaWIvY29uZmlnL2Zvcm0tdmlldycpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgQmFja2JvbmUgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xudmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG52YXIgR2F0ZXdheVNldHRpbmdzTW9kYWwgPSAoJy4uL21vZGFscy9nYXRld2F5LXNldHRpbmdzJyk7XG52YXIgVHJhbnNsYXRpb25VcGRhdGVNb2RhbCA9ICgnLi4vbW9kYWxzL3RyYW5zbGF0aW9uLXVwZGF0ZScpO1xudmFyIFNlbGVjdDIgPSByZXF1aXJlKCdsaWIvY29tcG9uZW50cy9zZWxlY3QyL2JlaGF2aW9yJyk7XG52YXIgVG9vbHRpcCA9IHJlcXVpcmUoJ2xpYi9jb21wb25lbnRzL3Rvb2x0aXAvYmVoYXZpb3InKTtcbnZhciBTb3J0YWJsZSA9IHJlcXVpcmUoJ2xpYi9jb21wb25lbnRzL3NvcnRhYmxlL2JlaGF2aW9yJyk7XG52YXIgQ3VzdG9tZXJTZWxlY3QgPSByZXF1aXJlKCdsaWIvY29tcG9uZW50cy9jdXN0b21lci1zZWxlY3QvdmlldycpO1xuXG52YXIgVmlldyA9IEZvcm1WaWV3LmV4dGVuZCh7XG4gIHRhZ05hbWU6ICdmb3JtJyxcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaWQgPSB0aGlzLm1vZGVsLmlkO1xuICAgIHRoaXMudGVtcGxhdGUgPSBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuICQoJ3NjcmlwdFtkYXRhLWlkPVwiJyArIGlkICsgJ1wiXScpLmh0bWwoKTtcbiAgICB9O1xuICAgIC8vdGhpcy5saXN0ZW5UbyggdGhpcy5tb2RlbCwgJ3VwZGF0ZTpzdGFydCcsIHRoaXMuc2F2aW5nICk7XG4gICAgLy90aGlzLmxpc3RlblRvKCB0aGlzLm1vZGVsLCAndXBkYXRlOnN0b3AnLCB0aGlzLnNhdmVkICk7XG4gIH0sXG5cbiAgb25SZW5kZXI6IGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5nZXRDb21wb25lbnRzKCk7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuJCgnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpO1xuICAgICAgaWYobmFtZSl7XG4gICAgICAgIHNlbGYuYWRkQmluZGluZyhudWxsLCAnKltuYW1lPVwiJyArIG5hbWUgKyAnXCJdJywgbmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gc3BlY2lhbCBjYXNlIGZvciBjdXN0b21lciBzZWxlY3QgY29tcG9uZW50XG4gIGdldENvbXBvbmVudHM6IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGVsID0gdGhpcy4kKCcqW2RhdGEtY29tcG9uZW50PVwiY3VzdG9tZXItc2VsZWN0XCJdJyk7XG4gICAgaWYoZWwubGVuZ3RoKXtcbiAgICAgIHZhciB2aWV3ID0gbmV3IEN1c3RvbWVyU2VsZWN0KCk7XG4gICAgICB2aWV3LnJlbmRlcigpO1xuICAgICAgZWwuYXBwZW5kKHZpZXcpO1xuICAgIH1cbiAgfSxcblxuICAvL3VpOiB7XG4gIC8vICBzdWJtaXQgIDogJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nLFxuICAvLyAgaWQgICAgICA6ICdpbnB1dFtuYW1lPVwiaWRcIl0nXG4gIC8vfSxcbiAgLy9cbiAgLy9ldmVudHM6IHtcbiAgLy8gICdjbGljayBAdWkuc3VibWl0JzogJ29uU3VibWl0JyxcbiAgLy8gICdtb3VzZWVudGVyIGEud2MtcG9zLW1vZGFsJzogJ3Byb0xvYWRTZXR0aW5ncycsXG4gIC8vICAnY2xpY2sgYS53Yy1wb3MtbW9kYWwnOiAnb3Blbk1vZGFsJyxcbiAgLy8gICdjbGljayBhLmFjdGlvbi10cmFuc2xhdGlvbic6ICd0cmFuc2xhdGlvblVwZGF0ZSdcbiAgLy99LFxuXG4gIGJlaGF2aW9yczoge1xuICAgIFNlbGVjdDI6IHtcbiAgICAgIGJlaGF2aW9yQ2xhc3M6IFNlbGVjdDJcbiAgICB9LFxuICAgIFRvb2x0aXA6IHtcbiAgICAgIGJlaGF2aW9yQ2xhc3M6IFRvb2x0aXBcbiAgICB9LFxuICAgIFNvcnRhYmxlOiB7XG4gICAgICBiZWhhdmlvckNsYXNzOiBTb3J0YWJsZVxuICAgIH1cbiAgfSxcblxuICAvL29uQmVmb3JlU2hvdzogZnVuY3Rpb24oKSB7XG4gIC8vICAvL0JhY2tib25lLlN5cGhvbi5kZXNlcmlhbGl6ZSggdGhpcywgdGhpcy5tb2RlbC50b0pTT04oKSApO1xuICAvL30sXG4gIC8vXG4gIC8vb25CZWZvcmVEZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgLy8gIHRoaXMuc3RvcmVTdGF0ZSgpO1xuICAvL30sXG4gIC8vXG4gIC8vb25TdWJtaXQ6IGZ1bmN0aW9uKGUpIHtcbiAgLy8gIGUucHJldmVudERlZmF1bHQoKTtcbiAgLy8gIHRoaXMuc3RvcmVTdGF0ZSgpLnNhdmUoKTtcbiAgLy99LFxuICAvL1xuICAvL3N0b3JlU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAvLyAgLy92YXIgZGF0YSA9IEJhY2tib25lLlN5cGhvbi5zZXJpYWxpemUoIHRoaXMgKTtcbiAgLy8gIHJldHVybiB0aGlzLm1vZGVsLnNldCggZGF0YSApO1xuICAvL30sXG4gIC8vXG4gIC8vc2F2aW5nOiBmdW5jdGlvbigpIHtcbiAgLy8gIHRoaXMudWkuc3VibWl0XG4gIC8vICAgIC5wcm9wKCAnZGlzYWJsZWQnLCB0cnVlIClcbiAgLy8gICAgLm5leHQoICdwLnJlc3BvbnNlJyApXG4gIC8vICAgIC5odG1sKCAnPGkgY2xhc3M9XCJzcGlubmVyXCI+PC9pPicgKTtcbiAgLy99LFxuICAvL1xuICAvL3NhdmVkOiBmdW5jdGlvbigpIHtcbiAgLy8gIHZhciByZXNwb25zZSA9IHRoaXMubW9kZWwuZ2V0KCdyZXNwb25zZScpO1xuICAvLyAgdmFyIHN1Y2Nlc3MgPSByZXNwb25zZS5yZXN1bHQgPT09ICdzdWNjZXNzJyA/ICd5ZXMnIDogJ25vJztcbiAgLy8gIHRoaXMudWkuc3VibWl0XG4gIC8vICAgIC5wcm9wKCAnZGlzYWJsZWQnLCBmYWxzZSlcbiAgLy8gICAgLm5leHQoICdwLnJlc3BvbnNlJyApXG4gIC8vICAgIC5odG1sKCAnJyArXG4gIC8vICAgICAgJzxpIGNsYXNzPVwiZGFzaGljb25zIGRhc2hpY29ucy0nICsgc3VjY2VzcyArICdcIj48L2k+JyArXG4gIC8vICAgICAgcmVzcG9uc2Uubm90aWNlXG4gIC8vICAgICk7XG4gIC8vXG4gIC8vICB0aGlzLm1vZGVsLnVuc2V0KCAncmVzcG9uc2UnLCB7IHNpbGVudDogdHJ1ZSB9ICk7XG4gIC8vfSxcbiAgLy9cbiAgLy9wcm9Mb2FkU2V0dGluZ3M6IGZ1bmN0aW9uKGUpIHtcbiAgLy8gIHZhciBpZCA9ICdnYXRld2F5XycgKyAkKGUudGFyZ2V0KS5kYXRhKCdnYXRld2F5Jyk7XG4gIC8vXG4gIC8vICBpZiggXy5pc1VuZGVmaW5lZCggdGhpcy5jb2xsZWN0aW9uLmdldCggaWQgKSApICkge1xuICAvLyAgICB2YXIgbW9kYWxNb2RlbCA9IHRoaXMuY29sbGVjdGlvbi5hZGQoe1xuICAvLyAgICAgIGlkOiBpZCxcbiAgLy8gICAgICBzZWN1cml0eTogdGhpcy5tb2RlbC5nZXQoJ3NlY3VyaXR5JyksXG4gIC8vICAgICAgdGl0bGU6ICdMb2FkaW5nIC4uLidcbiAgLy8gICAgfSk7XG4gIC8vICAgIG1vZGFsTW9kZWwuZmV0Y2goKTtcbiAgLy8gIH1cbiAgLy99LFxuICAvL1xuICAvL29wZW5Nb2RhbDogZnVuY3Rpb24oZSkge1xuICAvLyAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyAgdmFyIGlkID0gJ2dhdGV3YXlfJyArICQoZS50YXJnZXQpLmRhdGEoJ2dhdGV3YXknKTtcbiAgLy9cbiAgLy8gIG5ldyBHYXRld2F5U2V0dGluZ3NNb2RhbCh7XG4gIC8vICAgIG1vZGVsOiB0aGlzLmNvbGxlY3Rpb24uZ2V0KCBpZCApXG4gIC8vICB9KTtcbiAgLy99LFxuICAvL1xuICAvL3RyYW5zbGF0aW9uVXBkYXRlOiBmdW5jdGlvbihlKSB7XG4gIC8vICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIC8vICB2YXIgdGl0bGUgPSAkKGUudGFyZ2V0KS5wYXJlbnQoJ3RkJykucHJldigndGgnKS5odG1sKCk7XG4gIC8vXG4gIC8vICBuZXcgVHJhbnNsYXRpb25VcGRhdGVNb2RhbCh7XG4gIC8vICAgIG1vZGVsOiBuZXcgQmFja2JvbmUuTW9kZWwoe1xuICAvLyAgICAgIHRpdGxlOiB0aXRsZVxuICAvLyAgICB9KVxuICAvLyAgfSk7XG4gIC8vfVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBWaWV3O1xuUE9TLmF0dGFjaCgnU2V0dGluZ3NBcHAuVmlldycpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2FwcHMvc2V0dGluZ3Mvc2hvdy92aWV3LmpzXG4gKiogbW9kdWxlIGlkID0gODVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6Ijg1LmpzIn0=");

/***/ },
/* 86 */
/*!*****************************************************!*\
  !*** ./assets/js/src/lib/config/collection-view.js ***!
  \*****************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.CollectionView = bb.Marionette.CollectionView;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvY29sbGVjdGlvbi12aWV3LmpzPzBjYjgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBiYiA9IHJlcXVpcmUoJ2JhY2tib25lJyk7XG52YXIgUE9TID0gcmVxdWlyZSgnbGliL3V0aWxpdGllcy9nbG9iYWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBQT1MuQ29sbGVjdGlvblZpZXcgPSBiYi5NYXJpb25ldHRlLkNvbGxlY3Rpb25WaWV3O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvY29sbGVjdGlvbi12aWV3LmpzXG4gKiogbW9kdWxlIGlkID0gODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiODYuanMifQ==");

/***/ },
/* 87 */
/*!*******************************************************!*\
  !*** ./assets/js/src/lib/components/tabs/entities.js ***!
  \*******************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Model = __webpack_require__(/*! lib/config/model */ 63);\nvar Collection = __webpack_require__(/*! lib/config/collection */ 59);\nvar _ = __webpack_require__(/*! lodash */ 2);\n\nvar Tab = Model.extend({\n  defaults: {\n    label: 'Tab',\n    active: false,\n    fixed: true\n  }\n});\n\nvar Tabs = Collection.extend({\n  model: Tab,\n\n  initialize: function() {\n    this.on( 'remove', this.onRemove );\n  },\n\n  onRemove: function() {\n    var activeTabs = this.where({'active':true});\n    if( activeTabs.length === 0 ) {\n      this.at(0).set({active:true});\n    }\n  },\n\n  setActive: function(id){\n    this.each( function(tab) {\n      tab.set({active: ( id === tab.id ) });\n    });\n  }\n\n});\n\nmodule.exports = Tabs;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL3RhYnMvZW50aXRpZXMuanM/MmMwYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsaUNBQWlDLGNBQWM7QUFDL0M7QUFDQSxzQkFBc0IsWUFBWTtBQUNsQztBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGVBQWUsMkJBQTJCO0FBQzFDLEtBQUs7QUFDTDs7QUFFQSxDQUFDOztBQUVEIiwic291cmNlc0NvbnRlbnQiOlsidmFyIE1vZGVsID0gcmVxdWlyZSgnbGliL2NvbmZpZy9tb2RlbCcpO1xudmFyIENvbGxlY3Rpb24gPSByZXF1aXJlKCdsaWIvY29uZmlnL2NvbGxlY3Rpb24nKTtcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbnZhciBUYWIgPSBNb2RlbC5leHRlbmQoe1xuICBkZWZhdWx0czoge1xuICAgIGxhYmVsOiAnVGFiJyxcbiAgICBhY3RpdmU6IGZhbHNlLFxuICAgIGZpeGVkOiB0cnVlXG4gIH1cbn0pO1xuXG52YXIgVGFicyA9IENvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgbW9kZWw6IFRhYixcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm9uKCAncmVtb3ZlJywgdGhpcy5vblJlbW92ZSApO1xuICB9LFxuXG4gIG9uUmVtb3ZlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYWN0aXZlVGFicyA9IHRoaXMud2hlcmUoeydhY3RpdmUnOnRydWV9KTtcbiAgICBpZiggYWN0aXZlVGFicy5sZW5ndGggPT09IDAgKSB7XG4gICAgICB0aGlzLmF0KDApLnNldCh7YWN0aXZlOnRydWV9KTtcbiAgICB9XG4gIH0sXG5cbiAgc2V0QWN0aXZlOiBmdW5jdGlvbihpZCl7XG4gICAgdGhpcy5lYWNoKCBmdW5jdGlvbih0YWIpIHtcbiAgICAgIHRhYi5zZXQoe2FjdGl2ZTogKCBpZCA9PT0gdGFiLmlkICkgfSk7XG4gICAgfSk7XG4gIH1cblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVGFicztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29tcG9uZW50cy90YWJzL2VudGl0aWVzLmpzXG4gKiogbW9kdWxlIGlkID0gODdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiODcuanMifQ==");

/***/ },
/* 88 */,
/* 89 */
/*!***************************!*\
  !*** external "IDBStore" ***!
  \***************************/
/***/ function(module, exports, __webpack_require__) {

	eval("module.exports = IDBStore;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJJREJTdG9yZVwiP2YxYWEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiODkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IElEQlN0b3JlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJJREJTdG9yZVwiXG4gKiogbW9kdWxlIGlkID0gODlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 90 */
/*!**************************!*\
  !*** ./~/debug/debug.js ***!
  \**************************/
/***/ function(module, exports, __webpack_require__) {

	eval("\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = __webpack_require__(/*! ms */ 106);\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2RlYnVnL2RlYnVnLmpzP2NkMTAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpQkFBaUIsU0FBUztBQUMxQiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseUNBQXlDLFNBQVM7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsU0FBUztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKlxuICogRXhwb3NlIGBkZWJ1ZygpYCBhcyB0aGUgbW9kdWxlLlxuICovXG5cbmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGRlYnVnO1xuZXhwb3J0cy5jb2VyY2UgPSBjb2VyY2U7XG5leHBvcnRzLmRpc2FibGUgPSBkaXNhYmxlO1xuZXhwb3J0cy5lbmFibGUgPSBlbmFibGU7XG5leHBvcnRzLmVuYWJsZWQgPSBlbmFibGVkO1xuZXhwb3J0cy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cbi8qKlxuICogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG4gKi9cblxuZXhwb3J0cy5uYW1lcyA9IFtdO1xuZXhwb3J0cy5za2lwcyA9IFtdO1xuXG4vKipcbiAqIE1hcCBvZiBzcGVjaWFsIFwiJW5cIiBoYW5kbGluZyBmdW5jdGlvbnMsIGZvciB0aGUgZGVidWcgXCJmb3JtYXRcIiBhcmd1bWVudC5cbiAqXG4gKiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlcmNhc2VkIGxldHRlciwgaS5lLiBcIm5cIi5cbiAqL1xuXG5leHBvcnRzLmZvcm1hdHRlcnMgPSB7fTtcblxuLyoqXG4gKiBQcmV2aW91c2x5IGFzc2lnbmVkIGNvbG9yLlxuICovXG5cbnZhciBwcmV2Q29sb3IgPSAwO1xuXG4vKipcbiAqIFByZXZpb3VzIGxvZyB0aW1lc3RhbXAuXG4gKi9cblxudmFyIHByZXZUaW1lO1xuXG4vKipcbiAqIFNlbGVjdCBhIGNvbG9yLlxuICpcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNlbGVjdENvbG9yKCkge1xuICByZXR1cm4gZXhwb3J0cy5jb2xvcnNbcHJldkNvbG9yKysgJSBleHBvcnRzLmNvbG9ycy5sZW5ndGhdO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZWJ1ZyhuYW1lc3BhY2UpIHtcblxuICAvLyBkZWZpbmUgdGhlIGBkaXNhYmxlZGAgdmVyc2lvblxuICBmdW5jdGlvbiBkaXNhYmxlZCgpIHtcbiAgfVxuICBkaXNhYmxlZC5lbmFibGVkID0gZmFsc2U7XG5cbiAgLy8gZGVmaW5lIHRoZSBgZW5hYmxlZGAgdmVyc2lvblxuICBmdW5jdGlvbiBlbmFibGVkKCkge1xuXG4gICAgdmFyIHNlbGYgPSBlbmFibGVkO1xuXG4gICAgLy8gc2V0IGBkaWZmYCB0aW1lc3RhbXBcbiAgICB2YXIgY3VyciA9ICtuZXcgRGF0ZSgpO1xuICAgIHZhciBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG4gICAgc2VsZi5kaWZmID0gbXM7XG4gICAgc2VsZi5wcmV2ID0gcHJldlRpbWU7XG4gICAgc2VsZi5jdXJyID0gY3VycjtcbiAgICBwcmV2VGltZSA9IGN1cnI7XG5cbiAgICAvLyBhZGQgdGhlIGBjb2xvcmAgaWYgbm90IHNldFxuICAgIGlmIChudWxsID09IHNlbGYudXNlQ29sb3JzKSBzZWxmLnVzZUNvbG9ycyA9IGV4cG9ydHMudXNlQ29sb3JzKCk7XG4gICAgaWYgKG51bGwgPT0gc2VsZi5jb2xvciAmJiBzZWxmLnVzZUNvbG9ycykgc2VsZi5jb2xvciA9IHNlbGVjdENvbG9yKCk7XG5cbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cbiAgICBhcmdzWzBdID0gZXhwb3J0cy5jb2VyY2UoYXJnc1swXSk7XG5cbiAgICBpZiAoJ3N0cmluZycgIT09IHR5cGVvZiBhcmdzWzBdKSB7XG4gICAgICAvLyBhbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlb1xuICAgICAgYXJncyA9IFsnJW8nXS5jb25jYXQoYXJncyk7XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EteiVdKS9nLCBmdW5jdGlvbihtYXRjaCwgZm9ybWF0KSB7XG4gICAgICAvLyBpZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG4gICAgICBpZiAobWF0Y2ggPT09ICclJScpIHJldHVybiBtYXRjaDtcbiAgICAgIGluZGV4Kys7XG4gICAgICB2YXIgZm9ybWF0dGVyID0gZXhwb3J0cy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG4gICAgICBpZiAoJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGZvcm1hdHRlcikge1xuICAgICAgICB2YXIgdmFsID0gYXJnc1tpbmRleF07XG4gICAgICAgIG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuICAgICAgICAvLyBub3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG4gICAgICAgIGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgaW5kZXgtLTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcblxuICAgIGlmICgnZnVuY3Rpb24nID09PSB0eXBlb2YgZXhwb3J0cy5mb3JtYXRBcmdzKSB7XG4gICAgICBhcmdzID0gZXhwb3J0cy5mb3JtYXRBcmdzLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIH1cbiAgICB2YXIgbG9nRm4gPSBlbmFibGVkLmxvZyB8fCBleHBvcnRzLmxvZyB8fCBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuICAgIGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICB9XG4gIGVuYWJsZWQuZW5hYmxlZCA9IHRydWU7XG5cbiAgdmFyIGZuID0gZXhwb3J0cy5lbmFibGVkKG5hbWVzcGFjZSkgPyBlbmFibGVkIDogZGlzYWJsZWQ7XG5cbiAgZm4ubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuXG4gIHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG4gKiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKSB7XG4gIGV4cG9ydHMuc2F2ZShuYW1lc3BhY2VzKTtcblxuICB2YXIgc3BsaXQgPSAobmFtZXNwYWNlcyB8fCAnJykuc3BsaXQoL1tcXHMsXSsvKTtcbiAgdmFyIGxlbiA9IHNwbGl0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKCFzcGxpdFtpXSkgY29udGludWU7IC8vIGlnbm9yZSBlbXB0eSBzdHJpbmdzXG4gICAgbmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1xcKi9nLCAnLio/Jyk7XG4gICAgaWYgKG5hbWVzcGFjZXNbMF0gPT09ICctJykge1xuICAgICAgZXhwb3J0cy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAnJCcpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhwb3J0cy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoJ14nICsgbmFtZXNwYWNlcyArICckJykpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIERpc2FibGUgZGVidWcgb3V0cHV0LlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgZXhwb3J0cy5lbmFibGUoJycpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG4gIHZhciBpLCBsZW47XG4gIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMuc2tpcHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZXhwb3J0cy5za2lwc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGZvciAoaSA9IDAsIGxlbiA9IGV4cG9ydHMubmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoZXhwb3J0cy5uYW1lc1tpXS50ZXN0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENvZXJjZSBgdmFsYC5cbiAqXG4gKiBAcGFyYW0ge01peGVkfSB2YWxcbiAqIEByZXR1cm4ge01peGVkfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuICBpZiAodmFsIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiB2YWwuc3RhY2sgfHwgdmFsLm1lc3NhZ2U7XG4gIHJldHVybiB2YWw7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9kZWJ1Zy9kZWJ1Zy5qc1xuICoqIG1vZHVsZSBpZCA9IDkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjkwLmpzIn0=");

/***/ },
/* 91 */
/*!************************************************!*\
  !*** ./assets/js/src/lib/config/dual-model.js ***!
  \************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Model = __webpack_require__(/*! ./model */ 63);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.DualModel = Model.extend({\n  idAttribute: 'local_id',\n  remoteIdAttribute: 'id',\n  fields: ['title'],\n  parse: function (resp) {\n    return resp[this.name] ? resp[this.name] : resp ;\n  },\n\n  states: {\n    SYNCHRONIZED: 'SYNCHRONIZED',\n    SYNCHRONIZING: 'SYNCHRONIZING',\n    UPDATE_FAILED: 'UPDATE_FAILED',\n    CREATE_FAILED: 'CREATE_FAILED',\n    DELETE_FAILED: 'DELETE_FAILED'\n  },\n\n  hasRemoteId: function() {\n    return !!this.get(this.remoteIdAttribute);\n  },\n\n  getUrlForSync: function(urlRoot, method) {\n    var remoteId;\n    remoteId = this.get(this.remoteIdAttribute);\n    if (remoteId && (method === 'update' || method === 'delete')) {\n      return \"\" + urlRoot + \"/\" + remoteId + \"/\";\n    }\n    return urlRoot;\n  },\n\n  isInSynchronizing: function() {\n    return this.get('status') === this.states.SYNCHRONIZING;\n  },\n\n  isDelayed: function() {\n    var _ref;\n    return (_ref = this.get('status')) === this.states.DELETE_FAILED || _ref === this.states.UPDATE_FAILED || _ref === this.states.CREATE_FAILED;\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvZHVhbC1tb2RlbC5qcz9mODI0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIE1vZGVsID0gcmVxdWlyZSgnLi9tb2RlbCcpO1xudmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUE9TLkR1YWxNb2RlbCA9IE1vZGVsLmV4dGVuZCh7XG4gIGlkQXR0cmlidXRlOiAnbG9jYWxfaWQnLFxuICByZW1vdGVJZEF0dHJpYnV0ZTogJ2lkJyxcbiAgZmllbGRzOiBbJ3RpdGxlJ10sXG4gIHBhcnNlOiBmdW5jdGlvbiAocmVzcCkge1xuICAgIHJldHVybiByZXNwW3RoaXMubmFtZV0gPyByZXNwW3RoaXMubmFtZV0gOiByZXNwIDtcbiAgfSxcblxuICBzdGF0ZXM6IHtcbiAgICBTWU5DSFJPTklaRUQ6ICdTWU5DSFJPTklaRUQnLFxuICAgIFNZTkNIUk9OSVpJTkc6ICdTWU5DSFJPTklaSU5HJyxcbiAgICBVUERBVEVfRkFJTEVEOiAnVVBEQVRFX0ZBSUxFRCcsXG4gICAgQ1JFQVRFX0ZBSUxFRDogJ0NSRUFURV9GQUlMRUQnLFxuICAgIERFTEVURV9GQUlMRUQ6ICdERUxFVEVfRkFJTEVEJ1xuICB9LFxuXG4gIGhhc1JlbW90ZUlkOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gISF0aGlzLmdldCh0aGlzLnJlbW90ZUlkQXR0cmlidXRlKTtcbiAgfSxcblxuICBnZXRVcmxGb3JTeW5jOiBmdW5jdGlvbih1cmxSb290LCBtZXRob2QpIHtcbiAgICB2YXIgcmVtb3RlSWQ7XG4gICAgcmVtb3RlSWQgPSB0aGlzLmdldCh0aGlzLnJlbW90ZUlkQXR0cmlidXRlKTtcbiAgICBpZiAocmVtb3RlSWQgJiYgKG1ldGhvZCA9PT0gJ3VwZGF0ZScgfHwgbWV0aG9kID09PSAnZGVsZXRlJykpIHtcbiAgICAgIHJldHVybiBcIlwiICsgdXJsUm9vdCArIFwiL1wiICsgcmVtb3RlSWQgKyBcIi9cIjtcbiAgICB9XG4gICAgcmV0dXJuIHVybFJvb3Q7XG4gIH0sXG5cbiAgaXNJblN5bmNocm9uaXppbmc6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldCgnc3RhdHVzJykgPT09IHRoaXMuc3RhdGVzLlNZTkNIUk9OSVpJTkc7XG4gIH0sXG5cbiAgaXNEZWxheWVkOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3JlZjtcbiAgICByZXR1cm4gKF9yZWYgPSB0aGlzLmdldCgnc3RhdHVzJykpID09PSB0aGlzLnN0YXRlcy5ERUxFVEVfRkFJTEVEIHx8IF9yZWYgPT09IHRoaXMuc3RhdGVzLlVQREFURV9GQUlMRUQgfHwgX3JlZiA9PT0gdGhpcy5zdGF0ZXMuQ1JFQVRFX0ZBSUxFRDtcbiAgfVxuXG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29uZmlnL2R1YWwtbW9kZWwuanNcbiAqKiBtb2R1bGUgaWQgPSA5MVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI5MS5qcyJ9");

/***/ },
/* 92 */
/*!**********************************************!*\
  !*** ./assets/js/src/lib/config/behavior.js ***!
  \**********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nmodule.exports = POS.Behavior =bb.Marionette.Behavior;//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvYmVoYXZpb3IuanM/ZjMyYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJiID0gcmVxdWlyZSgnYmFja2JvbmUnKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBPUy5CZWhhdmlvciA9YmIuTWFyaW9uZXR0ZS5CZWhhdmlvcjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29uZmlnL2JlaGF2aW9yLmpzXG4gKiogbW9kdWxlIGlkID0gOTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiOTIuanMifQ==");

/***/ },
/* 93 */,
/* 94 */,
/* 95 */,
/* 96 */,
/* 97 */
/*!**********************************************************!*\
  !*** ./assets/js/src/lib/components/select2/behavior.js ***!
  \**********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Behavior = __webpack_require__(/*! lib/config/behavior */ 92);\nvar _ = __webpack_require__(/*! lodash */ 2);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nvar Select2 = Behavior.extend({\n\n  initialize: function(options){\n    options = options || {};\n    var defaults = {};\n    var methods = [\n      'query',\n      'initSelection',\n      'formatResult',\n      'formatSelection'\n    ];\n\n    _(methods).each(function(method){\n      if( this.view[method] ){\n        options[method] = _.bind(this.view[method], this.view);\n      }\n      defaults[method] = this[method];\n    }, this);\n\n    this.options = _.defaults(options, defaults);\n  },\n\n  ui: {\n    select: '.select2'\n  },\n\n  onRender: function() {\n    if(this.ui.select.hasClass('no-search')) {\n      this.options.dropdownCssClass = 'no-search';\n    }\n    this.ui.select.select2( this.options );\n  },\n\n  onBeforeDestroy: function() {\n    this.ui.select.select2( 'destroy' );\n  },\n\n  //query: function(){},\n  //initSelection: function(){},\n  //formatResult: function(){},\n  //formatSelection: function(){}\n\n});\n\nmodule.exports = Select2;\nPOS.attach('Behaviors.Select2', Select2);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL3NlbGVjdDIvYmVoYXZpb3IuanM/MTg1YSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSCx1QkFBdUI7QUFDdkIsK0JBQStCO0FBQy9CLDhCQUE4QjtBQUM5Qjs7QUFFQSxDQUFDOztBQUVEO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQmVoYXZpb3IgPSByZXF1aXJlKCdsaWIvY29uZmlnL2JlaGF2aW9yJyk7XG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIFBPUyA9IHJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvZ2xvYmFsJyk7XG5cbnZhciBTZWxlY3QyID0gQmVoYXZpb3IuZXh0ZW5kKHtcblxuICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKXtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZGVmYXVsdHMgPSB7fTtcbiAgICB2YXIgbWV0aG9kcyA9IFtcbiAgICAgICdxdWVyeScsXG4gICAgICAnaW5pdFNlbGVjdGlvbicsXG4gICAgICAnZm9ybWF0UmVzdWx0JyxcbiAgICAgICdmb3JtYXRTZWxlY3Rpb24nXG4gICAgXTtcblxuICAgIF8obWV0aG9kcykuZWFjaChmdW5jdGlvbihtZXRob2Qpe1xuICAgICAgaWYoIHRoaXMudmlld1ttZXRob2RdICl7XG4gICAgICAgIG9wdGlvbnNbbWV0aG9kXSA9IF8uYmluZCh0aGlzLnZpZXdbbWV0aG9kXSwgdGhpcy52aWV3KTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHRzW21ldGhvZF0gPSB0aGlzW21ldGhvZF07XG4gICAgfSwgdGhpcyk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBfLmRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRzKTtcbiAgfSxcblxuICB1aToge1xuICAgIHNlbGVjdDogJy5zZWxlY3QyJ1xuICB9LFxuXG4gIG9uUmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLnVpLnNlbGVjdC5oYXNDbGFzcygnbm8tc2VhcmNoJykpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5kcm9wZG93bkNzc0NsYXNzID0gJ25vLXNlYXJjaCc7XG4gICAgfVxuICAgIHRoaXMudWkuc2VsZWN0LnNlbGVjdDIoIHRoaXMub3B0aW9ucyApO1xuICB9LFxuXG4gIG9uQmVmb3JlRGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy51aS5zZWxlY3Quc2VsZWN0MiggJ2Rlc3Ryb3knICk7XG4gIH0sXG5cbiAgLy9xdWVyeTogZnVuY3Rpb24oKXt9LFxuICAvL2luaXRTZWxlY3Rpb246IGZ1bmN0aW9uKCl7fSxcbiAgLy9mb3JtYXRSZXN1bHQ6IGZ1bmN0aW9uKCl7fSxcbiAgLy9mb3JtYXRTZWxlY3Rpb246IGZ1bmN0aW9uKCl7fVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTZWxlY3QyO1xuUE9TLmF0dGFjaCgnQmVoYXZpb3JzLlNlbGVjdDInLCBTZWxlY3QyKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29tcG9uZW50cy9zZWxlY3QyL2JlaGF2aW9yLmpzXG4gKiogbW9kdWxlIGlkID0gOTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiOTcuanMifQ==");

/***/ },
/* 98 */,
/* 99 */
/*!***********************************************!*\
  !*** ./assets/js/src/lib/config/form-view.js ***!
  \***********************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var ItemView = __webpack_require__(/*! ./item-view */ 67);\nvar bb = __webpack_require__(/*! backbone */ 3);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n__webpack_require__(/*! backbone.stickit */ 107);\n__webpack_require__(/*! backbone-validation */ 108);\n__webpack_require__(/*! lib/utilities/stickit-handlers */ 105);\n\nmodule.exports = POS.FormView = ItemView.extend({\n\n  constructor: function() {\n    return ItemView.prototype.constructor.apply(this, arguments);\n  },\n\n  bindings: {},\n\n  render: function(){\n    // Invoke original render function\n    var args = Array.prototype.slice.apply(arguments);\n    var result = ItemView.prototype.render.apply(this, args);\n\n    // Apply validation\n    bb.Validation.bind(this, {\n      model: this.model,\n      valid: function(view, attr) {\n        view\n          .$('input[name=\"' + attr + '\"]')\n          .parent()\n          .removeClass('error');\n      },\n      invalid: function(view, attr) {\n        view\n          .$('input[name=\"' + attr + '\"]')\n          .parent()\n          .addClass('error');\n      }\n    });\n\n    // Apply stickit\n    this.stickit();\n\n    // Return render result\n    return result;\n  },\n\n  remove: function() {\n    // Remove the validation binding\n    bb.Validation.unbind(this);\n    return ItemView.prototype.remove.apply(this, arguments);\n  }\n\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb25maWcvZm9ybS12aWV3LmpzPzJkZTYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVILGNBQWM7O0FBRWQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEl0ZW1WaWV3ID0gcmVxdWlyZSgnLi9pdGVtLXZpZXcnKTtcbnZhciBiYiA9IHJlcXVpcmUoJ2JhY2tib25lJyk7XG52YXIgUE9TID0gcmVxdWlyZSgnbGliL3V0aWxpdGllcy9nbG9iYWwnKTtcbnJlcXVpcmUoJ2JhY2tib25lLnN0aWNraXQnKTtcbnJlcXVpcmUoJ2JhY2tib25lLXZhbGlkYXRpb24nKTtcbnJlcXVpcmUoJ2xpYi91dGlsaXRpZXMvc3RpY2tpdC1oYW5kbGVycycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBPUy5Gb3JtVmlldyA9IEl0ZW1WaWV3LmV4dGVuZCh7XG5cbiAgY29uc3RydWN0b3I6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBJdGVtVmlldy5wcm90b3R5cGUuY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfSxcblxuICBiaW5kaW5nczoge30sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpe1xuICAgIC8vIEludm9rZSBvcmlnaW5hbCByZW5kZXIgZnVuY3Rpb25cbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO1xuICAgIHZhciByZXN1bHQgPSBJdGVtVmlldy5wcm90b3R5cGUucmVuZGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXG4gICAgLy8gQXBwbHkgdmFsaWRhdGlvblxuICAgIGJiLlZhbGlkYXRpb24uYmluZCh0aGlzLCB7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbCxcbiAgICAgIHZhbGlkOiBmdW5jdGlvbih2aWV3LCBhdHRyKSB7XG4gICAgICAgIHZpZXdcbiAgICAgICAgICAuJCgnaW5wdXRbbmFtZT1cIicgKyBhdHRyICsgJ1wiXScpXG4gICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xuICAgICAgfSxcbiAgICAgIGludmFsaWQ6IGZ1bmN0aW9uKHZpZXcsIGF0dHIpIHtcbiAgICAgICAgdmlld1xuICAgICAgICAgIC4kKCdpbnB1dFtuYW1lPVwiJyArIGF0dHIgKyAnXCJdJylcbiAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAuYWRkQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBBcHBseSBzdGlja2l0XG4gICAgdGhpcy5zdGlja2l0KCk7XG5cbiAgICAvLyBSZXR1cm4gcmVuZGVyIHJlc3VsdFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbigpIHtcbiAgICAvLyBSZW1vdmUgdGhlIHZhbGlkYXRpb24gYmluZGluZ1xuICAgIGJiLlZhbGlkYXRpb24udW5iaW5kKHRoaXMpO1xuICAgIHJldHVybiBJdGVtVmlldy5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxufSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Fzc2V0cy9qcy9zcmMvbGliL2NvbmZpZy9mb3JtLXZpZXcuanNcbiAqKiBtb2R1bGUgaWQgPSA5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiI5OS5qcyJ9");

/***/ },
/* 100 */
/*!***********************************************************!*\
  !*** ./assets/js/src/lib/components/sortable/behavior.js ***!
  \***********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var Behavior = __webpack_require__(/*! lib/config/behavior */ 92);\nvar POS = __webpack_require__(/*! lib/utilities/global */ 5);\n\nvar Sortable = Behavior.extend({\n\n  initialize: function(options){\n\n    this.options = _.defaults(options, {\n      items:'tr',\n      cursor:'move',\n      axis:'y',\n      handle: 'td',\n      scrollSensitivity:40,\n      helper:function(e,ui){\n        ui.children().each(function(){\n          $(this).width($(this).width());\n        });\n        return ui;\n      },\n      start:function(event,ui){\n        ui.item.css('background-color','#f6f6f6');\n      },\n      stop:function(event,ui){\n        ui.item.removeAttr('style');\n        $('input.gateway_order', this).each(function(idx) {\n          $(this).val(idx);\n        });\n      }\n    });\n\n  },\n\n  ui: {\n    sortable: '.sortable'\n  },\n\n  onShow: function() {\n    if( this.ui.sortable.length > 0 ) {\n\n      // Custom sorting for checkout settings table\n      // TODO: move this to view callback\n      var table = this.ui.sortable;\n      var rows = table.find('tbody tr').get();\n\n      // sort according to input\n      table.append(rows.sort(function(a, b) {\n        return parseInt($(a).find('input.gateway_order').val(), 10) -\n          parseInt($(b).find('input.gateway_order').val(), 10);\n      }));\n\n      table.sortable( this.options );\n    }\n\n  }\n\n});\n\nmodule.exports = Sortable;\nPOS.attach('Behaviors.Sortable', Sortable);//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi9jb21wb25lbnRzL3NvcnRhYmxlL2JlaGF2aW9yLmpzPzY5YmEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7O0FBRUwsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbInZhciBCZWhhdmlvciA9IHJlcXVpcmUoJ2xpYi9jb25maWcvYmVoYXZpb3InKTtcbnZhciBQT1MgPSByZXF1aXJlKCdsaWIvdXRpbGl0aWVzL2dsb2JhbCcpO1xuXG52YXIgU29ydGFibGUgPSBCZWhhdmlvci5leHRlbmQoe1xuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpe1xuXG4gICAgdGhpcy5vcHRpb25zID0gXy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBpdGVtczondHInLFxuICAgICAgY3Vyc29yOidtb3ZlJyxcbiAgICAgIGF4aXM6J3knLFxuICAgICAgaGFuZGxlOiAndGQnLFxuICAgICAgc2Nyb2xsU2Vuc2l0aXZpdHk6NDAsXG4gICAgICBoZWxwZXI6ZnVuY3Rpb24oZSx1aSl7XG4gICAgICAgIHVpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICQodGhpcykud2lkdGgoJCh0aGlzKS53aWR0aCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1aTtcbiAgICAgIH0sXG4gICAgICBzdGFydDpmdW5jdGlvbihldmVudCx1aSl7XG4gICAgICAgIHVpLml0ZW0uY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywnI2Y2ZjZmNicpO1xuICAgICAgfSxcbiAgICAgIHN0b3A6ZnVuY3Rpb24oZXZlbnQsdWkpe1xuICAgICAgICB1aS5pdGVtLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICQoJ2lucHV0LmdhdGV3YXlfb3JkZXInLCB0aGlzKS5lYWNoKGZ1bmN0aW9uKGlkeCkge1xuICAgICAgICAgICQodGhpcykudmFsKGlkeCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIH0sXG5cbiAgdWk6IHtcbiAgICBzb3J0YWJsZTogJy5zb3J0YWJsZSdcbiAgfSxcblxuICBvblNob3c6IGZ1bmN0aW9uKCkge1xuICAgIGlmKCB0aGlzLnVpLnNvcnRhYmxlLmxlbmd0aCA+IDAgKSB7XG5cbiAgICAgIC8vIEN1c3RvbSBzb3J0aW5nIGZvciBjaGVja291dCBzZXR0aW5ncyB0YWJsZVxuICAgICAgLy8gVE9ETzogbW92ZSB0aGlzIHRvIHZpZXcgY2FsbGJhY2tcbiAgICAgIHZhciB0YWJsZSA9IHRoaXMudWkuc29ydGFibGU7XG4gICAgICB2YXIgcm93cyA9IHRhYmxlLmZpbmQoJ3Rib2R5IHRyJykuZ2V0KCk7XG5cbiAgICAgIC8vIHNvcnQgYWNjb3JkaW5nIHRvIGlucHV0XG4gICAgICB0YWJsZS5hcHBlbmQocm93cy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KCQoYSkuZmluZCgnaW5wdXQuZ2F0ZXdheV9vcmRlcicpLnZhbCgpLCAxMCkgLVxuICAgICAgICAgIHBhcnNlSW50KCQoYikuZmluZCgnaW5wdXQuZ2F0ZXdheV9vcmRlcicpLnZhbCgpLCAxMCk7XG4gICAgICB9KSk7XG5cbiAgICAgIHRhYmxlLnNvcnRhYmxlKCB0aGlzLm9wdGlvbnMgKTtcbiAgICB9XG5cbiAgfVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTb3J0YWJsZTtcblBPUy5hdHRhY2goJ0JlaGF2aW9ycy5Tb3J0YWJsZScsIFNvcnRhYmxlKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vYXNzZXRzL2pzL3NyYy9saWIvY29tcG9uZW50cy9zb3J0YWJsZS9iZWhhdmlvci5qc1xuICoqIG1vZHVsZSBpZCA9IDEwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAyXG4gKiovIl0sInNvdXJjZVJvb3QiOiIiLCJmaWxlIjoiMTAwLmpzIn0=");

/***/ },
/* 101 */,
/* 102 */,
/* 103 */,
/* 104 */,
/* 105 */
/*!*********************************************************!*\
  !*** ./assets/js/src/lib/utilities/stickit-handlers.js ***!
  \*********************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("//var Utils = require('./utils');\nvar bb = __webpack_require__(/*! backbone */ 3);\nvar _ = __webpack_require__(/*! lodash */ 2);\n\n/**\n * Display localised string, eg: 2,55\n * Set float 2.55\n */\n//bb.Stickit.addHandler({\n//  selector: 'input[data-numpad=\"discount\"]',\n//  onGet: Utils.formatNumber,\n//  onSet: Utils.unformat,\n//  events: ['blur'],\n//  afterUpdate: function($el){\n//    $el.trigger('input');\n//  }\n//});\n//\n//bb.Stickit.addHandler({\n//  selector: 'input[data-numpad=\"quantity\"]',\n//  onGet: Utils.formatNumber,\n//  onSet: Utils.unformat,\n//  events: ['blur'],\n//  afterUpdate: function($el){\n//    $el.trigger('input');\n//  }\n//});\n\n/**\n * Custom Stickit handler for nested customer address\n */\nbb.Stickit.addHandler({\n  selector: 'input[data-handler=\"address\"]',\n  onGet: function( value, options ){\n    var key = options.selector.match(/\\w+\\[(\\w+)\\]/)[1];\n    if( _(value).has(key) ){\n      return value[key];\n    } else {\n      return '';\n    }\n\n  },\n  onSet: function( value, options ){\n    var key = options.selector.match(/\\w+\\[(\\w+)\\]/)[1];\n    var address = options.view.model.get( options.observe );\n    address = address || {};\n    address[key] = value;\n    return address;\n  }\n});//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvc3JjL2xpYi91dGlsaXRpZXMvc3RpY2tpdC1oYW5kbGVycy5qcz9kYTE4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy92YXIgVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgYmIgPSByZXF1aXJlKCdiYWNrYm9uZScpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuLyoqXG4gKiBEaXNwbGF5IGxvY2FsaXNlZCBzdHJpbmcsIGVnOiAyLDU1XG4gKiBTZXQgZmxvYXQgMi41NVxuICovXG4vL2JiLlN0aWNraXQuYWRkSGFuZGxlcih7XG4vLyAgc2VsZWN0b3I6ICdpbnB1dFtkYXRhLW51bXBhZD1cImRpc2NvdW50XCJdJyxcbi8vICBvbkdldDogVXRpbHMuZm9ybWF0TnVtYmVyLFxuLy8gIG9uU2V0OiBVdGlscy51bmZvcm1hdCxcbi8vICBldmVudHM6IFsnYmx1ciddLFxuLy8gIGFmdGVyVXBkYXRlOiBmdW5jdGlvbigkZWwpe1xuLy8gICAgJGVsLnRyaWdnZXIoJ2lucHV0Jyk7XG4vLyAgfVxuLy99KTtcbi8vXG4vL2JiLlN0aWNraXQuYWRkSGFuZGxlcih7XG4vLyAgc2VsZWN0b3I6ICdpbnB1dFtkYXRhLW51bXBhZD1cInF1YW50aXR5XCJdJyxcbi8vICBvbkdldDogVXRpbHMuZm9ybWF0TnVtYmVyLFxuLy8gIG9uU2V0OiBVdGlscy51bmZvcm1hdCxcbi8vICBldmVudHM6IFsnYmx1ciddLFxuLy8gIGFmdGVyVXBkYXRlOiBmdW5jdGlvbigkZWwpe1xuLy8gICAgJGVsLnRyaWdnZXIoJ2lucHV0Jyk7XG4vLyAgfVxuLy99KTtcblxuLyoqXG4gKiBDdXN0b20gU3RpY2tpdCBoYW5kbGVyIGZvciBuZXN0ZWQgY3VzdG9tZXIgYWRkcmVzc1xuICovXG5iYi5TdGlja2l0LmFkZEhhbmRsZXIoe1xuICBzZWxlY3RvcjogJ2lucHV0W2RhdGEtaGFuZGxlcj1cImFkZHJlc3NcIl0nLFxuICBvbkdldDogZnVuY3Rpb24oIHZhbHVlLCBvcHRpb25zICl7XG4gICAgdmFyIGtleSA9IG9wdGlvbnMuc2VsZWN0b3IubWF0Y2goL1xcdytcXFsoXFx3KylcXF0vKVsxXTtcbiAgICBpZiggXyh2YWx1ZSkuaGFzKGtleSkgKXtcbiAgICAgIHJldHVybiB2YWx1ZVtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gIH0sXG4gIG9uU2V0OiBmdW5jdGlvbiggdmFsdWUsIG9wdGlvbnMgKXtcbiAgICB2YXIga2V5ID0gb3B0aW9ucy5zZWxlY3Rvci5tYXRjaCgvXFx3K1xcWyhcXHcrKVxcXS8pWzFdO1xuICAgIHZhciBhZGRyZXNzID0gb3B0aW9ucy52aWV3Lm1vZGVsLmdldCggb3B0aW9ucy5vYnNlcnZlICk7XG4gICAgYWRkcmVzcyA9IGFkZHJlc3MgfHwge307XG4gICAgYWRkcmVzc1trZXldID0gdmFsdWU7XG4gICAgcmV0dXJuIGFkZHJlc3M7XG4gIH1cbn0pO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9hc3NldHMvanMvc3JjL2xpYi91dGlsaXRpZXMvc3RpY2tpdC1oYW5kbGVycy5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNVxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIxMDUuanMifQ==");

/***/ },
/* 106 */
/*!*******************************!*\
  !*** ./~/debug/~/ms/index.js ***!
  \*******************************/
/***/ function(module, exports, __webpack_require__) {

	eval("/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  var match = /^((?:\\d+)?\\.?\\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 's':\n      return n * s;\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2RlYnVnL34vbXMvaW5kZXguanM/MDcwMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsY0FBYztBQUN6QixXQUFXLE9BQU87QUFDbEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsWUFBWTtBQUNaO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIZWxwZXJzLlxuICovXG5cbnZhciBzID0gMTAwMDtcbnZhciBtID0gcyAqIDYwO1xudmFyIGggPSBtICogNjA7XG52YXIgZCA9IGggKiAyNDtcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCwgb3B0aW9ucyl7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHZhbCkgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIHJldHVybiBvcHRpb25zLmxvbmdcbiAgICA/IGxvbmcodmFsKVxuICAgIDogc2hvcnQodmFsKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICB2YXIgbWF0Y2ggPSAvXigoPzpcXGQrKT9cXC4/XFxkKykgKihtc3xzZWNvbmRzP3xzfG1pbnV0ZXM/fG18aG91cnM/fGh8ZGF5cz98ZHx5ZWFycz98eSk/JC9pLmV4ZWMoc3RyKTtcbiAgaWYgKCFtYXRjaCkgcmV0dXJuO1xuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gc2hvcnQobXMpIHtcbiAgaWYgKG1zID49IGQpIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIGlmIChtcyA+PSBoKSByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICBpZiAobXMgPj0gbSkgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgaWYgKG1zID49IHMpIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb25nKG1zKSB7XG4gIHJldHVybiBwbHVyYWwobXMsIGQsICdkYXknKVxuICAgIHx8IHBsdXJhbChtcywgaCwgJ2hvdXInKVxuICAgIHx8IHBsdXJhbChtcywgbSwgJ21pbnV0ZScpXG4gICAgfHwgcGx1cmFsKG1zLCBzLCAnc2Vjb25kJylcbiAgICB8fCBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbiwgbmFtZSkge1xuICBpZiAobXMgPCBuKSByZXR1cm47XG4gIGlmIChtcyA8IG4gKiAxLjUpIHJldHVybiBNYXRoLmZsb29yKG1zIC8gbikgKyAnICcgKyBuYW1lO1xuICByZXR1cm4gTWF0aC5jZWlsKG1zIC8gbikgKyAnICcgKyBuYW1lICsgJ3MnO1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZGVidWcvfi9tcy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIxMDYuanMifQ==");

/***/ },
/* 107 */
/*!************************************************!*\
  !*** ./~/backbone.stickit/backbone.stickit.js ***!
  \************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// Backbone.Stickit v0.8.0, MIT Licensed\n// Copyright (c) 2012 The New York Times, CMS Group, Matthew DeLambo <delambo@gmail.com>\n\n(function (factory) {\n\n  // Set up Stickit appropriately for the environment. Start with AMD.\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! underscore */ 2), __webpack_require__(/*! backbone */ 3), exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n\n  // Next for Node.js or CommonJS.\n  else if (typeof exports === 'object') {\n    factory(require('underscore'), require('backbone'), exports);\n  }\n\n  // Finally, as a browser global.\n  else {\n    factory(_, Backbone, {});\n  }\n\n}(function (_, Backbone, Stickit) {\n\n  // Stickit Namespace\n  // --------------------------\n\n  Stickit._handlers = [];\n\n  Stickit.addHandler = function(handlers) {\n    // Fill-in default values.\n    handlers = _.map(_.flatten([handlers]), function(handler) {\n      return _.extend({\n        updateModel: true,\n        updateView: true,\n        updateMethod: 'text'\n      }, handler);\n    });\n    this._handlers = this._handlers.concat(handlers);\n  };\n\n  // Backbone.View Mixins\n  // --------------------\n\n  Stickit.ViewMixin = {\n\n    // Collection of model event bindings.\n    //   [{model,event,fn,config}, ...]\n    _modelBindings: null,\n\n    // Unbind the model and event bindings from `this._modelBindings` and\n    // `this.$el`. If the optional `model` parameter is defined, then only\n    // delete bindings for the given `model` and its corresponding view events.\n    unstickit: function(model, bindingSelector) {\n      // Support bindings hash in place of selector.\n      if (_.isObject(bindingSelector)) {\n        _.each(_.keys(bindingSelector), function(selector) {\n          this.unstickit(model, selector);\n        }, this);\n        return;\n      }\n\n      var models = [], destroyFns = [];\n      _.each(this._modelBindings, function(binding, i) {\n        if (model && binding.model !== model) { return; }\n        if (bindingSelector && binding.config.selector != bindingSelector) return;\n        destroyFns.push(binding.config._destroy);\n        binding.model.off(binding.event, binding.fn);\n        models.push(binding.model);\n        delete this._modelBindings[i];\n      }, this);\n\n      // Trigger an event for each model that was unbound.\n      _.invoke(_.uniq(models), 'trigger', 'stickit:unstuck', this.cid);\n      // Call `_destroy` on a unique list of the binding callbacks.\n      _.each(_.uniq(destroyFns), function(fn) { fn.call(this); }, this);\n      // Cleanup the null values.\n      this._modelBindings = _.compact(this._modelBindings);\n\n      this.$el.off('.stickit' + (model ? '.' + model.cid : ''), bindingSelector);\n    },\n\n    // Using `this.bindings` configuration or the `optionalBindingsConfig`, binds `this.model`\n    // or the `optionalModel` to elements in the view.\n    stickit: function(optionalModel, optionalBindingsConfig) {\n      var model = optionalModel || this.model,\n          bindings = optionalBindingsConfig || _.result(this, \"bindings\") || {};\n\n      this._modelBindings || (this._modelBindings = []);\n\n      // Iterate through the selectors in the bindings configuration and configure\n      // the various options for each field.\n      this.addBinding(model, bindings);\n\n      // Wrap `view.remove` to unbind stickit model and dom events.\n      var remove = this.remove;\n      if (!remove.stickitWrapped) {\n        this.remove = function() {\n          var ret = this;\n          this.unstickit();\n          if (remove) ret = remove.apply(this, arguments);\n          return ret;\n        };\n      }\n      this.remove.stickitWrapped = true;\n    },\n\n    // Add a single model binding to the view\n    addBinding: function(optionalModel, second, _binding) {\n      var $el, options, modelAttr, config, selector,\n        model = optionalModel || this.model,\n        namespace = '.stickit.' + model.cid,\n        binding = _binding || {},\n        bindId = _.uniqueId();\n\n      // Allow jQuery-style {key: val} event maps\n      if (_.isString(second)) {\n        selector = second;\n      } else {\n        var bindings = second;\n        _.each(bindings, function(v, selector) {\n          this.addBinding(model, selector, bindings[selector]);\n        }, this);\n        return;\n      }\n\n      // Support ':el' selector - special case selector for the view managed delegate.\n      $el = selector === ':el' ? this.$el : this.$(selector);\n\n      this.unstickit(model, selector);\n\n      // Fail fast if the selector didn't match an element.\n      if (!$el.length) return;\n\n      // Allow shorthand setting of model attributes - `'selector':'observe'`.\n      if (_.isString(binding)) binding = {observe:binding};\n\n      // Handle case where `observe` is in the form of a function.\n      if (_.isFunction(binding.observe)) binding.observe = binding.observe.call(this);\n\n      config = getConfiguration($el, binding);\n      config.selector = selector;\n      modelAttr = config.observe;\n\n      // Create the model set options with a unique `bindId` so that we\n      // can avoid double-binding in the `change:attribute` event handler.\n      config.bindId = bindId;\n\n      // Add a reference to the view for handlers of stickitChange events\n      config.view = this;\n      options = _.extend({stickitChange:config}, config.setOptions);\n\n      // Add a `_destroy` callback to the configuration, in case `destroy`\n      // is a named function and we need a unique function when unsticking.\n      config._destroy = function() {\n        applyViewFn(this, config.destroy, $el, model, config);\n      };\n\n      initializeAttributes(this, $el, config, model, modelAttr);\n\n      initializeVisible(this, $el, config, model, modelAttr);\n\n      if (modelAttr) {\n        // Setup one-way, form element to model, bindings.\n        _.each(config.events, function(type) {\n          var event = type + namespace;\n          var method = function(event) {\n            var val = config.getVal.call(this, $el, event, config, _.rest(arguments));\n            // Don't update the model if false is returned from the `updateModel` configuration.\n            if (evaluateBoolean(this, config.updateModel, val, event, config))\n              setAttr(model, modelAttr, val, options, this, config);\n          };\n          method = _.bind(method, this);\n          if (selector === ':el') this.$el.on(event, method);\n          else this.$el.on(event, selector, method);\n        }, this);\n\n        // Setup a `change:modelAttr` observer to keep the view element in sync.\n        // `modelAttr` may be an array of attributes or a single string value.\n        _.each(_.flatten([modelAttr]), function(attr) {\n          observeModelEvent(model, this, 'change:'+attr, config, function(model, val, options) {\n            var changeId = options && options.stickitChange && options.stickitChange.bindId || null;\n            if (changeId !== bindId)\n              updateViewBindEl(this, $el, config, getAttr(model, modelAttr, config, this), model);\n          });\n        }, this);\n\n        updateViewBindEl(this, $el, config, getAttr(model, modelAttr, config, this), model, true);\n      }\n\n      // After each binding is setup, call the `initialize` callback.\n      applyViewFn(this, config.initialize, $el, model, config);\n    }\n  };\n\n  _.extend(Backbone.View.prototype, Stickit.ViewMixin);\n\n  // Helpers\n  // -------\n\n  // Evaluates the given `path` (in object/dot-notation) relative to the given\n  // `obj`. If the path is null/undefined, then the given `obj` is returned.\n  var evaluatePath = function(obj, path) {\n    var parts = (path || '').split('.');\n    var result = _.reduce(parts, function(memo, i) { return memo[i]; }, obj);\n    return result == null ? obj : result;\n  };\n\n  // If the given `fn` is a string, then view[fn] is called, otherwise it is\n  // a function that should be executed.\n  var applyViewFn = function(view, fn) {\n    if (fn) return (_.isString(fn) ? evaluatePath(view,fn) : fn).apply(view, _.rest(arguments, 2));\n  };\n\n  var getSelectedOption = function($select) { return $select.find('option').not(function(){ return !this.selected; }); };\n\n  // Given a function, string (view function reference), or a boolean\n  // value, returns the truthy result. Any other types evaluate as false.\n  var evaluateBoolean = function(view, reference) {\n    if (_.isBoolean(reference)) return reference;\n    else if (_.isFunction(reference) || _.isString(reference))\n      return applyViewFn.apply(this, arguments);\n    return false;\n  };\n\n  // Setup a model event binding with the given function, and track the event\n  // in the view's _modelBindings.\n  var observeModelEvent = function(model, view, event, config, fn) {\n    model.on(event, fn, view);\n    view._modelBindings.push({model:model, event:event, fn:fn, config:config});\n  };\n\n  // Prepares the given `val`ue and sets it into the `model`.\n  var setAttr = function(model, attr, val, options, context, config) {\n    var value = {};\n    if (config.onSet)\n      val = applyViewFn(context, config.onSet, val, config);\n\n    if (config.set)\n      applyViewFn(context, config.set, attr, val, options, config);\n    else {\n      value[attr] = val;\n      // If `observe` is defined as an array and `onSet` returned\n      // an array, then map attributes to their values.\n      if (_.isArray(attr) && _.isArray(val)) {\n        value = _.reduce(attr, function(memo, attribute, index) {\n          memo[attribute] = _.has(val, index) ? val[index] : null;\n          return memo;\n        }, {});\n      }\n      model.set(value, options);\n    }\n  };\n\n  // Returns the given `attr`'s value from the `model`, escaping and\n  // formatting if necessary. If `attr` is an array, then an array of\n  // respective values will be returned.\n  var getAttr = function(model, attr, config, context) {\n    var val,\n      retrieveVal = function(field) {\n        return model[config.escape ? 'escape' : 'get'](field);\n      },\n      sanitizeVal = function(val) {\n        return val == null ? '' : val;\n      };\n    val = _.isArray(attr) ? _.map(attr, retrieveVal) : retrieveVal(attr);\n    if (config.onGet) val = applyViewFn(context, config.onGet, val, config);\n    return _.isArray(val) ? _.map(val, sanitizeVal) : sanitizeVal(val);\n  };\n\n  // Find handlers in `Backbone.Stickit._handlers` with selectors that match\n  // `$el` and generate a configuration by mixing them in the order that they\n  // were found with the given `binding`.\n  var getConfiguration = Stickit.getConfiguration = function($el, binding) {\n    var handlers = [{\n      updateModel: false,\n      updateMethod: 'text',\n      update: function($el, val, m, opts) { if ($el[opts.updateMethod]) $el[opts.updateMethod](val); },\n      getVal: function($el, e, opts) { return $el[opts.updateMethod](); }\n    }];\n    handlers = handlers.concat(_.filter(Stickit._handlers, function(handler) {\n      return $el.is(handler.selector);\n    }));\n    handlers.push(binding);\n    var config = _.extend.apply(_, handlers);\n    // `updateView` is defaulted to false for configutrations with\n    // `visible`; otherwise, `updateView` is defaulted to true.\n    if (config.visible && !_.has(config, 'updateView')) config.updateView = false;\n    else if (!_.has(config, 'updateView')) config.updateView = true;\n    return config;\n  };\n\n  // Setup the attributes configuration - a list that maps an attribute or\n  // property `name`, to an `observe`d model attribute, using an optional\n  // `onGet` formatter.\n  //\n  //     attributes: [{\n  //       name: 'attributeOrPropertyName',\n  //       observe: 'modelAttrName'\n  //       onGet: function(modelAttrVal, modelAttrName) { ... }\n  //     }, ...]\n  //\n  var initializeAttributes = function(view, $el, config, model, modelAttr) {\n    var props = ['autofocus', 'autoplay', 'async', 'checked', 'controls', 'defer', 'disabled', 'hidden', 'indeterminate', 'loop', 'multiple', 'open', 'readonly', 'required', 'scoped', 'selected'];\n\n    _.each(config.attributes || [], function(attrConfig) {\n      var lastClass = '', observed, updateAttr;\n      attrConfig = _.clone(attrConfig);\n      observed = attrConfig.observe || (attrConfig.observe = modelAttr),\n      updateAttr = function() {\n        var updateType = _.indexOf(props, attrConfig.name, true) > -1 ? 'prop' : 'attr',\n          val = getAttr(model, observed, attrConfig, view);\n        // If it is a class then we need to remove the last value and add the new.\n        if (attrConfig.name === 'class') {\n          $el.removeClass(lastClass).addClass(val);\n          lastClass = val;\n        }\n        else $el[updateType](attrConfig.name, val);\n      };\n      _.each(_.flatten([observed]), function(attr) {\n        observeModelEvent(model, view, 'change:' + attr, config, updateAttr);\n      });\n      updateAttr();\n    });\n  };\n\n  // If `visible` is configured, then the view element will be shown/hidden\n  // based on the truthiness of the modelattr's value or the result of the\n  // given callback. If a `visibleFn` is also supplied, then that callback\n  // will be executed to manually handle showing/hiding the view element.\n  //\n  //     observe: 'isRight',\n  //     visible: true, // or function(val, options) {}\n  //     visibleFn: function($el, isVisible, options) {} // optional handler\n  //\n  var initializeVisible = function(view, $el, config, model, modelAttr) {\n    if (config.visible == null) return;\n    var visibleCb = function() {\n      var visible = config.visible,\n          visibleFn = config.visibleFn,\n          val = getAttr(model, modelAttr, config, view),\n          isVisible = !!val;\n      // If `visible` is a function then it should return a boolean result to show/hide.\n      if (_.isFunction(visible) || _.isString(visible)) isVisible = !!applyViewFn(view, visible, val, config);\n      // Either use the custom `visibleFn`, if provided, or execute the standard show/hide.\n      if (visibleFn) applyViewFn(view, visibleFn, $el, isVisible, config);\n      else {\n        $el.toggle(isVisible);\n      }\n    };\n    _.each(_.flatten([modelAttr]), function(attr) {\n      observeModelEvent(model, view, 'change:' + attr, config, visibleCb);\n    });\n    visibleCb();\n  };\n\n  // Update the value of `$el` using the given configuration and trigger the\n  // `afterUpdate` callback. This action may be blocked by `config.updateView`.\n  //\n  //     update: function($el, val, model, options) {},  // handler for updating\n  //     updateView: true, // defaults to true\n  //     afterUpdate: function($el, val, options) {} // optional callback\n  //\n  var updateViewBindEl = function(view, $el, config, val, model, isInitializing) {\n    if (!evaluateBoolean(view, config.updateView, val, config)) return;\n    applyViewFn(view, config.update, $el, val, model, config);\n    if (!isInitializing) applyViewFn(view, config.afterUpdate, $el, val, config);\n  };\n\n  // Default Handlers\n  // ----------------\n\n  Stickit.addHandler([{\n    selector: '[contenteditable=\"true\"]',\n    updateMethod: 'html',\n    events: ['input', 'change']\n  }, {\n    selector: 'input',\n    events: ['propertychange', 'input', 'change'],\n    update: function($el, val) { $el.val(val); },\n    getVal: function($el) {\n      return $el.val();\n    }\n  }, {\n    selector: 'textarea',\n    events: ['propertychange', 'input', 'change'],\n    update: function($el, val) { $el.val(val); },\n    getVal: function($el) { return $el.val(); }\n  }, {\n    selector: 'input[type=\"radio\"]',\n    events: ['change'],\n    update: function($el, val) {\n      $el.filter('[value=\"'+val+'\"]').prop('checked', true);\n    },\n    getVal: function($el) {\n      return $el.filter(':checked').val();\n    }\n  }, {\n    selector: 'input[type=\"checkbox\"]',\n    events: ['change'],\n    update: function($el, val, model, options) {\n      if ($el.length > 1) {\n        // There are multiple checkboxes so we need to go through them and check\n        // any that have value attributes that match what's in the array of `val`s.\n        val || (val = []);\n        $el.each(function(i, el) {\n          var checkbox = Backbone.$(el);\n          var checked = _.contains(val, checkbox.val());\n          checkbox.prop('checked', checked);\n        });\n      } else {\n        var checked = _.isBoolean(val) ? val : val === $el.val();\n        $el.prop('checked', checked);\n      }\n    },\n    getVal: function($el) {\n      var val;\n      if ($el.length > 1) {\n        val = _.reduce($el, function(memo, el) {\n          var checkbox = Backbone.$(el);\n          if (checkbox.prop('checked')) memo.push(checkbox.val());\n          return memo;\n        }, []);\n      } else {\n        val = $el.prop('checked');\n        // If the checkbox has a value attribute defined, then\n        // use that value. Most browsers use \"on\" as a default.\n        var boxval = $el.val();\n        if (boxval !== 'on' && boxval != null) {\n          val = val ? $el.val() : null;\n        }\n      }\n      return val;\n    }\n  }, {\n    selector: 'select',\n    events: ['change'],\n    update: function($el, val, model, options) {\n      var optList,\n        selectConfig = options.selectOptions,\n        list = selectConfig && selectConfig.collection || undefined,\n        isMultiple = $el.prop('multiple');\n\n      // If there are no `selectOptions` then we assume that the `<select>`\n      // is pre-rendered and that we need to generate the collection.\n      if (!selectConfig) {\n        selectConfig = {};\n        var getList = function($el) {\n          return $el.map(function() {\n            return {value:this.value, label:this.text};\n          }).get();\n        };\n        if ($el.find('optgroup').length) {\n          list = {opt_labels:[]};\n          // Search for options without optgroup\n          if ($el.find('> option').length) {\n            list.opt_labels.push(undefined);\n            _.each($el.find('> option'), function(el) {\n              list[undefined] = getList(Backbone.$(el));\n            });\n          }\n          _.each($el.find('optgroup'), function(el) {\n            var label = Backbone.$(el).attr('label');\n            list.opt_labels.push(label);\n            list[label] = getList(Backbone.$(el).find('option'));\n          });\n        } else {\n          list = getList($el.find('option'));\n        }\n      }\n\n      // Fill in default label and path values.\n      selectConfig.valuePath = selectConfig.valuePath || 'value';\n      selectConfig.labelPath = selectConfig.labelPath || 'label';\n\n      var addSelectOptions = function(optList, $el, fieldVal) {\n        _.each(optList, function(obj) {\n          var option = Backbone.$('<option/>'), optionVal = obj;\n\n          var fillOption = function(text, val) {\n            option.text(text);\n            optionVal = val;\n            // Save the option value as data so that we can reference it later.\n            option.data('stickit_bind_val', optionVal);\n            if (!_.isArray(optionVal) && !_.isObject(optionVal)) option.val(optionVal);\n          };\n\n          if (obj === '__default__')\n            fillOption(selectConfig.defaultOption.label, selectConfig.defaultOption.value);\n          else\n            fillOption(evaluatePath(obj, selectConfig.labelPath), evaluatePath(obj, selectConfig.valuePath));\n\n          // Determine if this option is selected.\n          if (!isMultiple && optionVal != null && fieldVal != null && optionVal === fieldVal || (_.isObject(fieldVal) && _.isEqual(optionVal, fieldVal)))\n            option.prop('selected', true);\n          else if (isMultiple && _.isArray(fieldVal)) {\n            _.each(fieldVal, function(val) {\n              if (_.isObject(val)) val = evaluatePath(val, selectConfig.valuePath);\n              if (val === optionVal || (_.isObject(val) && _.isEqual(optionVal, val)))\n                option.prop('selected', true);\n            });\n          }\n\n          $el.append(option);\n        });\n      };\n\n      $el.find('*').remove();\n\n      // The `list` configuration is a function that returns the options list or a string\n      // which represents the path to the list relative to `window` or the view/`this`.\n      var evaluate = function(view, list) {\n        var context = window;\n        if (list.indexOf('this.') === 0) context = view;\n        list = list.replace(/^[a-z]*\\.(.+)$/, '$1');\n        return evaluatePath(context, list);\n      };\n      if (_.isString(list)) optList = evaluate(this, list);\n      else if (_.isFunction(list)) optList = applyViewFn(this, list, $el, options);\n      else optList = list;\n\n      // Support Backbone.Collection and deserialize.\n      if (optList instanceof Backbone.Collection) optList = optList.toJSON();\n\n      if (selectConfig.defaultOption) {\n        addSelectOptions([\"__default__\"], $el);\n      }\n\n      if (_.isArray(optList)) {\n        addSelectOptions(optList, $el, val);\n      } else if (optList.opt_labels) {\n        // To define a select with optgroups, format selectOptions.collection as an object\n        // with an 'opt_labels' property, as in the following:\n        //\n        //     {\n        //       'opt_labels': ['Looney Tunes', 'Three Stooges'],\n        //       'Looney Tunes': [{id: 1, name: 'Bugs Bunny'}, {id: 2, name: 'Donald Duck'}],\n        //       'Three Stooges': [{id: 3, name : 'moe'}, {id: 4, name : 'larry'}, {id: 5, name : 'curly'}]\n        //     }\n        //\n        _.each(optList.opt_labels, function(label) {\n          var $group = Backbone.$('<optgroup/>').attr('label', label);\n          addSelectOptions(optList[label], $group, val);\n          $el.append($group);\n        });\n        // With no 'opt_labels' parameter, the object is assumed to be a simple value-label map.\n        // Pass a selectOptions.comparator to override the default order of alphabetical by label.\n      } else {\n        var opts = [], opt;\n        for (var i in optList) {\n          opt = {};\n          opt[selectConfig.valuePath] = i;\n          opt[selectConfig.labelPath] = optList[i];\n          opts.push(opt);\n        }\n        addSelectOptions(_.sortBy(opts, selectConfig.comparator || selectConfig.labelPath), $el, val);\n      }\n    },\n    getVal: function($el) {\n      var val;\n      if ($el.prop('multiple')) {\n        val = Backbone.$(getSelectedOption($el).map(function() {\n          return Backbone.$(this).data('stickit_bind_val');\n        })).get();\n      } else {\n        val = getSelectedOption($el).data('stickit_bind_val');\n      }\n      return val;\n    }\n  }]);\n\n\n  // Export onto Backbone object\n  Backbone.Stickit = Stickit;\n\n  return Backbone.Stickit;\n\n}));\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2JhY2tib25lLnN0aWNraXQvYmFja2JvbmUuc3RpY2tpdC5qcz80ZGM4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFdBQVcsc0JBQXNCO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGVBQWUsRUFBRTtBQUNoRTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDOztBQUVBLDZCQUE2QixTQUFTO0FBQ3RDO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMENBQTBDOztBQUUxQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQixxQkFBcUI7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGdCQUFnQixFQUFFO0FBQ3RFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2Q0FBNkMsOENBQThDLHVCQUF1QixFQUFFLEVBQUU7O0FBRXRIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQStDO0FBQzdFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyx5REFBeUQsRUFBRTtBQUN0RyxzQ0FBc0MsaUNBQWlDO0FBQ3ZFLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RCxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0NBQWdDLGNBQWMsRUFBRTtBQUNoRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdDQUFnQyxjQUFjLEVBQUU7QUFDaEQsMkJBQTJCLGtCQUFrQjtBQUM3QyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLFdBQVc7QUFDWDtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywwQkFBMEIsR0FBRywyQkFBMkI7QUFDM0Ysb0NBQW9DLG9CQUFvQixHQUFHLHNCQUFzQixHQUFHLHNCQUFzQjtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOzs7QUFHSDtBQUNBOztBQUVBOztBQUVBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCYWNrYm9uZS5TdGlja2l0IHYwLjguMCwgTUlUIExpY2Vuc2VkXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTIgVGhlIE5ldyBZb3JrIFRpbWVzLCBDTVMgR3JvdXAsIE1hdHRoZXcgRGVMYW1ibyA8ZGVsYW1ib0BnbWFpbC5jb20+XG5cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuXG4gIC8vIFNldCB1cCBTdGlja2l0IGFwcHJvcHJpYXRlbHkgZm9yIHRoZSBlbnZpcm9ubWVudC4gU3RhcnQgd2l0aCBBTUQuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWyd1bmRlcnNjb3JlJywgJ2JhY2tib25lJywgJ2V4cG9ydHMnXSwgZmFjdG9yeSk7XG4gIH1cblxuICAvLyBOZXh0IGZvciBOb2RlLmpzIG9yIENvbW1vbkpTLlxuICBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBmYWN0b3J5KHJlcXVpcmUoJ3VuZGVyc2NvcmUnKSwgcmVxdWlyZSgnYmFja2JvbmUnKSwgZXhwb3J0cyk7XG4gIH1cblxuICAvLyBGaW5hbGx5LCBhcyBhIGJyb3dzZXIgZ2xvYmFsLlxuICBlbHNlIHtcbiAgICBmYWN0b3J5KF8sIEJhY2tib25lLCB7fSk7XG4gIH1cblxufShmdW5jdGlvbiAoXywgQmFja2JvbmUsIFN0aWNraXQpIHtcblxuICAvLyBTdGlja2l0IE5hbWVzcGFjZVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIFN0aWNraXQuX2hhbmRsZXJzID0gW107XG5cbiAgU3RpY2tpdC5hZGRIYW5kbGVyID0gZnVuY3Rpb24oaGFuZGxlcnMpIHtcbiAgICAvLyBGaWxsLWluIGRlZmF1bHQgdmFsdWVzLlxuICAgIGhhbmRsZXJzID0gXy5tYXAoXy5mbGF0dGVuKFtoYW5kbGVyc10pLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gXy5leHRlbmQoe1xuICAgICAgICB1cGRhdGVNb2RlbDogdHJ1ZSxcbiAgICAgICAgdXBkYXRlVmlldzogdHJ1ZSxcbiAgICAgICAgdXBkYXRlTWV0aG9kOiAndGV4dCdcbiAgICAgIH0sIGhhbmRsZXIpO1xuICAgIH0pO1xuICAgIHRoaXMuX2hhbmRsZXJzID0gdGhpcy5faGFuZGxlcnMuY29uY2F0KGhhbmRsZXJzKTtcbiAgfTtcblxuICAvLyBCYWNrYm9uZS5WaWV3IE1peGluc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIFN0aWNraXQuVmlld01peGluID0ge1xuXG4gICAgLy8gQ29sbGVjdGlvbiBvZiBtb2RlbCBldmVudCBiaW5kaW5ncy5cbiAgICAvLyAgIFt7bW9kZWwsZXZlbnQsZm4sY29uZmlnfSwgLi4uXVxuICAgIF9tb2RlbEJpbmRpbmdzOiBudWxsLFxuXG4gICAgLy8gVW5iaW5kIHRoZSBtb2RlbCBhbmQgZXZlbnQgYmluZGluZ3MgZnJvbSBgdGhpcy5fbW9kZWxCaW5kaW5nc2AgYW5kXG4gICAgLy8gYHRoaXMuJGVsYC4gSWYgdGhlIG9wdGlvbmFsIGBtb2RlbGAgcGFyYW1ldGVyIGlzIGRlZmluZWQsIHRoZW4gb25seVxuICAgIC8vIGRlbGV0ZSBiaW5kaW5ncyBmb3IgdGhlIGdpdmVuIGBtb2RlbGAgYW5kIGl0cyBjb3JyZXNwb25kaW5nIHZpZXcgZXZlbnRzLlxuICAgIHVuc3RpY2tpdDogZnVuY3Rpb24obW9kZWwsIGJpbmRpbmdTZWxlY3Rvcikge1xuICAgICAgLy8gU3VwcG9ydCBiaW5kaW5ncyBoYXNoIGluIHBsYWNlIG9mIHNlbGVjdG9yLlxuICAgICAgaWYgKF8uaXNPYmplY3QoYmluZGluZ1NlbGVjdG9yKSkge1xuICAgICAgICBfLmVhY2goXy5rZXlzKGJpbmRpbmdTZWxlY3RvciksIGZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgICAgICAgdGhpcy51bnN0aWNraXQobW9kZWwsIHNlbGVjdG9yKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG1vZGVscyA9IFtdLCBkZXN0cm95Rm5zID0gW107XG4gICAgICBfLmVhY2godGhpcy5fbW9kZWxCaW5kaW5ncywgZnVuY3Rpb24oYmluZGluZywgaSkge1xuICAgICAgICBpZiAobW9kZWwgJiYgYmluZGluZy5tb2RlbCAhPT0gbW9kZWwpIHsgcmV0dXJuOyB9XG4gICAgICAgIGlmIChiaW5kaW5nU2VsZWN0b3IgJiYgYmluZGluZy5jb25maWcuc2VsZWN0b3IgIT0gYmluZGluZ1NlbGVjdG9yKSByZXR1cm47XG4gICAgICAgIGRlc3Ryb3lGbnMucHVzaChiaW5kaW5nLmNvbmZpZy5fZGVzdHJveSk7XG4gICAgICAgIGJpbmRpbmcubW9kZWwub2ZmKGJpbmRpbmcuZXZlbnQsIGJpbmRpbmcuZm4pO1xuICAgICAgICBtb2RlbHMucHVzaChiaW5kaW5nLm1vZGVsKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX21vZGVsQmluZGluZ3NbaV07XG4gICAgICB9LCB0aGlzKTtcblxuICAgICAgLy8gVHJpZ2dlciBhbiBldmVudCBmb3IgZWFjaCBtb2RlbCB0aGF0IHdhcyB1bmJvdW5kLlxuICAgICAgXy5pbnZva2UoXy51bmlxKG1vZGVscyksICd0cmlnZ2VyJywgJ3N0aWNraXQ6dW5zdHVjaycsIHRoaXMuY2lkKTtcbiAgICAgIC8vIENhbGwgYF9kZXN0cm95YCBvbiBhIHVuaXF1ZSBsaXN0IG9mIHRoZSBiaW5kaW5nIGNhbGxiYWNrcy5cbiAgICAgIF8uZWFjaChfLnVuaXEoZGVzdHJveUZucyksIGZ1bmN0aW9uKGZuKSB7IGZuLmNhbGwodGhpcyk7IH0sIHRoaXMpO1xuICAgICAgLy8gQ2xlYW51cCB0aGUgbnVsbCB2YWx1ZXMuXG4gICAgICB0aGlzLl9tb2RlbEJpbmRpbmdzID0gXy5jb21wYWN0KHRoaXMuX21vZGVsQmluZGluZ3MpO1xuXG4gICAgICB0aGlzLiRlbC5vZmYoJy5zdGlja2l0JyArIChtb2RlbCA/ICcuJyArIG1vZGVsLmNpZCA6ICcnKSwgYmluZGluZ1NlbGVjdG9yKTtcbiAgICB9LFxuXG4gICAgLy8gVXNpbmcgYHRoaXMuYmluZGluZ3NgIGNvbmZpZ3VyYXRpb24gb3IgdGhlIGBvcHRpb25hbEJpbmRpbmdzQ29uZmlnYCwgYmluZHMgYHRoaXMubW9kZWxgXG4gICAgLy8gb3IgdGhlIGBvcHRpb25hbE1vZGVsYCB0byBlbGVtZW50cyBpbiB0aGUgdmlldy5cbiAgICBzdGlja2l0OiBmdW5jdGlvbihvcHRpb25hbE1vZGVsLCBvcHRpb25hbEJpbmRpbmdzQ29uZmlnKSB7XG4gICAgICB2YXIgbW9kZWwgPSBvcHRpb25hbE1vZGVsIHx8IHRoaXMubW9kZWwsXG4gICAgICAgICAgYmluZGluZ3MgPSBvcHRpb25hbEJpbmRpbmdzQ29uZmlnIHx8IF8ucmVzdWx0KHRoaXMsIFwiYmluZGluZ3NcIikgfHwge307XG5cbiAgICAgIHRoaXMuX21vZGVsQmluZGluZ3MgfHwgKHRoaXMuX21vZGVsQmluZGluZ3MgPSBbXSk7XG5cbiAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCB0aGUgc2VsZWN0b3JzIGluIHRoZSBiaW5kaW5ncyBjb25maWd1cmF0aW9uIGFuZCBjb25maWd1cmVcbiAgICAgIC8vIHRoZSB2YXJpb3VzIG9wdGlvbnMgZm9yIGVhY2ggZmllbGQuXG4gICAgICB0aGlzLmFkZEJpbmRpbmcobW9kZWwsIGJpbmRpbmdzKTtcblxuICAgICAgLy8gV3JhcCBgdmlldy5yZW1vdmVgIHRvIHVuYmluZCBzdGlja2l0IG1vZGVsIGFuZCBkb20gZXZlbnRzLlxuICAgICAgdmFyIHJlbW92ZSA9IHRoaXMucmVtb3ZlO1xuICAgICAgaWYgKCFyZW1vdmUuc3RpY2tpdFdyYXBwZWQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgcmV0ID0gdGhpcztcbiAgICAgICAgICB0aGlzLnVuc3RpY2tpdCgpO1xuICAgICAgICAgIGlmIChyZW1vdmUpIHJldCA9IHJlbW92ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB0aGlzLnJlbW92ZS5zdGlja2l0V3JhcHBlZCA9IHRydWU7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIHNpbmdsZSBtb2RlbCBiaW5kaW5nIHRvIHRoZSB2aWV3XG4gICAgYWRkQmluZGluZzogZnVuY3Rpb24ob3B0aW9uYWxNb2RlbCwgc2Vjb25kLCBfYmluZGluZykge1xuICAgICAgdmFyICRlbCwgb3B0aW9ucywgbW9kZWxBdHRyLCBjb25maWcsIHNlbGVjdG9yLFxuICAgICAgICBtb2RlbCA9IG9wdGlvbmFsTW9kZWwgfHwgdGhpcy5tb2RlbCxcbiAgICAgICAgbmFtZXNwYWNlID0gJy5zdGlja2l0LicgKyBtb2RlbC5jaWQsXG4gICAgICAgIGJpbmRpbmcgPSBfYmluZGluZyB8fCB7fSxcbiAgICAgICAgYmluZElkID0gXy51bmlxdWVJZCgpO1xuXG4gICAgICAvLyBBbGxvdyBqUXVlcnktc3R5bGUge2tleTogdmFsfSBldmVudCBtYXBzXG4gICAgICBpZiAoXy5pc1N0cmluZyhzZWNvbmQpKSB7XG4gICAgICAgIHNlbGVjdG9yID0gc2Vjb25kO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGJpbmRpbmdzID0gc2Vjb25kO1xuICAgICAgICBfLmVhY2goYmluZGluZ3MsIGZ1bmN0aW9uKHYsIHNlbGVjdG9yKSB7XG4gICAgICAgICAgdGhpcy5hZGRCaW5kaW5nKG1vZGVsLCBzZWxlY3RvciwgYmluZGluZ3Nbc2VsZWN0b3JdKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gU3VwcG9ydCAnOmVsJyBzZWxlY3RvciAtIHNwZWNpYWwgY2FzZSBzZWxlY3RvciBmb3IgdGhlIHZpZXcgbWFuYWdlZCBkZWxlZ2F0ZS5cbiAgICAgICRlbCA9IHNlbGVjdG9yID09PSAnOmVsJyA/IHRoaXMuJGVsIDogdGhpcy4kKHNlbGVjdG9yKTtcblxuICAgICAgdGhpcy51bnN0aWNraXQobW9kZWwsIHNlbGVjdG9yKTtcblxuICAgICAgLy8gRmFpbCBmYXN0IGlmIHRoZSBzZWxlY3RvciBkaWRuJ3QgbWF0Y2ggYW4gZWxlbWVudC5cbiAgICAgIGlmICghJGVsLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICAvLyBBbGxvdyBzaG9ydGhhbmQgc2V0dGluZyBvZiBtb2RlbCBhdHRyaWJ1dGVzIC0gYCdzZWxlY3Rvcic6J29ic2VydmUnYC5cbiAgICAgIGlmIChfLmlzU3RyaW5nKGJpbmRpbmcpKSBiaW5kaW5nID0ge29ic2VydmU6YmluZGluZ307XG5cbiAgICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIGBvYnNlcnZlYCBpcyBpbiB0aGUgZm9ybSBvZiBhIGZ1bmN0aW9uLlxuICAgICAgaWYgKF8uaXNGdW5jdGlvbihiaW5kaW5nLm9ic2VydmUpKSBiaW5kaW5nLm9ic2VydmUgPSBiaW5kaW5nLm9ic2VydmUuY2FsbCh0aGlzKTtcblxuICAgICAgY29uZmlnID0gZ2V0Q29uZmlndXJhdGlvbigkZWwsIGJpbmRpbmcpO1xuICAgICAgY29uZmlnLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICBtb2RlbEF0dHIgPSBjb25maWcub2JzZXJ2ZTtcblxuICAgICAgLy8gQ3JlYXRlIHRoZSBtb2RlbCBzZXQgb3B0aW9ucyB3aXRoIGEgdW5pcXVlIGBiaW5kSWRgIHNvIHRoYXQgd2VcbiAgICAgIC8vIGNhbiBhdm9pZCBkb3VibGUtYmluZGluZyBpbiB0aGUgYGNoYW5nZTphdHRyaWJ1dGVgIGV2ZW50IGhhbmRsZXIuXG4gICAgICBjb25maWcuYmluZElkID0gYmluZElkO1xuXG4gICAgICAvLyBBZGQgYSByZWZlcmVuY2UgdG8gdGhlIHZpZXcgZm9yIGhhbmRsZXJzIG9mIHN0aWNraXRDaGFuZ2UgZXZlbnRzXG4gICAgICBjb25maWcudmlldyA9IHRoaXM7XG4gICAgICBvcHRpb25zID0gXy5leHRlbmQoe3N0aWNraXRDaGFuZ2U6Y29uZmlnfSwgY29uZmlnLnNldE9wdGlvbnMpO1xuXG4gICAgICAvLyBBZGQgYSBgX2Rlc3Ryb3lgIGNhbGxiYWNrIHRvIHRoZSBjb25maWd1cmF0aW9uLCBpbiBjYXNlIGBkZXN0cm95YFxuICAgICAgLy8gaXMgYSBuYW1lZCBmdW5jdGlvbiBhbmQgd2UgbmVlZCBhIHVuaXF1ZSBmdW5jdGlvbiB3aGVuIHVuc3RpY2tpbmcuXG4gICAgICBjb25maWcuX2Rlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgYXBwbHlWaWV3Rm4odGhpcywgY29uZmlnLmRlc3Ryb3ksICRlbCwgbW9kZWwsIGNvbmZpZyk7XG4gICAgICB9O1xuXG4gICAgICBpbml0aWFsaXplQXR0cmlidXRlcyh0aGlzLCAkZWwsIGNvbmZpZywgbW9kZWwsIG1vZGVsQXR0cik7XG5cbiAgICAgIGluaXRpYWxpemVWaXNpYmxlKHRoaXMsICRlbCwgY29uZmlnLCBtb2RlbCwgbW9kZWxBdHRyKTtcblxuICAgICAgaWYgKG1vZGVsQXR0cikge1xuICAgICAgICAvLyBTZXR1cCBvbmUtd2F5LCBmb3JtIGVsZW1lbnQgdG8gbW9kZWwsIGJpbmRpbmdzLlxuICAgICAgICBfLmVhY2goY29uZmlnLmV2ZW50cywgZnVuY3Rpb24odHlwZSkge1xuICAgICAgICAgIHZhciBldmVudCA9IHR5cGUgKyBuYW1lc3BhY2U7XG4gICAgICAgICAgdmFyIG1ldGhvZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gY29uZmlnLmdldFZhbC5jYWxsKHRoaXMsICRlbCwgZXZlbnQsIGNvbmZpZywgXy5yZXN0KGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIHRoZSBtb2RlbCBpZiBmYWxzZSBpcyByZXR1cm5lZCBmcm9tIHRoZSBgdXBkYXRlTW9kZWxgIGNvbmZpZ3VyYXRpb24uXG4gICAgICAgICAgICBpZiAoZXZhbHVhdGVCb29sZWFuKHRoaXMsIGNvbmZpZy51cGRhdGVNb2RlbCwgdmFsLCBldmVudCwgY29uZmlnKSlcbiAgICAgICAgICAgICAgc2V0QXR0cihtb2RlbCwgbW9kZWxBdHRyLCB2YWwsIG9wdGlvbnMsIHRoaXMsIGNvbmZpZyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBtZXRob2QgPSBfLmJpbmQobWV0aG9kLCB0aGlzKTtcbiAgICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICc6ZWwnKSB0aGlzLiRlbC5vbihldmVudCwgbWV0aG9kKTtcbiAgICAgICAgICBlbHNlIHRoaXMuJGVsLm9uKGV2ZW50LCBzZWxlY3RvciwgbWV0aG9kKTtcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgLy8gU2V0dXAgYSBgY2hhbmdlOm1vZGVsQXR0cmAgb2JzZXJ2ZXIgdG8ga2VlcCB0aGUgdmlldyBlbGVtZW50IGluIHN5bmMuXG4gICAgICAgIC8vIGBtb2RlbEF0dHJgIG1heSBiZSBhbiBhcnJheSBvZiBhdHRyaWJ1dGVzIG9yIGEgc2luZ2xlIHN0cmluZyB2YWx1ZS5cbiAgICAgICAgXy5lYWNoKF8uZmxhdHRlbihbbW9kZWxBdHRyXSksIGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgICAgICBvYnNlcnZlTW9kZWxFdmVudChtb2RlbCwgdGhpcywgJ2NoYW5nZTonK2F0dHIsIGNvbmZpZywgZnVuY3Rpb24obW9kZWwsIHZhbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGNoYW5nZUlkID0gb3B0aW9ucyAmJiBvcHRpb25zLnN0aWNraXRDaGFuZ2UgJiYgb3B0aW9ucy5zdGlja2l0Q2hhbmdlLmJpbmRJZCB8fCBudWxsO1xuICAgICAgICAgICAgaWYgKGNoYW5nZUlkICE9PSBiaW5kSWQpXG4gICAgICAgICAgICAgIHVwZGF0ZVZpZXdCaW5kRWwodGhpcywgJGVsLCBjb25maWcsIGdldEF0dHIobW9kZWwsIG1vZGVsQXR0ciwgY29uZmlnLCB0aGlzKSwgbW9kZWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICB1cGRhdGVWaWV3QmluZEVsKHRoaXMsICRlbCwgY29uZmlnLCBnZXRBdHRyKG1vZGVsLCBtb2RlbEF0dHIsIGNvbmZpZywgdGhpcyksIG1vZGVsLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWZ0ZXIgZWFjaCBiaW5kaW5nIGlzIHNldHVwLCBjYWxsIHRoZSBgaW5pdGlhbGl6ZWAgY2FsbGJhY2suXG4gICAgICBhcHBseVZpZXdGbih0aGlzLCBjb25maWcuaW5pdGlhbGl6ZSwgJGVsLCBtb2RlbCwgY29uZmlnKTtcbiAgICB9XG4gIH07XG5cbiAgXy5leHRlbmQoQmFja2JvbmUuVmlldy5wcm90b3R5cGUsIFN0aWNraXQuVmlld01peGluKTtcblxuICAvLyBIZWxwZXJzXG4gIC8vIC0tLS0tLS1cblxuICAvLyBFdmFsdWF0ZXMgdGhlIGdpdmVuIGBwYXRoYCAoaW4gb2JqZWN0L2RvdC1ub3RhdGlvbikgcmVsYXRpdmUgdG8gdGhlIGdpdmVuXG4gIC8vIGBvYmpgLiBJZiB0aGUgcGF0aCBpcyBudWxsL3VuZGVmaW5lZCwgdGhlbiB0aGUgZ2l2ZW4gYG9iamAgaXMgcmV0dXJuZWQuXG4gIHZhciBldmFsdWF0ZVBhdGggPSBmdW5jdGlvbihvYmosIHBhdGgpIHtcbiAgICB2YXIgcGFydHMgPSAocGF0aCB8fCAnJykuc3BsaXQoJy4nKTtcbiAgICB2YXIgcmVzdWx0ID0gXy5yZWR1Y2UocGFydHMsIGZ1bmN0aW9uKG1lbW8sIGkpIHsgcmV0dXJuIG1lbW9baV07IH0sIG9iaik7XG4gICAgcmV0dXJuIHJlc3VsdCA9PSBudWxsID8gb2JqIDogcmVzdWx0O1xuICB9O1xuXG4gIC8vIElmIHRoZSBnaXZlbiBgZm5gIGlzIGEgc3RyaW5nLCB0aGVuIHZpZXdbZm5dIGlzIGNhbGxlZCwgb3RoZXJ3aXNlIGl0IGlzXG4gIC8vIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgZXhlY3V0ZWQuXG4gIHZhciBhcHBseVZpZXdGbiA9IGZ1bmN0aW9uKHZpZXcsIGZuKSB7XG4gICAgaWYgKGZuKSByZXR1cm4gKF8uaXNTdHJpbmcoZm4pID8gZXZhbHVhdGVQYXRoKHZpZXcsZm4pIDogZm4pLmFwcGx5KHZpZXcsIF8ucmVzdChhcmd1bWVudHMsIDIpKTtcbiAgfTtcblxuICB2YXIgZ2V0U2VsZWN0ZWRPcHRpb24gPSBmdW5jdGlvbigkc2VsZWN0KSB7IHJldHVybiAkc2VsZWN0LmZpbmQoJ29wdGlvbicpLm5vdChmdW5jdGlvbigpeyByZXR1cm4gIXRoaXMuc2VsZWN0ZWQ7IH0pOyB9O1xuXG4gIC8vIEdpdmVuIGEgZnVuY3Rpb24sIHN0cmluZyAodmlldyBmdW5jdGlvbiByZWZlcmVuY2UpLCBvciBhIGJvb2xlYW5cbiAgLy8gdmFsdWUsIHJldHVybnMgdGhlIHRydXRoeSByZXN1bHQuIEFueSBvdGhlciB0eXBlcyBldmFsdWF0ZSBhcyBmYWxzZS5cbiAgdmFyIGV2YWx1YXRlQm9vbGVhbiA9IGZ1bmN0aW9uKHZpZXcsIHJlZmVyZW5jZSkge1xuICAgIGlmIChfLmlzQm9vbGVhbihyZWZlcmVuY2UpKSByZXR1cm4gcmVmZXJlbmNlO1xuICAgIGVsc2UgaWYgKF8uaXNGdW5jdGlvbihyZWZlcmVuY2UpIHx8IF8uaXNTdHJpbmcocmVmZXJlbmNlKSlcbiAgICAgIHJldHVybiBhcHBseVZpZXdGbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBTZXR1cCBhIG1vZGVsIGV2ZW50IGJpbmRpbmcgd2l0aCB0aGUgZ2l2ZW4gZnVuY3Rpb24sIGFuZCB0cmFjayB0aGUgZXZlbnRcbiAgLy8gaW4gdGhlIHZpZXcncyBfbW9kZWxCaW5kaW5ncy5cbiAgdmFyIG9ic2VydmVNb2RlbEV2ZW50ID0gZnVuY3Rpb24obW9kZWwsIHZpZXcsIGV2ZW50LCBjb25maWcsIGZuKSB7XG4gICAgbW9kZWwub24oZXZlbnQsIGZuLCB2aWV3KTtcbiAgICB2aWV3Ll9tb2RlbEJpbmRpbmdzLnB1c2goe21vZGVsOm1vZGVsLCBldmVudDpldmVudCwgZm46Zm4sIGNvbmZpZzpjb25maWd9KTtcbiAgfTtcblxuICAvLyBQcmVwYXJlcyB0aGUgZ2l2ZW4gYHZhbGB1ZSBhbmQgc2V0cyBpdCBpbnRvIHRoZSBgbW9kZWxgLlxuICB2YXIgc2V0QXR0ciA9IGZ1bmN0aW9uKG1vZGVsLCBhdHRyLCB2YWwsIG9wdGlvbnMsIGNvbnRleHQsIGNvbmZpZykge1xuICAgIHZhciB2YWx1ZSA9IHt9O1xuICAgIGlmIChjb25maWcub25TZXQpXG4gICAgICB2YWwgPSBhcHBseVZpZXdGbihjb250ZXh0LCBjb25maWcub25TZXQsIHZhbCwgY29uZmlnKTtcblxuICAgIGlmIChjb25maWcuc2V0KVxuICAgICAgYXBwbHlWaWV3Rm4oY29udGV4dCwgY29uZmlnLnNldCwgYXR0ciwgdmFsLCBvcHRpb25zLCBjb25maWcpO1xuICAgIGVsc2Uge1xuICAgICAgdmFsdWVbYXR0cl0gPSB2YWw7XG4gICAgICAvLyBJZiBgb2JzZXJ2ZWAgaXMgZGVmaW5lZCBhcyBhbiBhcnJheSBhbmQgYG9uU2V0YCByZXR1cm5lZFxuICAgICAgLy8gYW4gYXJyYXksIHRoZW4gbWFwIGF0dHJpYnV0ZXMgdG8gdGhlaXIgdmFsdWVzLlxuICAgICAgaWYgKF8uaXNBcnJheShhdHRyKSAmJiBfLmlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YWx1ZSA9IF8ucmVkdWNlKGF0dHIsIGZ1bmN0aW9uKG1lbW8sIGF0dHJpYnV0ZSwgaW5kZXgpIHtcbiAgICAgICAgICBtZW1vW2F0dHJpYnV0ZV0gPSBfLmhhcyh2YWwsIGluZGV4KSA/IHZhbFtpbmRleF0gOiBudWxsO1xuICAgICAgICAgIHJldHVybiBtZW1vO1xuICAgICAgICB9LCB7fSk7XG4gICAgICB9XG4gICAgICBtb2RlbC5zZXQodmFsdWUsIG9wdGlvbnMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSBnaXZlbiBgYXR0cmAncyB2YWx1ZSBmcm9tIHRoZSBgbW9kZWxgLCBlc2NhcGluZyBhbmRcbiAgLy8gZm9ybWF0dGluZyBpZiBuZWNlc3NhcnkuIElmIGBhdHRyYCBpcyBhbiBhcnJheSwgdGhlbiBhbiBhcnJheSBvZlxuICAvLyByZXNwZWN0aXZlIHZhbHVlcyB3aWxsIGJlIHJldHVybmVkLlxuICB2YXIgZ2V0QXR0ciA9IGZ1bmN0aW9uKG1vZGVsLCBhdHRyLCBjb25maWcsIGNvbnRleHQpIHtcbiAgICB2YXIgdmFsLFxuICAgICAgcmV0cmlldmVWYWwgPSBmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICByZXR1cm4gbW9kZWxbY29uZmlnLmVzY2FwZSA/ICdlc2NhcGUnIDogJ2dldCddKGZpZWxkKTtcbiAgICAgIH0sXG4gICAgICBzYW5pdGl6ZVZhbCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsID09IG51bGwgPyAnJyA6IHZhbDtcbiAgICAgIH07XG4gICAgdmFsID0gXy5pc0FycmF5KGF0dHIpID8gXy5tYXAoYXR0ciwgcmV0cmlldmVWYWwpIDogcmV0cmlldmVWYWwoYXR0cik7XG4gICAgaWYgKGNvbmZpZy5vbkdldCkgdmFsID0gYXBwbHlWaWV3Rm4oY29udGV4dCwgY29uZmlnLm9uR2V0LCB2YWwsIGNvbmZpZyk7XG4gICAgcmV0dXJuIF8uaXNBcnJheSh2YWwpID8gXy5tYXAodmFsLCBzYW5pdGl6ZVZhbCkgOiBzYW5pdGl6ZVZhbCh2YWwpO1xuICB9O1xuXG4gIC8vIEZpbmQgaGFuZGxlcnMgaW4gYEJhY2tib25lLlN0aWNraXQuX2hhbmRsZXJzYCB3aXRoIHNlbGVjdG9ycyB0aGF0IG1hdGNoXG4gIC8vIGAkZWxgIGFuZCBnZW5lcmF0ZSBhIGNvbmZpZ3VyYXRpb24gYnkgbWl4aW5nIHRoZW0gaW4gdGhlIG9yZGVyIHRoYXQgdGhleVxuICAvLyB3ZXJlIGZvdW5kIHdpdGggdGhlIGdpdmVuIGBiaW5kaW5nYC5cbiAgdmFyIGdldENvbmZpZ3VyYXRpb24gPSBTdGlja2l0LmdldENvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbigkZWwsIGJpbmRpbmcpIHtcbiAgICB2YXIgaGFuZGxlcnMgPSBbe1xuICAgICAgdXBkYXRlTW9kZWw6IGZhbHNlLFxuICAgICAgdXBkYXRlTWV0aG9kOiAndGV4dCcsXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uKCRlbCwgdmFsLCBtLCBvcHRzKSB7IGlmICgkZWxbb3B0cy51cGRhdGVNZXRob2RdKSAkZWxbb3B0cy51cGRhdGVNZXRob2RdKHZhbCk7IH0sXG4gICAgICBnZXRWYWw6IGZ1bmN0aW9uKCRlbCwgZSwgb3B0cykgeyByZXR1cm4gJGVsW29wdHMudXBkYXRlTWV0aG9kXSgpOyB9XG4gICAgfV07XG4gICAgaGFuZGxlcnMgPSBoYW5kbGVycy5jb25jYXQoXy5maWx0ZXIoU3RpY2tpdC5faGFuZGxlcnMsIGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgIHJldHVybiAkZWwuaXMoaGFuZGxlci5zZWxlY3Rvcik7XG4gICAgfSkpO1xuICAgIGhhbmRsZXJzLnB1c2goYmluZGluZyk7XG4gICAgdmFyIGNvbmZpZyA9IF8uZXh0ZW5kLmFwcGx5KF8sIGhhbmRsZXJzKTtcbiAgICAvLyBgdXBkYXRlVmlld2AgaXMgZGVmYXVsdGVkIHRvIGZhbHNlIGZvciBjb25maWd1dHJhdGlvbnMgd2l0aFxuICAgIC8vIGB2aXNpYmxlYDsgb3RoZXJ3aXNlLCBgdXBkYXRlVmlld2AgaXMgZGVmYXVsdGVkIHRvIHRydWUuXG4gICAgaWYgKGNvbmZpZy52aXNpYmxlICYmICFfLmhhcyhjb25maWcsICd1cGRhdGVWaWV3JykpIGNvbmZpZy51cGRhdGVWaWV3ID0gZmFsc2U7XG4gICAgZWxzZSBpZiAoIV8uaGFzKGNvbmZpZywgJ3VwZGF0ZVZpZXcnKSkgY29uZmlnLnVwZGF0ZVZpZXcgPSB0cnVlO1xuICAgIHJldHVybiBjb25maWc7XG4gIH07XG5cbiAgLy8gU2V0dXAgdGhlIGF0dHJpYnV0ZXMgY29uZmlndXJhdGlvbiAtIGEgbGlzdCB0aGF0IG1hcHMgYW4gYXR0cmlidXRlIG9yXG4gIC8vIHByb3BlcnR5IGBuYW1lYCwgdG8gYW4gYG9ic2VydmVgZCBtb2RlbCBhdHRyaWJ1dGUsIHVzaW5nIGFuIG9wdGlvbmFsXG4gIC8vIGBvbkdldGAgZm9ybWF0dGVyLlxuICAvL1xuICAvLyAgICAgYXR0cmlidXRlczogW3tcbiAgLy8gICAgICAgbmFtZTogJ2F0dHJpYnV0ZU9yUHJvcGVydHlOYW1lJyxcbiAgLy8gICAgICAgb2JzZXJ2ZTogJ21vZGVsQXR0ck5hbWUnXG4gIC8vICAgICAgIG9uR2V0OiBmdW5jdGlvbihtb2RlbEF0dHJWYWwsIG1vZGVsQXR0ck5hbWUpIHsgLi4uIH1cbiAgLy8gICAgIH0sIC4uLl1cbiAgLy9cbiAgdmFyIGluaXRpYWxpemVBdHRyaWJ1dGVzID0gZnVuY3Rpb24odmlldywgJGVsLCBjb25maWcsIG1vZGVsLCBtb2RlbEF0dHIpIHtcbiAgICB2YXIgcHJvcHMgPSBbJ2F1dG9mb2N1cycsICdhdXRvcGxheScsICdhc3luYycsICdjaGVja2VkJywgJ2NvbnRyb2xzJywgJ2RlZmVyJywgJ2Rpc2FibGVkJywgJ2hpZGRlbicsICdpbmRldGVybWluYXRlJywgJ2xvb3AnLCAnbXVsdGlwbGUnLCAnb3BlbicsICdyZWFkb25seScsICdyZXF1aXJlZCcsICdzY29wZWQnLCAnc2VsZWN0ZWQnXTtcblxuICAgIF8uZWFjaChjb25maWcuYXR0cmlidXRlcyB8fCBbXSwgZnVuY3Rpb24oYXR0ckNvbmZpZykge1xuICAgICAgdmFyIGxhc3RDbGFzcyA9ICcnLCBvYnNlcnZlZCwgdXBkYXRlQXR0cjtcbiAgICAgIGF0dHJDb25maWcgPSBfLmNsb25lKGF0dHJDb25maWcpO1xuICAgICAgb2JzZXJ2ZWQgPSBhdHRyQ29uZmlnLm9ic2VydmUgfHwgKGF0dHJDb25maWcub2JzZXJ2ZSA9IG1vZGVsQXR0ciksXG4gICAgICB1cGRhdGVBdHRyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1cGRhdGVUeXBlID0gXy5pbmRleE9mKHByb3BzLCBhdHRyQ29uZmlnLm5hbWUsIHRydWUpID4gLTEgPyAncHJvcCcgOiAnYXR0cicsXG4gICAgICAgICAgdmFsID0gZ2V0QXR0cihtb2RlbCwgb2JzZXJ2ZWQsIGF0dHJDb25maWcsIHZpZXcpO1xuICAgICAgICAvLyBJZiBpdCBpcyBhIGNsYXNzIHRoZW4gd2UgbmVlZCB0byByZW1vdmUgdGhlIGxhc3QgdmFsdWUgYW5kIGFkZCB0aGUgbmV3LlxuICAgICAgICBpZiAoYXR0ckNvbmZpZy5uYW1lID09PSAnY2xhc3MnKSB7XG4gICAgICAgICAgJGVsLnJlbW92ZUNsYXNzKGxhc3RDbGFzcykuYWRkQ2xhc3ModmFsKTtcbiAgICAgICAgICBsYXN0Q2xhc3MgPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSAkZWxbdXBkYXRlVHlwZV0oYXR0ckNvbmZpZy5uYW1lLCB2YWwpO1xuICAgICAgfTtcbiAgICAgIF8uZWFjaChfLmZsYXR0ZW4oW29ic2VydmVkXSksIGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgICAgb2JzZXJ2ZU1vZGVsRXZlbnQobW9kZWwsIHZpZXcsICdjaGFuZ2U6JyArIGF0dHIsIGNvbmZpZywgdXBkYXRlQXR0cik7XG4gICAgICB9KTtcbiAgICAgIHVwZGF0ZUF0dHIoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBJZiBgdmlzaWJsZWAgaXMgY29uZmlndXJlZCwgdGhlbiB0aGUgdmlldyBlbGVtZW50IHdpbGwgYmUgc2hvd24vaGlkZGVuXG4gIC8vIGJhc2VkIG9uIHRoZSB0cnV0aGluZXNzIG9mIHRoZSBtb2RlbGF0dHIncyB2YWx1ZSBvciB0aGUgcmVzdWx0IG9mIHRoZVxuICAvLyBnaXZlbiBjYWxsYmFjay4gSWYgYSBgdmlzaWJsZUZuYCBpcyBhbHNvIHN1cHBsaWVkLCB0aGVuIHRoYXQgY2FsbGJhY2tcbiAgLy8gd2lsbCBiZSBleGVjdXRlZCB0byBtYW51YWxseSBoYW5kbGUgc2hvd2luZy9oaWRpbmcgdGhlIHZpZXcgZWxlbWVudC5cbiAgLy9cbiAgLy8gICAgIG9ic2VydmU6ICdpc1JpZ2h0JyxcbiAgLy8gICAgIHZpc2libGU6IHRydWUsIC8vIG9yIGZ1bmN0aW9uKHZhbCwgb3B0aW9ucykge31cbiAgLy8gICAgIHZpc2libGVGbjogZnVuY3Rpb24oJGVsLCBpc1Zpc2libGUsIG9wdGlvbnMpIHt9IC8vIG9wdGlvbmFsIGhhbmRsZXJcbiAgLy9cbiAgdmFyIGluaXRpYWxpemVWaXNpYmxlID0gZnVuY3Rpb24odmlldywgJGVsLCBjb25maWcsIG1vZGVsLCBtb2RlbEF0dHIpIHtcbiAgICBpZiAoY29uZmlnLnZpc2libGUgPT0gbnVsbCkgcmV0dXJuO1xuICAgIHZhciB2aXNpYmxlQ2IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB2aXNpYmxlID0gY29uZmlnLnZpc2libGUsXG4gICAgICAgICAgdmlzaWJsZUZuID0gY29uZmlnLnZpc2libGVGbixcbiAgICAgICAgICB2YWwgPSBnZXRBdHRyKG1vZGVsLCBtb2RlbEF0dHIsIGNvbmZpZywgdmlldyksXG4gICAgICAgICAgaXNWaXNpYmxlID0gISF2YWw7XG4gICAgICAvLyBJZiBgdmlzaWJsZWAgaXMgYSBmdW5jdGlvbiB0aGVuIGl0IHNob3VsZCByZXR1cm4gYSBib29sZWFuIHJlc3VsdCB0byBzaG93L2hpZGUuXG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKHZpc2libGUpIHx8IF8uaXNTdHJpbmcodmlzaWJsZSkpIGlzVmlzaWJsZSA9ICEhYXBwbHlWaWV3Rm4odmlldywgdmlzaWJsZSwgdmFsLCBjb25maWcpO1xuICAgICAgLy8gRWl0aGVyIHVzZSB0aGUgY3VzdG9tIGB2aXNpYmxlRm5gLCBpZiBwcm92aWRlZCwgb3IgZXhlY3V0ZSB0aGUgc3RhbmRhcmQgc2hvdy9oaWRlLlxuICAgICAgaWYgKHZpc2libGVGbikgYXBwbHlWaWV3Rm4odmlldywgdmlzaWJsZUZuLCAkZWwsIGlzVmlzaWJsZSwgY29uZmlnKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICAkZWwudG9nZ2xlKGlzVmlzaWJsZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBfLmVhY2goXy5mbGF0dGVuKFttb2RlbEF0dHJdKSwgZnVuY3Rpb24oYXR0cikge1xuICAgICAgb2JzZXJ2ZU1vZGVsRXZlbnQobW9kZWwsIHZpZXcsICdjaGFuZ2U6JyArIGF0dHIsIGNvbmZpZywgdmlzaWJsZUNiKTtcbiAgICB9KTtcbiAgICB2aXNpYmxlQ2IoKTtcbiAgfTtcblxuICAvLyBVcGRhdGUgdGhlIHZhbHVlIG9mIGAkZWxgIHVzaW5nIHRoZSBnaXZlbiBjb25maWd1cmF0aW9uIGFuZCB0cmlnZ2VyIHRoZVxuICAvLyBgYWZ0ZXJVcGRhdGVgIGNhbGxiYWNrLiBUaGlzIGFjdGlvbiBtYXkgYmUgYmxvY2tlZCBieSBgY29uZmlnLnVwZGF0ZVZpZXdgLlxuICAvL1xuICAvLyAgICAgdXBkYXRlOiBmdW5jdGlvbigkZWwsIHZhbCwgbW9kZWwsIG9wdGlvbnMpIHt9LCAgLy8gaGFuZGxlciBmb3IgdXBkYXRpbmdcbiAgLy8gICAgIHVwZGF0ZVZpZXc6IHRydWUsIC8vIGRlZmF1bHRzIHRvIHRydWVcbiAgLy8gICAgIGFmdGVyVXBkYXRlOiBmdW5jdGlvbigkZWwsIHZhbCwgb3B0aW9ucykge30gLy8gb3B0aW9uYWwgY2FsbGJhY2tcbiAgLy9cbiAgdmFyIHVwZGF0ZVZpZXdCaW5kRWwgPSBmdW5jdGlvbih2aWV3LCAkZWwsIGNvbmZpZywgdmFsLCBtb2RlbCwgaXNJbml0aWFsaXppbmcpIHtcbiAgICBpZiAoIWV2YWx1YXRlQm9vbGVhbih2aWV3LCBjb25maWcudXBkYXRlVmlldywgdmFsLCBjb25maWcpKSByZXR1cm47XG4gICAgYXBwbHlWaWV3Rm4odmlldywgY29uZmlnLnVwZGF0ZSwgJGVsLCB2YWwsIG1vZGVsLCBjb25maWcpO1xuICAgIGlmICghaXNJbml0aWFsaXppbmcpIGFwcGx5Vmlld0ZuKHZpZXcsIGNvbmZpZy5hZnRlclVwZGF0ZSwgJGVsLCB2YWwsIGNvbmZpZyk7XG4gIH07XG5cbiAgLy8gRGVmYXVsdCBIYW5kbGVyc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgU3RpY2tpdC5hZGRIYW5kbGVyKFt7XG4gICAgc2VsZWN0b3I6ICdbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXScsXG4gICAgdXBkYXRlTWV0aG9kOiAnaHRtbCcsXG4gICAgZXZlbnRzOiBbJ2lucHV0JywgJ2NoYW5nZSddXG4gIH0sIHtcbiAgICBzZWxlY3RvcjogJ2lucHV0JyxcbiAgICBldmVudHM6IFsncHJvcGVydHljaGFuZ2UnLCAnaW5wdXQnLCAnY2hhbmdlJ10sXG4gICAgdXBkYXRlOiBmdW5jdGlvbigkZWwsIHZhbCkgeyAkZWwudmFsKHZhbCk7IH0sXG4gICAgZ2V0VmFsOiBmdW5jdGlvbigkZWwpIHtcbiAgICAgIHJldHVybiAkZWwudmFsKCk7XG4gICAgfVxuICB9LCB7XG4gICAgc2VsZWN0b3I6ICd0ZXh0YXJlYScsXG4gICAgZXZlbnRzOiBbJ3Byb3BlcnR5Y2hhbmdlJywgJ2lucHV0JywgJ2NoYW5nZSddLFxuICAgIHVwZGF0ZTogZnVuY3Rpb24oJGVsLCB2YWwpIHsgJGVsLnZhbCh2YWwpOyB9LFxuICAgIGdldFZhbDogZnVuY3Rpb24oJGVsKSB7IHJldHVybiAkZWwudmFsKCk7IH1cbiAgfSwge1xuICAgIHNlbGVjdG9yOiAnaW5wdXRbdHlwZT1cInJhZGlvXCJdJyxcbiAgICBldmVudHM6IFsnY2hhbmdlJ10sXG4gICAgdXBkYXRlOiBmdW5jdGlvbigkZWwsIHZhbCkge1xuICAgICAgJGVsLmZpbHRlcignW3ZhbHVlPVwiJyt2YWwrJ1wiXScpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICB9LFxuICAgIGdldFZhbDogZnVuY3Rpb24oJGVsKSB7XG4gICAgICByZXR1cm4gJGVsLmZpbHRlcignOmNoZWNrZWQnKS52YWwoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBzZWxlY3RvcjogJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsXG4gICAgZXZlbnRzOiBbJ2NoYW5nZSddLFxuICAgIHVwZGF0ZTogZnVuY3Rpb24oJGVsLCB2YWwsIG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICBpZiAoJGVsLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gVGhlcmUgYXJlIG11bHRpcGxlIGNoZWNrYm94ZXMgc28gd2UgbmVlZCB0byBnbyB0aHJvdWdoIHRoZW0gYW5kIGNoZWNrXG4gICAgICAgIC8vIGFueSB0aGF0IGhhdmUgdmFsdWUgYXR0cmlidXRlcyB0aGF0IG1hdGNoIHdoYXQncyBpbiB0aGUgYXJyYXkgb2YgYHZhbGBzLlxuICAgICAgICB2YWwgfHwgKHZhbCA9IFtdKTtcbiAgICAgICAgJGVsLmVhY2goZnVuY3Rpb24oaSwgZWwpIHtcbiAgICAgICAgICB2YXIgY2hlY2tib3ggPSBCYWNrYm9uZS4kKGVsKTtcbiAgICAgICAgICB2YXIgY2hlY2tlZCA9IF8uY29udGFpbnModmFsLCBjaGVja2JveC52YWwoKSk7XG4gICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIGNoZWNrZWQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjaGVja2VkID0gXy5pc0Jvb2xlYW4odmFsKSA/IHZhbCA6IHZhbCA9PT0gJGVsLnZhbCgpO1xuICAgICAgICAkZWwucHJvcCgnY2hlY2tlZCcsIGNoZWNrZWQpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0VmFsOiBmdW5jdGlvbigkZWwpIHtcbiAgICAgIHZhciB2YWw7XG4gICAgICBpZiAoJGVsLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdmFsID0gXy5yZWR1Y2UoJGVsLCBmdW5jdGlvbihtZW1vLCBlbCkge1xuICAgICAgICAgIHZhciBjaGVja2JveCA9IEJhY2tib25lLiQoZWwpO1xuICAgICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIG1lbW8ucHVzaChjaGVja2JveC52YWwoKSk7XG4gICAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICAgIH0sIFtdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbCA9ICRlbC5wcm9wKCdjaGVja2VkJyk7XG4gICAgICAgIC8vIElmIHRoZSBjaGVja2JveCBoYXMgYSB2YWx1ZSBhdHRyaWJ1dGUgZGVmaW5lZCwgdGhlblxuICAgICAgICAvLyB1c2UgdGhhdCB2YWx1ZS4gTW9zdCBicm93c2VycyB1c2UgXCJvblwiIGFzIGEgZGVmYXVsdC5cbiAgICAgICAgdmFyIGJveHZhbCA9ICRlbC52YWwoKTtcbiAgICAgICAgaWYgKGJveHZhbCAhPT0gJ29uJyAmJiBib3h2YWwgIT0gbnVsbCkge1xuICAgICAgICAgIHZhbCA9IHZhbCA/ICRlbC52YWwoKSA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICB9LCB7XG4gICAgc2VsZWN0b3I6ICdzZWxlY3QnLFxuICAgIGV2ZW50czogWydjaGFuZ2UnXSxcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKCRlbCwgdmFsLCBtb2RlbCwgb3B0aW9ucykge1xuICAgICAgdmFyIG9wdExpc3QsXG4gICAgICAgIHNlbGVjdENvbmZpZyA9IG9wdGlvbnMuc2VsZWN0T3B0aW9ucyxcbiAgICAgICAgbGlzdCA9IHNlbGVjdENvbmZpZyAmJiBzZWxlY3RDb25maWcuY29sbGVjdGlvbiB8fCB1bmRlZmluZWQsXG4gICAgICAgIGlzTXVsdGlwbGUgPSAkZWwucHJvcCgnbXVsdGlwbGUnKTtcblxuICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGBzZWxlY3RPcHRpb25zYCB0aGVuIHdlIGFzc3VtZSB0aGF0IHRoZSBgPHNlbGVjdD5gXG4gICAgICAvLyBpcyBwcmUtcmVuZGVyZWQgYW5kIHRoYXQgd2UgbmVlZCB0byBnZW5lcmF0ZSB0aGUgY29sbGVjdGlvbi5cbiAgICAgIGlmICghc2VsZWN0Q29uZmlnKSB7XG4gICAgICAgIHNlbGVjdENvbmZpZyA9IHt9O1xuICAgICAgICB2YXIgZ2V0TGlzdCA9IGZ1bmN0aW9uKCRlbCkge1xuICAgICAgICAgIHJldHVybiAkZWwubWFwKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTp0aGlzLnZhbHVlLCBsYWJlbDp0aGlzLnRleHR9O1xuICAgICAgICAgIH0pLmdldCgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoJGVsLmZpbmQoJ29wdGdyb3VwJykubGVuZ3RoKSB7XG4gICAgICAgICAgbGlzdCA9IHtvcHRfbGFiZWxzOltdfTtcbiAgICAgICAgICAvLyBTZWFyY2ggZm9yIG9wdGlvbnMgd2l0aG91dCBvcHRncm91cFxuICAgICAgICAgIGlmICgkZWwuZmluZCgnPiBvcHRpb24nKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxpc3Qub3B0X2xhYmVscy5wdXNoKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBfLmVhY2goJGVsLmZpbmQoJz4gb3B0aW9uJyksIGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgIGxpc3RbdW5kZWZpbmVkXSA9IGdldExpc3QoQmFja2JvbmUuJChlbCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF8uZWFjaCgkZWwuZmluZCgnb3B0Z3JvdXAnKSwgZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IEJhY2tib25lLiQoZWwpLmF0dHIoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsaXN0Lm9wdF9sYWJlbHMucHVzaChsYWJlbCk7XG4gICAgICAgICAgICBsaXN0W2xhYmVsXSA9IGdldExpc3QoQmFja2JvbmUuJChlbCkuZmluZCgnb3B0aW9uJykpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpc3QgPSBnZXRMaXN0KCRlbC5maW5kKCdvcHRpb24nKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmlsbCBpbiBkZWZhdWx0IGxhYmVsIGFuZCBwYXRoIHZhbHVlcy5cbiAgICAgIHNlbGVjdENvbmZpZy52YWx1ZVBhdGggPSBzZWxlY3RDb25maWcudmFsdWVQYXRoIHx8ICd2YWx1ZSc7XG4gICAgICBzZWxlY3RDb25maWcubGFiZWxQYXRoID0gc2VsZWN0Q29uZmlnLmxhYmVsUGF0aCB8fCAnbGFiZWwnO1xuXG4gICAgICB2YXIgYWRkU2VsZWN0T3B0aW9ucyA9IGZ1bmN0aW9uKG9wdExpc3QsICRlbCwgZmllbGRWYWwpIHtcbiAgICAgICAgXy5lYWNoKG9wdExpc3QsIGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgIHZhciBvcHRpb24gPSBCYWNrYm9uZS4kKCc8b3B0aW9uLz4nKSwgb3B0aW9uVmFsID0gb2JqO1xuXG4gICAgICAgICAgdmFyIGZpbGxPcHRpb24gPSBmdW5jdGlvbih0ZXh0LCB2YWwpIHtcbiAgICAgICAgICAgIG9wdGlvbi50ZXh0KHRleHQpO1xuICAgICAgICAgICAgb3B0aW9uVmFsID0gdmFsO1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgb3B0aW9uIHZhbHVlIGFzIGRhdGEgc28gdGhhdCB3ZSBjYW4gcmVmZXJlbmNlIGl0IGxhdGVyLlxuICAgICAgICAgICAgb3B0aW9uLmRhdGEoJ3N0aWNraXRfYmluZF92YWwnLCBvcHRpb25WYWwpO1xuICAgICAgICAgICAgaWYgKCFfLmlzQXJyYXkob3B0aW9uVmFsKSAmJiAhXy5pc09iamVjdChvcHRpb25WYWwpKSBvcHRpb24udmFsKG9wdGlvblZhbCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChvYmogPT09ICdfX2RlZmF1bHRfXycpXG4gICAgICAgICAgICBmaWxsT3B0aW9uKHNlbGVjdENvbmZpZy5kZWZhdWx0T3B0aW9uLmxhYmVsLCBzZWxlY3RDb25maWcuZGVmYXVsdE9wdGlvbi52YWx1ZSk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgZmlsbE9wdGlvbihldmFsdWF0ZVBhdGgob2JqLCBzZWxlY3RDb25maWcubGFiZWxQYXRoKSwgZXZhbHVhdGVQYXRoKG9iaiwgc2VsZWN0Q29uZmlnLnZhbHVlUGF0aCkpO1xuXG4gICAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIHRoaXMgb3B0aW9uIGlzIHNlbGVjdGVkLlxuICAgICAgICAgIGlmICghaXNNdWx0aXBsZSAmJiBvcHRpb25WYWwgIT0gbnVsbCAmJiBmaWVsZFZhbCAhPSBudWxsICYmIG9wdGlvblZhbCA9PT0gZmllbGRWYWwgfHwgKF8uaXNPYmplY3QoZmllbGRWYWwpICYmIF8uaXNFcXVhbChvcHRpb25WYWwsIGZpZWxkVmFsKSkpXG4gICAgICAgICAgICBvcHRpb24ucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgICAgICBlbHNlIGlmIChpc011bHRpcGxlICYmIF8uaXNBcnJheShmaWVsZFZhbCkpIHtcbiAgICAgICAgICAgIF8uZWFjaChmaWVsZFZhbCwgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAgIGlmIChfLmlzT2JqZWN0KHZhbCkpIHZhbCA9IGV2YWx1YXRlUGF0aCh2YWwsIHNlbGVjdENvbmZpZy52YWx1ZVBhdGgpO1xuICAgICAgICAgICAgICBpZiAodmFsID09PSBvcHRpb25WYWwgfHwgKF8uaXNPYmplY3QodmFsKSAmJiBfLmlzRXF1YWwob3B0aW9uVmFsLCB2YWwpKSlcbiAgICAgICAgICAgICAgICBvcHRpb24ucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICRlbC5hcHBlbmQob3B0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICAkZWwuZmluZCgnKicpLnJlbW92ZSgpO1xuXG4gICAgICAvLyBUaGUgYGxpc3RgIGNvbmZpZ3VyYXRpb24gaXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG9wdGlvbnMgbGlzdCBvciBhIHN0cmluZ1xuICAgICAgLy8gd2hpY2ggcmVwcmVzZW50cyB0aGUgcGF0aCB0byB0aGUgbGlzdCByZWxhdGl2ZSB0byBgd2luZG93YCBvciB0aGUgdmlldy9gdGhpc2AuXG4gICAgICB2YXIgZXZhbHVhdGUgPSBmdW5jdGlvbih2aWV3LCBsaXN0KSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gd2luZG93O1xuICAgICAgICBpZiAobGlzdC5pbmRleE9mKCd0aGlzLicpID09PSAwKSBjb250ZXh0ID0gdmlldztcbiAgICAgICAgbGlzdCA9IGxpc3QucmVwbGFjZSgvXlthLXpdKlxcLiguKykkLywgJyQxJyk7XG4gICAgICAgIHJldHVybiBldmFsdWF0ZVBhdGgoY29udGV4dCwgbGlzdCk7XG4gICAgICB9O1xuICAgICAgaWYgKF8uaXNTdHJpbmcobGlzdCkpIG9wdExpc3QgPSBldmFsdWF0ZSh0aGlzLCBsaXN0KTtcbiAgICAgIGVsc2UgaWYgKF8uaXNGdW5jdGlvbihsaXN0KSkgb3B0TGlzdCA9IGFwcGx5Vmlld0ZuKHRoaXMsIGxpc3QsICRlbCwgb3B0aW9ucyk7XG4gICAgICBlbHNlIG9wdExpc3QgPSBsaXN0O1xuXG4gICAgICAvLyBTdXBwb3J0IEJhY2tib25lLkNvbGxlY3Rpb24gYW5kIGRlc2VyaWFsaXplLlxuICAgICAgaWYgKG9wdExpc3QgaW5zdGFuY2VvZiBCYWNrYm9uZS5Db2xsZWN0aW9uKSBvcHRMaXN0ID0gb3B0TGlzdC50b0pTT04oKTtcblxuICAgICAgaWYgKHNlbGVjdENvbmZpZy5kZWZhdWx0T3B0aW9uKSB7XG4gICAgICAgIGFkZFNlbGVjdE9wdGlvbnMoW1wiX19kZWZhdWx0X19cIl0sICRlbCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfLmlzQXJyYXkob3B0TGlzdCkpIHtcbiAgICAgICAgYWRkU2VsZWN0T3B0aW9ucyhvcHRMaXN0LCAkZWwsIHZhbCk7XG4gICAgICB9IGVsc2UgaWYgKG9wdExpc3Qub3B0X2xhYmVscykge1xuICAgICAgICAvLyBUbyBkZWZpbmUgYSBzZWxlY3Qgd2l0aCBvcHRncm91cHMsIGZvcm1hdCBzZWxlY3RPcHRpb25zLmNvbGxlY3Rpb24gYXMgYW4gb2JqZWN0XG4gICAgICAgIC8vIHdpdGggYW4gJ29wdF9sYWJlbHMnIHByb3BlcnR5LCBhcyBpbiB0aGUgZm9sbG93aW5nOlxuICAgICAgICAvL1xuICAgICAgICAvLyAgICAge1xuICAgICAgICAvLyAgICAgICAnb3B0X2xhYmVscyc6IFsnTG9vbmV5IFR1bmVzJywgJ1RocmVlIFN0b29nZXMnXSxcbiAgICAgICAgLy8gICAgICAgJ0xvb25leSBUdW5lcyc6IFt7aWQ6IDEsIG5hbWU6ICdCdWdzIEJ1bm55J30sIHtpZDogMiwgbmFtZTogJ0RvbmFsZCBEdWNrJ31dLFxuICAgICAgICAvLyAgICAgICAnVGhyZWUgU3Rvb2dlcyc6IFt7aWQ6IDMsIG5hbWUgOiAnbW9lJ30sIHtpZDogNCwgbmFtZSA6ICdsYXJyeSd9LCB7aWQ6IDUsIG5hbWUgOiAnY3VybHknfV1cbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy9cbiAgICAgICAgXy5lYWNoKG9wdExpc3Qub3B0X2xhYmVscywgZnVuY3Rpb24obGFiZWwpIHtcbiAgICAgICAgICB2YXIgJGdyb3VwID0gQmFja2JvbmUuJCgnPG9wdGdyb3VwLz4nKS5hdHRyKCdsYWJlbCcsIGxhYmVsKTtcbiAgICAgICAgICBhZGRTZWxlY3RPcHRpb25zKG9wdExpc3RbbGFiZWxdLCAkZ3JvdXAsIHZhbCk7XG4gICAgICAgICAgJGVsLmFwcGVuZCgkZ3JvdXApO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gV2l0aCBubyAnb3B0X2xhYmVscycgcGFyYW1ldGVyLCB0aGUgb2JqZWN0IGlzIGFzc3VtZWQgdG8gYmUgYSBzaW1wbGUgdmFsdWUtbGFiZWwgbWFwLlxuICAgICAgICAvLyBQYXNzIGEgc2VsZWN0T3B0aW9ucy5jb21wYXJhdG9yIHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9yZGVyIG9mIGFscGhhYmV0aWNhbCBieSBsYWJlbC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvcHRzID0gW10sIG9wdDtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRMaXN0KSB7XG4gICAgICAgICAgb3B0ID0ge307XG4gICAgICAgICAgb3B0W3NlbGVjdENvbmZpZy52YWx1ZVBhdGhdID0gaTtcbiAgICAgICAgICBvcHRbc2VsZWN0Q29uZmlnLmxhYmVsUGF0aF0gPSBvcHRMaXN0W2ldO1xuICAgICAgICAgIG9wdHMucHVzaChvcHQpO1xuICAgICAgICB9XG4gICAgICAgIGFkZFNlbGVjdE9wdGlvbnMoXy5zb3J0Qnkob3B0cywgc2VsZWN0Q29uZmlnLmNvbXBhcmF0b3IgfHwgc2VsZWN0Q29uZmlnLmxhYmVsUGF0aCksICRlbCwgdmFsKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldFZhbDogZnVuY3Rpb24oJGVsKSB7XG4gICAgICB2YXIgdmFsO1xuICAgICAgaWYgKCRlbC5wcm9wKCdtdWx0aXBsZScpKSB7XG4gICAgICAgIHZhbCA9IEJhY2tib25lLiQoZ2V0U2VsZWN0ZWRPcHRpb24oJGVsKS5tYXAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIEJhY2tib25lLiQodGhpcykuZGF0YSgnc3RpY2tpdF9iaW5kX3ZhbCcpO1xuICAgICAgICB9KSkuZ2V0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBnZXRTZWxlY3RlZE9wdGlvbigkZWwpLmRhdGEoJ3N0aWNraXRfYmluZF92YWwnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICB9XSk7XG5cblxuICAvLyBFeHBvcnQgb250byBCYWNrYm9uZSBvYmplY3RcbiAgQmFja2JvbmUuU3RpY2tpdCA9IFN0aWNraXQ7XG5cbiAgcmV0dXJuIEJhY2tib25lLlN0aWNraXQ7XG5cbn0pKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhY2tib25lLnN0aWNraXQvYmFja2JvbmUuc3RpY2tpdC5qc1xuICoqIG1vZHVsZSBpZCA9IDEwN1xuICoqIG1vZHVsZSBjaHVua3MgPSAxIDJcbiAqKi8iXSwic291cmNlUm9vdCI6IiIsImZpbGUiOiIxMDcuanMifQ==");

/***/ },
/* 108 */
/*!***************************************************************!*\
  !*** ./~/backbone-validation/dist/backbone-validation-amd.js ***!
  \***************************************************************/
/***/ function(module, exports, __webpack_require__) {

	eval("// Backbone.Validation v0.9.2\n//\n// Copyright (c) 2011-2015 Thomas Pedersen\n// Distributed under MIT License\n//\n// Documentation and full license available at:\n// http://thedersen.com/projects/backbone-validation\n(function (factory) {\n  if (true) {\n    module.exports = factory(__webpack_require__(/*! backbone */ 3), __webpack_require__(/*! underscore */ 2));\n  } else if (typeof define === 'function' && define.amd) {\n    define(['backbone', 'underscore'], factory);\n  }\n}(function (Backbone, _) {\n  Backbone.Validation = (function(_){\n    'use strict';\n  \n    // Default options\n    // ---------------\n  \n    var defaultOptions = {\n      forceUpdate: false,\n      selector: 'name',\n      labelFormatter: 'sentenceCase',\n      valid: Function.prototype,\n      invalid: Function.prototype\n    };\n  \n  \n    // Helper functions\n    // ----------------\n  \n    // Formatting functions used for formatting error messages\n    var formatFunctions = {\n      // Uses the configured label formatter to format the attribute name\n      // to make it more readable for the user\n      formatLabel: function(attrName, model) {\n        return defaultLabelFormatters[defaultOptions.labelFormatter](attrName, model);\n      },\n  \n      // Replaces nummeric placeholders like {0} in a string with arguments\n      // passed to the function\n      format: function() {\n        var args = Array.prototype.slice.call(arguments),\n            text = args.shift();\n        return text.replace(/\\{(\\d+)\\}/g, function(match, number) {\n          return typeof args[number] !== 'undefined' ? args[number] : match;\n        });\n      }\n    };\n  \n    // Flattens an object\n    // eg:\n    //\n    //     var o = {\n    //       address: {\n    //         street: 'Street',\n    //         zip: 1234\n    //       }\n    //     };\n    //\n    // becomes:\n    //\n    //     var o = {\n    //       'address.street': 'Street',\n    //       'address.zip': 1234\n    //     };\n    var flatten = function (obj, into, prefix) {\n      into = into || {};\n      prefix = prefix || '';\n  \n      _.each(obj, function(val, key) {\n        if(obj.hasOwnProperty(key)) {\n          if (!!val && typeof val === 'object' && val.constructor === Object) {\n            flatten(val, into, prefix + key + '.');\n          }\n          else {\n            into[prefix + key] = val;\n          }\n        }\n      });\n  \n      return into;\n    };\n  \n    // Validation\n    // ----------\n  \n    var Validation = (function(){\n  \n      // Returns an object with undefined properties for all\n      // attributes on the model that has defined one or more\n      // validation rules.\n      var getValidatedAttrs = function(model) {\n        return _.reduce(_.keys(_.result(model, 'validation') || {}), function(memo, key) {\n          memo[key] = void 0;\n          return memo;\n        }, {});\n      };\n  \n      // Looks on the model for validations for a specified\n      // attribute. Returns an array of any validators defined,\n      // or an empty array if none is defined.\n      var getValidators = function(model, attr) {\n        var attrValidationSet = model.validation ? _.result(model, 'validation')[attr] || {} : {};\n  \n        // If the validator is a function or a string, wrap it in a function validator\n        if (_.isFunction(attrValidationSet) || _.isString(attrValidationSet)) {\n          attrValidationSet = {\n            fn: attrValidationSet\n          };\n        }\n  \n        // Stick the validator object into an array\n        if(!_.isArray(attrValidationSet)) {\n          attrValidationSet = [attrValidationSet];\n        }\n  \n        // Reduces the array of validators into a new array with objects\n        // with a validation method to call, the value to validate against\n        // and the specified error message, if any\n        return _.reduce(attrValidationSet, function(memo, attrValidation) {\n          _.each(_.without(_.keys(attrValidation), 'msg'), function(validator) {\n            memo.push({\n              fn: defaultValidators[validator],\n              val: attrValidation[validator],\n              msg: attrValidation.msg\n            });\n          });\n          return memo;\n        }, []);\n      };\n  \n      // Validates an attribute against all validators defined\n      // for that attribute. If one or more errors are found,\n      // the first error message is returned.\n      // If the attribute is valid, an empty string is returned.\n      var validateAttr = function(model, attr, value, computed) {\n        // Reduces the array of validators to an error message by\n        // applying all the validators and returning the first error\n        // message, if any.\n        return _.reduce(getValidators(model, attr), function(memo, validator){\n          // Pass the format functions plus the default\n          // validators as the context to the validator\n          var ctx = _.extend({}, formatFunctions, defaultValidators),\n              result = validator.fn.call(ctx, value, attr, validator.val, model, computed);\n  \n          if(result === false || memo === false) {\n            return false;\n          }\n          if (result && !memo) {\n            return _.result(validator, 'msg') || result;\n          }\n          return memo;\n        }, '');\n      };\n  \n      // Loops through the model's attributes and validates them all.\n      // Returns and object containing names of invalid attributes\n      // as well as error messages.\n      var validateModel = function(model, attrs) {\n        var error,\n            invalidAttrs = {},\n            isValid = true,\n            computed = _.clone(attrs),\n            flattened = flatten(attrs);\n  \n        _.each(flattened, function(val, attr) {\n          error = validateAttr(model, attr, val, computed);\n          if (error) {\n            invalidAttrs[attr] = error;\n            isValid = false;\n          }\n        });\n  \n        return {\n          invalidAttrs: invalidAttrs,\n          isValid: isValid\n        };\n      };\n  \n      // Contains the methods that are mixed in on the model when binding\n      var mixin = function(view, options) {\n        return {\n  \n          // Check whether or not a value, or a hash of values\n          // passes validation without updating the model\n          preValidate: function(attr, value) {\n            var self = this,\n                result = {},\n                error;\n  \n            if(_.isObject(attr)){\n              _.each(attr, function(value, key) {\n                error = self.preValidate(key, value);\n                if(error){\n                  result[key] = error;\n                }\n              });\n  \n              return _.isEmpty(result) ? undefined : result;\n            }\n            else {\n              return validateAttr(this, attr, value, _.extend({}, this.attributes));\n            }\n          },\n  \n          // Check to see if an attribute, an array of attributes or the\n          // entire model is valid. Passing true will force a validation\n          // of the model.\n          isValid: function(option) {\n            var flattened = flatten(this.attributes);\n  \n            if(_.isString(option)){\n              return !validateAttr(this, option, flattened[option], _.extend({}, this.attributes));\n            }\n            if(_.isArray(option)){\n              return _.reduce(option, function(memo, attr) {\n                return memo && !validateAttr(this, attr, flattened[attr], _.extend({}, this.attributes));\n              }, true, this);\n            }\n            if(option === true) {\n              this.validate();\n            }\n            return this.validation ? this._isValid : true;\n          },\n  \n          // This is called by Backbone when it needs to perform validation.\n          // You can call it manually without any parameters to validate the\n          // entire model.\n          validate: function(attrs, setOptions){\n            var model = this,\n                validateAll = !attrs,\n                opt = _.extend({}, options, setOptions),\n                validatedAttrs = getValidatedAttrs(model),\n                allAttrs = _.extend({}, validatedAttrs, model.attributes, attrs),\n                changedAttrs = flatten(attrs || allAttrs),\n  \n                result = validateModel(model, allAttrs);\n  \n            model._isValid = result.isValid;\n  \n            // After validation is performed, loop through all validated attributes\n            // and call the valid callbacks so the view is updated.\n            _.each(validatedAttrs, function(val, attr){\n              var invalid = result.invalidAttrs.hasOwnProperty(attr);\n              if(!invalid){\n                opt.valid(view, attr, opt.selector);\n              }\n            });\n  \n            // After validation is performed, loop through all validated and changed attributes\n            // and call the invalid callback so the view is updated.\n            _.each(validatedAttrs, function(val, attr){\n              var invalid = result.invalidAttrs.hasOwnProperty(attr),\n                  changed = changedAttrs.hasOwnProperty(attr);\n  \n              if(invalid && (changed || validateAll)){\n                opt.invalid(view, attr, result.invalidAttrs[attr], opt.selector);\n              }\n            });\n  \n            // Trigger validated events.\n            // Need to defer this so the model is actually updated before\n            // the event is triggered.\n            _.defer(function() {\n              model.trigger('validated', model._isValid, model, result.invalidAttrs);\n              model.trigger('validated:' + (model._isValid ? 'valid' : 'invalid'), model, result.invalidAttrs);\n            });\n  \n            // Return any error messages to Backbone, unless the forceUpdate flag is set.\n            // Then we do not return anything and fools Backbone to believe the validation was\n            // a success. That way Backbone will update the model regardless.\n            if (!opt.forceUpdate && _.intersection(_.keys(result.invalidAttrs), _.keys(changedAttrs)).length > 0) {\n              return result.invalidAttrs;\n            }\n          }\n        };\n      };\n  \n      // Helper to mix in validation on a model\n      var bindModel = function(view, model, options) {\n        _.extend(model, mixin(view, options));\n      };\n  \n      // Removes the methods added to a model\n      var unbindModel = function(model) {\n        delete model.validate;\n        delete model.preValidate;\n        delete model.isValid;\n      };\n  \n      // Mix in validation on a model whenever a model is\n      // added to a collection\n      var collectionAdd = function(model) {\n        bindModel(this.view, model, this.options);\n      };\n  \n      // Remove validation from a model whenever a model is\n      // removed from a collection\n      var collectionRemove = function(model) {\n        unbindModel(model);\n      };\n  \n      // Returns the public methods on Backbone.Validation\n      return {\n  \n        // Current version of the library\n        version: '0.9.1',\n  \n        // Called to configure the default options\n        configure: function(options) {\n          _.extend(defaultOptions, options);\n        },\n  \n        // Hooks up validation on a view with a model\n        // or collection\n        bind: function(view, options) {\n          options = _.extend({}, defaultOptions, defaultCallbacks, options);\n  \n          var model = options.model || view.model,\n              collection = options.collection || view.collection;\n  \n          if(typeof model === 'undefined' && typeof collection === 'undefined'){\n            throw 'Before you execute the binding your view must have a model or a collection.\\n' +\n                  'See http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.';\n          }\n  \n          if(model) {\n            bindModel(view, model, options);\n          }\n          else if(collection) {\n            collection.each(function(model){\n              bindModel(view, model, options);\n            });\n            collection.bind('add', collectionAdd, {view: view, options: options});\n            collection.bind('remove', collectionRemove);\n          }\n        },\n  \n        // Removes validation from a view with a model\n        // or collection\n        unbind: function(view, options) {\n          options = _.extend({}, options);\n          var model = options.model || view.model,\n              collection = options.collection || view.collection;\n  \n          if(model) {\n            unbindModel(model);\n          }\n          else if(collection) {\n            collection.each(function(model){\n              unbindModel(model);\n            });\n            collection.unbind('add', collectionAdd);\n            collection.unbind('remove', collectionRemove);\n          }\n        },\n  \n        // Used to extend the Backbone.Model.prototype\n        // with validation\n        mixin: mixin(null, defaultOptions)\n      };\n    }());\n  \n  \n    // Callbacks\n    // ---------\n  \n    var defaultCallbacks = Validation.callbacks = {\n  \n      // Gets called when a previously invalid field in the\n      // view becomes valid. Removes any error message.\n      // Should be overridden with custom functionality.\n      valid: function(view, attr, selector) {\n        view.$('[' + selector + '~=\"' + attr + '\"]')\n            .removeClass('invalid')\n            .removeAttr('data-error');\n      },\n  \n      // Gets called when a field in the view becomes invalid.\n      // Adds a error message.\n      // Should be overridden with custom functionality.\n      invalid: function(view, attr, error, selector) {\n        view.$('[' + selector + '~=\"' + attr + '\"]')\n            .addClass('invalid')\n            .attr('data-error', error);\n      }\n    };\n  \n  \n    // Patterns\n    // --------\n  \n    var defaultPatterns = Validation.patterns = {\n      // Matches any digit(s) (i.e. 0-9)\n      digits: /^\\d+$/,\n  \n      // Matches any number (e.g. 100.000)\n      number: /^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)(?:\\.\\d+)?$/,\n  \n      // Matches a valid email address (e.g. mail@example.com)\n      email: /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i,\n  \n      // Mathes any valid url (e.g. http://www.xample.com)\n      url: /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i\n    };\n  \n  \n    // Error messages\n    // --------------\n  \n    // Error message for the build in validators.\n    // {x} gets swapped out with arguments form the validator.\n    var defaultMessages = Validation.messages = {\n      required: '{0} is required',\n      acceptance: '{0} must be accepted',\n      min: '{0} must be greater than or equal to {1}',\n      max: '{0} must be less than or equal to {1}',\n      range: '{0} must be between {1} and {2}',\n      length: '{0} must be {1} characters',\n      minLength: '{0} must be at least {1} characters',\n      maxLength: '{0} must be at most {1} characters',\n      rangeLength: '{0} must be between {1} and {2} characters',\n      oneOf: '{0} must be one of: {1}',\n      equalTo: '{0} must be the same as {1}',\n      digits: '{0} must only contain digits',\n      number: '{0} must be a number',\n      email: '{0} must be a valid email',\n      url: '{0} must be a valid url',\n      inlinePattern: '{0} is invalid'\n    };\n  \n    // Label formatters\n    // ----------------\n  \n    // Label formatters are used to convert the attribute name\n    // to a more human friendly label when using the built in\n    // error messages.\n    // Configure which one to use with a call to\n    //\n    //     Backbone.Validation.configure({\n    //       labelFormatter: 'label'\n    //     });\n    var defaultLabelFormatters = Validation.labelFormatters = {\n  \n      // Returns the attribute name with applying any formatting\n      none: function(attrName) {\n        return attrName;\n      },\n  \n      // Converts attributeName or attribute_name to Attribute name\n      sentenceCase: function(attrName) {\n        return attrName.replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function(match, index) {\n          return index === 0 ? match.toUpperCase() : ' ' + match.toLowerCase();\n        }).replace(/_/g, ' ');\n      },\n  \n      // Looks for a label configured on the model and returns it\n      //\n      //      var Model = Backbone.Model.extend({\n      //        validation: {\n      //          someAttribute: {\n      //            required: true\n      //          }\n      //        },\n      //\n      //        labels: {\n      //          someAttribute: 'Custom label'\n      //        }\n      //      });\n      label: function(attrName, model) {\n        return (model.labels && model.labels[attrName]) || defaultLabelFormatters.sentenceCase(attrName, model);\n      }\n    };\n  \n  \n    // Built in validators\n    // -------------------\n  \n    var defaultValidators = Validation.validators = (function(){\n      // Use native trim when defined\n      var trim = String.prototype.trim ?\n        function(text) {\n          return text === null ? '' : String.prototype.trim.call(text);\n        } :\n        function(text) {\n          var trimLeft = /^\\s+/,\n              trimRight = /\\s+$/;\n  \n          return text === null ? '' : text.toString().replace(trimLeft, '').replace(trimRight, '');\n        };\n  \n      // Determines whether or not a value is a number\n      var isNumber = function(value){\n        return _.isNumber(value) || (_.isString(value) && value.match(defaultPatterns.number));\n      };\n  \n      // Determines whether or not a value is empty\n      var hasValue = function(value) {\n        return !(_.isNull(value) || _.isUndefined(value) || (_.isString(value) && trim(value) === '') || (_.isArray(value) && _.isEmpty(value)));\n      };\n  \n      return {\n        // Function validator\n        // Lets you implement a custom function used for validation\n        fn: function(value, attr, fn, model, computed) {\n          if(_.isString(fn)){\n            fn = model[fn];\n          }\n          return fn.call(model, value, attr, computed);\n        },\n  \n        // Required validator\n        // Validates if the attribute is required or not\n        // This can be specified as either a boolean value or a function that returns a boolean value\n        required: function(value, attr, required, model, computed) {\n          var isRequired = _.isFunction(required) ? required.call(model, value, attr, computed) : required;\n          if(!isRequired && !hasValue(value)) {\n            return false; // overrides all other validators\n          }\n          if (isRequired && !hasValue(value)) {\n            return this.format(defaultMessages.required, this.formatLabel(attr, model));\n          }\n        },\n  \n        // Acceptance validator\n        // Validates that something has to be accepted, e.g. terms of use\n        // `true` or 'true' are valid\n        acceptance: function(value, attr, accept, model) {\n          if(value !== 'true' && (!_.isBoolean(value) || value === false)) {\n            return this.format(defaultMessages.acceptance, this.formatLabel(attr, model));\n          }\n        },\n  \n        // Min validator\n        // Validates that the value has to be a number and equal to or greater than\n        // the min value specified\n        min: function(value, attr, minValue, model) {\n          if (!isNumber(value) || value < minValue) {\n            return this.format(defaultMessages.min, this.formatLabel(attr, model), minValue);\n          }\n        },\n  \n        // Max validator\n        // Validates that the value has to be a number and equal to or less than\n        // the max value specified\n        max: function(value, attr, maxValue, model) {\n          if (!isNumber(value) || value > maxValue) {\n            return this.format(defaultMessages.max, this.formatLabel(attr, model), maxValue);\n          }\n        },\n  \n        // Range validator\n        // Validates that the value has to be a number and equal to or between\n        // the two numbers specified\n        range: function(value, attr, range, model) {\n          if(!isNumber(value) || value < range[0] || value > range[1]) {\n            return this.format(defaultMessages.range, this.formatLabel(attr, model), range[0], range[1]);\n          }\n        },\n  \n        // Length validator\n        // Validates that the value has to be a string with length equal to\n        // the length value specified\n        length: function(value, attr, length, model) {\n          if (!_.isString(value) || value.length !== length) {\n            return this.format(defaultMessages.length, this.formatLabel(attr, model), length);\n          }\n        },\n  \n        // Min length validator\n        // Validates that the value has to be a string with length equal to or greater than\n        // the min length value specified\n        minLength: function(value, attr, minLength, model) {\n          if (!_.isString(value) || value.length < minLength) {\n            return this.format(defaultMessages.minLength, this.formatLabel(attr, model), minLength);\n          }\n        },\n  \n        // Max length validator\n        // Validates that the value has to be a string with length equal to or less than\n        // the max length value specified\n        maxLength: function(value, attr, maxLength, model) {\n          if (!_.isString(value) || value.length > maxLength) {\n            return this.format(defaultMessages.maxLength, this.formatLabel(attr, model), maxLength);\n          }\n        },\n  \n        // Range length validator\n        // Validates that the value has to be a string and equal to or between\n        // the two numbers specified\n        rangeLength: function(value, attr, range, model) {\n          if (!_.isString(value) || value.length < range[0] || value.length > range[1]) {\n            return this.format(defaultMessages.rangeLength, this.formatLabel(attr, model), range[0], range[1]);\n          }\n        },\n  \n        // One of validator\n        // Validates that the value has to be equal to one of the elements in\n        // the specified array. Case sensitive matching\n        oneOf: function(value, attr, values, model) {\n          if(!_.include(values, value)){\n            return this.format(defaultMessages.oneOf, this.formatLabel(attr, model), values.join(', '));\n          }\n        },\n  \n        // Equal to validator\n        // Validates that the value has to be equal to the value of the attribute\n        // with the name specified\n        equalTo: function(value, attr, equalTo, model, computed) {\n          if(value !== computed[equalTo]) {\n            return this.format(defaultMessages.equalTo, this.formatLabel(attr, model), this.formatLabel(equalTo, model));\n          }\n        },\n  \n        // Pattern validator\n        // Validates that the value has to match the pattern specified.\n        // Can be a regular expression or the name of one of the built in patterns\n        pattern: function(value, attr, pattern, model) {\n          if (!hasValue(value) || !value.toString().match(defaultPatterns[pattern] || pattern)) {\n            return this.format(defaultMessages[pattern] || defaultMessages.inlinePattern, this.formatLabel(attr, model), pattern);\n          }\n        }\n      };\n    }());\n  \n    // Set the correct context for all validators\n    // when used from within a method validator\n    _.each(defaultValidators, function(validator, key){\n      defaultValidators[key] = _.bind(defaultValidators[key], _.extend({}, formatFunctions, defaultValidators));\n    });\n  \n    return Validation;\n  }(_));\n  return Backbone.Validation;\n}));//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2JhY2tib25lLXZhbGlkYXRpb24vZGlzdC9iYWNrYm9uZS12YWxpZGF0aW9uLWFtZC5qcz9iMjgzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVAsOENBQThDLEVBQUU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsT0FBTztBQUN0QztBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFO0FBQ2xFO0FBQ0E7QUFDQSxTQUFTLElBQUk7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRGQUE0Rjs7QUFFNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixXQUFXO0FBQ1g7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7O0FBRWY7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0VBQStFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRjtBQUNyRixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0Esc0NBQXNDO0FBQ3RDOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7O0FBRS9CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1EQUFtRCw2QkFBNkI7QUFDaEY7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOzs7QUFHTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCLElBQUksT0FBTyxFQUFFOztBQUV6QztBQUNBLG1EQUFtRCxHQUFHLG1GQUFtRixHQUFHOztBQUU1STtBQUNBLHlHQUF5RyxFQUFFLGtCQUFrQixrckJBQWtyQixFQUFFLGtCQUFrQixvRkFBb0YsRUFBRSxrQkFBa0IsMkZBQTJGLEVBQUUsa0JBQWtCLDhHQUE4RyxFQUFFLGtCQUFrQjtBQUM1cEM7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRLEVBQUU7QUFDVjtBQUNBLGtCQUFrQixFQUFFO0FBQ3BCLG9CQUFvQixFQUFFO0FBQ3RCLGFBQWEsRUFBRSxtQ0FBbUMsRUFBRTtBQUNwRCxhQUFhLEVBQUUsZ0NBQWdDLEVBQUU7QUFDakQsZUFBZSxFQUFFLGtCQUFrQixFQUFFLE1BQU0sRUFBRTtBQUM3QyxnQkFBZ0IsRUFBRSxVQUFVLEVBQUU7QUFDOUIsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQUU7QUFDMUMsbUJBQW1CLEVBQUUsa0JBQWtCLEVBQUU7QUFDekMscUJBQXFCLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxFQUFFO0FBQ25ELGVBQWUsRUFBRSxrQkFBa0IsRUFBRTtBQUNyQyxpQkFBaUIsRUFBRSxzQkFBc0IsRUFBRTtBQUMzQyxnQkFBZ0IsRUFBRTtBQUNsQixnQkFBZ0IsRUFBRTtBQUNsQixlQUFlLEVBQUU7QUFDakIsYUFBYSxFQUFFO0FBQ2YsdUJBQXVCLEVBQUU7QUFDekI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RTtBQUN6RSxLQUFLOztBQUVMO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEJhY2tib25lLlZhbGlkYXRpb24gdjAuOS4yXG4vL1xuLy8gQ29weXJpZ2h0IChjKSAyMDExLTIwMTUgVGhvbWFzIFBlZGVyc2VuXG4vLyBEaXN0cmlidXRlZCB1bmRlciBNSVQgTGljZW5zZVxuLy9cbi8vIERvY3VtZW50YXRpb24gYW5kIGZ1bGwgbGljZW5zZSBhdmFpbGFibGUgYXQ6XG4vLyBodHRwOi8vdGhlZGVyc2VuLmNvbS9wcm9qZWN0cy9iYWNrYm9uZS12YWxpZGF0aW9uXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdiYWNrYm9uZScpLCByZXF1aXJlKCd1bmRlcnNjb3JlJykpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbJ2JhY2tib25lJywgJ3VuZGVyc2NvcmUnXSwgZmFjdG9yeSk7XG4gIH1cbn0oZnVuY3Rpb24gKEJhY2tib25lLCBfKSB7XG4gIEJhY2tib25lLlZhbGlkYXRpb24gPSAoZnVuY3Rpb24oXyl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICBcbiAgICAvLyBEZWZhdWx0IG9wdGlvbnNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgZm9yY2VVcGRhdGU6IGZhbHNlLFxuICAgICAgc2VsZWN0b3I6ICduYW1lJyxcbiAgICAgIGxhYmVsRm9ybWF0dGVyOiAnc2VudGVuY2VDYXNlJyxcbiAgICAgIHZhbGlkOiBGdW5jdGlvbi5wcm90b3R5cGUsXG4gICAgICBpbnZhbGlkOiBGdW5jdGlvbi5wcm90b3R5cGVcbiAgICB9O1xuICBcbiAgXG4gICAgLy8gSGVscGVyIGZ1bmN0aW9uc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgLy8gRm9ybWF0dGluZyBmdW5jdGlvbnMgdXNlZCBmb3IgZm9ybWF0dGluZyBlcnJvciBtZXNzYWdlc1xuICAgIHZhciBmb3JtYXRGdW5jdGlvbnMgPSB7XG4gICAgICAvLyBVc2VzIHRoZSBjb25maWd1cmVkIGxhYmVsIGZvcm1hdHRlciB0byBmb3JtYXQgdGhlIGF0dHJpYnV0ZSBuYW1lXG4gICAgICAvLyB0byBtYWtlIGl0IG1vcmUgcmVhZGFibGUgZm9yIHRoZSB1c2VyXG4gICAgICBmb3JtYXRMYWJlbDogZnVuY3Rpb24oYXR0ck5hbWUsIG1vZGVsKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0TGFiZWxGb3JtYXR0ZXJzW2RlZmF1bHRPcHRpb25zLmxhYmVsRm9ybWF0dGVyXShhdHRyTmFtZSwgbW9kZWwpO1xuICAgICAgfSxcbiAgXG4gICAgICAvLyBSZXBsYWNlcyBudW1tZXJpYyBwbGFjZWhvbGRlcnMgbGlrZSB7MH0gaW4gYSBzdHJpbmcgd2l0aCBhcmd1bWVudHNcbiAgICAgIC8vIHBhc3NlZCB0byB0aGUgZnVuY3Rpb25cbiAgICAgIGZvcm1hdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxcbiAgICAgICAgICAgIHRleHQgPSBhcmdzLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xceyhcXGQrKVxcfS9nLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW251bWJlcl0gIT09ICd1bmRlZmluZWQnID8gYXJnc1tudW1iZXJdIDogbWF0Y2g7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIFxuICAgIC8vIEZsYXR0ZW5zIGFuIG9iamVjdFxuICAgIC8vIGVnOlxuICAgIC8vXG4gICAgLy8gICAgIHZhciBvID0ge1xuICAgIC8vICAgICAgIGFkZHJlc3M6IHtcbiAgICAvLyAgICAgICAgIHN0cmVldDogJ1N0cmVldCcsXG4gICAgLy8gICAgICAgICB6aXA6IDEyMzRcbiAgICAvLyAgICAgICB9XG4gICAgLy8gICAgIH07XG4gICAgLy9cbiAgICAvLyBiZWNvbWVzOlxuICAgIC8vXG4gICAgLy8gICAgIHZhciBvID0ge1xuICAgIC8vICAgICAgICdhZGRyZXNzLnN0cmVldCc6ICdTdHJlZXQnLFxuICAgIC8vICAgICAgICdhZGRyZXNzLnppcCc6IDEyMzRcbiAgICAvLyAgICAgfTtcbiAgICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uIChvYmosIGludG8sIHByZWZpeCkge1xuICAgICAgaW50byA9IGludG8gfHwge307XG4gICAgICBwcmVmaXggPSBwcmVmaXggfHwgJyc7XG4gIFxuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgICAgaWYob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBpZiAoISF2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgdmFsLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgICAgIGZsYXR0ZW4odmFsLCBpbnRvLCBwcmVmaXggKyBrZXkgKyAnLicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludG9bcHJlZml4ICsga2V5XSA9IHZhbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICBcbiAgICAgIHJldHVybiBpbnRvO1xuICAgIH07XG4gIFxuICAgIC8vIFZhbGlkYXRpb25cbiAgICAvLyAtLS0tLS0tLS0tXG4gIFxuICAgIHZhciBWYWxpZGF0aW9uID0gKGZ1bmN0aW9uKCl7XG4gIFxuICAgICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCB1bmRlZmluZWQgcHJvcGVydGllcyBmb3IgYWxsXG4gICAgICAvLyBhdHRyaWJ1dGVzIG9uIHRoZSBtb2RlbCB0aGF0IGhhcyBkZWZpbmVkIG9uZSBvciBtb3JlXG4gICAgICAvLyB2YWxpZGF0aW9uIHJ1bGVzLlxuICAgICAgdmFyIGdldFZhbGlkYXRlZEF0dHJzID0gZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIF8ucmVkdWNlKF8ua2V5cyhfLnJlc3VsdChtb2RlbCwgJ3ZhbGlkYXRpb24nKSB8fCB7fSksIGZ1bmN0aW9uKG1lbW8sIGtleSkge1xuICAgICAgICAgIG1lbW9ba2V5XSA9IHZvaWQgMDtcbiAgICAgICAgICByZXR1cm4gbWVtbztcbiAgICAgICAgfSwge30pO1xuICAgICAgfTtcbiAgXG4gICAgICAvLyBMb29rcyBvbiB0aGUgbW9kZWwgZm9yIHZhbGlkYXRpb25zIGZvciBhIHNwZWNpZmllZFxuICAgICAgLy8gYXR0cmlidXRlLiBSZXR1cm5zIGFuIGFycmF5IG9mIGFueSB2YWxpZGF0b3JzIGRlZmluZWQsXG4gICAgICAvLyBvciBhbiBlbXB0eSBhcnJheSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgICB2YXIgZ2V0VmFsaWRhdG9ycyA9IGZ1bmN0aW9uKG1vZGVsLCBhdHRyKSB7XG4gICAgICAgIHZhciBhdHRyVmFsaWRhdGlvblNldCA9IG1vZGVsLnZhbGlkYXRpb24gPyBfLnJlc3VsdChtb2RlbCwgJ3ZhbGlkYXRpb24nKVthdHRyXSB8fCB7fSA6IHt9O1xuICBcbiAgICAgICAgLy8gSWYgdGhlIHZhbGlkYXRvciBpcyBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nLCB3cmFwIGl0IGluIGEgZnVuY3Rpb24gdmFsaWRhdG9yXG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24oYXR0clZhbGlkYXRpb25TZXQpIHx8IF8uaXNTdHJpbmcoYXR0clZhbGlkYXRpb25TZXQpKSB7XG4gICAgICAgICAgYXR0clZhbGlkYXRpb25TZXQgPSB7XG4gICAgICAgICAgICBmbjogYXR0clZhbGlkYXRpb25TZXRcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBTdGljayB0aGUgdmFsaWRhdG9yIG9iamVjdCBpbnRvIGFuIGFycmF5XG4gICAgICAgIGlmKCFfLmlzQXJyYXkoYXR0clZhbGlkYXRpb25TZXQpKSB7XG4gICAgICAgICAgYXR0clZhbGlkYXRpb25TZXQgPSBbYXR0clZhbGlkYXRpb25TZXRdO1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBSZWR1Y2VzIHRoZSBhcnJheSBvZiB2YWxpZGF0b3JzIGludG8gYSBuZXcgYXJyYXkgd2l0aCBvYmplY3RzXG4gICAgICAgIC8vIHdpdGggYSB2YWxpZGF0aW9uIG1ldGhvZCB0byBjYWxsLCB0aGUgdmFsdWUgdG8gdmFsaWRhdGUgYWdhaW5zdFxuICAgICAgICAvLyBhbmQgdGhlIHNwZWNpZmllZCBlcnJvciBtZXNzYWdlLCBpZiBhbnlcbiAgICAgICAgcmV0dXJuIF8ucmVkdWNlKGF0dHJWYWxpZGF0aW9uU2V0LCBmdW5jdGlvbihtZW1vLCBhdHRyVmFsaWRhdGlvbikge1xuICAgICAgICAgIF8uZWFjaChfLndpdGhvdXQoXy5rZXlzKGF0dHJWYWxpZGF0aW9uKSwgJ21zZycpLCBmdW5jdGlvbih2YWxpZGF0b3IpIHtcbiAgICAgICAgICAgIG1lbW8ucHVzaCh7XG4gICAgICAgICAgICAgIGZuOiBkZWZhdWx0VmFsaWRhdG9yc1t2YWxpZGF0b3JdLFxuICAgICAgICAgICAgICB2YWw6IGF0dHJWYWxpZGF0aW9uW3ZhbGlkYXRvcl0sXG4gICAgICAgICAgICAgIG1zZzogYXR0clZhbGlkYXRpb24ubXNnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gbWVtbztcbiAgICAgICAgfSwgW10pO1xuICAgICAgfTtcbiAgXG4gICAgICAvLyBWYWxpZGF0ZXMgYW4gYXR0cmlidXRlIGFnYWluc3QgYWxsIHZhbGlkYXRvcnMgZGVmaW5lZFxuICAgICAgLy8gZm9yIHRoYXQgYXR0cmlidXRlLiBJZiBvbmUgb3IgbW9yZSBlcnJvcnMgYXJlIGZvdW5kLFxuICAgICAgLy8gdGhlIGZpcnN0IGVycm9yIG1lc3NhZ2UgaXMgcmV0dXJuZWQuXG4gICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGlzIHZhbGlkLCBhbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQuXG4gICAgICB2YXIgdmFsaWRhdGVBdHRyID0gZnVuY3Rpb24obW9kZWwsIGF0dHIsIHZhbHVlLCBjb21wdXRlZCkge1xuICAgICAgICAvLyBSZWR1Y2VzIHRoZSBhcnJheSBvZiB2YWxpZGF0b3JzIHRvIGFuIGVycm9yIG1lc3NhZ2UgYnlcbiAgICAgICAgLy8gYXBwbHlpbmcgYWxsIHRoZSB2YWxpZGF0b3JzIGFuZCByZXR1cm5pbmcgdGhlIGZpcnN0IGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UsIGlmIGFueS5cbiAgICAgICAgcmV0dXJuIF8ucmVkdWNlKGdldFZhbGlkYXRvcnMobW9kZWwsIGF0dHIpLCBmdW5jdGlvbihtZW1vLCB2YWxpZGF0b3Ipe1xuICAgICAgICAgIC8vIFBhc3MgdGhlIGZvcm1hdCBmdW5jdGlvbnMgcGx1cyB0aGUgZGVmYXVsdFxuICAgICAgICAgIC8vIHZhbGlkYXRvcnMgYXMgdGhlIGNvbnRleHQgdG8gdGhlIHZhbGlkYXRvclxuICAgICAgICAgIHZhciBjdHggPSBfLmV4dGVuZCh7fSwgZm9ybWF0RnVuY3Rpb25zLCBkZWZhdWx0VmFsaWRhdG9ycyksXG4gICAgICAgICAgICAgIHJlc3VsdCA9IHZhbGlkYXRvci5mbi5jYWxsKGN0eCwgdmFsdWUsIGF0dHIsIHZhbGlkYXRvci52YWwsIG1vZGVsLCBjb21wdXRlZCk7XG4gIFxuICAgICAgICAgIGlmKHJlc3VsdCA9PT0gZmFsc2UgfHwgbWVtbyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlc3VsdCAmJiAhbWVtbykge1xuICAgICAgICAgICAgcmV0dXJuIF8ucmVzdWx0KHZhbGlkYXRvciwgJ21zZycpIHx8IHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICAgIH0sICcnKTtcbiAgICAgIH07XG4gIFxuICAgICAgLy8gTG9vcHMgdGhyb3VnaCB0aGUgbW9kZWwncyBhdHRyaWJ1dGVzIGFuZCB2YWxpZGF0ZXMgdGhlbSBhbGwuXG4gICAgICAvLyBSZXR1cm5zIGFuZCBvYmplY3QgY29udGFpbmluZyBuYW1lcyBvZiBpbnZhbGlkIGF0dHJpYnV0ZXNcbiAgICAgIC8vIGFzIHdlbGwgYXMgZXJyb3IgbWVzc2FnZXMuXG4gICAgICB2YXIgdmFsaWRhdGVNb2RlbCA9IGZ1bmN0aW9uKG1vZGVsLCBhdHRycykge1xuICAgICAgICB2YXIgZXJyb3IsXG4gICAgICAgICAgICBpbnZhbGlkQXR0cnMgPSB7fSxcbiAgICAgICAgICAgIGlzVmFsaWQgPSB0cnVlLFxuICAgICAgICAgICAgY29tcHV0ZWQgPSBfLmNsb25lKGF0dHJzKSxcbiAgICAgICAgICAgIGZsYXR0ZW5lZCA9IGZsYXR0ZW4oYXR0cnMpO1xuICBcbiAgICAgICAgXy5lYWNoKGZsYXR0ZW5lZCwgZnVuY3Rpb24odmFsLCBhdHRyKSB7XG4gICAgICAgICAgZXJyb3IgPSB2YWxpZGF0ZUF0dHIobW9kZWwsIGF0dHIsIHZhbCwgY29tcHV0ZWQpO1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgaW52YWxpZEF0dHJzW2F0dHJdID0gZXJyb3I7XG4gICAgICAgICAgICBpc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW52YWxpZEF0dHJzOiBpbnZhbGlkQXR0cnMsXG4gICAgICAgICAgaXNWYWxpZDogaXNWYWxpZFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgXG4gICAgICAvLyBDb250YWlucyB0aGUgbWV0aG9kcyB0aGF0IGFyZSBtaXhlZCBpbiBvbiB0aGUgbW9kZWwgd2hlbiBiaW5kaW5nXG4gICAgICB2YXIgbWl4aW4gPSBmdW5jdGlvbih2aWV3LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7XG4gIFxuICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgb3Igbm90IGEgdmFsdWUsIG9yIGEgaGFzaCBvZiB2YWx1ZXNcbiAgICAgICAgICAvLyBwYXNzZXMgdmFsaWRhdGlvbiB3aXRob3V0IHVwZGF0aW5nIHRoZSBtb2RlbFxuICAgICAgICAgIHByZVZhbGlkYXRlOiBmdW5jdGlvbihhdHRyLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHt9LFxuICAgICAgICAgICAgICAgIGVycm9yO1xuICBcbiAgICAgICAgICAgIGlmKF8uaXNPYmplY3QoYXR0cikpe1xuICAgICAgICAgICAgICBfLmVhY2goYXR0ciwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgIGVycm9yID0gc2VsZi5wcmVWYWxpZGF0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZihlcnJvcil7XG4gICAgICAgICAgICAgICAgICByZXN1bHRba2V5XSA9IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gIFxuICAgICAgICAgICAgICByZXR1cm4gXy5pc0VtcHR5KHJlc3VsdCkgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlQXR0cih0aGlzLCBhdHRyLCB2YWx1ZSwgXy5leHRlbmQoe30sIHRoaXMuYXR0cmlidXRlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gIFxuICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBhbiBhdHRyaWJ1dGUsIGFuIGFycmF5IG9mIGF0dHJpYnV0ZXMgb3IgdGhlXG4gICAgICAgICAgLy8gZW50aXJlIG1vZGVsIGlzIHZhbGlkLiBQYXNzaW5nIHRydWUgd2lsbCBmb3JjZSBhIHZhbGlkYXRpb25cbiAgICAgICAgICAvLyBvZiB0aGUgbW9kZWwuXG4gICAgICAgICAgaXNWYWxpZDogZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZmxhdHRlbmVkID0gZmxhdHRlbih0aGlzLmF0dHJpYnV0ZXMpO1xuICBcbiAgICAgICAgICAgIGlmKF8uaXNTdHJpbmcob3B0aW9uKSl7XG4gICAgICAgICAgICAgIHJldHVybiAhdmFsaWRhdGVBdHRyKHRoaXMsIG9wdGlvbiwgZmxhdHRlbmVkW29wdGlvbl0sIF8uZXh0ZW5kKHt9LCB0aGlzLmF0dHJpYnV0ZXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF8uaXNBcnJheShvcHRpb24pKXtcbiAgICAgICAgICAgICAgcmV0dXJuIF8ucmVkdWNlKG9wdGlvbiwgZnVuY3Rpb24obWVtbywgYXR0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZW1vICYmICF2YWxpZGF0ZUF0dHIodGhpcywgYXR0ciwgZmxhdHRlbmVkW2F0dHJdLCBfLmV4dGVuZCh7fSwgdGhpcy5hdHRyaWJ1dGVzKSk7XG4gICAgICAgICAgICAgIH0sIHRydWUsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYob3B0aW9uID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHRoaXMudmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRpb24gPyB0aGlzLl9pc1ZhbGlkIDogdHJ1ZTtcbiAgICAgICAgICB9LFxuICBcbiAgICAgICAgICAvLyBUaGlzIGlzIGNhbGxlZCBieSBCYWNrYm9uZSB3aGVuIGl0IG5lZWRzIHRvIHBlcmZvcm0gdmFsaWRhdGlvbi5cbiAgICAgICAgICAvLyBZb3UgY2FuIGNhbGwgaXQgbWFudWFsbHkgd2l0aG91dCBhbnkgcGFyYW1ldGVycyB0byB2YWxpZGF0ZSB0aGVcbiAgICAgICAgICAvLyBlbnRpcmUgbW9kZWwuXG4gICAgICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uKGF0dHJzLCBzZXRPcHRpb25zKXtcbiAgICAgICAgICAgIHZhciBtb2RlbCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVBbGwgPSAhYXR0cnMsXG4gICAgICAgICAgICAgICAgb3B0ID0gXy5leHRlbmQoe30sIG9wdGlvbnMsIHNldE9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRlZEF0dHJzID0gZ2V0VmFsaWRhdGVkQXR0cnMobW9kZWwpLFxuICAgICAgICAgICAgICAgIGFsbEF0dHJzID0gXy5leHRlbmQoe30sIHZhbGlkYXRlZEF0dHJzLCBtb2RlbC5hdHRyaWJ1dGVzLCBhdHRycyksXG4gICAgICAgICAgICAgICAgY2hhbmdlZEF0dHJzID0gZmxhdHRlbihhdHRycyB8fCBhbGxBdHRycyksXG4gIFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbGlkYXRlTW9kZWwobW9kZWwsIGFsbEF0dHJzKTtcbiAgXG4gICAgICAgICAgICBtb2RlbC5faXNWYWxpZCA9IHJlc3VsdC5pc1ZhbGlkO1xuICBcbiAgICAgICAgICAgIC8vIEFmdGVyIHZhbGlkYXRpb24gaXMgcGVyZm9ybWVkLCBsb29wIHRocm91Z2ggYWxsIHZhbGlkYXRlZCBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAvLyBhbmQgY2FsbCB0aGUgdmFsaWQgY2FsbGJhY2tzIHNvIHRoZSB2aWV3IGlzIHVwZGF0ZWQuXG4gICAgICAgICAgICBfLmVhY2godmFsaWRhdGVkQXR0cnMsIGZ1bmN0aW9uKHZhbCwgYXR0cil7XG4gICAgICAgICAgICAgIHZhciBpbnZhbGlkID0gcmVzdWx0LmludmFsaWRBdHRycy5oYXNPd25Qcm9wZXJ0eShhdHRyKTtcbiAgICAgICAgICAgICAgaWYoIWludmFsaWQpe1xuICAgICAgICAgICAgICAgIG9wdC52YWxpZCh2aWV3LCBhdHRyLCBvcHQuc2VsZWN0b3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgXG4gICAgICAgICAgICAvLyBBZnRlciB2YWxpZGF0aW9uIGlzIHBlcmZvcm1lZCwgbG9vcCB0aHJvdWdoIGFsbCB2YWxpZGF0ZWQgYW5kIGNoYW5nZWQgYXR0cmlidXRlc1xuICAgICAgICAgICAgLy8gYW5kIGNhbGwgdGhlIGludmFsaWQgY2FsbGJhY2sgc28gdGhlIHZpZXcgaXMgdXBkYXRlZC5cbiAgICAgICAgICAgIF8uZWFjaCh2YWxpZGF0ZWRBdHRycywgZnVuY3Rpb24odmFsLCBhdHRyKXtcbiAgICAgICAgICAgICAgdmFyIGludmFsaWQgPSByZXN1bHQuaW52YWxpZEF0dHJzLmhhc093blByb3BlcnR5KGF0dHIpLFxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IGNoYW5nZWRBdHRycy5oYXNPd25Qcm9wZXJ0eShhdHRyKTtcbiAgXG4gICAgICAgICAgICAgIGlmKGludmFsaWQgJiYgKGNoYW5nZWQgfHwgdmFsaWRhdGVBbGwpKXtcbiAgICAgICAgICAgICAgICBvcHQuaW52YWxpZCh2aWV3LCBhdHRyLCByZXN1bHQuaW52YWxpZEF0dHJzW2F0dHJdLCBvcHQuc2VsZWN0b3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIHZhbGlkYXRlZCBldmVudHMuXG4gICAgICAgICAgICAvLyBOZWVkIHRvIGRlZmVyIHRoaXMgc28gdGhlIG1vZGVsIGlzIGFjdHVhbGx5IHVwZGF0ZWQgYmVmb3JlXG4gICAgICAgICAgICAvLyB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLlxuICAgICAgICAgICAgXy5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgbW9kZWwudHJpZ2dlcigndmFsaWRhdGVkJywgbW9kZWwuX2lzVmFsaWQsIG1vZGVsLCByZXN1bHQuaW52YWxpZEF0dHJzKTtcbiAgICAgICAgICAgICAgbW9kZWwudHJpZ2dlcigndmFsaWRhdGVkOicgKyAobW9kZWwuX2lzVmFsaWQgPyAndmFsaWQnIDogJ2ludmFsaWQnKSwgbW9kZWwsIHJlc3VsdC5pbnZhbGlkQXR0cnMpO1xuICAgICAgICAgICAgfSk7XG4gIFxuICAgICAgICAgICAgLy8gUmV0dXJuIGFueSBlcnJvciBtZXNzYWdlcyB0byBCYWNrYm9uZSwgdW5sZXNzIHRoZSBmb3JjZVVwZGF0ZSBmbGFnIGlzIHNldC5cbiAgICAgICAgICAgIC8vIFRoZW4gd2UgZG8gbm90IHJldHVybiBhbnl0aGluZyBhbmQgZm9vbHMgQmFja2JvbmUgdG8gYmVsaWV2ZSB0aGUgdmFsaWRhdGlvbiB3YXNcbiAgICAgICAgICAgIC8vIGEgc3VjY2Vzcy4gVGhhdCB3YXkgQmFja2JvbmUgd2lsbCB1cGRhdGUgdGhlIG1vZGVsIHJlZ2FyZGxlc3MuXG4gICAgICAgICAgICBpZiAoIW9wdC5mb3JjZVVwZGF0ZSAmJiBfLmludGVyc2VjdGlvbihfLmtleXMocmVzdWx0LmludmFsaWRBdHRycyksIF8ua2V5cyhjaGFuZ2VkQXR0cnMpKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQuaW52YWxpZEF0dHJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH07XG4gIFxuICAgICAgLy8gSGVscGVyIHRvIG1peCBpbiB2YWxpZGF0aW9uIG9uIGEgbW9kZWxcbiAgICAgIHZhciBiaW5kTW9kZWwgPSBmdW5jdGlvbih2aWV3LCBtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICBfLmV4dGVuZChtb2RlbCwgbWl4aW4odmlldywgb3B0aW9ucykpO1xuICAgICAgfTtcbiAgXG4gICAgICAvLyBSZW1vdmVzIHRoZSBtZXRob2RzIGFkZGVkIHRvIGEgbW9kZWxcbiAgICAgIHZhciB1bmJpbmRNb2RlbCA9IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgIGRlbGV0ZSBtb2RlbC52YWxpZGF0ZTtcbiAgICAgICAgZGVsZXRlIG1vZGVsLnByZVZhbGlkYXRlO1xuICAgICAgICBkZWxldGUgbW9kZWwuaXNWYWxpZDtcbiAgICAgIH07XG4gIFxuICAgICAgLy8gTWl4IGluIHZhbGlkYXRpb24gb24gYSBtb2RlbCB3aGVuZXZlciBhIG1vZGVsIGlzXG4gICAgICAvLyBhZGRlZCB0byBhIGNvbGxlY3Rpb25cbiAgICAgIHZhciBjb2xsZWN0aW9uQWRkID0gZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgYmluZE1vZGVsKHRoaXMudmlldywgbW9kZWwsIHRoaXMub3B0aW9ucyk7XG4gICAgICB9O1xuICBcbiAgICAgIC8vIFJlbW92ZSB2YWxpZGF0aW9uIGZyb20gYSBtb2RlbCB3aGVuZXZlciBhIG1vZGVsIGlzXG4gICAgICAvLyByZW1vdmVkIGZyb20gYSBjb2xsZWN0aW9uXG4gICAgICB2YXIgY29sbGVjdGlvblJlbW92ZSA9IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgIHVuYmluZE1vZGVsKG1vZGVsKTtcbiAgICAgIH07XG4gIFxuICAgICAgLy8gUmV0dXJucyB0aGUgcHVibGljIG1ldGhvZHMgb24gQmFja2JvbmUuVmFsaWRhdGlvblxuICAgICAgcmV0dXJuIHtcbiAgXG4gICAgICAgIC8vIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgbGlicmFyeVxuICAgICAgICB2ZXJzaW9uOiAnMC45LjEnLFxuICBcbiAgICAgICAgLy8gQ2FsbGVkIHRvIGNvbmZpZ3VyZSB0aGUgZGVmYXVsdCBvcHRpb25zXG4gICAgICAgIGNvbmZpZ3VyZTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgIF8uZXh0ZW5kKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgfSxcbiAgXG4gICAgICAgIC8vIEhvb2tzIHVwIHZhbGlkYXRpb24gb24gYSB2aWV3IHdpdGggYSBtb2RlbFxuICAgICAgICAvLyBvciBjb2xsZWN0aW9uXG4gICAgICAgIGJpbmQ6IGZ1bmN0aW9uKHZpZXcsIG9wdGlvbnMpIHtcbiAgICAgICAgICBvcHRpb25zID0gXy5leHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBkZWZhdWx0Q2FsbGJhY2tzLCBvcHRpb25zKTtcbiAgXG4gICAgICAgICAgdmFyIG1vZGVsID0gb3B0aW9ucy5tb2RlbCB8fCB2aWV3Lm1vZGVsLFxuICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gb3B0aW9ucy5jb2xsZWN0aW9uIHx8IHZpZXcuY29sbGVjdGlvbjtcbiAgXG4gICAgICAgICAgaWYodHlwZW9mIG1vZGVsID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29sbGVjdGlvbiA9PT0gJ3VuZGVmaW5lZCcpe1xuICAgICAgICAgICAgdGhyb3cgJ0JlZm9yZSB5b3UgZXhlY3V0ZSB0aGUgYmluZGluZyB5b3VyIHZpZXcgbXVzdCBoYXZlIGEgbW9kZWwgb3IgYSBjb2xsZWN0aW9uLlxcbicgK1xuICAgICAgICAgICAgICAgICAgJ1NlZSBodHRwOi8vdGhlZGVyc2VuLmNvbS9wcm9qZWN0cy9iYWNrYm9uZS12YWxpZGF0aW9uLyN1c2luZy1mb3JtLW1vZGVsLXZhbGlkYXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uJztcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIGlmKG1vZGVsKSB7XG4gICAgICAgICAgICBiaW5kTW9kZWwodmlldywgbW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uZWFjaChmdW5jdGlvbihtb2RlbCl7XG4gICAgICAgICAgICAgIGJpbmRNb2RlbCh2aWV3LCBtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uYmluZCgnYWRkJywgY29sbGVjdGlvbkFkZCwge3ZpZXc6IHZpZXcsIG9wdGlvbnM6IG9wdGlvbnN9KTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uYmluZCgncmVtb3ZlJywgY29sbGVjdGlvblJlbW92ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICBcbiAgICAgICAgLy8gUmVtb3ZlcyB2YWxpZGF0aW9uIGZyb20gYSB2aWV3IHdpdGggYSBtb2RlbFxuICAgICAgICAvLyBvciBjb2xsZWN0aW9uXG4gICAgICAgIHVuYmluZDogZnVuY3Rpb24odmlldywgb3B0aW9ucykge1xuICAgICAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgb3B0aW9ucyk7XG4gICAgICAgICAgdmFyIG1vZGVsID0gb3B0aW9ucy5tb2RlbCB8fCB2aWV3Lm1vZGVsLFxuICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gb3B0aW9ucy5jb2xsZWN0aW9uIHx8IHZpZXcuY29sbGVjdGlvbjtcbiAgXG4gICAgICAgICAgaWYobW9kZWwpIHtcbiAgICAgICAgICAgIHVuYmluZE1vZGVsKG1vZGVsKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uLmVhY2goZnVuY3Rpb24obW9kZWwpe1xuICAgICAgICAgICAgICB1bmJpbmRNb2RlbChtb2RlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24udW5iaW5kKCdhZGQnLCBjb2xsZWN0aW9uQWRkKTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24udW5iaW5kKCdyZW1vdmUnLCBjb2xsZWN0aW9uUmVtb3ZlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gIFxuICAgICAgICAvLyBVc2VkIHRvIGV4dGVuZCB0aGUgQmFja2JvbmUuTW9kZWwucHJvdG90eXBlXG4gICAgICAgIC8vIHdpdGggdmFsaWRhdGlvblxuICAgICAgICBtaXhpbjogbWl4aW4obnVsbCwgZGVmYXVsdE9wdGlvbnMpXG4gICAgICB9O1xuICAgIH0oKSk7XG4gIFxuICBcbiAgICAvLyBDYWxsYmFja3NcbiAgICAvLyAtLS0tLS0tLS1cbiAgXG4gICAgdmFyIGRlZmF1bHRDYWxsYmFja3MgPSBWYWxpZGF0aW9uLmNhbGxiYWNrcyA9IHtcbiAgXG4gICAgICAvLyBHZXRzIGNhbGxlZCB3aGVuIGEgcHJldmlvdXNseSBpbnZhbGlkIGZpZWxkIGluIHRoZVxuICAgICAgLy8gdmlldyBiZWNvbWVzIHZhbGlkLiBSZW1vdmVzIGFueSBlcnJvciBtZXNzYWdlLlxuICAgICAgLy8gU2hvdWxkIGJlIG92ZXJyaWRkZW4gd2l0aCBjdXN0b20gZnVuY3Rpb25hbGl0eS5cbiAgICAgIHZhbGlkOiBmdW5jdGlvbih2aWV3LCBhdHRyLCBzZWxlY3Rvcikge1xuICAgICAgICB2aWV3LiQoJ1snICsgc2VsZWN0b3IgKyAnfj1cIicgKyBhdHRyICsgJ1wiXScpXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKVxuICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2RhdGEtZXJyb3InKTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gR2V0cyBjYWxsZWQgd2hlbiBhIGZpZWxkIGluIHRoZSB2aWV3IGJlY29tZXMgaW52YWxpZC5cbiAgICAgIC8vIEFkZHMgYSBlcnJvciBtZXNzYWdlLlxuICAgICAgLy8gU2hvdWxkIGJlIG92ZXJyaWRkZW4gd2l0aCBjdXN0b20gZnVuY3Rpb25hbGl0eS5cbiAgICAgIGludmFsaWQ6IGZ1bmN0aW9uKHZpZXcsIGF0dHIsIGVycm9yLCBzZWxlY3Rvcikge1xuICAgICAgICB2aWV3LiQoJ1snICsgc2VsZWN0b3IgKyAnfj1cIicgKyBhdHRyICsgJ1wiXScpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2ludmFsaWQnKVxuICAgICAgICAgICAgLmF0dHIoJ2RhdGEtZXJyb3InLCBlcnJvcik7XG4gICAgICB9XG4gICAgfTtcbiAgXG4gIFxuICAgIC8vIFBhdHRlcm5zXG4gICAgLy8gLS0tLS0tLS1cbiAgXG4gICAgdmFyIGRlZmF1bHRQYXR0ZXJucyA9IFZhbGlkYXRpb24ucGF0dGVybnMgPSB7XG4gICAgICAvLyBNYXRjaGVzIGFueSBkaWdpdChzKSAoaS5lLiAwLTkpXG4gICAgICBkaWdpdHM6IC9eXFxkKyQvLFxuICBcbiAgICAgIC8vIE1hdGNoZXMgYW55IG51bWJlciAoZS5nLiAxMDAuMDAwKVxuICAgICAgbnVtYmVyOiAvXi0/KD86XFxkK3xcXGR7MSwzfSg/OixcXGR7M30pKykoPzpcXC5cXGQrKT8kLyxcbiAgXG4gICAgICAvLyBNYXRjaGVzIGEgdmFsaWQgZW1haWwgYWRkcmVzcyAoZS5nLiBtYWlsQGV4YW1wbGUuY29tKVxuICAgICAgZW1haWw6IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaSxcbiAgXG4gICAgICAvLyBNYXRoZXMgYW55IHZhbGlkIHVybCAoZS5nLiBodHRwOi8vd3d3LnhhbXBsZS5jb20pXG4gICAgICB1cmw6IC9eKGh0dHBzP3xmdHApOlxcL1xcLygoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6KSpAKT8oKChcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSlcXC4oXFxkfFsxLTldXFxkfDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNV0pXFwuKFxcZHxbMS05XVxcZHwxXFxkXFxkfDJbMC00XVxcZHwyNVswLTVdKVxcLihcXGR8WzEtOV1cXGR8MVxcZFxcZHwyWzAtNF1cXGR8MjVbMC01XSkpfCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLj8pKDpcXGQqKT8pKFxcLygoKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCglW1xcZGEtZl17Mn0pfFshXFwkJidcXChcXClcXCpcXCssOz1dfDp8QCkrKFxcLygoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKSopKik/KT8oXFw/KCgoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KCVbXFxkYS1mXXsyfSl8WyFcXCQmJ1xcKFxcKVxcKlxcKyw7PV18OnxAKXxbXFx1RTAwMC1cXHVGOEZGXXxcXC98XFw/KSopPyhcXCMoKChbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoJVtcXGRhLWZdezJ9KXxbIVxcJCYnXFwoXFwpXFwqXFwrLDs9XXw6fEApfFxcL3xcXD8pKik/JC9pXG4gICAgfTtcbiAgXG4gIFxuICAgIC8vIEVycm9yIG1lc3NhZ2VzXG4gICAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgLy8gRXJyb3IgbWVzc2FnZSBmb3IgdGhlIGJ1aWxkIGluIHZhbGlkYXRvcnMuXG4gICAgLy8ge3h9IGdldHMgc3dhcHBlZCBvdXQgd2l0aCBhcmd1bWVudHMgZm9ybSB0aGUgdmFsaWRhdG9yLlxuICAgIHZhciBkZWZhdWx0TWVzc2FnZXMgPSBWYWxpZGF0aW9uLm1lc3NhZ2VzID0ge1xuICAgICAgcmVxdWlyZWQ6ICd7MH0gaXMgcmVxdWlyZWQnLFxuICAgICAgYWNjZXB0YW5jZTogJ3swfSBtdXN0IGJlIGFjY2VwdGVkJyxcbiAgICAgIG1pbjogJ3swfSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB7MX0nLFxuICAgICAgbWF4OiAnezB9IG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHsxfScsXG4gICAgICByYW5nZTogJ3swfSBtdXN0IGJlIGJldHdlZW4gezF9IGFuZCB7Mn0nLFxuICAgICAgbGVuZ3RoOiAnezB9IG11c3QgYmUgezF9IGNoYXJhY3RlcnMnLFxuICAgICAgbWluTGVuZ3RoOiAnezB9IG11c3QgYmUgYXQgbGVhc3QgezF9IGNoYXJhY3RlcnMnLFxuICAgICAgbWF4TGVuZ3RoOiAnezB9IG11c3QgYmUgYXQgbW9zdCB7MX0gY2hhcmFjdGVycycsXG4gICAgICByYW5nZUxlbmd0aDogJ3swfSBtdXN0IGJlIGJldHdlZW4gezF9IGFuZCB7Mn0gY2hhcmFjdGVycycsXG4gICAgICBvbmVPZjogJ3swfSBtdXN0IGJlIG9uZSBvZjogezF9JyxcbiAgICAgIGVxdWFsVG86ICd7MH0gbXVzdCBiZSB0aGUgc2FtZSBhcyB7MX0nLFxuICAgICAgZGlnaXRzOiAnezB9IG11c3Qgb25seSBjb250YWluIGRpZ2l0cycsXG4gICAgICBudW1iZXI6ICd7MH0gbXVzdCBiZSBhIG51bWJlcicsXG4gICAgICBlbWFpbDogJ3swfSBtdXN0IGJlIGEgdmFsaWQgZW1haWwnLFxuICAgICAgdXJsOiAnezB9IG11c3QgYmUgYSB2YWxpZCB1cmwnLFxuICAgICAgaW5saW5lUGF0dGVybjogJ3swfSBpcyBpbnZhbGlkJ1xuICAgIH07XG4gIFxuICAgIC8vIExhYmVsIGZvcm1hdHRlcnNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIC8vIExhYmVsIGZvcm1hdHRlcnMgYXJlIHVzZWQgdG8gY29udmVydCB0aGUgYXR0cmlidXRlIG5hbWVcbiAgICAvLyB0byBhIG1vcmUgaHVtYW4gZnJpZW5kbHkgbGFiZWwgd2hlbiB1c2luZyB0aGUgYnVpbHQgaW5cbiAgICAvLyBlcnJvciBtZXNzYWdlcy5cbiAgICAvLyBDb25maWd1cmUgd2hpY2ggb25lIHRvIHVzZSB3aXRoIGEgY2FsbCB0b1xuICAgIC8vXG4gICAgLy8gICAgIEJhY2tib25lLlZhbGlkYXRpb24uY29uZmlndXJlKHtcbiAgICAvLyAgICAgICBsYWJlbEZvcm1hdHRlcjogJ2xhYmVsJ1xuICAgIC8vICAgICB9KTtcbiAgICB2YXIgZGVmYXVsdExhYmVsRm9ybWF0dGVycyA9IFZhbGlkYXRpb24ubGFiZWxGb3JtYXR0ZXJzID0ge1xuICBcbiAgICAgIC8vIFJldHVybnMgdGhlIGF0dHJpYnV0ZSBuYW1lIHdpdGggYXBwbHlpbmcgYW55IGZvcm1hdHRpbmdcbiAgICAgIG5vbmU6IGZ1bmN0aW9uKGF0dHJOYW1lKSB7XG4gICAgICAgIHJldHVybiBhdHRyTmFtZTtcbiAgICAgIH0sXG4gIFxuICAgICAgLy8gQ29udmVydHMgYXR0cmlidXRlTmFtZSBvciBhdHRyaWJ1dGVfbmFtZSB0byBBdHRyaWJ1dGUgbmFtZVxuICAgICAgc2VudGVuY2VDYXNlOiBmdW5jdGlvbihhdHRyTmFtZSkge1xuICAgICAgICByZXR1cm4gYXR0ck5hbWUucmVwbGFjZSgvKD86Xlxcd3xbQS1aXXxcXGJcXHcpL2csIGZ1bmN0aW9uKG1hdGNoLCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBpbmRleCA9PT0gMCA/IG1hdGNoLnRvVXBwZXJDYXNlKCkgOiAnICcgKyBtYXRjaC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9KS5yZXBsYWNlKC9fL2csICcgJyk7XG4gICAgICB9LFxuICBcbiAgICAgIC8vIExvb2tzIGZvciBhIGxhYmVsIGNvbmZpZ3VyZWQgb24gdGhlIG1vZGVsIGFuZCByZXR1cm5zIGl0XG4gICAgICAvL1xuICAgICAgLy8gICAgICB2YXIgTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgLy8gICAgICAgIHZhbGlkYXRpb246IHtcbiAgICAgIC8vICAgICAgICAgIHNvbWVBdHRyaWJ1dGU6IHtcbiAgICAgIC8vICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgIC8vICAgICAgICAgIH1cbiAgICAgIC8vICAgICAgICB9LFxuICAgICAgLy9cbiAgICAgIC8vICAgICAgICBsYWJlbHM6IHtcbiAgICAgIC8vICAgICAgICAgIHNvbWVBdHRyaWJ1dGU6ICdDdXN0b20gbGFiZWwnXG4gICAgICAvLyAgICAgICAgfVxuICAgICAgLy8gICAgICB9KTtcbiAgICAgIGxhYmVsOiBmdW5jdGlvbihhdHRyTmFtZSwgbW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIChtb2RlbC5sYWJlbHMgJiYgbW9kZWwubGFiZWxzW2F0dHJOYW1lXSkgfHwgZGVmYXVsdExhYmVsRm9ybWF0dGVycy5zZW50ZW5jZUNhc2UoYXR0ck5hbWUsIG1vZGVsKTtcbiAgICAgIH1cbiAgICB9O1xuICBcbiAgXG4gICAgLy8gQnVpbHQgaW4gdmFsaWRhdG9yc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgdmFyIGRlZmF1bHRWYWxpZGF0b3JzID0gVmFsaWRhdGlvbi52YWxpZGF0b3JzID0gKGZ1bmN0aW9uKCl7XG4gICAgICAvLyBVc2UgbmF0aXZlIHRyaW0gd2hlbiBkZWZpbmVkXG4gICAgICB2YXIgdHJpbSA9IFN0cmluZy5wcm90b3R5cGUudHJpbSA/XG4gICAgICAgIGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgICAgICByZXR1cm4gdGV4dCA9PT0gbnVsbCA/ICcnIDogU3RyaW5nLnByb3RvdHlwZS50cmltLmNhbGwodGV4dCk7XG4gICAgICAgIH0gOlxuICAgICAgICBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgICAgdmFyIHRyaW1MZWZ0ID0gL15cXHMrLyxcbiAgICAgICAgICAgICAgdHJpbVJpZ2h0ID0gL1xccyskLztcbiAgXG4gICAgICAgICAgcmV0dXJuIHRleHQgPT09IG51bGwgPyAnJyA6IHRleHQudG9TdHJpbmcoKS5yZXBsYWNlKHRyaW1MZWZ0LCAnJykucmVwbGFjZSh0cmltUmlnaHQsICcnKTtcbiAgICAgICAgfTtcbiAgXG4gICAgICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IGEgdmFsdWUgaXMgYSBudW1iZXJcbiAgICAgIHZhciBpc051bWJlciA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgcmV0dXJuIF8uaXNOdW1iZXIodmFsdWUpIHx8IChfLmlzU3RyaW5nKHZhbHVlKSAmJiB2YWx1ZS5tYXRjaChkZWZhdWx0UGF0dGVybnMubnVtYmVyKSk7XG4gICAgICB9O1xuICBcbiAgICAgIC8vIERldGVybWluZXMgd2hldGhlciBvciBub3QgYSB2YWx1ZSBpcyBlbXB0eVxuICAgICAgdmFyIGhhc1ZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICEoXy5pc051bGwodmFsdWUpIHx8IF8uaXNVbmRlZmluZWQodmFsdWUpIHx8IChfLmlzU3RyaW5nKHZhbHVlKSAmJiB0cmltKHZhbHVlKSA9PT0gJycpIHx8IChfLmlzQXJyYXkodmFsdWUpICYmIF8uaXNFbXB0eSh2YWx1ZSkpKTtcbiAgICAgIH07XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gRnVuY3Rpb24gdmFsaWRhdG9yXG4gICAgICAgIC8vIExldHMgeW91IGltcGxlbWVudCBhIGN1c3RvbSBmdW5jdGlvbiB1c2VkIGZvciB2YWxpZGF0aW9uXG4gICAgICAgIGZuOiBmdW5jdGlvbih2YWx1ZSwgYXR0ciwgZm4sIG1vZGVsLCBjb21wdXRlZCkge1xuICAgICAgICAgIGlmKF8uaXNTdHJpbmcoZm4pKXtcbiAgICAgICAgICAgIGZuID0gbW9kZWxbZm5dO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZm4uY2FsbChtb2RlbCwgdmFsdWUsIGF0dHIsIGNvbXB1dGVkKTtcbiAgICAgICAgfSxcbiAgXG4gICAgICAgIC8vIFJlcXVpcmVkIHZhbGlkYXRvclxuICAgICAgICAvLyBWYWxpZGF0ZXMgaWYgdGhlIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBvciBub3RcbiAgICAgICAgLy8gVGhpcyBjYW4gYmUgc3BlY2lmaWVkIGFzIGVpdGhlciBhIGJvb2xlYW4gdmFsdWUgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBib29sZWFuIHZhbHVlXG4gICAgICAgIHJlcXVpcmVkOiBmdW5jdGlvbih2YWx1ZSwgYXR0ciwgcmVxdWlyZWQsIG1vZGVsLCBjb21wdXRlZCkge1xuICAgICAgICAgIHZhciBpc1JlcXVpcmVkID0gXy5pc0Z1bmN0aW9uKHJlcXVpcmVkKSA/IHJlcXVpcmVkLmNhbGwobW9kZWwsIHZhbHVlLCBhdHRyLCBjb21wdXRlZCkgOiByZXF1aXJlZDtcbiAgICAgICAgICBpZighaXNSZXF1aXJlZCAmJiAhaGFzVmFsdWUodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG92ZXJyaWRlcyBhbGwgb3RoZXIgdmFsaWRhdG9yc1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNSZXF1aXJlZCAmJiAhaGFzVmFsdWUodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQoZGVmYXVsdE1lc3NhZ2VzLnJlcXVpcmVkLCB0aGlzLmZvcm1hdExhYmVsKGF0dHIsIG1vZGVsKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICBcbiAgICAgICAgLy8gQWNjZXB0YW5jZSB2YWxpZGF0b3JcbiAgICAgICAgLy8gVmFsaWRhdGVzIHRoYXQgc29tZXRoaW5nIGhhcyB0byBiZSBhY2NlcHRlZCwgZS5nLiB0ZXJtcyBvZiB1c2VcbiAgICAgICAgLy8gYHRydWVgIG9yICd0cnVlJyBhcmUgdmFsaWRcbiAgICAgICAgYWNjZXB0YW5jZTogZnVuY3Rpb24odmFsdWUsIGF0dHIsIGFjY2VwdCwgbW9kZWwpIHtcbiAgICAgICAgICBpZih2YWx1ZSAhPT0gJ3RydWUnICYmICghXy5pc0Jvb2xlYW4odmFsdWUpIHx8IHZhbHVlID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdChkZWZhdWx0TWVzc2FnZXMuYWNjZXB0YW5jZSwgdGhpcy5mb3JtYXRMYWJlbChhdHRyLCBtb2RlbCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgXG4gICAgICAgIC8vIE1pbiB2YWxpZGF0b3JcbiAgICAgICAgLy8gVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGhhcyB0byBiZSBhIG51bWJlciBhbmQgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuXG4gICAgICAgIC8vIHRoZSBtaW4gdmFsdWUgc3BlY2lmaWVkXG4gICAgICAgIG1pbjogZnVuY3Rpb24odmFsdWUsIGF0dHIsIG1pblZhbHVlLCBtb2RlbCkge1xuICAgICAgICAgIGlmICghaXNOdW1iZXIodmFsdWUpIHx8IHZhbHVlIDwgbWluVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdChkZWZhdWx0TWVzc2FnZXMubWluLCB0aGlzLmZvcm1hdExhYmVsKGF0dHIsIG1vZGVsKSwgbWluVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgXG4gICAgICAgIC8vIE1heCB2YWxpZGF0b3JcbiAgICAgICAgLy8gVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGhhcyB0byBiZSBhIG51bWJlciBhbmQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuXG4gICAgICAgIC8vIHRoZSBtYXggdmFsdWUgc3BlY2lmaWVkXG4gICAgICAgIG1heDogZnVuY3Rpb24odmFsdWUsIGF0dHIsIG1heFZhbHVlLCBtb2RlbCkge1xuICAgICAgICAgIGlmICghaXNOdW1iZXIodmFsdWUpIHx8IHZhbHVlID4gbWF4VmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdChkZWZhdWx0TWVzc2FnZXMubWF4LCB0aGlzLmZvcm1hdExhYmVsKGF0dHIsIG1vZGVsKSwgbWF4VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgXG4gICAgICAgIC8vIFJhbmdlIHZhbGlkYXRvclxuICAgICAgICAvLyBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaGFzIHRvIGJlIGEgbnVtYmVyIGFuZCBlcXVhbCB0byBvciBiZXR3ZWVuXG4gICAgICAgIC8vIHRoZSB0d28gbnVtYmVycyBzcGVjaWZpZWRcbiAgICAgICAgcmFuZ2U6IGZ1bmN0aW9uKHZhbHVlLCBhdHRyLCByYW5nZSwgbW9kZWwpIHtcbiAgICAgICAgICBpZighaXNOdW1iZXIodmFsdWUpIHx8IHZhbHVlIDwgcmFuZ2VbMF0gfHwgdmFsdWUgPiByYW5nZVsxXSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0KGRlZmF1bHRNZXNzYWdlcy5yYW5nZSwgdGhpcy5mb3JtYXRMYWJlbChhdHRyLCBtb2RlbCksIHJhbmdlWzBdLCByYW5nZVsxXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICBcbiAgICAgICAgLy8gTGVuZ3RoIHZhbGlkYXRvclxuICAgICAgICAvLyBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaGFzIHRvIGJlIGEgc3RyaW5nIHdpdGggbGVuZ3RoIGVxdWFsIHRvXG4gICAgICAgIC8vIHRoZSBsZW5ndGggdmFsdWUgc3BlY2lmaWVkXG4gICAgICAgIGxlbmd0aDogZnVuY3Rpb24odmFsdWUsIGF0dHIsIGxlbmd0aCwgbW9kZWwpIHtcbiAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQoZGVmYXVsdE1lc3NhZ2VzLmxlbmd0aCwgdGhpcy5mb3JtYXRMYWJlbChhdHRyLCBtb2RlbCksIGxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICBcbiAgICAgICAgLy8gTWluIGxlbmd0aCB2YWxpZGF0b3JcbiAgICAgICAgLy8gVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGhhcyB0byBiZSBhIHN0cmluZyB3aXRoIGxlbmd0aCBlcXVhbCB0byBvciBncmVhdGVyIHRoYW5cbiAgICAgICAgLy8gdGhlIG1pbiBsZW5ndGggdmFsdWUgc3BlY2lmaWVkXG4gICAgICAgIG1pbkxlbmd0aDogZnVuY3Rpb24odmFsdWUsIGF0dHIsIG1pbkxlbmd0aCwgbW9kZWwpIHtcbiAgICAgICAgICBpZiAoIV8uaXNTdHJpbmcodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA8IG1pbkxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0KGRlZmF1bHRNZXNzYWdlcy5taW5MZW5ndGgsIHRoaXMuZm9ybWF0TGFiZWwoYXR0ciwgbW9kZWwpLCBtaW5MZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgXG4gICAgICAgIC8vIE1heCBsZW5ndGggdmFsaWRhdG9yXG4gICAgICAgIC8vIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBoYXMgdG8gYmUgYSBzdHJpbmcgd2l0aCBsZW5ndGggZXF1YWwgdG8gb3IgbGVzcyB0aGFuXG4gICAgICAgIC8vIHRoZSBtYXggbGVuZ3RoIHZhbHVlIHNwZWNpZmllZFxuICAgICAgICBtYXhMZW5ndGg6IGZ1bmN0aW9uKHZhbHVlLCBhdHRyLCBtYXhMZW5ndGgsIG1vZGVsKSB7XG4gICAgICAgICAgaWYgKCFfLmlzU3RyaW5nKHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPiBtYXhMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdChkZWZhdWx0TWVzc2FnZXMubWF4TGVuZ3RoLCB0aGlzLmZvcm1hdExhYmVsKGF0dHIsIG1vZGVsKSwgbWF4TGVuZ3RoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gIFxuICAgICAgICAvLyBSYW5nZSBsZW5ndGggdmFsaWRhdG9yXG4gICAgICAgIC8vIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBoYXMgdG8gYmUgYSBzdHJpbmcgYW5kIGVxdWFsIHRvIG9yIGJldHdlZW5cbiAgICAgICAgLy8gdGhlIHR3byBudW1iZXJzIHNwZWNpZmllZFxuICAgICAgICByYW5nZUxlbmd0aDogZnVuY3Rpb24odmFsdWUsIGF0dHIsIHJhbmdlLCBtb2RlbCkge1xuICAgICAgICAgIGlmICghXy5pc1N0cmluZyh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoIDwgcmFuZ2VbMF0gfHwgdmFsdWUubGVuZ3RoID4gcmFuZ2VbMV0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdChkZWZhdWx0TWVzc2FnZXMucmFuZ2VMZW5ndGgsIHRoaXMuZm9ybWF0TGFiZWwoYXR0ciwgbW9kZWwpLCByYW5nZVswXSwgcmFuZ2VbMV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgXG4gICAgICAgIC8vIE9uZSBvZiB2YWxpZGF0b3JcbiAgICAgICAgLy8gVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGhhcyB0byBiZSBlcXVhbCB0byBvbmUgb2YgdGhlIGVsZW1lbnRzIGluXG4gICAgICAgIC8vIHRoZSBzcGVjaWZpZWQgYXJyYXkuIENhc2Ugc2Vuc2l0aXZlIG1hdGNoaW5nXG4gICAgICAgIG9uZU9mOiBmdW5jdGlvbih2YWx1ZSwgYXR0ciwgdmFsdWVzLCBtb2RlbCkge1xuICAgICAgICAgIGlmKCFfLmluY2x1ZGUodmFsdWVzLCB2YWx1ZSkpe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0KGRlZmF1bHRNZXNzYWdlcy5vbmVPZiwgdGhpcy5mb3JtYXRMYWJlbChhdHRyLCBtb2RlbCksIHZhbHVlcy5qb2luKCcsICcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gIFxuICAgICAgICAvLyBFcXVhbCB0byB2YWxpZGF0b3JcbiAgICAgICAgLy8gVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGhhcyB0byBiZSBlcXVhbCB0byB0aGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgICAgICAvLyB3aXRoIHRoZSBuYW1lIHNwZWNpZmllZFxuICAgICAgICBlcXVhbFRvOiBmdW5jdGlvbih2YWx1ZSwgYXR0ciwgZXF1YWxUbywgbW9kZWwsIGNvbXB1dGVkKSB7XG4gICAgICAgICAgaWYodmFsdWUgIT09IGNvbXB1dGVkW2VxdWFsVG9dKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQoZGVmYXVsdE1lc3NhZ2VzLmVxdWFsVG8sIHRoaXMuZm9ybWF0TGFiZWwoYXR0ciwgbW9kZWwpLCB0aGlzLmZvcm1hdExhYmVsKGVxdWFsVG8sIG1vZGVsKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICBcbiAgICAgICAgLy8gUGF0dGVybiB2YWxpZGF0b3JcbiAgICAgICAgLy8gVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGhhcyB0byBtYXRjaCB0aGUgcGF0dGVybiBzcGVjaWZpZWQuXG4gICAgICAgIC8vIENhbiBiZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBvciB0aGUgbmFtZSBvZiBvbmUgb2YgdGhlIGJ1aWx0IGluIHBhdHRlcm5zXG4gICAgICAgIHBhdHRlcm46IGZ1bmN0aW9uKHZhbHVlLCBhdHRyLCBwYXR0ZXJuLCBtb2RlbCkge1xuICAgICAgICAgIGlmICghaGFzVmFsdWUodmFsdWUpIHx8ICF2YWx1ZS50b1N0cmluZygpLm1hdGNoKGRlZmF1bHRQYXR0ZXJuc1twYXR0ZXJuXSB8fCBwYXR0ZXJuKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0KGRlZmF1bHRNZXNzYWdlc1twYXR0ZXJuXSB8fCBkZWZhdWx0TWVzc2FnZXMuaW5saW5lUGF0dGVybiwgdGhpcy5mb3JtYXRMYWJlbChhdHRyLCBtb2RlbCksIHBhdHRlcm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KCkpO1xuICBcbiAgICAvLyBTZXQgdGhlIGNvcnJlY3QgY29udGV4dCBmb3IgYWxsIHZhbGlkYXRvcnNcbiAgICAvLyB3aGVuIHVzZWQgZnJvbSB3aXRoaW4gYSBtZXRob2QgdmFsaWRhdG9yXG4gICAgXy5lYWNoKGRlZmF1bHRWYWxpZGF0b3JzLCBmdW5jdGlvbih2YWxpZGF0b3IsIGtleSl7XG4gICAgICBkZWZhdWx0VmFsaWRhdG9yc1trZXldID0gXy5iaW5kKGRlZmF1bHRWYWxpZGF0b3JzW2tleV0sIF8uZXh0ZW5kKHt9LCBmb3JtYXRGdW5jdGlvbnMsIGRlZmF1bHRWYWxpZGF0b3JzKSk7XG4gICAgfSk7XG4gIFxuICAgIHJldHVybiBWYWxpZGF0aW9uO1xuICB9KF8pKTtcbiAgcmV0dXJuIEJhY2tib25lLlZhbGlkYXRpb247XG59KSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFja2JvbmUtdmFsaWRhdGlvbi9kaXN0L2JhY2tib25lLXZhbGlkYXRpb24tYW1kLmpzXG4gKiogbW9kdWxlIGlkID0gMTA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDEgMlxuICoqLyJdLCJzb3VyY2VSb290IjoiIiwiZmlsZSI6IjEwOC5qcyJ9");

/***/ }
/******/ ])