var POS=function(a){return a.module("SettingsApp",function(a,b){a.startWithParent=!1,a.onStart=function(){b.debug&&console.log("POS Settings Module started");var c=b.getCurrentRoute()||"general";new a.Controller({tab:c})}}),a}(POS||{}),POS=function(a,b,c,d,e){return a.SettingsApp.Controller=c.Controller.extend({initialize:function(d){this.settingsRegion=new c.Region({el:"#wc-pos-settings"});var e=b.Model.extend({url:ajaxurl,sync:this._sync});this.settingsCollection=new b.Collection(a.bootstrap,{model:e}),this._showTabs({tab:d.tab}),this._showSettings({tab:d.tab})},_showTabs:function(b){var c=new a.SettingsApp.Views.Tabs(b);this.listenTo(c,"settings:tab:clicked",function(b){a.navigate(b),this._showSettings({tab:b})},this)},_showSettings:function(b){e.defaults(b,{col:this.settingsCollection});var c=new a.SettingsApp.Views.Settings(b);this.listenTo(c,"settings:form:submit",function(a){this._saveSettings(a)}),this.settingsRegion.show(c)},_saveSettings:function(a){a.save([],{emulateHTTP:!0})},_sync:function(a,c,d){return d.url=c.url+"?action=wc_pos_save_admin_settings&security="+c.get("security"),c.unset("security"),b.sync(a,c,d)}}),a}(POS||{},Backbone,Marionette,jQuery,_),POS=function(a,b,c,d,e){return a.SettingsApp.Views={},a.SettingsApp.Views.Tabs=c.ItemView.extend({el:"#wc-pos-settings-tabs",initialize:function(a){this.$('a[data-tab="'+a.tab+'"]').addClass("nav-tab-active")},events:{"click a":"onTabClicked"},onTabClicked:function(a){a.preventDefault();var b=d(a.target);b.hasClass("nav-tab-active")||(this.trigger("settings:tab:clicked",b.data("tab")),b.addClass("nav-tab-active").siblings("a.nav-tab-active").removeClass("nav-tab-active"))}}),a.SettingsApp.Views.Settings=c.ItemView.extend({tagName:"form",initialize:function(a){this.settingsCollection=a.col||{},this.template=e.template(d("#tmpl-wc-pos-settings-"+a.tab).html())},ui:{submit:'input[type="submit"]',id:'input[name="id"]'},events:{"click @ui.submit":"onSubmit"},behaviors:{Select2:{},Tooltip:{},Sortable:{}},onBeforeShow:function(){var a=this.ui.id.val();this.model=this.settingsCollection.get(a),e.isUndefined(this.model)||b.Syphon.deserialize(this,this.model.toJSON()),this.listenTo(this.model,"request change:response",this.saving)},onBeforeDestroy:function(){this.storeState()},onSubmit:function(a){a.preventDefault(),this.trigger("settings:form:submit",this.storeState())},storeState:function(){var a=b.Syphon.serialize(this);return this.settingsCollection.add(a,{merge:!0})},saving:function(a){if(e(a.changed).isEmpty())this.ui.submit.prop("disabled",!0).next("p.response").html('<i class="spinner"></i>');else{var b=this.model.get("response"),c="success"==b.result?"yes":"no";this.ui.submit.prop("disabled",!1).next("p.response").html('<i class="dashicons dashicons-'+c+'"></i>'+b.notice)}this.model.unset("response",{silent:!0})}}),a}(POS||{},Backbone,Marionette,jQuery,_);
//# sourceMappingURL=maps/settings_app.map