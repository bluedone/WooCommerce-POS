$zindex-popover                      : 1060 !default;

$popover-bg                          : #fff !default;
$popover-max-width                   : 276px !default;
$popover-border-color                : rgba(0,0,0,.2) !default;
$popover-border-radius               : $border-radius-base;
$popover-fallback-border-color       : #ccc !default;

$popover-title-bg                    : darken($popover-bg, 3%) !default;

$popover-arrow-width                 : 10px !default;
$popover-arrow-color                 : $popover-bg !default;

$popover-arrow-outer-width           : ($popover-arrow-width + 1) !default;
$popover-arrow-outer-color           : fade-in($popover-border-color, 0.05) !default;
$popover-arrow-outer-fallback-color  : darken($popover-fallback-border-color, 20%) !default;

/**
 * @name Popover
 *
 * @markup
<div class="popover popover-right">
  <div class="popover-arrow"></div>
  <div class="popover-title">Popover</div>
  <div class="popover-content">Sed posuere consectetur est at lobortis. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum.</div>
</div>
 */

popover {
  @at-root {

    .#{current-module()} {
      position: absolute;
      top: 0;
      left: 0;
      z-index: $zindex-popover;
      display: block;
      max-width: $popover-max-width;
      padding: 1px;
      // Our parent element can be arbitrary since tooltips are by default inserted as a sibling of their target element.
      // So reset our font and text properties to avoid inheriting weird values.
      @include reset-text();
      font-size: $font-size-sm;
      background-color: $popover-bg;
      background-clip: padding-box;
      border: 1px solid $popover-border-color;
      @include border-radius($popover-border-radius);
      @include box-shadow(0 5px 10px rgba(0,0,0,.2));


      // Popover directions

      &.popover-top,
      &.bs-tether-element-attached-bottom {
        margin-top: -$popover-arrow-width;

        .popover-arrow {
          bottom: -$popover-arrow-outer-width;
          left: 50%;
          margin-left: -$popover-arrow-outer-width;
          border-top-color: $popover-arrow-outer-color;
          border-bottom-width: 0;
          &::after {
            bottom: 1px;
            margin-left: -$popover-arrow-width;
            content: "";
            border-top-color: $popover-arrow-color;
            border-bottom-width: 0;
          }
        }
      }

      &.popover-right,
      &.bs-tether-element-attached-left {
        margin-left: $popover-arrow-width;

        .popover-arrow {
          top: 50%;
          left: -$popover-arrow-outer-width;
          margin-top: -$popover-arrow-outer-width;
          border-right-color: $popover-arrow-outer-color;
          border-left-width: 0;
          &::after {
            bottom: -$popover-arrow-width;
            left: 1px;
            content: "";
            border-right-color: $popover-arrow-color;
            border-left-width: 0;
          }
        }
      }

      &.popover-bottom,
      &.bs-tether-element-attached-top {
        margin-top: $popover-arrow-width;

        .popover-arrow {
          top: -$popover-arrow-outer-width;
          left: 50%;
          margin-left: -$popover-arrow-outer-width;
          border-top-width: 0;
          border-bottom-color: $popover-arrow-outer-color;
          &::after {
            top: 1px;
            margin-left: -$popover-arrow-width;
            content: "";
            border-top-width: 0;
            border-bottom-color: $popover-arrow-color;
          }
        }
      }

      &.popover-left,
      &.bs-tether-element-attached-right {
        margin-left: -$popover-arrow-width;

        .popover-arrow {
          top: 50%;
          right: -$popover-arrow-outer-width;
          margin-top: -$popover-arrow-outer-width;
          border-right-width: 0;
          border-left-color: $popover-arrow-outer-color;
          &::after {
            right: 1px;
            bottom: -$popover-arrow-width;
            content: "";
            border-right-width: 0;
            border-left-color: $popover-arrow-color;
          }
        }
      }
    }


    // Offset the popover to account for the popover arrow
    .#{current-module()}-title {
      padding: 8px 14px;
      margin: 0; // reset heading margin
      font-size: $font-size-base;
      background-color: $popover-title-bg;
      border-bottom: 1px solid darken($popover-title-bg, 5%);
      @include border-radius(($popover-border-radius - 1) ($popover-border-radius - 1) 0 0);
    }

    .#{current-module()}-content {
      padding: 9px 14px;
    }

    // Arrows
    //
    // .popover-arrow is outer, .popover-arrow::after is inner

    .#{current-module()}-arrow {
      &,
      &::after {
        position: absolute;
        display: block;
        width: 0;
        height: 0;
        border-color: transparent;
        border-style: solid;
      }
    }
    .#{current-module()}-arrow {
      border-width: $popover-arrow-outer-width;
    }
    .#{current-module()}-arrow::after {
      content: "";
      border-width: $popover-arrow-width;
    }


  }
}

//.popover-dark-bg {
//  background-color: $numpad-bg;
//  &.top > .arrow {
//    border-top-color: $numpad-bg;
//    &:after {
//      border-top-color: $numpad-bg;
//    }
//  }
//  &.right > .arrow {
//    border-right-color: $numpad-bg;
//    &:after {
//      border-right-color: $numpad-bg;
//    }
//  }
//  &.bottom > .arrow {
//    border-bottom-color: $numpad-bg;
//    &:after {
//      border-bottom-color: $numpad-bg;
//    }
//  }
//
//  &.left > .arrow {
//    border-left-color: $numpad-bg;
//    &:after {
//      border-left-color: $numpad-bg;
//    }
//  }
//}